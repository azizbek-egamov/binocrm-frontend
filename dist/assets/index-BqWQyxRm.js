(function () { const e = document.createElement("link").relList; if (e && e.supports && e.supports("modulepreload")) return; for (const r of document.querySelectorAll('link[rel="modulepreload"]')) s(r); new MutationObserver(r => { for (const o of r) if (o.type === "childList") for (const u of o.addedNodes) u.tagName === "LINK" && u.rel === "modulepreload" && s(u) }).observe(document, { childList: !0, subtree: !0 }); function t(r) { const o = {}; return r.integrity && (o.integrity = r.integrity), r.referrerPolicy && (o.referrerPolicy = r.referrerPolicy), r.crossOrigin === "use-credentials" ? o.credentials = "include" : r.crossOrigin === "anonymous" ? o.credentials = "omit" : o.credentials = "same-origin", o } function s(r) { if (r.ep) return; r.ep = !0; const o = t(r); fetch(r.href, o) } })(); function ev(l) { return l && l.__esModule && Object.prototype.hasOwnProperty.call(l, "default") ? l.default : l } var tf = { exports: {} }, Pl = {}; var jx; function ij() { if (jx) return Pl; jx = 1; var l = Symbol.for("react.transitional.element"), e = Symbol.for("react.fragment"); function t(s, r, o) { var u = null; if (o !== void 0 && (u = "" + o), r.key !== void 0 && (u = "" + r.key), "key" in r) { o = {}; for (var d in r) d !== "key" && (o[d] = r[d]) } else o = r; return r = o.ref, { $$typeof: l, type: s, key: u, ref: r !== void 0 ? r : null, props: o } } return Pl.Fragment = e, Pl.jsx = t, Pl.jsxs = t, Pl } var wx; function sj() { return wx || (wx = 1, tf.exports = ij()), tf.exports } var i = sj(), sf = { exports: {} }, qe = {}; var kx; function aj() { if (kx) return qe; kx = 1; var l = Symbol.for("react.transitional.element"), e = Symbol.for("react.portal"), t = Symbol.for("react.fragment"), s = Symbol.for("react.strict_mode"), r = Symbol.for("react.profiler"), o = Symbol.for("react.consumer"), u = Symbol.for("react.context"), d = Symbol.for("react.forward_ref"), f = Symbol.for("react.suspense"), m = Symbol.for("react.memo"), p = Symbol.for("react.lazy"), g = Symbol.for("react.activity"), y = Symbol.iterator; function b(q) { return q === null || typeof q != "object" ? null : (q = y && q[y] || q["@@iterator"], typeof q == "function" ? q : null) } var v = { isMounted: function () { return !1 }, enqueueForceUpdate: function () { }, enqueueReplaceState: function () { }, enqueueSetState: function () { } }, k = Object.assign, j = {}; function S(q, Q, ce) { this.props = q, this.context = Q, this.refs = j, this.updater = ce || v } S.prototype.isReactComponent = {}, S.prototype.setState = function (q, Q) { if (typeof q != "object" && typeof q != "function" && q != null) throw Error("takes an object of state variables to update or a function which returns an object of state variables."); this.updater.enqueueSetState(this, q, Q, "setState") }, S.prototype.forceUpdate = function (q) { this.updater.enqueueForceUpdate(this, q, "forceUpdate") }; function w() { } w.prototype = S.prototype; function N(q, Q, ce) { this.props = q, this.context = Q, this.refs = j, this.updater = ce || v } var T = N.prototype = new w; T.constructor = N, k(T, S.prototype), T.isPureReactComponent = !0; var R = Array.isArray; function P() { } var O = { H: null, A: null, T: null, S: null }, z = Object.prototype.hasOwnProperty; function F(q, Q, ce) { var W = ce.ref; return { $$typeof: l, type: q, key: Q, ref: W !== void 0 ? W : null, props: ce } } function B(q, Q) { return F(q.type, Q, q.props) } function A(q) { return typeof q == "object" && q !== null && q.$$typeof === l } function L(q) { var Q = { "=": "=0", ":": "=2" }; return "$" + q.replace(/[=:]/g, function (ce) { return Q[ce] }) } var M = /\/+/g; function X(q, Q) { return typeof q == "object" && q !== null && q.key != null ? L("" + q.key) : Q.toString(36) } function U(q) { switch (q.status) { case "fulfilled": return q.value; case "rejected": throw q.reason; default: switch (typeof q.status == "string" ? q.then(P, P) : (q.status = "pending", q.then(function (Q) { q.status === "pending" && (q.status = "fulfilled", q.value = Q) }, function (Q) { q.status === "pending" && (q.status = "rejected", q.reason = Q) })), q.status) { case "fulfilled": return q.value; case "rejected": throw q.reason } }throw q } function I(q, Q, ce, W, ae) { var J = typeof q; (J === "undefined" || J === "boolean") && (q = null); var G = !1; if (q === null) G = !0; else switch (J) { case "bigint": case "string": case "number": G = !0; break; case "object": switch (q.$$typeof) { case l: case e: G = !0; break; case p: return G = q._init, I(G(q._payload), Q, ce, W, ae) } }if (G) return ae = ae(q), G = W === "" ? "." + X(q, 0) : W, R(ae) ? (ce = "", G != null && (ce = G.replace(M, "$&/") + "/"), I(ae, Q, ce, "", function (Se) { return Se })) : ae != null && (A(ae) && (ae = B(ae, ce + (ae.key == null || q && q.key === ae.key ? "" : ("" + ae.key).replace(M, "$&/") + "/") + G)), Q.push(ae)), 1; G = 0; var ge = W === "" ? "." : W + ":"; if (R(q)) for (var de = 0; de < q.length; de++)W = q[de], J = ge + X(W, de), G += I(W, Q, ce, J, ae); else if (de = b(q), typeof de == "function") for (q = de.call(q), de = 0; !(W = q.next()).done;)W = W.value, J = ge + X(W, de++), G += I(W, Q, ce, J, ae); else if (J === "object") { if (typeof q.then == "function") return I(U(q), Q, ce, W, ae); throw Q = String(q), Error("Objects are not valid as a React child (found: " + (Q === "[object Object]" ? "object with keys {" + Object.keys(q).join(", ") + "}" : Q) + "). If you meant to render a collection of children, use an array instead.") } return G } function H(q, Q, ce) { if (q == null) return q; var W = [], ae = 0; return I(q, W, "", "", function (J) { return Q.call(ce, J, ae++) }), W } function Y(q) { if (q._status === -1) { var Q = q._result; Q = Q(), Q.then(function (ce) { (q._status === 0 || q._status === -1) && (q._status = 1, q._result = ce) }, function (ce) { (q._status === 0 || q._status === -1) && (q._status = 2, q._result = ce) }), q._status === -1 && (q._status = 0, q._result = Q) } if (q._status === 1) return q._result.default; throw q._result } var ee = typeof reportError == "function" ? reportError : function (q) { if (typeof window == "object" && typeof window.ErrorEvent == "function") { var Q = new window.ErrorEvent("error", { bubbles: !0, cancelable: !0, message: typeof q == "object" && q !== null && typeof q.message == "string" ? String(q.message) : String(q), error: q }); if (!window.dispatchEvent(Q)) return } else if (typeof process == "object" && typeof process.emit == "function") { process.emit("uncaughtException", q); return } console.error(q) }, fe = { map: H, forEach: function (q, Q, ce) { H(q, function () { Q.apply(this, arguments) }, ce) }, count: function (q) { var Q = 0; return H(q, function () { Q++ }), Q }, toArray: function (q) { return H(q, function (Q) { return Q }) || [] }, only: function (q) { if (!A(q)) throw Error("React.Children.only expected to receive a single React element child."); return q } }; return qe.Activity = g, qe.Children = fe, qe.Component = S, qe.Fragment = t, qe.Profiler = r, qe.PureComponent = N, qe.StrictMode = s, qe.Suspense = f, qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE = O, qe.__COMPILER_RUNTIME = { __proto__: null, c: function (q) { return O.H.useMemoCache(q) } }, qe.cache = function (q) { return function () { return q.apply(null, arguments) } }, qe.cacheSignal = function () { return null }, qe.cloneElement = function (q, Q, ce) { if (q == null) throw Error("The argument must be a React element, but you passed " + q + "."); var W = k({}, q.props), ae = q.key; if (Q != null) for (J in Q.key !== void 0 && (ae = "" + Q.key), Q) !z.call(Q, J) || J === "key" || J === "__self" || J === "__source" || J === "ref" && Q.ref === void 0 || (W[J] = Q[J]); var J = arguments.length - 2; if (J === 1) W.children = ce; else if (1 < J) { for (var G = Array(J), ge = 0; ge < J; ge++)G[ge] = arguments[ge + 2]; W.children = G } return F(q.type, ae, W) }, qe.createContext = function (q) { return q = { $$typeof: u, _currentValue: q, _currentValue2: q, _threadCount: 0, Provider: null, Consumer: null }, q.Provider = q, q.Consumer = { $$typeof: o, _context: q }, q }, qe.createElement = function (q, Q, ce) { var W, ae = {}, J = null; if (Q != null) for (W in Q.key !== void 0 && (J = "" + Q.key), Q) z.call(Q, W) && W !== "key" && W !== "__self" && W !== "__source" && (ae[W] = Q[W]); var G = arguments.length - 2; if (G === 1) ae.children = ce; else if (1 < G) { for (var ge = Array(G), de = 0; de < G; de++)ge[de] = arguments[de + 2]; ae.children = ge } if (q && q.defaultProps) for (W in G = q.defaultProps, G) ae[W] === void 0 && (ae[W] = G[W]); return F(q, J, ae) }, qe.createRef = function () { return { current: null } }, qe.forwardRef = function (q) { return { $$typeof: d, render: q } }, qe.isValidElement = A, qe.lazy = function (q) { return { $$typeof: p, _payload: { _status: -1, _result: q }, _init: Y } }, qe.memo = function (q, Q) { return { $$typeof: m, type: q, compare: Q === void 0 ? null : Q } }, qe.startTransition = function (q) { var Q = O.T, ce = {}; O.T = ce; try { var W = q(), ae = O.S; ae !== null && ae(ce, W), typeof W == "object" && W !== null && typeof W.then == "function" && W.then(P, ee) } catch (J) { ee(J) } finally { Q !== null && ce.types !== null && (Q.types = ce.types), O.T = Q } }, qe.unstable_useCacheRefresh = function () { return O.H.useCacheRefresh() }, qe.use = function (q) { return O.H.use(q) }, qe.useActionState = function (q, Q, ce) { return O.H.useActionState(q, Q, ce) }, qe.useCallback = function (q, Q) { return O.H.useCallback(q, Q) }, qe.useContext = function (q) { return O.H.useContext(q) }, qe.useDebugValue = function () { }, qe.useDeferredValue = function (q, Q) { return O.H.useDeferredValue(q, Q) }, qe.useEffect = function (q, Q) { return O.H.useEffect(q, Q) }, qe.useEffectEvent = function (q) { return O.H.useEffectEvent(q) }, qe.useId = function () { return O.H.useId() }, qe.useImperativeHandle = function (q, Q, ce) { return O.H.useImperativeHandle(q, Q, ce) }, qe.useInsertionEffect = function (q, Q) { return O.H.useInsertionEffect(q, Q) }, qe.useLayoutEffect = function (q, Q) { return O.H.useLayoutEffect(q, Q) }, qe.useMemo = function (q, Q) { return O.H.useMemo(q, Q) }, qe.useOptimistic = function (q, Q) { return O.H.useOptimistic(q, Q) }, qe.useReducer = function (q, Q, ce) { return O.H.useReducer(q, Q, ce) }, qe.useRef = function (q) { return O.H.useRef(q) }, qe.useState = function (q) { return O.H.useState(q) }, qe.useSyncExternalStore = function (q, Q, ce) { return O.H.useSyncExternalStore(q, Q, ce) }, qe.useTransition = function () { return O.H.useTransition() }, qe.version = "19.2.4", qe } var Sx; function am() { return Sx || (Sx = 1, sf.exports = aj()), sf.exports } var C = am(); const Me = ev(C); var af = { exports: {} }, Ol = {}, nf = { exports: {} }, rf = {}; var Nx; function nj() { return Nx || (Nx = 1, (function (l) { function e(I, H) { var Y = I.length; I.push(H); e: for (; 0 < Y;) { var ee = Y - 1 >>> 1, fe = I[ee]; if (0 < r(fe, H)) I[ee] = H, I[Y] = fe, Y = ee; else break e } } function t(I) { return I.length === 0 ? null : I[0] } function s(I) { if (I.length === 0) return null; var H = I[0], Y = I.pop(); if (Y !== H) { I[0] = Y; e: for (var ee = 0, fe = I.length, q = fe >>> 1; ee < q;) { var Q = 2 * (ee + 1) - 1, ce = I[Q], W = Q + 1, ae = I[W]; if (0 > r(ce, Y)) W < fe && 0 > r(ae, ce) ? (I[ee] = ae, I[W] = Y, ee = W) : (I[ee] = ce, I[Q] = Y, ee = Q); else if (W < fe && 0 > r(ae, Y)) I[ee] = ae, I[W] = Y, ee = W; else break e } } return H } function r(I, H) { var Y = I.sortIndex - H.sortIndex; return Y !== 0 ? Y : I.id - H.id } if (l.unstable_now = void 0, typeof performance == "object" && typeof performance.now == "function") { var o = performance; l.unstable_now = function () { return o.now() } } else { var u = Date, d = u.now(); l.unstable_now = function () { return u.now() - d } } var f = [], m = [], p = 1, g = null, y = 3, b = !1, v = !1, k = !1, j = !1, S = typeof setTimeout == "function" ? setTimeout : null, w = typeof clearTimeout == "function" ? clearTimeout : null, N = typeof setImmediate < "u" ? setImmediate : null; function T(I) { for (var H = t(m); H !== null;) { if (H.callback === null) s(m); else if (H.startTime <= I) s(m), H.sortIndex = H.expirationTime, e(f, H); else break; H = t(m) } } function R(I) { if (k = !1, T(I), !v) if (t(f) !== null) v = !0, P || (P = !0, L()); else { var H = t(m); H !== null && U(R, H.startTime - I) } } var P = !1, O = -1, z = 5, F = -1; function B() { return j ? !0 : !(l.unstable_now() - F < z) } function A() { if (j = !1, P) { var I = l.unstable_now(); F = I; var H = !0; try { e: { v = !1, k && (k = !1, w(O), O = -1), b = !0; var Y = y; try { t: { for (T(I), g = t(f); g !== null && !(g.expirationTime > I && B());) { var ee = g.callback; if (typeof ee == "function") { g.callback = null, y = g.priorityLevel; var fe = ee(g.expirationTime <= I); if (I = l.unstable_now(), typeof fe == "function") { g.callback = fe, T(I), H = !0; break t } g === t(f) && s(f), T(I) } else s(f); g = t(f) } if (g !== null) H = !0; else { var q = t(m); q !== null && U(R, q.startTime - I), H = !1 } } break e } finally { g = null, y = Y, b = !1 } H = void 0 } } finally { H ? L() : P = !1 } } } var L; if (typeof N == "function") L = function () { N(A) }; else if (typeof MessageChannel < "u") { var M = new MessageChannel, X = M.port2; M.port1.onmessage = A, L = function () { X.postMessage(null) } } else L = function () { S(A, 0) }; function U(I, H) { O = S(function () { I(l.unstable_now()) }, H) } l.unstable_IdlePriority = 5, l.unstable_ImmediatePriority = 1, l.unstable_LowPriority = 4, l.unstable_NormalPriority = 3, l.unstable_Profiling = null, l.unstable_UserBlockingPriority = 2, l.unstable_cancelCallback = function (I) { I.callback = null }, l.unstable_forceFrameRate = function (I) { 0 > I || 125 < I ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : z = 0 < I ? Math.floor(1e3 / I) : 5 }, l.unstable_getCurrentPriorityLevel = function () { return y }, l.unstable_next = function (I) { switch (y) { case 1: case 2: case 3: var H = 3; break; default: H = y }var Y = y; y = H; try { return I() } finally { y = Y } }, l.unstable_requestPaint = function () { j = !0 }, l.unstable_runWithPriority = function (I, H) { switch (I) { case 1: case 2: case 3: case 4: case 5: break; default: I = 3 }var Y = y; y = I; try { return H() } finally { y = Y } }, l.unstable_scheduleCallback = function (I, H, Y) { var ee = l.unstable_now(); switch (typeof Y == "object" && Y !== null ? (Y = Y.delay, Y = typeof Y == "number" && 0 < Y ? ee + Y : ee) : Y = ee, I) { case 1: var fe = -1; break; case 2: fe = 250; break; case 5: fe = 1073741823; break; case 4: fe = 1e4; break; default: fe = 5e3 }return fe = Y + fe, I = { id: p++, callback: H, priorityLevel: I, startTime: Y, expirationTime: fe, sortIndex: -1 }, Y > ee ? (I.sortIndex = Y, e(m, I), t(f) === null && I === t(m) && (k ? (w(O), O = -1) : k = !0, U(R, Y - ee))) : (I.sortIndex = fe, e(f, I), v || b || (v = !0, P || (P = !0, L()))), I }, l.unstable_shouldYield = B, l.unstable_wrapCallback = function (I) { var H = y; return function () { var Y = y; y = H; try { return I.apply(this, arguments) } finally { y = Y } } } })(rf)), rf } var Cx; function rj() { return Cx || (Cx = 1, nf.exports = nj()), nf.exports } var lf = { exports: {} }, di = {}; var Tx; function lj() { if (Tx) return di; Tx = 1; var l = am(); function e(f) { var m = "https://react.dev/errors/" + f; if (1 < arguments.length) { m += "?args[]=" + encodeURIComponent(arguments[1]); for (var p = 2; p < arguments.length; p++)m += "&args[]=" + encodeURIComponent(arguments[p]) } return "Minified React error #" + f + "; visit " + m + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings." } function t() { } var s = { d: { f: t, r: function () { throw Error(e(522)) }, D: t, C: t, L: t, m: t, X: t, S: t, M: t }, p: 0, findDOMNode: null }, r = Symbol.for("react.portal"); function o(f, m, p) { var g = 3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : null; return { $$typeof: r, key: g == null ? null : "" + g, children: f, containerInfo: m, implementation: p } } var u = l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE; function d(f, m) { if (f === "font") return ""; if (typeof m == "string") return m === "use-credentials" ? m : "" } return di.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE = s, di.createPortal = function (f, m) { var p = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : null; if (!m || m.nodeType !== 1 && m.nodeType !== 9 && m.nodeType !== 11) throw Error(e(299)); return o(f, m, null, p) }, di.flushSync = function (f) { var m = u.T, p = s.p; try { if (u.T = null, s.p = 2, f) return f() } finally { u.T = m, s.p = p, s.d.f() } }, di.preconnect = function (f, m) { typeof f == "string" && (m ? (m = m.crossOrigin, m = typeof m == "string" ? m === "use-credentials" ? m : "" : void 0) : m = null, s.d.C(f, m)) }, di.prefetchDNS = function (f) { typeof f == "string" && s.d.D(f) }, di.preinit = function (f, m) { if (typeof f == "string" && m && typeof m.as == "string") { var p = m.as, g = d(p, m.crossOrigin), y = typeof m.integrity == "string" ? m.integrity : void 0, b = typeof m.fetchPriority == "string" ? m.fetchPriority : void 0; p === "style" ? s.d.S(f, typeof m.precedence == "string" ? m.precedence : void 0, { crossOrigin: g, integrity: y, fetchPriority: b }) : p === "script" && s.d.X(f, { crossOrigin: g, integrity: y, fetchPriority: b, nonce: typeof m.nonce == "string" ? m.nonce : void 0 }) } }, di.preinitModule = function (f, m) { if (typeof f == "string") if (typeof m == "object" && m !== null) { if (m.as == null || m.as === "script") { var p = d(m.as, m.crossOrigin); s.d.M(f, { crossOrigin: p, integrity: typeof m.integrity == "string" ? m.integrity : void 0, nonce: typeof m.nonce == "string" ? m.nonce : void 0 }) } } else m == null && s.d.M(f) }, di.preload = function (f, m) { if (typeof f == "string" && typeof m == "object" && m !== null && typeof m.as == "string") { var p = m.as, g = d(p, m.crossOrigin); s.d.L(f, p, { crossOrigin: g, integrity: typeof m.integrity == "string" ? m.integrity : void 0, nonce: typeof m.nonce == "string" ? m.nonce : void 0, type: typeof m.type == "string" ? m.type : void 0, fetchPriority: typeof m.fetchPriority == "string" ? m.fetchPriority : void 0, referrerPolicy: typeof m.referrerPolicy == "string" ? m.referrerPolicy : void 0, imageSrcSet: typeof m.imageSrcSet == "string" ? m.imageSrcSet : void 0, imageSizes: typeof m.imageSizes == "string" ? m.imageSizes : void 0, media: typeof m.media == "string" ? m.media : void 0 }) } }, di.preloadModule = function (f, m) { if (typeof f == "string") if (m) { var p = d(m.as, m.crossOrigin); s.d.m(f, { as: typeof m.as == "string" && m.as !== "script" ? m.as : void 0, crossOrigin: p, integrity: typeof m.integrity == "string" ? m.integrity : void 0 }) } else s.d.m(f) }, di.requestFormReset = function (f) { s.d.r(f) }, di.unstable_batchedUpdates = function (f, m) { return f(m) }, di.useFormState = function (f, m, p) { return u.H.useFormState(f, m, p) }, di.useFormStatus = function () { return u.H.useHostTransitionStatus() }, di.version = "19.2.4", di } var Dx; function tv() { if (Dx) return lf.exports; Dx = 1; function l() { if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function")) try { __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l) } catch (e) { console.error(e) } } return l(), lf.exports = lj(), lf.exports } var Ax; function oj() {
    if (Ax) return Ol; Ax = 1; var l = rj(), e = am(), t = tv(); function s(a) { var n = "https://react.dev/errors/" + a; if (1 < arguments.length) { n += "?args[]=" + encodeURIComponent(arguments[1]); for (var c = 2; c < arguments.length; c++)n += "&args[]=" + encodeURIComponent(arguments[c]) } return "Minified React error #" + a + "; visit " + n + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings." } function r(a) { return !(!a || a.nodeType !== 1 && a.nodeType !== 9 && a.nodeType !== 11) } function o(a) { var n = a, c = a; if (a.alternate) for (; n.return;)n = n.return; else { a = n; do n = a, (n.flags & 4098) !== 0 && (c = n.return), a = n.return; while (a) } return n.tag === 3 ? c : null } function u(a) { if (a.tag === 13) { var n = a.memoizedState; if (n === null && (a = a.alternate, a !== null && (n = a.memoizedState)), n !== null) return n.dehydrated } return null } function d(a) { if (a.tag === 31) { var n = a.memoizedState; if (n === null && (a = a.alternate, a !== null && (n = a.memoizedState)), n !== null) return n.dehydrated } return null } function f(a) { if (o(a) !== a) throw Error(s(188)) } function m(a) { var n = a.alternate; if (!n) { if (n = o(a), n === null) throw Error(s(188)); return n !== a ? null : a } for (var c = a, h = n; ;) { var x = c.return; if (x === null) break; var _ = x.alternate; if (_ === null) { if (h = x.return, h !== null) { c = h; continue } break } if (x.child === _.child) { for (_ = x.child; _;) { if (_ === c) return f(x), a; if (_ === h) return f(x), n; _ = _.sibling } throw Error(s(188)) } if (c.return !== h.return) c = x, h = _; else { for (var D = !1, E = x.child; E;) { if (E === c) { D = !0, c = x, h = _; break } if (E === h) { D = !0, h = x, c = _; break } E = E.sibling } if (!D) { for (E = _.child; E;) { if (E === c) { D = !0, c = _, h = x; break } if (E === h) { D = !0, h = _, c = x; break } E = E.sibling } if (!D) throw Error(s(189)) } } if (c.alternate !== h) throw Error(s(190)) } if (c.tag !== 3) throw Error(s(188)); return c.stateNode.current === c ? a : n } function p(a) { var n = a.tag; if (n === 5 || n === 26 || n === 27 || n === 6) return a; for (a = a.child; a !== null;) { if (n = p(a), n !== null) return n; a = a.sibling } return null } var g = Object.assign, y = Symbol.for("react.element"), b = Symbol.for("react.transitional.element"), v = Symbol.for("react.portal"), k = Symbol.for("react.fragment"), j = Symbol.for("react.strict_mode"), S = Symbol.for("react.profiler"), w = Symbol.for("react.consumer"), N = Symbol.for("react.context"), T = Symbol.for("react.forward_ref"), R = Symbol.for("react.suspense"), P = Symbol.for("react.suspense_list"), O = Symbol.for("react.memo"), z = Symbol.for("react.lazy"), F = Symbol.for("react.activity"), B = Symbol.for("react.memo_cache_sentinel"), A = Symbol.iterator; function L(a) { return a === null || typeof a != "object" ? null : (a = A && a[A] || a["@@iterator"], typeof a == "function" ? a : null) } var M = Symbol.for("react.client.reference"); function X(a) { if (a == null) return null; if (typeof a == "function") return a.$$typeof === M ? null : a.displayName || a.name || null; if (typeof a == "string") return a; switch (a) { case k: return "Fragment"; case S: return "Profiler"; case j: return "StrictMode"; case R: return "Suspense"; case P: return "SuspenseList"; case F: return "Activity" }if (typeof a == "object") switch (a.$$typeof) { case v: return "Portal"; case N: return a.displayName || "Context"; case w: return (a._context.displayName || "Context") + ".Consumer"; case T: var n = a.render; return a = a.displayName, a || (a = n.displayName || n.name || "", a = a !== "" ? "ForwardRef(" + a + ")" : "ForwardRef"), a; case O: return n = a.displayName || null, n !== null ? n : X(a.type) || "Memo"; case z: n = a._payload, a = a._init; try { return X(a(n)) } catch { } }return null } var U = Array.isArray, I = e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, H = t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE, Y = { pending: !1, data: null, method: null, action: null }, ee = [], fe = -1; function q(a) { return { current: a } } function Q(a) { 0 > fe || (a.current = ee[fe], ee[fe] = null, fe--) } function ce(a, n) { fe++, ee[fe] = a.current, a.current = n } var W = q(null), ae = q(null), J = q(null), G = q(null); function ge(a, n) { switch (ce(J, n), ce(ae, a), ce(W, null), n.nodeType) { case 9: case 11: a = (a = n.documentElement) && (a = a.namespaceURI) ? Ub(a) : 0; break; default: if (a = n.tagName, n = n.namespaceURI) n = Ub(n), a = Vb(n, a); else switch (a) { case "svg": a = 1; break; case "math": a = 2; break; default: a = 0 } }Q(W), ce(W, a) } function de() { Q(W), Q(ae), Q(J) } function Se(a) { a.memoizedState !== null && ce(G, a); var n = W.current, c = Vb(n, a.type); n !== c && (ce(ae, a), ce(W, c)) } function Ee(a) { ae.current === a && (Q(W), Q(ae)), G.current === a && (Q(G), Tl._currentValue = Y) } var be, se; function Ne(a) {
        if (be === void 0) try { throw Error() } catch (c) {
            var n = c.stack.trim().match(/\n( *(at )?)/); be = n && n[1] || "", se = -1 < c.stack.indexOf(`
    at`) ? " (<anonymous>)" : -1 < c.stack.indexOf("@") ? "@unknown:0:0" : ""
        } return `
`+ be + a + se
    } var xe = !1; function K(a, n) {
        if (!a || xe) return ""; xe = !0; var c = Error.prepareStackTrace; Error.prepareStackTrace = void 0; try {
            var h = { DetermineComponentFrameRoot: function () { try { if (n) { var je = function () { throw Error() }; if (Object.defineProperty(je.prototype, "props", { set: function () { throw Error() } }), typeof Reflect == "object" && Reflect.construct) { try { Reflect.construct(je, []) } catch (me) { var he = me } Reflect.construct(a, [], je) } else { try { je.call() } catch (me) { he = me } a.call(je.prototype) } } else { try { throw Error() } catch (me) { he = me } (je = a()) && typeof je.catch == "function" && je.catch(function () { }) } } catch (me) { if (me && he && typeof me.stack == "string") return [me.stack, he.stack] } return [null, null] } }; h.DetermineComponentFrameRoot.displayName = "DetermineComponentFrameRoot"; var x = Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot, "name"); x && x.configurable && Object.defineProperty(h.DetermineComponentFrameRoot, "name", { value: "DetermineComponentFrameRoot" }); var _ = h.DetermineComponentFrameRoot(), D = _[0], E = _[1]; if (D && E) {
                var V = D.split(`
`), ue = E.split(`
`); for (x = h = 0; h < V.length && !V[h].includes("DetermineComponentFrameRoot");)h++; for (; x < ue.length && !ue[x].includes("DetermineComponentFrameRoot");)x++; if (h === V.length || x === ue.length) for (h = V.length - 1, x = ue.length - 1; 1 <= h && 0 <= x && V[h] !== ue[x];)x--; for (; 1 <= h && 0 <= x; h--, x--)if (V[h] !== ue[x]) {
                    if (h !== 1 || x !== 1) do if (h--, x--, 0 > x || V[h] !== ue[x]) {
                        var ye = `
`+ V[h].replace(" at new ", " at "); return a.displayName && ye.includes("<anonymous>") && (ye = ye.replace("<anonymous>", a.displayName)), ye
                    } while (1 <= h && 0 <= x); break
                }
            }
        } finally { xe = !1, Error.prepareStackTrace = c } return (c = a ? a.displayName || a.name : "") ? Ne(c) : ""
    } function ve(a, n) { switch (a.tag) { case 26: case 27: case 5: return Ne(a.type); case 16: return Ne("Lazy"); case 13: return a.child !== n && n !== null ? Ne("Suspense Fallback") : Ne("Suspense"); case 19: return Ne("SuspenseList"); case 0: case 15: return K(a.type, !1); case 11: return K(a.type.render, !1); case 1: return K(a.type, !0); case 31: return Ne("Activity"); default: return "" } } function Ae(a) {
        try { var n = "", c = null; do n += ve(a, c), c = a, a = a.return; while (a); return n } catch (h) {
            return `
Error generating stack: `+ h.message + `
`+ h.stack
        }
    } var ne = Object.prototype.hasOwnProperty, re = l.unstable_scheduleCallback, Ce = l.unstable_cancelCallback, Ue = l.unstable_shouldYield, wt = l.unstable_requestPaint, kt = l.unstable_now, Ki = l.unstable_getCurrentPriorityLevel, ti = l.unstable_ImmediatePriority, Bi = l.unstable_UserBlockingPriority, yt = l.unstable_NormalPriority, xi = l.unstable_LowPriority, us = l.unstable_IdlePriority, qr = l.log, Pn = l.unstable_setDisableYieldValue, ds = null, St = null; function Kt(a) { if (typeof qr == "function" && Pn(a), St && typeof St.setStrictMode == "function") try { St.setStrictMode(ds, a) } catch { } } var Nt = Math.clz32 ? Math.clz32 : jo, qu = Math.log, Yu = Math.LN2; function jo(a) { return a >>>= 0, a === 0 ? 32 : 31 - (qu(a) / Yu | 0) | 0 } var qa = 256, On = 262144, oa = 4194304; function ui(a) { var n = a & 42; if (n !== 0) return n; switch (a & -a) { case 1: return 1; case 2: return 2; case 4: return 4; case 8: return 8; case 16: return 16; case 32: return 32; case 64: return 64; case 128: return 128; case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: return a & 261888; case 262144: case 524288: case 1048576: case 2097152: return a & 3932160; case 4194304: case 8388608: case 16777216: case 33554432: return a & 62914560; case 67108864: return 67108864; case 134217728: return 134217728; case 268435456: return 268435456; case 536870912: return 536870912; case 1073741824: return 0; default: return a } } function En(a, n, c) { var h = a.pendingLanes; if (h === 0) return 0; var x = 0, _ = a.suspendedLanes, D = a.pingedLanes; a = a.warmLanes; var E = h & 134217727; return E !== 0 ? (h = E & ~_, h !== 0 ? x = ui(h) : (D &= E, D !== 0 ? x = ui(D) : c || (c = E & ~a, c !== 0 && (x = ui(c))))) : (E = h & ~_, E !== 0 ? x = ui(E) : D !== 0 ? x = ui(D) : c || (c = h & ~a, c !== 0 && (x = ui(c)))), x === 0 ? 0 : n !== 0 && n !== x && (n & _) === 0 && (_ = x & -x, c = n & -n, _ >= c || _ === 32 && (c & 4194048) !== 0) ? n : x } function Fe(a, n) { return (a.pendingLanes & ~(a.suspendedLanes & ~a.pingedLanes) & n) === 0 } function nt(a, n) { switch (a) { case 1: case 2: case 4: case 8: case 64: return n + 250; case 16: case 32: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: return n + 5e3; case 4194304: case 8388608: case 16777216: case 33554432: return -1; case 67108864: case 134217728: case 268435456: case 536870912: case 1073741824: return -1; default: return -1 } } function ht() { var a = oa; return oa <<= 1, (oa & 62914560) === 0 && (oa = 4194304), a } function pi(a) { for (var n = [], c = 0; 31 > c; c++)n.push(a); return n } function ii(a, n) { a.pendingLanes |= n, n !== 268435456 && (a.suspendedLanes = 0, a.pingedLanes = 0, a.warmLanes = 0) } function js(a, n, c, h, x, _) { var D = a.pendingLanes; a.pendingLanes = c, a.suspendedLanes = 0, a.pingedLanes = 0, a.warmLanes = 0, a.expiredLanes &= c, a.entangledLanes &= c, a.errorRecoveryDisabledLanes &= c, a.shellSuspendCounter = 0; var E = a.entanglements, V = a.expirationTimes, ue = a.hiddenUpdates; for (c = D & ~c; 0 < c;) { var ye = 31 - Nt(c), je = 1 << ye; E[ye] = 0, V[ye] = -1; var he = ue[ye]; if (he !== null) for (ue[ye] = null, ye = 0; ye < he.length; ye++) { var me = he[ye]; me !== null && (me.lane &= -536870913) } c &= ~je } h !== 0 && ws(a, h, 0), _ !== 0 && x === 0 && a.tag !== 0 && (a.suspendedLanes |= _ & ~(D & ~n)) } function ws(a, n, c) { a.pendingLanes |= n, a.suspendedLanes &= ~n; var h = 31 - Nt(n); a.entangledLanes |= n, a.entanglements[h] = a.entanglements[h] | 1073741824 | c & 261930 } function yi(a, n) { var c = a.entangledLanes |= n; for (a = a.entanglements; c;) { var h = 31 - Nt(c), x = 1 << h; x & n | a[h] & n && (a[h] |= n), c &= ~x } } function hs(a, n) { var c = n & -n; return c = (c & 42) !== 0 ? 1 : Xu(c), (c & (a.suspendedLanes | n)) !== 0 ? 0 : c } function Xu(a) { switch (a) { case 2: a = 1; break; case 8: a = 4; break; case 32: a = 16; break; case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: case 4194304: case 8388608: case 16777216: case 33554432: a = 128; break; case 268435456: a = 134217728; break; default: a = 0 }return a } function Uu(a) { return a &= -a, 2 < a ? 8 < a ? (a & 134217727) !== 0 ? 32 : 268435456 : 8 : 2 } function Am() { var a = H.p; return a !== 0 ? a : (a = window.event, a === void 0 ? 32 : px(a.type)) } function Mm(a, n) { var c = H.p; try { return H.p = a, n() } finally { H.p = c } } var ca = Math.random().toString(36).slice(2), si = "__reactFiber$" + ca, vi = "__reactProps$" + ca, Bn = "__reactContainer$" + ca, Vu = "__reactEvents$" + ca, U0 = "__reactListeners$" + ca, V0 = "__reactHandles$" + ca, Pm = "__reactResources$" + ca, Yr = "__reactMarker$" + ca; function Wu(a) { delete a[si], delete a[vi], delete a[Vu], delete a[U0], delete a[V0] } function Rn(a) { var n = a[si]; if (n) return n; for (var c = a.parentNode; c;) { if (n = c[Bn] || c[si]) { if (c = n.alternate, n.child !== null || c !== null && c.child !== null) for (a = Jb(a); a !== null;) { if (c = a[si]) return c; a = Jb(a) } return n } a = c, c = a.parentNode } return null } function Ln(a) { if (a = a[si] || a[Bn]) { var n = a.tag; if (n === 5 || n === 6 || n === 13 || n === 31 || n === 26 || n === 27 || n === 3) return a } return null } function Xr(a) { var n = a.tag; if (n === 5 || n === 26 || n === 27 || n === 6) return a.stateNode; throw Error(s(33)) } function zn(a) { var n = a[Pm]; return n || (n = a[Pm] = { hoistableStyles: new Map, hoistableScripts: new Map }), n } function Zt(a) { a[Yr] = !0 } var Om = new Set, Em = {}; function Ya(a, n) { Fn(a, n), Fn(a + "Capture", n) } function Fn(a, n) { for (Em[a] = n, a = 0; a < n.length; a++)Om.add(n[a]) } var W0 = RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"), Bm = {}, Rm = {}; function G0(a) { return ne.call(Rm, a) ? !0 : ne.call(Bm, a) ? !1 : W0.test(a) ? Rm[a] = !0 : (Bm[a] = !0, !1) } function wo(a, n, c) { if (G0(n)) if (c === null) a.removeAttribute(n); else { switch (typeof c) { case "undefined": case "function": case "symbol": a.removeAttribute(n); return; case "boolean": var h = n.toLowerCase().slice(0, 5); if (h !== "data-" && h !== "aria-") { a.removeAttribute(n); return } }a.setAttribute(n, "" + c) } } function ko(a, n, c) { if (c === null) a.removeAttribute(n); else { switch (typeof c) { case "undefined": case "function": case "symbol": case "boolean": a.removeAttribute(n); return }a.setAttribute(n, "" + c) } } function Bs(a, n, c, h) { if (h === null) a.removeAttribute(c); else { switch (typeof h) { case "undefined": case "function": case "symbol": case "boolean": a.removeAttribute(c); return }a.setAttributeNS(n, c, "" + h) } } function Zi(a) { switch (typeof a) { case "bigint": case "boolean": case "number": case "string": case "undefined": return a; case "object": return a; default: return "" } } function Lm(a) { var n = a.type; return (a = a.nodeName) && a.toLowerCase() === "input" && (n === "checkbox" || n === "radio") } function $0(a, n, c) { var h = Object.getOwnPropertyDescriptor(a.constructor.prototype, n); if (!a.hasOwnProperty(n) && typeof h < "u" && typeof h.get == "function" && typeof h.set == "function") { var x = h.get, _ = h.set; return Object.defineProperty(a, n, { configurable: !0, get: function () { return x.call(this) }, set: function (D) { c = "" + D, _.call(this, D) } }), Object.defineProperty(a, n, { enumerable: h.enumerable }), { getValue: function () { return c }, setValue: function (D) { c = "" + D }, stopTracking: function () { a._valueTracker = null, delete a[n] } } } } function Gu(a) { if (!a._valueTracker) { var n = Lm(a) ? "checked" : "value"; a._valueTracker = $0(a, n, "" + a[n]) } } function zm(a) { if (!a) return !1; var n = a._valueTracker; if (!n) return !0; var c = n.getValue(), h = ""; return a && (h = Lm(a) ? a.checked ? "true" : "false" : a.value), a = h, a !== c ? (n.setValue(a), !0) : !1 } function So(a) { if (a = a || (typeof document < "u" ? document : void 0), typeof a > "u") return null; try { return a.activeElement || a.body } catch { return a.body } } var K0 = /[\n"\\]/g; function Qi(a) { return a.replace(K0, function (n) { return "\\" + n.charCodeAt(0).toString(16) + " " }) } function $u(a, n, c, h, x, _, D, E) { a.name = "", D != null && typeof D != "function" && typeof D != "symbol" && typeof D != "boolean" ? a.type = D : a.removeAttribute("type"), n != null ? D === "number" ? (n === 0 && a.value === "" || a.value != n) && (a.value = "" + Zi(n)) : a.value !== "" + Zi(n) && (a.value = "" + Zi(n)) : D !== "submit" && D !== "reset" || a.removeAttribute("value"), n != null ? Ku(a, D, Zi(n)) : c != null ? Ku(a, D, Zi(c)) : h != null && a.removeAttribute("value"), x == null && _ != null && (a.defaultChecked = !!_), x != null && (a.checked = x && typeof x != "function" && typeof x != "symbol"), E != null && typeof E != "function" && typeof E != "symbol" && typeof E != "boolean" ? a.name = "" + Zi(E) : a.removeAttribute("name") } function Fm(a, n, c, h, x, _, D, E) { if (_ != null && typeof _ != "function" && typeof _ != "symbol" && typeof _ != "boolean" && (a.type = _), n != null || c != null) { if (!(_ !== "submit" && _ !== "reset" || n != null)) { Gu(a); return } c = c != null ? "" + Zi(c) : "", n = n != null ? "" + Zi(n) : c, E || n === a.value || (a.value = n), a.defaultValue = n } h = h ?? x, h = typeof h != "function" && typeof h != "symbol" && !!h, a.checked = E ? a.checked : !!h, a.defaultChecked = !!h, D != null && typeof D != "function" && typeof D != "symbol" && typeof D != "boolean" && (a.name = D), Gu(a) } function Ku(a, n, c) { n === "number" && So(a.ownerDocument) === a || a.defaultValue === "" + c || (a.defaultValue = "" + c) } function Hn(a, n, c, h) { if (a = a.options, n) { n = {}; for (var x = 0; x < c.length; x++)n["$" + c[x]] = !0; for (c = 0; c < a.length; c++)x = n.hasOwnProperty("$" + a[c].value), a[c].selected !== x && (a[c].selected = x), x && h && (a[c].defaultSelected = !0) } else { for (c = "" + Zi(c), n = null, x = 0; x < a.length; x++) { if (a[x].value === c) { a[x].selected = !0, h && (a[x].defaultSelected = !0); return } n !== null || a[x].disabled || (n = a[x]) } n !== null && (n.selected = !0) } } function Hm(a, n, c) { if (n != null && (n = "" + Zi(n), n !== a.value && (a.value = n), c == null)) { a.defaultValue !== n && (a.defaultValue = n); return } a.defaultValue = c != null ? "" + Zi(c) : "" } function Im(a, n, c, h) { if (n == null) { if (h != null) { if (c != null) throw Error(s(92)); if (U(h)) { if (1 < h.length) throw Error(s(93)); h = h[0] } c = h } c == null && (c = ""), n = c } c = Zi(n), a.defaultValue = c, h = a.textContent, h === c && h !== "" && h !== null && (a.value = h), Gu(a) } function In(a, n) { if (n) { var c = a.firstChild; if (c && c === a.lastChild && c.nodeType === 3) { c.nodeValue = n; return } } a.textContent = n } var Z0 = new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" ")); function qm(a, n, c) { var h = n.indexOf("--") === 0; c == null || typeof c == "boolean" || c === "" ? h ? a.setProperty(n, "") : n === "float" ? a.cssFloat = "" : a[n] = "" : h ? a.setProperty(n, c) : typeof c != "number" || c === 0 || Z0.has(n) ? n === "float" ? a.cssFloat = c : a[n] = ("" + c).trim() : a[n] = c + "px" } function Ym(a, n, c) { if (n != null && typeof n != "object") throw Error(s(62)); if (a = a.style, c != null) { for (var h in c) !c.hasOwnProperty(h) || n != null && n.hasOwnProperty(h) || (h.indexOf("--") === 0 ? a.setProperty(h, "") : h === "float" ? a.cssFloat = "" : a[h] = ""); for (var x in n) h = n[x], n.hasOwnProperty(x) && c[x] !== h && qm(a, x, h) } else for (var _ in n) n.hasOwnProperty(_) && qm(a, _, n[_]) } function Zu(a) { if (a.indexOf("-") === -1) return !1; switch (a) { case "annotation-xml": case "color-profile": case "font-face": case "font-face-src": case "font-face-uri": case "font-face-format": case "font-face-name": case "missing-glyph": return !1; default: return !0 } } var Q0 = new Map([["acceptCharset", "accept-charset"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"], ["crossOrigin", "crossorigin"], ["accentHeight", "accent-height"], ["alignmentBaseline", "alignment-baseline"], ["arabicForm", "arabic-form"], ["baselineShift", "baseline-shift"], ["capHeight", "cap-height"], ["clipPath", "clip-path"], ["clipRule", "clip-rule"], ["colorInterpolation", "color-interpolation"], ["colorInterpolationFilters", "color-interpolation-filters"], ["colorProfile", "color-profile"], ["colorRendering", "color-rendering"], ["dominantBaseline", "dominant-baseline"], ["enableBackground", "enable-background"], ["fillOpacity", "fill-opacity"], ["fillRule", "fill-rule"], ["floodColor", "flood-color"], ["floodOpacity", "flood-opacity"], ["fontFamily", "font-family"], ["fontSize", "font-size"], ["fontSizeAdjust", "font-size-adjust"], ["fontStretch", "font-stretch"], ["fontStyle", "font-style"], ["fontVariant", "font-variant"], ["fontWeight", "font-weight"], ["glyphName", "glyph-name"], ["glyphOrientationHorizontal", "glyph-orientation-horizontal"], ["glyphOrientationVertical", "glyph-orientation-vertical"], ["horizAdvX", "horiz-adv-x"], ["horizOriginX", "horiz-origin-x"], ["imageRendering", "image-rendering"], ["letterSpacing", "letter-spacing"], ["lightingColor", "lighting-color"], ["markerEnd", "marker-end"], ["markerMid", "marker-mid"], ["markerStart", "marker-start"], ["overlinePosition", "overline-position"], ["overlineThickness", "overline-thickness"], ["paintOrder", "paint-order"], ["panose-1", "panose-1"], ["pointerEvents", "pointer-events"], ["renderingIntent", "rendering-intent"], ["shapeRendering", "shape-rendering"], ["stopColor", "stop-color"], ["stopOpacity", "stop-opacity"], ["strikethroughPosition", "strikethrough-position"], ["strikethroughThickness", "strikethrough-thickness"], ["strokeDasharray", "stroke-dasharray"], ["strokeDashoffset", "stroke-dashoffset"], ["strokeLinecap", "stroke-linecap"], ["strokeLinejoin", "stroke-linejoin"], ["strokeMiterlimit", "stroke-miterlimit"], ["strokeOpacity", "stroke-opacity"], ["strokeWidth", "stroke-width"], ["textAnchor", "text-anchor"], ["textDecoration", "text-decoration"], ["textRendering", "text-rendering"], ["transformOrigin", "transform-origin"], ["underlinePosition", "underline-position"], ["underlineThickness", "underline-thickness"], ["unicodeBidi", "unicode-bidi"], ["unicodeRange", "unicode-range"], ["unitsPerEm", "units-per-em"], ["vAlphabetic", "v-alphabetic"], ["vHanging", "v-hanging"], ["vIdeographic", "v-ideographic"], ["vMathematical", "v-mathematical"], ["vectorEffect", "vector-effect"], ["vertAdvY", "vert-adv-y"], ["vertOriginX", "vert-origin-x"], ["vertOriginY", "vert-origin-y"], ["wordSpacing", "word-spacing"], ["writingMode", "writing-mode"], ["xmlnsXlink", "xmlns:xlink"], ["xHeight", "x-height"]]), J0 = /^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i; function No(a) { return J0.test("" + a) ? "javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')" : a } function Rs() { } var Qu = null; function Ju(a) { return a = a.target || a.srcElement || window, a.correspondingUseElement && (a = a.correspondingUseElement), a.nodeType === 3 ? a.parentNode : a } var qn = null, Yn = null; function Xm(a) { var n = Ln(a); if (n && (a = n.stateNode)) { var c = a[vi] || null; e: switch (a = n.stateNode, n.type) { case "input": if ($u(a, c.value, c.defaultValue, c.defaultValue, c.checked, c.defaultChecked, c.type, c.name), n = c.name, c.type === "radio" && n != null) { for (c = a; c.parentNode;)c = c.parentNode; for (c = c.querySelectorAll('input[name="' + Qi("" + n) + '"][type="radio"]'), n = 0; n < c.length; n++) { var h = c[n]; if (h !== a && h.form === a.form) { var x = h[vi] || null; if (!x) throw Error(s(90)); $u(h, x.value, x.defaultValue, x.defaultValue, x.checked, x.defaultChecked, x.type, x.name) } } for (n = 0; n < c.length; n++)h = c[n], h.form === a.form && zm(h) } break e; case "textarea": Hm(a, c.value, c.defaultValue); break e; case "select": n = c.value, n != null && Hn(a, !!c.multiple, n, !1) } } } var ed = !1; function Um(a, n, c) { if (ed) return a(n, c); ed = !0; try { var h = a(n); return h } finally { if (ed = !1, (qn !== null || Yn !== null) && (fc(), qn && (n = qn, a = Yn, Yn = qn = null, Xm(n), a))) for (n = 0; n < a.length; n++)Xm(a[n]) } } function Ur(a, n) { var c = a.stateNode; if (c === null) return null; var h = c[vi] || null; if (h === null) return null; c = h[n]; e: switch (n) { case "onClick": case "onClickCapture": case "onDoubleClick": case "onDoubleClickCapture": case "onMouseDown": case "onMouseDownCapture": case "onMouseMove": case "onMouseMoveCapture": case "onMouseUp": case "onMouseUpCapture": case "onMouseEnter": (h = !h.disabled) || (a = a.type, h = !(a === "button" || a === "input" || a === "select" || a === "textarea")), a = !h; break e; default: a = !1 }if (a) return null; if (c && typeof c != "function") throw Error(s(231, n, typeof c)); return c } var Ls = !(typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u"), td = !1; if (Ls) try { var Vr = {}; Object.defineProperty(Vr, "passive", { get: function () { td = !0 } }), window.addEventListener("test", Vr, Vr), window.removeEventListener("test", Vr, Vr) } catch { td = !1 } var ua = null, id = null, Co = null; function Vm() { if (Co) return Co; var a, n = id, c = n.length, h, x = "value" in ua ? ua.value : ua.textContent, _ = x.length; for (a = 0; a < c && n[a] === x[a]; a++); var D = c - a; for (h = 1; h <= D && n[c - h] === x[_ - h]; h++); return Co = x.slice(a, 1 < h ? 1 - h : void 0) } function To(a) { var n = a.keyCode; return "charCode" in a ? (a = a.charCode, a === 0 && n === 13 && (a = 13)) : a = n, a === 10 && (a = 13), 32 <= a || a === 13 ? a : 0 } function Do() { return !0 } function Wm() { return !1 } function _i(a) { function n(c, h, x, _, D) { this._reactName = c, this._targetInst = x, this.type = h, this.nativeEvent = _, this.target = D, this.currentTarget = null; for (var E in a) a.hasOwnProperty(E) && (c = a[E], this[E] = c ? c(_) : _[E]); return this.isDefaultPrevented = (_.defaultPrevented != null ? _.defaultPrevented : _.returnValue === !1) ? Do : Wm, this.isPropagationStopped = Wm, this } return g(n.prototype, { preventDefault: function () { this.defaultPrevented = !0; var c = this.nativeEvent; c && (c.preventDefault ? c.preventDefault() : typeof c.returnValue != "unknown" && (c.returnValue = !1), this.isDefaultPrevented = Do) }, stopPropagation: function () { var c = this.nativeEvent; c && (c.stopPropagation ? c.stopPropagation() : typeof c.cancelBubble != "unknown" && (c.cancelBubble = !0), this.isPropagationStopped = Do) }, persist: function () { }, isPersistent: Do }), n } var Xa = { eventPhase: 0, bubbles: 0, cancelable: 0, timeStamp: function (a) { return a.timeStamp || Date.now() }, defaultPrevented: 0, isTrusted: 0 }, Ao = _i(Xa), Wr = g({}, Xa, { view: 0, detail: 0 }), e_ = _i(Wr), sd, ad, Gr, Mo = g({}, Wr, { screenX: 0, screenY: 0, clientX: 0, clientY: 0, pageX: 0, pageY: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, getModifierState: rd, button: 0, buttons: 0, relatedTarget: function (a) { return a.relatedTarget === void 0 ? a.fromElement === a.srcElement ? a.toElement : a.fromElement : a.relatedTarget }, movementX: function (a) { return "movementX" in a ? a.movementX : (a !== Gr && (Gr && a.type === "mousemove" ? (sd = a.screenX - Gr.screenX, ad = a.screenY - Gr.screenY) : ad = sd = 0, Gr = a), sd) }, movementY: function (a) { return "movementY" in a ? a.movementY : ad } }), Gm = _i(Mo), t_ = g({}, Mo, { dataTransfer: 0 }), i_ = _i(t_), s_ = g({}, Wr, { relatedTarget: 0 }), nd = _i(s_), a_ = g({}, Xa, { animationName: 0, elapsedTime: 0, pseudoElement: 0 }), n_ = _i(a_), r_ = g({}, Xa, { clipboardData: function (a) { return "clipboardData" in a ? a.clipboardData : window.clipboardData } }), l_ = _i(r_), o_ = g({}, Xa, { data: 0 }), $m = _i(o_), c_ = { Esc: "Escape", Spacebar: " ", Left: "ArrowLeft", Up: "ArrowUp", Right: "ArrowRight", Down: "ArrowDown", Del: "Delete", Win: "OS", Menu: "ContextMenu", Apps: "ContextMenu", Scroll: "ScrollLock", MozPrintableKey: "Unidentified" }, u_ = { 8: "Backspace", 9: "Tab", 12: "Clear", 13: "Enter", 16: "Shift", 17: "Control", 18: "Alt", 19: "Pause", 20: "CapsLock", 27: "Escape", 32: " ", 33: "PageUp", 34: "PageDown", 35: "End", 36: "Home", 37: "ArrowLeft", 38: "ArrowUp", 39: "ArrowRight", 40: "ArrowDown", 45: "Insert", 46: "Delete", 112: "F1", 113: "F2", 114: "F3", 115: "F4", 116: "F5", 117: "F6", 118: "F7", 119: "F8", 120: "F9", 121: "F10", 122: "F11", 123: "F12", 144: "NumLock", 145: "ScrollLock", 224: "Meta" }, d_ = { Alt: "altKey", Control: "ctrlKey", Meta: "metaKey", Shift: "shiftKey" }; function h_(a) { var n = this.nativeEvent; return n.getModifierState ? n.getModifierState(a) : (a = d_[a]) ? !!n[a] : !1 } function rd() { return h_ } var f_ = g({}, Wr, { key: function (a) { if (a.key) { var n = c_[a.key] || a.key; if (n !== "Unidentified") return n } return a.type === "keypress" ? (a = To(a), a === 13 ? "Enter" : String.fromCharCode(a)) : a.type === "keydown" || a.type === "keyup" ? u_[a.keyCode] || "Unidentified" : "" }, code: 0, location: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, repeat: 0, locale: 0, getModifierState: rd, charCode: function (a) { return a.type === "keypress" ? To(a) : 0 }, keyCode: function (a) { return a.type === "keydown" || a.type === "keyup" ? a.keyCode : 0 }, which: function (a) { return a.type === "keypress" ? To(a) : a.type === "keydown" || a.type === "keyup" ? a.keyCode : 0 } }), m_ = _i(f_), p_ = g({}, Mo, { pointerId: 0, width: 0, height: 0, pressure: 0, tangentialPressure: 0, tiltX: 0, tiltY: 0, twist: 0, pointerType: 0, isPrimary: 0 }), Km = _i(p_), g_ = g({}, Wr, { touches: 0, targetTouches: 0, changedTouches: 0, altKey: 0, metaKey: 0, ctrlKey: 0, shiftKey: 0, getModifierState: rd }), b_ = _i(g_), x_ = g({}, Xa, { propertyName: 0, elapsedTime: 0, pseudoElement: 0 }), y_ = _i(x_), v_ = g({}, Mo, { deltaX: function (a) { return "deltaX" in a ? a.deltaX : "wheelDeltaX" in a ? -a.wheelDeltaX : 0 }, deltaY: function (a) { return "deltaY" in a ? a.deltaY : "wheelDeltaY" in a ? -a.wheelDeltaY : "wheelDelta" in a ? -a.wheelDelta : 0 }, deltaZ: 0, deltaMode: 0 }), __ = _i(v_), j_ = g({}, Xa, { newState: 0, oldState: 0 }), w_ = _i(j_), k_ = [9, 13, 27, 32], ld = Ls && "CompositionEvent" in window, $r = null; Ls && "documentMode" in document && ($r = document.documentMode); var S_ = Ls && "TextEvent" in window && !$r, Zm = Ls && (!ld || $r && 8 < $r && 11 >= $r), Qm = " ", Jm = !1; function ep(a, n) { switch (a) { case "keyup": return k_.indexOf(n.keyCode) !== -1; case "keydown": return n.keyCode !== 229; case "keypress": case "mousedown": case "focusout": return !0; default: return !1 } } function tp(a) { return a = a.detail, typeof a == "object" && "data" in a ? a.data : null } var Xn = !1; function N_(a, n) { switch (a) { case "compositionend": return tp(n); case "keypress": return n.which !== 32 ? null : (Jm = !0, Qm); case "textInput": return a = n.data, a === Qm && Jm ? null : a; default: return null } } function C_(a, n) { if (Xn) return a === "compositionend" || !ld && ep(a, n) ? (a = Vm(), Co = id = ua = null, Xn = !1, a) : null; switch (a) { case "paste": return null; case "keypress": if (!(n.ctrlKey || n.altKey || n.metaKey) || n.ctrlKey && n.altKey) { if (n.char && 1 < n.char.length) return n.char; if (n.which) return String.fromCharCode(n.which) } return null; case "compositionend": return Zm && n.locale !== "ko" ? null : n.data; default: return null } } var T_ = { color: !0, date: !0, datetime: !0, "datetime-local": !0, email: !0, month: !0, number: !0, password: !0, range: !0, search: !0, tel: !0, text: !0, time: !0, url: !0, week: !0 }; function ip(a) { var n = a && a.nodeName && a.nodeName.toLowerCase(); return n === "input" ? !!T_[a.type] : n === "textarea" } function sp(a, n, c, h) { qn ? Yn ? Yn.push(h) : Yn = [h] : qn = h, n = vc(n, "onChange"), 0 < n.length && (c = new Ao("onChange", "change", null, c, h), a.push({ event: c, listeners: n })) } var Kr = null, Zr = null; function D_(a) { Fb(a, 0) } function Po(a) { var n = Xr(a); if (zm(n)) return a } function ap(a, n) { if (a === "change") return n } var np = !1; if (Ls) { var od; if (Ls) { var cd = "oninput" in document; if (!cd) { var rp = document.createElement("div"); rp.setAttribute("oninput", "return;"), cd = typeof rp.oninput == "function" } od = cd } else od = !1; np = od && (!document.documentMode || 9 < document.documentMode) } function lp() { Kr && (Kr.detachEvent("onpropertychange", op), Zr = Kr = null) } function op(a) { if (a.propertyName === "value" && Po(Zr)) { var n = []; sp(n, Zr, a, Ju(a)), Um(D_, n) } } function A_(a, n, c) { a === "focusin" ? (lp(), Kr = n, Zr = c, Kr.attachEvent("onpropertychange", op)) : a === "focusout" && lp() } function M_(a) { if (a === "selectionchange" || a === "keyup" || a === "keydown") return Po(Zr) } function P_(a, n) { if (a === "click") return Po(n) } function O_(a, n) { if (a === "input" || a === "change") return Po(n) } function E_(a, n) { return a === n && (a !== 0 || 1 / a === 1 / n) || a !== a && n !== n } var Ri = typeof Object.is == "function" ? Object.is : E_; function Qr(a, n) { if (Ri(a, n)) return !0; if (typeof a != "object" || a === null || typeof n != "object" || n === null) return !1; var c = Object.keys(a), h = Object.keys(n); if (c.length !== h.length) return !1; for (h = 0; h < c.length; h++) { var x = c[h]; if (!ne.call(n, x) || !Ri(a[x], n[x])) return !1 } return !0 } function cp(a) { for (; a && a.firstChild;)a = a.firstChild; return a } function up(a, n) { var c = cp(a); a = 0; for (var h; c;) { if (c.nodeType === 3) { if (h = a + c.textContent.length, a <= n && h >= n) return { node: c, offset: n - a }; a = h } e: { for (; c;) { if (c.nextSibling) { c = c.nextSibling; break e } c = c.parentNode } c = void 0 } c = cp(c) } } function dp(a, n) { return a && n ? a === n ? !0 : a && a.nodeType === 3 ? !1 : n && n.nodeType === 3 ? dp(a, n.parentNode) : "contains" in a ? a.contains(n) : a.compareDocumentPosition ? !!(a.compareDocumentPosition(n) & 16) : !1 : !1 } function hp(a) { a = a != null && a.ownerDocument != null && a.ownerDocument.defaultView != null ? a.ownerDocument.defaultView : window; for (var n = So(a.document); n instanceof a.HTMLIFrameElement;) { try { var c = typeof n.contentWindow.location.href == "string" } catch { c = !1 } if (c) a = n.contentWindow; else break; n = So(a.document) } return n } function ud(a) { var n = a && a.nodeName && a.nodeName.toLowerCase(); return n && (n === "input" && (a.type === "text" || a.type === "search" || a.type === "tel" || a.type === "url" || a.type === "password") || n === "textarea" || a.contentEditable === "true") } var B_ = Ls && "documentMode" in document && 11 >= document.documentMode, Un = null, dd = null, Jr = null, hd = !1; function fp(a, n, c) { var h = c.window === c ? c.document : c.nodeType === 9 ? c : c.ownerDocument; hd || Un == null || Un !== So(h) || (h = Un, "selectionStart" in h && ud(h) ? h = { start: h.selectionStart, end: h.selectionEnd } : (h = (h.ownerDocument && h.ownerDocument.defaultView || window).getSelection(), h = { anchorNode: h.anchorNode, anchorOffset: h.anchorOffset, focusNode: h.focusNode, focusOffset: h.focusOffset }), Jr && Qr(Jr, h) || (Jr = h, h = vc(dd, "onSelect"), 0 < h.length && (n = new Ao("onSelect", "select", null, n, c), a.push({ event: n, listeners: h }), n.target = Un))) } function Ua(a, n) { var c = {}; return c[a.toLowerCase()] = n.toLowerCase(), c["Webkit" + a] = "webkit" + n, c["Moz" + a] = "moz" + n, c } var Vn = { animationend: Ua("Animation", "AnimationEnd"), animationiteration: Ua("Animation", "AnimationIteration"), animationstart: Ua("Animation", "AnimationStart"), transitionrun: Ua("Transition", "TransitionRun"), transitionstart: Ua("Transition", "TransitionStart"), transitioncancel: Ua("Transition", "TransitionCancel"), transitionend: Ua("Transition", "TransitionEnd") }, fd = {}, mp = {}; Ls && (mp = document.createElement("div").style, "AnimationEvent" in window || (delete Vn.animationend.animation, delete Vn.animationiteration.animation, delete Vn.animationstart.animation), "TransitionEvent" in window || delete Vn.transitionend.transition); function Va(a) { if (fd[a]) return fd[a]; if (!Vn[a]) return a; var n = Vn[a], c; for (c in n) if (n.hasOwnProperty(c) && c in mp) return fd[a] = n[c]; return a } var pp = Va("animationend"), gp = Va("animationiteration"), bp = Va("animationstart"), R_ = Va("transitionrun"), L_ = Va("transitionstart"), z_ = Va("transitioncancel"), xp = Va("transitionend"), yp = new Map, md = "abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" "); md.push("scrollEnd"); function fs(a, n) { yp.set(a, n), Ya(n, [a]) } var Oo = typeof reportError == "function" ? reportError : function (a) { if (typeof window == "object" && typeof window.ErrorEvent == "function") { var n = new window.ErrorEvent("error", { bubbles: !0, cancelable: !0, message: typeof a == "object" && a !== null && typeof a.message == "string" ? String(a.message) : String(a), error: a }); if (!window.dispatchEvent(n)) return } else if (typeof process == "object" && typeof process.emit == "function") { process.emit("uncaughtException", a); return } console.error(a) }, Ji = [], Wn = 0, pd = 0; function Eo() { for (var a = Wn, n = pd = Wn = 0; n < a;) { var c = Ji[n]; Ji[n++] = null; var h = Ji[n]; Ji[n++] = null; var x = Ji[n]; Ji[n++] = null; var _ = Ji[n]; if (Ji[n++] = null, h !== null && x !== null) { var D = h.pending; D === null ? x.next = x : (x.next = D.next, D.next = x), h.pending = x } _ !== 0 && vp(c, x, _) } } function Bo(a, n, c, h) { Ji[Wn++] = a, Ji[Wn++] = n, Ji[Wn++] = c, Ji[Wn++] = h, pd |= h, a.lanes |= h, a = a.alternate, a !== null && (a.lanes |= h) } function gd(a, n, c, h) { return Bo(a, n, c, h), Ro(a) } function Wa(a, n) { return Bo(a, null, null, n), Ro(a) } function vp(a, n, c) { a.lanes |= c; var h = a.alternate; h !== null && (h.lanes |= c); for (var x = !1, _ = a.return; _ !== null;)_.childLanes |= c, h = _.alternate, h !== null && (h.childLanes |= c), _.tag === 22 && (a = _.stateNode, a === null || a._visibility & 1 || (x = !0)), a = _, _ = _.return; return a.tag === 3 ? (_ = a.stateNode, x && n !== null && (x = 31 - Nt(c), a = _.hiddenUpdates, h = a[x], h === null ? a[x] = [n] : h.push(n), n.lane = c | 536870912), _) : null } function Ro(a) { if (50 < _l) throw _l = 0, Sh = null, Error(s(185)); for (var n = a.return; n !== null;)a = n, n = a.return; return a.tag === 3 ? a.stateNode : null } var Gn = {}; function F_(a, n, c, h) { this.tag = a, this.key = c, this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null, this.index = 0, this.refCleanup = this.ref = null, this.pendingProps = n, this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null, this.mode = h, this.subtreeFlags = this.flags = 0, this.deletions = null, this.childLanes = this.lanes = 0, this.alternate = null } function Li(a, n, c, h) { return new F_(a, n, c, h) } function bd(a) { return a = a.prototype, !(!a || !a.isReactComponent) } function zs(a, n) { var c = a.alternate; return c === null ? (c = Li(a.tag, n, a.key, a.mode), c.elementType = a.elementType, c.type = a.type, c.stateNode = a.stateNode, c.alternate = a, a.alternate = c) : (c.pendingProps = n, c.type = a.type, c.flags = 0, c.subtreeFlags = 0, c.deletions = null), c.flags = a.flags & 65011712, c.childLanes = a.childLanes, c.lanes = a.lanes, c.child = a.child, c.memoizedProps = a.memoizedProps, c.memoizedState = a.memoizedState, c.updateQueue = a.updateQueue, n = a.dependencies, c.dependencies = n === null ? null : { lanes: n.lanes, firstContext: n.firstContext }, c.sibling = a.sibling, c.index = a.index, c.ref = a.ref, c.refCleanup = a.refCleanup, c } function _p(a, n) { a.flags &= 65011714; var c = a.alternate; return c === null ? (a.childLanes = 0, a.lanes = n, a.child = null, a.subtreeFlags = 0, a.memoizedProps = null, a.memoizedState = null, a.updateQueue = null, a.dependencies = null, a.stateNode = null) : (a.childLanes = c.childLanes, a.lanes = c.lanes, a.child = c.child, a.subtreeFlags = 0, a.deletions = null, a.memoizedProps = c.memoizedProps, a.memoizedState = c.memoizedState, a.updateQueue = c.updateQueue, a.type = c.type, n = c.dependencies, a.dependencies = n === null ? null : { lanes: n.lanes, firstContext: n.firstContext }), a } function Lo(a, n, c, h, x, _) { var D = 0; if (h = a, typeof a == "function") bd(a) && (D = 1); else if (typeof a == "string") D = X1(a, c, W.current) ? 26 : a === "html" || a === "head" || a === "body" ? 27 : 5; else e: switch (a) { case F: return a = Li(31, c, n, x), a.elementType = F, a.lanes = _, a; case k: return Ga(c.children, x, _, n); case j: D = 8, x |= 24; break; case S: return a = Li(12, c, n, x | 2), a.elementType = S, a.lanes = _, a; case R: return a = Li(13, c, n, x), a.elementType = R, a.lanes = _, a; case P: return a = Li(19, c, n, x), a.elementType = P, a.lanes = _, a; default: if (typeof a == "object" && a !== null) switch (a.$$typeof) { case N: D = 10; break e; case w: D = 9; break e; case T: D = 11; break e; case O: D = 14; break e; case z: D = 16, h = null; break e }D = 29, c = Error(s(130, a === null ? "null" : typeof a, "")), h = null }return n = Li(D, c, n, x), n.elementType = a, n.type = h, n.lanes = _, n } function Ga(a, n, c, h) { return a = Li(7, a, h, n), a.lanes = c, a } function xd(a, n, c) { return a = Li(6, a, null, n), a.lanes = c, a } function jp(a) { var n = Li(18, null, null, 0); return n.stateNode = a, n } function yd(a, n, c) { return n = Li(4, a.children !== null ? a.children : [], a.key, n), n.lanes = c, n.stateNode = { containerInfo: a.containerInfo, pendingChildren: null, implementation: a.implementation }, n } var wp = new WeakMap; function es(a, n) { if (typeof a == "object" && a !== null) { var c = wp.get(a); return c !== void 0 ? c : (n = { value: a, source: n, stack: Ae(n) }, wp.set(a, n), n) } return { value: a, source: n, stack: Ae(n) } } var $n = [], Kn = 0, zo = null, el = 0, ts = [], is = 0, da = null, ks = 1, Ss = ""; function Fs(a, n) { $n[Kn++] = el, $n[Kn++] = zo, zo = a, el = n } function kp(a, n, c) { ts[is++] = ks, ts[is++] = Ss, ts[is++] = da, da = a; var h = ks; a = Ss; var x = 32 - Nt(h) - 1; h &= ~(1 << x), c += 1; var _ = 32 - Nt(n) + x; if (30 < _) { var D = x - x % 5; _ = (h & (1 << D) - 1).toString(32), h >>= D, x -= D, ks = 1 << 32 - Nt(n) + x | c << x | h, Ss = _ + a } else ks = 1 << _ | c << x | h, Ss = a } function vd(a) { a.return !== null && (Fs(a, 1), kp(a, 1, 0)) } function _d(a) { for (; a === zo;)zo = $n[--Kn], $n[Kn] = null, el = $n[--Kn], $n[Kn] = null; for (; a === da;)da = ts[--is], ts[is] = null, Ss = ts[--is], ts[is] = null, ks = ts[--is], ts[is] = null } function Sp(a, n) { ts[is++] = ks, ts[is++] = Ss, ts[is++] = da, ks = n.id, Ss = n.overflow, da = a } var ai = null, bt = null, Ze = !1, ha = null, ss = !1, jd = Error(s(519)); function fa(a) { var n = Error(s(418, 1 < arguments.length && arguments[1] !== void 0 && arguments[1] ? "text" : "HTML", "")); throw tl(es(n, a)), jd } function Np(a) { var n = a.stateNode, c = a.type, h = a.memoizedProps; switch (n[si] = a, n[vi] = h, c) { case "dialog": Ge("cancel", n), Ge("close", n); break; case "iframe": case "object": case "embed": Ge("load", n); break; case "video": case "audio": for (c = 0; c < wl.length; c++)Ge(wl[c], n); break; case "source": Ge("error", n); break; case "img": case "image": case "link": Ge("error", n), Ge("load", n); break; case "details": Ge("toggle", n); break; case "input": Ge("invalid", n), Fm(n, h.value, h.defaultValue, h.checked, h.defaultChecked, h.type, h.name, !0); break; case "select": Ge("invalid", n); break; case "textarea": Ge("invalid", n), Im(n, h.value, h.defaultValue, h.children) }c = h.children, typeof c != "string" && typeof c != "number" && typeof c != "bigint" || n.textContent === "" + c || h.suppressHydrationWarning === !0 || Yb(n.textContent, c) ? (h.popover != null && (Ge("beforetoggle", n), Ge("toggle", n)), h.onScroll != null && Ge("scroll", n), h.onScrollEnd != null && Ge("scrollend", n), h.onClick != null && (n.onclick = Rs), n = !0) : n = !1, n || fa(a, !0) } function Cp(a) { for (ai = a.return; ai;)switch (ai.tag) { case 5: case 31: case 13: ss = !1; return; case 27: case 3: ss = !0; return; default: ai = ai.return } } function Zn(a) { if (a !== ai) return !1; if (!Ze) return Cp(a), Ze = !0, !1; var n = a.tag, c; if ((c = n !== 3 && n !== 27) && ((c = n === 5) && (c = a.type, c = !(c !== "form" && c !== "button") || Hh(a.type, a.memoizedProps)), c = !c), c && bt && fa(a), Cp(a), n === 13) { if (a = a.memoizedState, a = a !== null ? a.dehydrated : null, !a) throw Error(s(317)); bt = Qb(a) } else if (n === 31) { if (a = a.memoizedState, a = a !== null ? a.dehydrated : null, !a) throw Error(s(317)); bt = Qb(a) } else n === 27 ? (n = bt, Ca(a.type) ? (a = Uh, Uh = null, bt = a) : bt = n) : bt = ai ? ns(a.stateNode.nextSibling) : null; return !0 } function $a() { bt = ai = null, Ze = !1 } function wd() { var a = ha; return a !== null && (Si === null ? Si = a : Si.push.apply(Si, a), ha = null), a } function tl(a) { ha === null ? ha = [a] : ha.push(a) } var kd = q(null), Ka = null, Hs = null; function ma(a, n, c) { ce(kd, n._currentValue), n._currentValue = c } function Is(a) { a._currentValue = kd.current, Q(kd) } function Sd(a, n, c) { for (; a !== null;) { var h = a.alternate; if ((a.childLanes & n) !== n ? (a.childLanes |= n, h !== null && (h.childLanes |= n)) : h !== null && (h.childLanes & n) !== n && (h.childLanes |= n), a === c) break; a = a.return } } function Nd(a, n, c, h) { var x = a.child; for (x !== null && (x.return = a); x !== null;) { var _ = x.dependencies; if (_ !== null) { var D = x.child; _ = _.firstContext; e: for (; _ !== null;) { var E = _; _ = x; for (var V = 0; V < n.length; V++)if (E.context === n[V]) { _.lanes |= c, E = _.alternate, E !== null && (E.lanes |= c), Sd(_.return, c, a), h || (D = null); break e } _ = E.next } } else if (x.tag === 18) { if (D = x.return, D === null) throw Error(s(341)); D.lanes |= c, _ = D.alternate, _ !== null && (_.lanes |= c), Sd(D, c, a), D = null } else D = x.child; if (D !== null) D.return = x; else for (D = x; D !== null;) { if (D === a) { D = null; break } if (x = D.sibling, x !== null) { x.return = D.return, D = x; break } D = D.return } x = D } } function Qn(a, n, c, h) { a = null; for (var x = n, _ = !1; x !== null;) { if (!_) { if ((x.flags & 524288) !== 0) _ = !0; else if ((x.flags & 262144) !== 0) break } if (x.tag === 10) { var D = x.alternate; if (D === null) throw Error(s(387)); if (D = D.memoizedProps, D !== null) { var E = x.type; Ri(x.pendingProps.value, D.value) || (a !== null ? a.push(E) : a = [E]) } } else if (x === G.current) { if (D = x.alternate, D === null) throw Error(s(387)); D.memoizedState.memoizedState !== x.memoizedState.memoizedState && (a !== null ? a.push(Tl) : a = [Tl]) } x = x.return } a !== null && Nd(n, a, c, h), n.flags |= 262144 } function Fo(a) { for (a = a.firstContext; a !== null;) { if (!Ri(a.context._currentValue, a.memoizedValue)) return !0; a = a.next } return !1 } function Za(a) { Ka = a, Hs = null, a = a.dependencies, a !== null && (a.firstContext = null) } function ni(a) { return Tp(Ka, a) } function Ho(a, n) { return Ka === null && Za(a), Tp(a, n) } function Tp(a, n) { var c = n._currentValue; if (n = { context: n, memoizedValue: c, next: null }, Hs === null) { if (a === null) throw Error(s(308)); Hs = n, a.dependencies = { lanes: 0, firstContext: n }, a.flags |= 524288 } else Hs = Hs.next = n; return c } var H_ = typeof AbortController < "u" ? AbortController : function () { var a = [], n = this.signal = { aborted: !1, addEventListener: function (c, h) { a.push(h) } }; this.abort = function () { n.aborted = !0, a.forEach(function (c) { return c() }) } }, I_ = l.unstable_scheduleCallback, q_ = l.unstable_NormalPriority, It = { $$typeof: N, Consumer: null, Provider: null, _currentValue: null, _currentValue2: null, _threadCount: 0 }; function Cd() { return { controller: new H_, data: new Map, refCount: 0 } } function il(a) { a.refCount--, a.refCount === 0 && I_(q_, function () { a.controller.abort() }) } var sl = null, Td = 0, Jn = 0, er = null; function Y_(a, n) { if (sl === null) { var c = sl = []; Td = 0, Jn = Mh(), er = { status: "pending", value: void 0, then: function (h) { c.push(h) } } } return Td++, n.then(Dp, Dp), n } function Dp() { if (--Td === 0 && sl !== null) { er !== null && (er.status = "fulfilled"); var a = sl; sl = null, Jn = 0, er = null; for (var n = 0; n < a.length; n++)(0, a[n])() } } function X_(a, n) { var c = [], h = { status: "pending", value: null, reason: null, then: function (x) { c.push(x) } }; return a.then(function () { h.status = "fulfilled", h.value = n; for (var x = 0; x < c.length; x++)(0, c[x])(n) }, function (x) { for (h.status = "rejected", h.reason = x, x = 0; x < c.length; x++)(0, c[x])(void 0) }), h } var Ap = I.S; I.S = function (a, n) { fb = kt(), typeof n == "object" && n !== null && typeof n.then == "function" && Y_(a, n), Ap !== null && Ap(a, n) }; var Qa = q(null); function Dd() { var a = Qa.current; return a !== null ? a : ft.pooledCache } function Io(a, n) { n === null ? ce(Qa, Qa.current) : ce(Qa, n.pool) } function Mp() { var a = Dd(); return a === null ? null : { parent: It._currentValue, pool: a } } var tr = Error(s(460)), Ad = Error(s(474)), qo = Error(s(542)), Yo = { then: function () { } }; function Pp(a) { return a = a.status, a === "fulfilled" || a === "rejected" } function Op(a, n, c) { switch (c = a[c], c === void 0 ? a.push(n) : c !== n && (n.then(Rs, Rs), n = c), n.status) { case "fulfilled": return n.value; case "rejected": throw a = n.reason, Bp(a), a; default: if (typeof n.status == "string") n.then(Rs, Rs); else { if (a = ft, a !== null && 100 < a.shellSuspendCounter) throw Error(s(482)); a = n, a.status = "pending", a.then(function (h) { if (n.status === "pending") { var x = n; x.status = "fulfilled", x.value = h } }, function (h) { if (n.status === "pending") { var x = n; x.status = "rejected", x.reason = h } }) } switch (n.status) { case "fulfilled": return n.value; case "rejected": throw a = n.reason, Bp(a), a }throw en = n, tr } } function Ja(a) { try { var n = a._init; return n(a._payload) } catch (c) { throw c !== null && typeof c == "object" && typeof c.then == "function" ? (en = c, tr) : c } } var en = null; function Ep() { if (en === null) throw Error(s(459)); var a = en; return en = null, a } function Bp(a) { if (a === tr || a === qo) throw Error(s(483)) } var ir = null, al = 0; function Xo(a) { var n = al; return al += 1, ir === null && (ir = []), Op(ir, a, n) } function nl(a, n) { n = n.props.ref, a.ref = n !== void 0 ? n : null } function Uo(a, n) { throw n.$$typeof === y ? Error(s(525)) : (a = Object.prototype.toString.call(n), Error(s(31, a === "[object Object]" ? "object with keys {" + Object.keys(n).join(", ") + "}" : a))) } function Rp(a) { function n(ie, Z) { if (a) { var oe = ie.deletions; oe === null ? (ie.deletions = [Z], ie.flags |= 16) : oe.push(Z) } } function c(ie, Z) { if (!a) return null; for (; Z !== null;)n(ie, Z), Z = Z.sibling; return null } function h(ie) { for (var Z = new Map; ie !== null;)ie.key !== null ? Z.set(ie.key, ie) : Z.set(ie.index, ie), ie = ie.sibling; return Z } function x(ie, Z) { return ie = zs(ie, Z), ie.index = 0, ie.sibling = null, ie } function _(ie, Z, oe) { return ie.index = oe, a ? (oe = ie.alternate, oe !== null ? (oe = oe.index, oe < Z ? (ie.flags |= 67108866, Z) : oe) : (ie.flags |= 67108866, Z)) : (ie.flags |= 1048576, Z) } function D(ie) { return a && ie.alternate === null && (ie.flags |= 67108866), ie } function E(ie, Z, oe, _e) { return Z === null || Z.tag !== 6 ? (Z = xd(oe, ie.mode, _e), Z.return = ie, Z) : (Z = x(Z, oe), Z.return = ie, Z) } function V(ie, Z, oe, _e) { var Re = oe.type; return Re === k ? ye(ie, Z, oe.props.children, _e, oe.key) : Z !== null && (Z.elementType === Re || typeof Re == "object" && Re !== null && Re.$$typeof === z && Ja(Re) === Z.type) ? (Z = x(Z, oe.props), nl(Z, oe), Z.return = ie, Z) : (Z = Lo(oe.type, oe.key, oe.props, null, ie.mode, _e), nl(Z, oe), Z.return = ie, Z) } function ue(ie, Z, oe, _e) { return Z === null || Z.tag !== 4 || Z.stateNode.containerInfo !== oe.containerInfo || Z.stateNode.implementation !== oe.implementation ? (Z = yd(oe, ie.mode, _e), Z.return = ie, Z) : (Z = x(Z, oe.children || []), Z.return = ie, Z) } function ye(ie, Z, oe, _e, Re) { return Z === null || Z.tag !== 7 ? (Z = Ga(oe, ie.mode, _e, Re), Z.return = ie, Z) : (Z = x(Z, oe), Z.return = ie, Z) } function je(ie, Z, oe) { if (typeof Z == "string" && Z !== "" || typeof Z == "number" || typeof Z == "bigint") return Z = xd("" + Z, ie.mode, oe), Z.return = ie, Z; if (typeof Z == "object" && Z !== null) { switch (Z.$$typeof) { case b: return oe = Lo(Z.type, Z.key, Z.props, null, ie.mode, oe), nl(oe, Z), oe.return = ie, oe; case v: return Z = yd(Z, ie.mode, oe), Z.return = ie, Z; case z: return Z = Ja(Z), je(ie, Z, oe) }if (U(Z) || L(Z)) return Z = Ga(Z, ie.mode, oe, null), Z.return = ie, Z; if (typeof Z.then == "function") return je(ie, Xo(Z), oe); if (Z.$$typeof === N) return je(ie, Ho(ie, Z), oe); Uo(ie, Z) } return null } function he(ie, Z, oe, _e) { var Re = Z !== null ? Z.key : null; if (typeof oe == "string" && oe !== "" || typeof oe == "number" || typeof oe == "bigint") return Re !== null ? null : E(ie, Z, "" + oe, _e); if (typeof oe == "object" && oe !== null) { switch (oe.$$typeof) { case b: return oe.key === Re ? V(ie, Z, oe, _e) : null; case v: return oe.key === Re ? ue(ie, Z, oe, _e) : null; case z: return oe = Ja(oe), he(ie, Z, oe, _e) }if (U(oe) || L(oe)) return Re !== null ? null : ye(ie, Z, oe, _e, null); if (typeof oe.then == "function") return he(ie, Z, Xo(oe), _e); if (oe.$$typeof === N) return he(ie, Z, Ho(ie, oe), _e); Uo(ie, oe) } return null } function me(ie, Z, oe, _e, Re) { if (typeof _e == "string" && _e !== "" || typeof _e == "number" || typeof _e == "bigint") return ie = ie.get(oe) || null, E(Z, ie, "" + _e, Re); if (typeof _e == "object" && _e !== null) { switch (_e.$$typeof) { case b: return ie = ie.get(_e.key === null ? oe : _e.key) || null, V(Z, ie, _e, Re); case v: return ie = ie.get(_e.key === null ? oe : _e.key) || null, ue(Z, ie, _e, Re); case z: return _e = Ja(_e), me(ie, Z, oe, _e, Re) }if (U(_e) || L(_e)) return ie = ie.get(oe) || null, ye(Z, ie, _e, Re, null); if (typeof _e.then == "function") return me(ie, Z, oe, Xo(_e), Re); if (_e.$$typeof === N) return me(ie, Z, oe, Ho(Z, _e), Re); Uo(Z, _e) } return null } function Pe(ie, Z, oe, _e) { for (var Re = null, et = null, Be = Z, Xe = Z = 0, Ke = null; Be !== null && Xe < oe.length; Xe++) { Be.index > Xe ? (Ke = Be, Be = null) : Ke = Be.sibling; var tt = he(ie, Be, oe[Xe], _e); if (tt === null) { Be === null && (Be = Ke); break } a && Be && tt.alternate === null && n(ie, Be), Z = _(tt, Z, Xe), et === null ? Re = tt : et.sibling = tt, et = tt, Be = Ke } if (Xe === oe.length) return c(ie, Be), Ze && Fs(ie, Xe), Re; if (Be === null) { for (; Xe < oe.length; Xe++)Be = je(ie, oe[Xe], _e), Be !== null && (Z = _(Be, Z, Xe), et === null ? Re = Be : et.sibling = Be, et = Be); return Ze && Fs(ie, Xe), Re } for (Be = h(Be); Xe < oe.length; Xe++)Ke = me(Be, ie, Xe, oe[Xe], _e), Ke !== null && (a && Ke.alternate !== null && Be.delete(Ke.key === null ? Xe : Ke.key), Z = _(Ke, Z, Xe), et === null ? Re = Ke : et.sibling = Ke, et = Ke); return a && Be.forEach(function (Pa) { return n(ie, Pa) }), Ze && Fs(ie, Xe), Re } function Le(ie, Z, oe, _e) { if (oe == null) throw Error(s(151)); for (var Re = null, et = null, Be = Z, Xe = Z = 0, Ke = null, tt = oe.next(); Be !== null && !tt.done; Xe++, tt = oe.next()) { Be.index > Xe ? (Ke = Be, Be = null) : Ke = Be.sibling; var Pa = he(ie, Be, tt.value, _e); if (Pa === null) { Be === null && (Be = Ke); break } a && Be && Pa.alternate === null && n(ie, Be), Z = _(Pa, Z, Xe), et === null ? Re = Pa : et.sibling = Pa, et = Pa, Be = Ke } if (tt.done) return c(ie, Be), Ze && Fs(ie, Xe), Re; if (Be === null) { for (; !tt.done; Xe++, tt = oe.next())tt = je(ie, tt.value, _e), tt !== null && (Z = _(tt, Z, Xe), et === null ? Re = tt : et.sibling = tt, et = tt); return Ze && Fs(ie, Xe), Re } for (Be = h(Be); !tt.done; Xe++, tt = oe.next())tt = me(Be, ie, Xe, tt.value, _e), tt !== null && (a && tt.alternate !== null && Be.delete(tt.key === null ? Xe : tt.key), Z = _(tt, Z, Xe), et === null ? Re = tt : et.sibling = tt, et = tt); return a && Be.forEach(function (tj) { return n(ie, tj) }), Ze && Fs(ie, Xe), Re } function ut(ie, Z, oe, _e) { if (typeof oe == "object" && oe !== null && oe.type === k && oe.key === null && (oe = oe.props.children), typeof oe == "object" && oe !== null) { switch (oe.$$typeof) { case b: e: { for (var Re = oe.key; Z !== null;) { if (Z.key === Re) { if (Re = oe.type, Re === k) { if (Z.tag === 7) { c(ie, Z.sibling), _e = x(Z, oe.props.children), _e.return = ie, ie = _e; break e } } else if (Z.elementType === Re || typeof Re == "object" && Re !== null && Re.$$typeof === z && Ja(Re) === Z.type) { c(ie, Z.sibling), _e = x(Z, oe.props), nl(_e, oe), _e.return = ie, ie = _e; break e } c(ie, Z); break } else n(ie, Z); Z = Z.sibling } oe.type === k ? (_e = Ga(oe.props.children, ie.mode, _e, oe.key), _e.return = ie, ie = _e) : (_e = Lo(oe.type, oe.key, oe.props, null, ie.mode, _e), nl(_e, oe), _e.return = ie, ie = _e) } return D(ie); case v: e: { for (Re = oe.key; Z !== null;) { if (Z.key === Re) if (Z.tag === 4 && Z.stateNode.containerInfo === oe.containerInfo && Z.stateNode.implementation === oe.implementation) { c(ie, Z.sibling), _e = x(Z, oe.children || []), _e.return = ie, ie = _e; break e } else { c(ie, Z); break } else n(ie, Z); Z = Z.sibling } _e = yd(oe, ie.mode, _e), _e.return = ie, ie = _e } return D(ie); case z: return oe = Ja(oe), ut(ie, Z, oe, _e) }if (U(oe)) return Pe(ie, Z, oe, _e); if (L(oe)) { if (Re = L(oe), typeof Re != "function") throw Error(s(150)); return oe = Re.call(oe), Le(ie, Z, oe, _e) } if (typeof oe.then == "function") return ut(ie, Z, Xo(oe), _e); if (oe.$$typeof === N) return ut(ie, Z, Ho(ie, oe), _e); Uo(ie, oe) } return typeof oe == "string" && oe !== "" || typeof oe == "number" || typeof oe == "bigint" ? (oe = "" + oe, Z !== null && Z.tag === 6 ? (c(ie, Z.sibling), _e = x(Z, oe), _e.return = ie, ie = _e) : (c(ie, Z), _e = xd(oe, ie.mode, _e), _e.return = ie, ie = _e), D(ie)) : c(ie, Z) } return function (ie, Z, oe, _e) { try { al = 0; var Re = ut(ie, Z, oe, _e); return ir = null, Re } catch (Be) { if (Be === tr || Be === qo) throw Be; var et = Li(29, Be, null, ie.mode); return et.lanes = _e, et.return = ie, et } } } var tn = Rp(!0), Lp = Rp(!1), pa = !1; function Md(a) { a.updateQueue = { baseState: a.memoizedState, firstBaseUpdate: null, lastBaseUpdate: null, shared: { pending: null, lanes: 0, hiddenCallbacks: null }, callbacks: null } } function Pd(a, n) { a = a.updateQueue, n.updateQueue === a && (n.updateQueue = { baseState: a.baseState, firstBaseUpdate: a.firstBaseUpdate, lastBaseUpdate: a.lastBaseUpdate, shared: a.shared, callbacks: null }) } function ga(a) { return { lane: a, tag: 0, payload: null, callback: null, next: null } } function ba(a, n, c) { var h = a.updateQueue; if (h === null) return null; if (h = h.shared, (st & 2) !== 0) { var x = h.pending; return x === null ? n.next = n : (n.next = x.next, x.next = n), h.pending = n, n = Ro(a), vp(a, null, c), n } return Bo(a, h, n, c), Ro(a) } function rl(a, n, c) { if (n = n.updateQueue, n !== null && (n = n.shared, (c & 4194048) !== 0)) { var h = n.lanes; h &= a.pendingLanes, c |= h, n.lanes = c, yi(a, c) } } function Od(a, n) { var c = a.updateQueue, h = a.alternate; if (h !== null && (h = h.updateQueue, c === h)) { var x = null, _ = null; if (c = c.firstBaseUpdate, c !== null) { do { var D = { lane: c.lane, tag: c.tag, payload: c.payload, callback: null, next: null }; _ === null ? x = _ = D : _ = _.next = D, c = c.next } while (c !== null); _ === null ? x = _ = n : _ = _.next = n } else x = _ = n; c = { baseState: h.baseState, firstBaseUpdate: x, lastBaseUpdate: _, shared: h.shared, callbacks: h.callbacks }, a.updateQueue = c; return } a = c.lastBaseUpdate, a === null ? c.firstBaseUpdate = n : a.next = n, c.lastBaseUpdate = n } var Ed = !1; function ll() { if (Ed) { var a = er; if (a !== null) throw a } } function ol(a, n, c, h) { Ed = !1; var x = a.updateQueue; pa = !1; var _ = x.firstBaseUpdate, D = x.lastBaseUpdate, E = x.shared.pending; if (E !== null) { x.shared.pending = null; var V = E, ue = V.next; V.next = null, D === null ? _ = ue : D.next = ue, D = V; var ye = a.alternate; ye !== null && (ye = ye.updateQueue, E = ye.lastBaseUpdate, E !== D && (E === null ? ye.firstBaseUpdate = ue : E.next = ue, ye.lastBaseUpdate = V)) } if (_ !== null) { var je = x.baseState; D = 0, ye = ue = V = null, E = _; do { var he = E.lane & -536870913, me = he !== E.lane; if (me ? ($e & he) === he : (h & he) === he) { he !== 0 && he === Jn && (Ed = !0), ye !== null && (ye = ye.next = { lane: 0, tag: E.tag, payload: E.payload, callback: null, next: null }); e: { var Pe = a, Le = E; he = n; var ut = c; switch (Le.tag) { case 1: if (Pe = Le.payload, typeof Pe == "function") { je = Pe.call(ut, je, he); break e } je = Pe; break e; case 3: Pe.flags = Pe.flags & -65537 | 128; case 0: if (Pe = Le.payload, he = typeof Pe == "function" ? Pe.call(ut, je, he) : Pe, he == null) break e; je = g({}, je, he); break e; case 2: pa = !0 } } he = E.callback, he !== null && (a.flags |= 64, me && (a.flags |= 8192), me = x.callbacks, me === null ? x.callbacks = [he] : me.push(he)) } else me = { lane: he, tag: E.tag, payload: E.payload, callback: E.callback, next: null }, ye === null ? (ue = ye = me, V = je) : ye = ye.next = me, D |= he; if (E = E.next, E === null) { if (E = x.shared.pending, E === null) break; me = E, E = me.next, me.next = null, x.lastBaseUpdate = me, x.shared.pending = null } } while (!0); ye === null && (V = je), x.baseState = V, x.firstBaseUpdate = ue, x.lastBaseUpdate = ye, _ === null && (x.shared.lanes = 0), ja |= D, a.lanes = D, a.memoizedState = je } } function zp(a, n) { if (typeof a != "function") throw Error(s(191, a)); a.call(n) } function Fp(a, n) { var c = a.callbacks; if (c !== null) for (a.callbacks = null, a = 0; a < c.length; a++)zp(c[a], n) } var sr = q(null), Vo = q(0); function Hp(a, n) { a = Ks, ce(Vo, a), ce(sr, n), Ks = a | n.baseLanes } function Bd() { ce(Vo, Ks), ce(sr, sr.current) } function Rd() { Ks = Vo.current, Q(sr), Q(Vo) } var zi = q(null), as = null; function xa(a) { var n = a.alternate; ce(Ot, Ot.current & 1), ce(zi, a), as === null && (n === null || sr.current !== null || n.memoizedState !== null) && (as = a) } function Ld(a) { ce(Ot, Ot.current), ce(zi, a), as === null && (as = a) } function Ip(a) { a.tag === 22 ? (ce(Ot, Ot.current), ce(zi, a), as === null && (as = a)) : ya() } function ya() { ce(Ot, Ot.current), ce(zi, zi.current) } function Fi(a) { Q(zi), as === a && (as = null), Q(Ot) } var Ot = q(0); function Wo(a) { for (var n = a; n !== null;) { if (n.tag === 13) { var c = n.memoizedState; if (c !== null && (c = c.dehydrated, c === null || Yh(c) || Xh(c))) return n } else if (n.tag === 19 && (n.memoizedProps.revealOrder === "forwards" || n.memoizedProps.revealOrder === "backwards" || n.memoizedProps.revealOrder === "unstable_legacy-backwards" || n.memoizedProps.revealOrder === "together")) { if ((n.flags & 128) !== 0) return n } else if (n.child !== null) { n.child.return = n, n = n.child; continue } if (n === a) break; for (; n.sibling === null;) { if (n.return === null || n.return === a) return null; n = n.return } n.sibling.return = n.return, n = n.sibling } return null } var qs = 0, Ye = null, ot = null, qt = null, Go = !1, ar = !1, sn = !1, $o = 0, cl = 0, nr = null, U_ = 0; function Ct() { throw Error(s(321)) } function zd(a, n) { if (n === null) return !1; for (var c = 0; c < n.length && c < a.length; c++)if (!Ri(a[c], n[c])) return !1; return !0 } function Fd(a, n, c, h, x, _) { return qs = _, Ye = n, n.memoizedState = null, n.updateQueue = null, n.lanes = 0, I.H = a === null || a.memoizedState === null ? kg : eh, sn = !1, _ = c(h, x), sn = !1, ar && (_ = Yp(n, c, h, x)), qp(a), _ } function qp(a) { I.H = hl; var n = ot !== null && ot.next !== null; if (qs = 0, qt = ot = Ye = null, Go = !1, cl = 0, nr = null, n) throw Error(s(300)); a === null || Yt || (a = a.dependencies, a !== null && Fo(a) && (Yt = !0)) } function Yp(a, n, c, h) { Ye = a; var x = 0; do { if (ar && (nr = null), cl = 0, ar = !1, 25 <= x) throw Error(s(301)); if (x += 1, qt = ot = null, a.updateQueue != null) { var _ = a.updateQueue; _.lastEffect = null, _.events = null, _.stores = null, _.memoCache != null && (_.memoCache.index = 0) } I.H = Sg, _ = n(c, h) } while (ar); return _ } function V_() { var a = I.H, n = a.useState()[0]; return n = typeof n.then == "function" ? ul(n) : n, a = a.useState()[0], (ot !== null ? ot.memoizedState : null) !== a && (Ye.flags |= 1024), n } function Hd() { var a = $o !== 0; return $o = 0, a } function Id(a, n, c) { n.updateQueue = a.updateQueue, n.flags &= -2053, a.lanes &= ~c } function qd(a) { if (Go) { for (a = a.memoizedState; a !== null;) { var n = a.queue; n !== null && (n.pending = null), a = a.next } Go = !1 } qs = 0, qt = ot = Ye = null, ar = !1, cl = $o = 0, nr = null } function gi() { var a = { memoizedState: null, baseState: null, baseQueue: null, queue: null, next: null }; return qt === null ? Ye.memoizedState = qt = a : qt = qt.next = a, qt } function Et() { if (ot === null) { var a = Ye.alternate; a = a !== null ? a.memoizedState : null } else a = ot.next; var n = qt === null ? Ye.memoizedState : qt.next; if (n !== null) qt = n, ot = a; else { if (a === null) throw Ye.alternate === null ? Error(s(467)) : Error(s(310)); ot = a, a = { memoizedState: ot.memoizedState, baseState: ot.baseState, baseQueue: ot.baseQueue, queue: ot.queue, next: null }, qt === null ? Ye.memoizedState = qt = a : qt = qt.next = a } return qt } function Ko() { return { lastEffect: null, events: null, stores: null, memoCache: null } } function ul(a) { var n = cl; return cl += 1, nr === null && (nr = []), a = Op(nr, a, n), n = Ye, (qt === null ? n.memoizedState : qt.next) === null && (n = n.alternate, I.H = n === null || n.memoizedState === null ? kg : eh), a } function Zo(a) { if (a !== null && typeof a == "object") { if (typeof a.then == "function") return ul(a); if (a.$$typeof === N) return ni(a) } throw Error(s(438, String(a))) } function Yd(a) { var n = null, c = Ye.updateQueue; if (c !== null && (n = c.memoCache), n == null) { var h = Ye.alternate; h !== null && (h = h.updateQueue, h !== null && (h = h.memoCache, h != null && (n = { data: h.data.map(function (x) { return x.slice() }), index: 0 }))) } if (n == null && (n = { data: [], index: 0 }), c === null && (c = Ko(), Ye.updateQueue = c), c.memoCache = n, c = n.data[n.index], c === void 0) for (c = n.data[n.index] = Array(a), h = 0; h < a; h++)c[h] = B; return n.index++, c } function Ys(a, n) { return typeof n == "function" ? n(a) : n } function Qo(a) { var n = Et(); return Xd(n, ot, a) } function Xd(a, n, c) { var h = a.queue; if (h === null) throw Error(s(311)); h.lastRenderedReducer = c; var x = a.baseQueue, _ = h.pending; if (_ !== null) { if (x !== null) { var D = x.next; x.next = _.next, _.next = D } n.baseQueue = x = _, h.pending = null } if (_ = a.baseState, x === null) a.memoizedState = _; else { n = x.next; var E = D = null, V = null, ue = n, ye = !1; do { var je = ue.lane & -536870913; if (je !== ue.lane ? ($e & je) === je : (qs & je) === je) { var he = ue.revertLane; if (he === 0) V !== null && (V = V.next = { lane: 0, revertLane: 0, gesture: null, action: ue.action, hasEagerState: ue.hasEagerState, eagerState: ue.eagerState, next: null }), je === Jn && (ye = !0); else if ((qs & he) === he) { ue = ue.next, he === Jn && (ye = !0); continue } else je = { lane: 0, revertLane: ue.revertLane, gesture: null, action: ue.action, hasEagerState: ue.hasEagerState, eagerState: ue.eagerState, next: null }, V === null ? (E = V = je, D = _) : V = V.next = je, Ye.lanes |= he, ja |= he; je = ue.action, sn && c(_, je), _ = ue.hasEagerState ? ue.eagerState : c(_, je) } else he = { lane: je, revertLane: ue.revertLane, gesture: ue.gesture, action: ue.action, hasEagerState: ue.hasEagerState, eagerState: ue.eagerState, next: null }, V === null ? (E = V = he, D = _) : V = V.next = he, Ye.lanes |= je, ja |= je; ue = ue.next } while (ue !== null && ue !== n); if (V === null ? D = _ : V.next = E, !Ri(_, a.memoizedState) && (Yt = !0, ye && (c = er, c !== null))) throw c; a.memoizedState = _, a.baseState = D, a.baseQueue = V, h.lastRenderedState = _ } return x === null && (h.lanes = 0), [a.memoizedState, h.dispatch] } function Ud(a) { var n = Et(), c = n.queue; if (c === null) throw Error(s(311)); c.lastRenderedReducer = a; var h = c.dispatch, x = c.pending, _ = n.memoizedState; if (x !== null) { c.pending = null; var D = x = x.next; do _ = a(_, D.action), D = D.next; while (D !== x); Ri(_, n.memoizedState) || (Yt = !0), n.memoizedState = _, n.baseQueue === null && (n.baseState = _), c.lastRenderedState = _ } return [_, h] } function Xp(a, n, c) { var h = Ye, x = Et(), _ = Ze; if (_) { if (c === void 0) throw Error(s(407)); c = c() } else c = n(); var D = !Ri((ot || x).memoizedState, c); if (D && (x.memoizedState = c, Yt = !0), x = x.queue, Gd(Wp.bind(null, h, x, a), [a]), x.getSnapshot !== n || D || qt !== null && qt.memoizedState.tag & 1) { if (h.flags |= 2048, rr(9, { destroy: void 0 }, Vp.bind(null, h, x, c, n), null), ft === null) throw Error(s(349)); _ || (qs & 127) !== 0 || Up(h, n, c) } return c } function Up(a, n, c) { a.flags |= 16384, a = { getSnapshot: n, value: c }, n = Ye.updateQueue, n === null ? (n = Ko(), Ye.updateQueue = n, n.stores = [a]) : (c = n.stores, c === null ? n.stores = [a] : c.push(a)) } function Vp(a, n, c, h) { n.value = c, n.getSnapshot = h, Gp(n) && $p(a) } function Wp(a, n, c) { return c(function () { Gp(n) && $p(a) }) } function Gp(a) { var n = a.getSnapshot; a = a.value; try { var c = n(); return !Ri(a, c) } catch { return !0 } } function $p(a) { var n = Wa(a, 2); n !== null && Ni(n, a, 2) } function Vd(a) { var n = gi(); if (typeof a == "function") { var c = a; if (a = c(), sn) { Kt(!0); try { c() } finally { Kt(!1) } } } return n.memoizedState = n.baseState = a, n.queue = { pending: null, lanes: 0, dispatch: null, lastRenderedReducer: Ys, lastRenderedState: a }, n } function Kp(a, n, c, h) { return a.baseState = c, Xd(a, ot, typeof h == "function" ? h : Ys) } function W_(a, n, c, h, x) { if (tc(a)) throw Error(s(485)); if (a = n.action, a !== null) { var _ = { payload: x, action: a, next: null, isTransition: !0, status: "pending", value: null, reason: null, listeners: [], then: function (D) { _.listeners.push(D) } }; I.T !== null ? c(!0) : _.isTransition = !1, h(_), c = n.pending, c === null ? (_.next = n.pending = _, Zp(n, _)) : (_.next = c.next, n.pending = c.next = _) } } function Zp(a, n) { var c = n.action, h = n.payload, x = a.state; if (n.isTransition) { var _ = I.T, D = {}; I.T = D; try { var E = c(x, h), V = I.S; V !== null && V(D, E), Qp(a, n, E) } catch (ue) { Wd(a, n, ue) } finally { _ !== null && D.types !== null && (_.types = D.types), I.T = _ } } else try { _ = c(x, h), Qp(a, n, _) } catch (ue) { Wd(a, n, ue) } } function Qp(a, n, c) { c !== null && typeof c == "object" && typeof c.then == "function" ? c.then(function (h) { Jp(a, n, h) }, function (h) { return Wd(a, n, h) }) : Jp(a, n, c) } function Jp(a, n, c) { n.status = "fulfilled", n.value = c, eg(n), a.state = c, n = a.pending, n !== null && (c = n.next, c === n ? a.pending = null : (c = c.next, n.next = c, Zp(a, c))) } function Wd(a, n, c) { var h = a.pending; if (a.pending = null, h !== null) { h = h.next; do n.status = "rejected", n.reason = c, eg(n), n = n.next; while (n !== h) } a.action = null } function eg(a) { a = a.listeners; for (var n = 0; n < a.length; n++)(0, a[n])() } function tg(a, n) { return n } function ig(a, n) { if (Ze) { var c = ft.formState; if (c !== null) { e: { var h = Ye; if (Ze) { if (bt) { t: { for (var x = bt, _ = ss; x.nodeType !== 8;) { if (!_) { x = null; break t } if (x = ns(x.nextSibling), x === null) { x = null; break t } } _ = x.data, x = _ === "F!" || _ === "F" ? x : null } if (x) { bt = ns(x.nextSibling), h = x.data === "F!"; break e } } fa(h) } h = !1 } h && (n = c[0]) } } return c = gi(), c.memoizedState = c.baseState = n, h = { pending: null, lanes: 0, dispatch: null, lastRenderedReducer: tg, lastRenderedState: n }, c.queue = h, c = _g.bind(null, Ye, h), h.dispatch = c, h = Vd(!1), _ = Jd.bind(null, Ye, !1, h.queue), h = gi(), x = { state: n, dispatch: null, action: a, pending: null }, h.queue = x, c = W_.bind(null, Ye, x, _, c), x.dispatch = c, h.memoizedState = a, [n, c, !1] } function sg(a) { var n = Et(); return ag(n, ot, a) } function ag(a, n, c) { if (n = Xd(a, n, tg)[0], a = Qo(Ys)[0], typeof n == "object" && n !== null && typeof n.then == "function") try { var h = ul(n) } catch (D) { throw D === tr ? qo : D } else h = n; n = Et(); var x = n.queue, _ = x.dispatch; return c !== n.memoizedState && (Ye.flags |= 2048, rr(9, { destroy: void 0 }, G_.bind(null, x, c), null)), [h, _, a] } function G_(a, n) { a.action = n } function ng(a) { var n = Et(), c = ot; if (c !== null) return ag(n, c, a); Et(), n = n.memoizedState, c = Et(); var h = c.queue.dispatch; return c.memoizedState = a, [n, h, !1] } function rr(a, n, c, h) { return a = { tag: a, create: c, deps: h, inst: n, next: null }, n = Ye.updateQueue, n === null && (n = Ko(), Ye.updateQueue = n), c = n.lastEffect, c === null ? n.lastEffect = a.next = a : (h = c.next, c.next = a, a.next = h, n.lastEffect = a), a } function rg() { return Et().memoizedState } function Jo(a, n, c, h) { var x = gi(); Ye.flags |= a, x.memoizedState = rr(1 | n, { destroy: void 0 }, c, h === void 0 ? null : h) } function ec(a, n, c, h) { var x = Et(); h = h === void 0 ? null : h; var _ = x.memoizedState.inst; ot !== null && h !== null && zd(h, ot.memoizedState.deps) ? x.memoizedState = rr(n, _, c, h) : (Ye.flags |= a, x.memoizedState = rr(1 | n, _, c, h)) } function lg(a, n) { Jo(8390656, 8, a, n) } function Gd(a, n) { ec(2048, 8, a, n) } function $_(a) { Ye.flags |= 4; var n = Ye.updateQueue; if (n === null) n = Ko(), Ye.updateQueue = n, n.events = [a]; else { var c = n.events; c === null ? n.events = [a] : c.push(a) } } function og(a) { var n = Et().memoizedState; return $_({ ref: n, nextImpl: a }), function () { if ((st & 2) !== 0) throw Error(s(440)); return n.impl.apply(void 0, arguments) } } function cg(a, n) { return ec(4, 2, a, n) } function ug(a, n) { return ec(4, 4, a, n) } function dg(a, n) { if (typeof n == "function") { a = a(); var c = n(a); return function () { typeof c == "function" ? c() : n(null) } } if (n != null) return a = a(), n.current = a, function () { n.current = null } } function hg(a, n, c) { c = c != null ? c.concat([a]) : null, ec(4, 4, dg.bind(null, n, a), c) } function $d() { } function fg(a, n) { var c = Et(); n = n === void 0 ? null : n; var h = c.memoizedState; return n !== null && zd(n, h[1]) ? h[0] : (c.memoizedState = [a, n], a) } function mg(a, n) { var c = Et(); n = n === void 0 ? null : n; var h = c.memoizedState; if (n !== null && zd(n, h[1])) return h[0]; if (h = a(), sn) { Kt(!0); try { a() } finally { Kt(!1) } } return c.memoizedState = [h, n], h } function Kd(a, n, c) { return c === void 0 || (qs & 1073741824) !== 0 && ($e & 261930) === 0 ? a.memoizedState = n : (a.memoizedState = c, a = pb(), Ye.lanes |= a, ja |= a, c) } function pg(a, n, c, h) { return Ri(c, n) ? c : sr.current !== null ? (a = Kd(a, c, h), Ri(a, n) || (Yt = !0), a) : (qs & 42) === 0 || (qs & 1073741824) !== 0 && ($e & 261930) === 0 ? (Yt = !0, a.memoizedState = c) : (a = pb(), Ye.lanes |= a, ja |= a, n) } function gg(a, n, c, h, x) { var _ = H.p; H.p = _ !== 0 && 8 > _ ? _ : 8; var D = I.T, E = {}; I.T = E, Jd(a, !1, n, c); try { var V = x(), ue = I.S; if (ue !== null && ue(E, V), V !== null && typeof V == "object" && typeof V.then == "function") { var ye = X_(V, h); dl(a, n, ye, qi(a)) } else dl(a, n, h, qi(a)) } catch (je) { dl(a, n, { then: function () { }, status: "rejected", reason: je }, qi()) } finally { H.p = _, D !== null && E.types !== null && (D.types = E.types), I.T = D } } function K_() { } function Zd(a, n, c, h) { if (a.tag !== 5) throw Error(s(476)); var x = bg(a).queue; gg(a, x, n, Y, c === null ? K_ : function () { return xg(a), c(h) }) } function bg(a) { var n = a.memoizedState; if (n !== null) return n; n = { memoizedState: Y, baseState: Y, baseQueue: null, queue: { pending: null, lanes: 0, dispatch: null, lastRenderedReducer: Ys, lastRenderedState: Y }, next: null }; var c = {}; return n.next = { memoizedState: c, baseState: c, baseQueue: null, queue: { pending: null, lanes: 0, dispatch: null, lastRenderedReducer: Ys, lastRenderedState: c }, next: null }, a.memoizedState = n, a = a.alternate, a !== null && (a.memoizedState = n), n } function xg(a) { var n = bg(a); n.next === null && (n = a.alternate.memoizedState), dl(a, n.next.queue, {}, qi()) } function Qd() { return ni(Tl) } function yg() { return Et().memoizedState } function vg() { return Et().memoizedState } function Z_(a) { for (var n = a.return; n !== null;) { switch (n.tag) { case 24: case 3: var c = qi(); a = ga(c); var h = ba(n, a, c); h !== null && (Ni(h, n, c), rl(h, n, c)), n = { cache: Cd() }, a.payload = n; return }n = n.return } } function Q_(a, n, c) { var h = qi(); c = { lane: h, revertLane: 0, gesture: null, action: c, hasEagerState: !1, eagerState: null, next: null }, tc(a) ? jg(n, c) : (c = gd(a, n, c, h), c !== null && (Ni(c, a, h), wg(c, n, h))) } function _g(a, n, c) { var h = qi(); dl(a, n, c, h) } function dl(a, n, c, h) { var x = { lane: h, revertLane: 0, gesture: null, action: c, hasEagerState: !1, eagerState: null, next: null }; if (tc(a)) jg(n, x); else { var _ = a.alternate; if (a.lanes === 0 && (_ === null || _.lanes === 0) && (_ = n.lastRenderedReducer, _ !== null)) try { var D = n.lastRenderedState, E = _(D, c); if (x.hasEagerState = !0, x.eagerState = E, Ri(E, D)) return Bo(a, n, x, 0), ft === null && Eo(), !1 } catch { } if (c = gd(a, n, x, h), c !== null) return Ni(c, a, h), wg(c, n, h), !0 } return !1 } function Jd(a, n, c, h) { if (h = { lane: 2, revertLane: Mh(), gesture: null, action: h, hasEagerState: !1, eagerState: null, next: null }, tc(a)) { if (n) throw Error(s(479)) } else n = gd(a, c, h, 2), n !== null && Ni(n, a, 2) } function tc(a) { var n = a.alternate; return a === Ye || n !== null && n === Ye } function jg(a, n) { ar = Go = !0; var c = a.pending; c === null ? n.next = n : (n.next = c.next, c.next = n), a.pending = n } function wg(a, n, c) { if ((c & 4194048) !== 0) { var h = n.lanes; h &= a.pendingLanes, c |= h, n.lanes = c, yi(a, c) } } var hl = { readContext: ni, use: Zo, useCallback: Ct, useContext: Ct, useEffect: Ct, useImperativeHandle: Ct, useLayoutEffect: Ct, useInsertionEffect: Ct, useMemo: Ct, useReducer: Ct, useRef: Ct, useState: Ct, useDebugValue: Ct, useDeferredValue: Ct, useTransition: Ct, useSyncExternalStore: Ct, useId: Ct, useHostTransitionStatus: Ct, useFormState: Ct, useActionState: Ct, useOptimistic: Ct, useMemoCache: Ct, useCacheRefresh: Ct }; hl.useEffectEvent = Ct; var kg = { readContext: ni, use: Zo, useCallback: function (a, n) { return gi().memoizedState = [a, n === void 0 ? null : n], a }, useContext: ni, useEffect: lg, useImperativeHandle: function (a, n, c) { c = c != null ? c.concat([a]) : null, Jo(4194308, 4, dg.bind(null, n, a), c) }, useLayoutEffect: function (a, n) { return Jo(4194308, 4, a, n) }, useInsertionEffect: function (a, n) { Jo(4, 2, a, n) }, useMemo: function (a, n) { var c = gi(); n = n === void 0 ? null : n; var h = a(); if (sn) { Kt(!0); try { a() } finally { Kt(!1) } } return c.memoizedState = [h, n], h }, useReducer: function (a, n, c) { var h = gi(); if (c !== void 0) { var x = c(n); if (sn) { Kt(!0); try { c(n) } finally { Kt(!1) } } } else x = n; return h.memoizedState = h.baseState = x, a = { pending: null, lanes: 0, dispatch: null, lastRenderedReducer: a, lastRenderedState: x }, h.queue = a, a = a.dispatch = Q_.bind(null, Ye, a), [h.memoizedState, a] }, useRef: function (a) { var n = gi(); return a = { current: a }, n.memoizedState = a }, useState: function (a) { a = Vd(a); var n = a.queue, c = _g.bind(null, Ye, n); return n.dispatch = c, [a.memoizedState, c] }, useDebugValue: $d, useDeferredValue: function (a, n) { var c = gi(); return Kd(c, a, n) }, useTransition: function () { var a = Vd(!1); return a = gg.bind(null, Ye, a.queue, !0, !1), gi().memoizedState = a, [!1, a] }, useSyncExternalStore: function (a, n, c) { var h = Ye, x = gi(); if (Ze) { if (c === void 0) throw Error(s(407)); c = c() } else { if (c = n(), ft === null) throw Error(s(349)); ($e & 127) !== 0 || Up(h, n, c) } x.memoizedState = c; var _ = { value: c, getSnapshot: n }; return x.queue = _, lg(Wp.bind(null, h, _, a), [a]), h.flags |= 2048, rr(9, { destroy: void 0 }, Vp.bind(null, h, _, c, n), null), c }, useId: function () { var a = gi(), n = ft.identifierPrefix; if (Ze) { var c = Ss, h = ks; c = (h & ~(1 << 32 - Nt(h) - 1)).toString(32) + c, n = "_" + n + "R_" + c, c = $o++, 0 < c && (n += "H" + c.toString(32)), n += "_" } else c = U_++, n = "_" + n + "r_" + c.toString(32) + "_"; return a.memoizedState = n }, useHostTransitionStatus: Qd, useFormState: ig, useActionState: ig, useOptimistic: function (a) { var n = gi(); n.memoizedState = n.baseState = a; var c = { pending: null, lanes: 0, dispatch: null, lastRenderedReducer: null, lastRenderedState: null }; return n.queue = c, n = Jd.bind(null, Ye, !0, c), c.dispatch = n, [a, n] }, useMemoCache: Yd, useCacheRefresh: function () { return gi().memoizedState = Z_.bind(null, Ye) }, useEffectEvent: function (a) { var n = gi(), c = { impl: a }; return n.memoizedState = c, function () { if ((st & 2) !== 0) throw Error(s(440)); return c.impl.apply(void 0, arguments) } } }, eh = { readContext: ni, use: Zo, useCallback: fg, useContext: ni, useEffect: Gd, useImperativeHandle: hg, useInsertionEffect: cg, useLayoutEffect: ug, useMemo: mg, useReducer: Qo, useRef: rg, useState: function () { return Qo(Ys) }, useDebugValue: $d, useDeferredValue: function (a, n) { var c = Et(); return pg(c, ot.memoizedState, a, n) }, useTransition: function () { var a = Qo(Ys)[0], n = Et().memoizedState; return [typeof a == "boolean" ? a : ul(a), n] }, useSyncExternalStore: Xp, useId: yg, useHostTransitionStatus: Qd, useFormState: sg, useActionState: sg, useOptimistic: function (a, n) { var c = Et(); return Kp(c, ot, a, n) }, useMemoCache: Yd, useCacheRefresh: vg }; eh.useEffectEvent = og; var Sg = { readContext: ni, use: Zo, useCallback: fg, useContext: ni, useEffect: Gd, useImperativeHandle: hg, useInsertionEffect: cg, useLayoutEffect: ug, useMemo: mg, useReducer: Ud, useRef: rg, useState: function () { return Ud(Ys) }, useDebugValue: $d, useDeferredValue: function (a, n) { var c = Et(); return ot === null ? Kd(c, a, n) : pg(c, ot.memoizedState, a, n) }, useTransition: function () { var a = Ud(Ys)[0], n = Et().memoizedState; return [typeof a == "boolean" ? a : ul(a), n] }, useSyncExternalStore: Xp, useId: yg, useHostTransitionStatus: Qd, useFormState: ng, useActionState: ng, useOptimistic: function (a, n) { var c = Et(); return ot !== null ? Kp(c, ot, a, n) : (c.baseState = a, [a, c.queue.dispatch]) }, useMemoCache: Yd, useCacheRefresh: vg }; Sg.useEffectEvent = og; function th(a, n, c, h) { n = a.memoizedState, c = c(h, n), c = c == null ? n : g({}, n, c), a.memoizedState = c, a.lanes === 0 && (a.updateQueue.baseState = c) } var ih = { enqueueSetState: function (a, n, c) { a = a._reactInternals; var h = qi(), x = ga(h); x.payload = n, c != null && (x.callback = c), n = ba(a, x, h), n !== null && (Ni(n, a, h), rl(n, a, h)) }, enqueueReplaceState: function (a, n, c) { a = a._reactInternals; var h = qi(), x = ga(h); x.tag = 1, x.payload = n, c != null && (x.callback = c), n = ba(a, x, h), n !== null && (Ni(n, a, h), rl(n, a, h)) }, enqueueForceUpdate: function (a, n) { a = a._reactInternals; var c = qi(), h = ga(c); h.tag = 2, n != null && (h.callback = n), n = ba(a, h, c), n !== null && (Ni(n, a, c), rl(n, a, c)) } }; function Ng(a, n, c, h, x, _, D) { return a = a.stateNode, typeof a.shouldComponentUpdate == "function" ? a.shouldComponentUpdate(h, _, D) : n.prototype && n.prototype.isPureReactComponent ? !Qr(c, h) || !Qr(x, _) : !0 } function Cg(a, n, c, h) { a = n.state, typeof n.componentWillReceiveProps == "function" && n.componentWillReceiveProps(c, h), typeof n.UNSAFE_componentWillReceiveProps == "function" && n.UNSAFE_componentWillReceiveProps(c, h), n.state !== a && ih.enqueueReplaceState(n, n.state, null) } function an(a, n) { var c = n; if ("ref" in n) { c = {}; for (var h in n) h !== "ref" && (c[h] = n[h]) } if (a = a.defaultProps) { c === n && (c = g({}, c)); for (var x in a) c[x] === void 0 && (c[x] = a[x]) } return c } function Tg(a) { Oo(a) } function Dg(a) { console.error(a) } function Ag(a) { Oo(a) } function ic(a, n) { try { var c = a.onUncaughtError; c(n.value, { componentStack: n.stack }) } catch (h) { setTimeout(function () { throw h }) } } function Mg(a, n, c) { try { var h = a.onCaughtError; h(c.value, { componentStack: c.stack, errorBoundary: n.tag === 1 ? n.stateNode : null }) } catch (x) { setTimeout(function () { throw x }) } } function sh(a, n, c) { return c = ga(c), c.tag = 3, c.payload = { element: null }, c.callback = function () { ic(a, n) }, c } function Pg(a) { return a = ga(a), a.tag = 3, a } function Og(a, n, c, h) { var x = c.type.getDerivedStateFromError; if (typeof x == "function") { var _ = h.value; a.payload = function () { return x(_) }, a.callback = function () { Mg(n, c, h) } } var D = c.stateNode; D !== null && typeof D.componentDidCatch == "function" && (a.callback = function () { Mg(n, c, h), typeof x != "function" && (wa === null ? wa = new Set([this]) : wa.add(this)); var E = h.stack; this.componentDidCatch(h.value, { componentStack: E !== null ? E : "" }) }) } function J_(a, n, c, h, x) { if (c.flags |= 32768, h !== null && typeof h == "object" && typeof h.then == "function") { if (n = c.alternate, n !== null && Qn(n, c, x, !0), c = zi.current, c !== null) { switch (c.tag) { case 31: case 13: return as === null ? mc() : c.alternate === null && Tt === 0 && (Tt = 3), c.flags &= -257, c.flags |= 65536, c.lanes = x, h === Yo ? c.flags |= 16384 : (n = c.updateQueue, n === null ? c.updateQueue = new Set([h]) : n.add(h), Th(a, h, x)), !1; case 22: return c.flags |= 65536, h === Yo ? c.flags |= 16384 : (n = c.updateQueue, n === null ? (n = { transitions: null, markerInstances: null, retryQueue: new Set([h]) }, c.updateQueue = n) : (c = n.retryQueue, c === null ? n.retryQueue = new Set([h]) : c.add(h)), Th(a, h, x)), !1 }throw Error(s(435, c.tag)) } return Th(a, h, x), mc(), !1 } if (Ze) return n = zi.current, n !== null ? ((n.flags & 65536) === 0 && (n.flags |= 256), n.flags |= 65536, n.lanes = x, h !== jd && (a = Error(s(422), { cause: h }), tl(es(a, c)))) : (h !== jd && (n = Error(s(423), { cause: h }), tl(es(n, c))), a = a.current.alternate, a.flags |= 65536, x &= -x, a.lanes |= x, h = es(h, c), x = sh(a.stateNode, h, x), Od(a, x), Tt !== 4 && (Tt = 2)), !1; var _ = Error(s(520), { cause: h }); if (_ = es(_, c), vl === null ? vl = [_] : vl.push(_), Tt !== 4 && (Tt = 2), n === null) return !0; h = es(h, c), c = n; do { switch (c.tag) { case 3: return c.flags |= 65536, a = x & -x, c.lanes |= a, a = sh(c.stateNode, h, a), Od(c, a), !1; case 1: if (n = c.type, _ = c.stateNode, (c.flags & 128) === 0 && (typeof n.getDerivedStateFromError == "function" || _ !== null && typeof _.componentDidCatch == "function" && (wa === null || !wa.has(_)))) return c.flags |= 65536, x &= -x, c.lanes |= x, x = Pg(x), Og(x, a, c, h), Od(c, x), !1 }c = c.return } while (c !== null); return !1 } var ah = Error(s(461)), Yt = !1; function ri(a, n, c, h) { n.child = a === null ? Lp(n, null, c, h) : tn(n, a.child, c, h) } function Eg(a, n, c, h, x) { c = c.render; var _ = n.ref; if ("ref" in h) { var D = {}; for (var E in h) E !== "ref" && (D[E] = h[E]) } else D = h; return Za(n), h = Fd(a, n, c, D, _, x), E = Hd(), a !== null && !Yt ? (Id(a, n, x), Xs(a, n, x)) : (Ze && E && vd(n), n.flags |= 1, ri(a, n, h, x), n.child) } function Bg(a, n, c, h, x) { if (a === null) { var _ = c.type; return typeof _ == "function" && !bd(_) && _.defaultProps === void 0 && c.compare === null ? (n.tag = 15, n.type = _, Rg(a, n, _, h, x)) : (a = Lo(c.type, null, h, n, n.mode, x), a.ref = n.ref, a.return = n, n.child = a) } if (_ = a.child, !hh(a, x)) { var D = _.memoizedProps; if (c = c.compare, c = c !== null ? c : Qr, c(D, h) && a.ref === n.ref) return Xs(a, n, x) } return n.flags |= 1, a = zs(_, h), a.ref = n.ref, a.return = n, n.child = a } function Rg(a, n, c, h, x) { if (a !== null) { var _ = a.memoizedProps; if (Qr(_, h) && a.ref === n.ref) if (Yt = !1, n.pendingProps = h = _, hh(a, x)) (a.flags & 131072) !== 0 && (Yt = !0); else return n.lanes = a.lanes, Xs(a, n, x) } return nh(a, n, c, h, x) } function Lg(a, n, c, h) { var x = h.children, _ = a !== null ? a.memoizedState : null; if (a === null && n.stateNode === null && (n.stateNode = { _visibility: 1, _pendingMarkers: null, _retryCache: null, _transitions: null }), h.mode === "hidden") { if ((n.flags & 128) !== 0) { if (_ = _ !== null ? _.baseLanes | c : c, a !== null) { for (h = n.child = a.child, x = 0; h !== null;)x = x | h.lanes | h.childLanes, h = h.sibling; h = x & ~_ } else h = 0, n.child = null; return zg(a, n, _, c, h) } if ((c & 536870912) !== 0) n.memoizedState = { baseLanes: 0, cachePool: null }, a !== null && Io(n, _ !== null ? _.cachePool : null), _ !== null ? Hp(n, _) : Bd(), Ip(n); else return h = n.lanes = 536870912, zg(a, n, _ !== null ? _.baseLanes | c : c, c, h) } else _ !== null ? (Io(n, _.cachePool), Hp(n, _), ya(), n.memoizedState = null) : (a !== null && Io(n, null), Bd(), ya()); return ri(a, n, x, c), n.child } function fl(a, n) { return a !== null && a.tag === 22 || n.stateNode !== null || (n.stateNode = { _visibility: 1, _pendingMarkers: null, _retryCache: null, _transitions: null }), n.sibling } function zg(a, n, c, h, x) { var _ = Dd(); return _ = _ === null ? null : { parent: It._currentValue, pool: _ }, n.memoizedState = { baseLanes: c, cachePool: _ }, a !== null && Io(n, null), Bd(), Ip(n), a !== null && Qn(a, n, h, !0), n.childLanes = x, null } function sc(a, n) { return n = nc({ mode: n.mode, children: n.children }, a.mode), n.ref = a.ref, a.child = n, n.return = a, n } function Fg(a, n, c) { return tn(n, a.child, null, c), a = sc(n, n.pendingProps), a.flags |= 2, Fi(n), n.memoizedState = null, a } function e1(a, n, c) { var h = n.pendingProps, x = (n.flags & 128) !== 0; if (n.flags &= -129, a === null) { if (Ze) { if (h.mode === "hidden") return a = sc(n, h), n.lanes = 536870912, fl(null, a); if (Ld(n), (a = bt) ? (a = Zb(a, ss), a = a !== null && a.data === "&" ? a : null, a !== null && (n.memoizedState = { dehydrated: a, treeContext: da !== null ? { id: ks, overflow: Ss } : null, retryLane: 536870912, hydrationErrors: null }, c = jp(a), c.return = n, n.child = c, ai = n, bt = null)) : a = null, a === null) throw fa(n); return n.lanes = 536870912, null } return sc(n, h) } var _ = a.memoizedState; if (_ !== null) { var D = _.dehydrated; if (Ld(n), x) if (n.flags & 256) n.flags &= -257, n = Fg(a, n, c); else if (n.memoizedState !== null) n.child = a.child, n.flags |= 128, n = null; else throw Error(s(558)); else if (Yt || Qn(a, n, c, !1), x = (c & a.childLanes) !== 0, Yt || x) { if (h = ft, h !== null && (D = hs(h, c), D !== 0 && D !== _.retryLane)) throw _.retryLane = D, Wa(a, D), Ni(h, a, D), ah; mc(), n = Fg(a, n, c) } else a = _.treeContext, bt = ns(D.nextSibling), ai = n, Ze = !0, ha = null, ss = !1, a !== null && Sp(n, a), n = sc(n, h), n.flags |= 4096; return n } return a = zs(a.child, { mode: h.mode, children: h.children }), a.ref = n.ref, n.child = a, a.return = n, a } function ac(a, n) { var c = n.ref; if (c === null) a !== null && a.ref !== null && (n.flags |= 4194816); else { if (typeof c != "function" && typeof c != "object") throw Error(s(284)); (a === null || a.ref !== c) && (n.flags |= 4194816) } } function nh(a, n, c, h, x) { return Za(n), c = Fd(a, n, c, h, void 0, x), h = Hd(), a !== null && !Yt ? (Id(a, n, x), Xs(a, n, x)) : (Ze && h && vd(n), n.flags |= 1, ri(a, n, c, x), n.child) } function Hg(a, n, c, h, x, _) { return Za(n), n.updateQueue = null, c = Yp(n, h, c, x), qp(a), h = Hd(), a !== null && !Yt ? (Id(a, n, _), Xs(a, n, _)) : (Ze && h && vd(n), n.flags |= 1, ri(a, n, c, _), n.child) } function Ig(a, n, c, h, x) { if (Za(n), n.stateNode === null) { var _ = Gn, D = c.contextType; typeof D == "object" && D !== null && (_ = ni(D)), _ = new c(h, _), n.memoizedState = _.state !== null && _.state !== void 0 ? _.state : null, _.updater = ih, n.stateNode = _, _._reactInternals = n, _ = n.stateNode, _.props = h, _.state = n.memoizedState, _.refs = {}, Md(n), D = c.contextType, _.context = typeof D == "object" && D !== null ? ni(D) : Gn, _.state = n.memoizedState, D = c.getDerivedStateFromProps, typeof D == "function" && (th(n, c, D, h), _.state = n.memoizedState), typeof c.getDerivedStateFromProps == "function" || typeof _.getSnapshotBeforeUpdate == "function" || typeof _.UNSAFE_componentWillMount != "function" && typeof _.componentWillMount != "function" || (D = _.state, typeof _.componentWillMount == "function" && _.componentWillMount(), typeof _.UNSAFE_componentWillMount == "function" && _.UNSAFE_componentWillMount(), D !== _.state && ih.enqueueReplaceState(_, _.state, null), ol(n, h, _, x), ll(), _.state = n.memoizedState), typeof _.componentDidMount == "function" && (n.flags |= 4194308), h = !0 } else if (a === null) { _ = n.stateNode; var E = n.memoizedProps, V = an(c, E); _.props = V; var ue = _.context, ye = c.contextType; D = Gn, typeof ye == "object" && ye !== null && (D = ni(ye)); var je = c.getDerivedStateFromProps; ye = typeof je == "function" || typeof _.getSnapshotBeforeUpdate == "function", E = n.pendingProps !== E, ye || typeof _.UNSAFE_componentWillReceiveProps != "function" && typeof _.componentWillReceiveProps != "function" || (E || ue !== D) && Cg(n, _, h, D), pa = !1; var he = n.memoizedState; _.state = he, ol(n, h, _, x), ll(), ue = n.memoizedState, E || he !== ue || pa ? (typeof je == "function" && (th(n, c, je, h), ue = n.memoizedState), (V = pa || Ng(n, c, V, h, he, ue, D)) ? (ye || typeof _.UNSAFE_componentWillMount != "function" && typeof _.componentWillMount != "function" || (typeof _.componentWillMount == "function" && _.componentWillMount(), typeof _.UNSAFE_componentWillMount == "function" && _.UNSAFE_componentWillMount()), typeof _.componentDidMount == "function" && (n.flags |= 4194308)) : (typeof _.componentDidMount == "function" && (n.flags |= 4194308), n.memoizedProps = h, n.memoizedState = ue), _.props = h, _.state = ue, _.context = D, h = V) : (typeof _.componentDidMount == "function" && (n.flags |= 4194308), h = !1) } else { _ = n.stateNode, Pd(a, n), D = n.memoizedProps, ye = an(c, D), _.props = ye, je = n.pendingProps, he = _.context, ue = c.contextType, V = Gn, typeof ue == "object" && ue !== null && (V = ni(ue)), E = c.getDerivedStateFromProps, (ue = typeof E == "function" || typeof _.getSnapshotBeforeUpdate == "function") || typeof _.UNSAFE_componentWillReceiveProps != "function" && typeof _.componentWillReceiveProps != "function" || (D !== je || he !== V) && Cg(n, _, h, V), pa = !1, he = n.memoizedState, _.state = he, ol(n, h, _, x), ll(); var me = n.memoizedState; D !== je || he !== me || pa || a !== null && a.dependencies !== null && Fo(a.dependencies) ? (typeof E == "function" && (th(n, c, E, h), me = n.memoizedState), (ye = pa || Ng(n, c, ye, h, he, me, V) || a !== null && a.dependencies !== null && Fo(a.dependencies)) ? (ue || typeof _.UNSAFE_componentWillUpdate != "function" && typeof _.componentWillUpdate != "function" || (typeof _.componentWillUpdate == "function" && _.componentWillUpdate(h, me, V), typeof _.UNSAFE_componentWillUpdate == "function" && _.UNSAFE_componentWillUpdate(h, me, V)), typeof _.componentDidUpdate == "function" && (n.flags |= 4), typeof _.getSnapshotBeforeUpdate == "function" && (n.flags |= 1024)) : (typeof _.componentDidUpdate != "function" || D === a.memoizedProps && he === a.memoizedState || (n.flags |= 4), typeof _.getSnapshotBeforeUpdate != "function" || D === a.memoizedProps && he === a.memoizedState || (n.flags |= 1024), n.memoizedProps = h, n.memoizedState = me), _.props = h, _.state = me, _.context = V, h = ye) : (typeof _.componentDidUpdate != "function" || D === a.memoizedProps && he === a.memoizedState || (n.flags |= 4), typeof _.getSnapshotBeforeUpdate != "function" || D === a.memoizedProps && he === a.memoizedState || (n.flags |= 1024), h = !1) } return _ = h, ac(a, n), h = (n.flags & 128) !== 0, _ || h ? (_ = n.stateNode, c = h && typeof c.getDerivedStateFromError != "function" ? null : _.render(), n.flags |= 1, a !== null && h ? (n.child = tn(n, a.child, null, x), n.child = tn(n, null, c, x)) : ri(a, n, c, x), n.memoizedState = _.state, a = n.child) : a = Xs(a, n, x), a } function qg(a, n, c, h) { return $a(), n.flags |= 256, ri(a, n, c, h), n.child } var rh = { dehydrated: null, treeContext: null, retryLane: 0, hydrationErrors: null }; function lh(a) { return { baseLanes: a, cachePool: Mp() } } function oh(a, n, c) { return a = a !== null ? a.childLanes & ~c : 0, n && (a |= Ii), a } function Yg(a, n, c) { var h = n.pendingProps, x = !1, _ = (n.flags & 128) !== 0, D; if ((D = _) || (D = a !== null && a.memoizedState === null ? !1 : (Ot.current & 2) !== 0), D && (x = !0, n.flags &= -129), D = (n.flags & 32) !== 0, n.flags &= -33, a === null) { if (Ze) { if (x ? xa(n) : ya(), (a = bt) ? (a = Zb(a, ss), a = a !== null && a.data !== "&" ? a : null, a !== null && (n.memoizedState = { dehydrated: a, treeContext: da !== null ? { id: ks, overflow: Ss } : null, retryLane: 536870912, hydrationErrors: null }, c = jp(a), c.return = n, n.child = c, ai = n, bt = null)) : a = null, a === null) throw fa(n); return Xh(a) ? n.lanes = 32 : n.lanes = 536870912, null } var E = h.children; return h = h.fallback, x ? (ya(), x = n.mode, E = nc({ mode: "hidden", children: E }, x), h = Ga(h, x, c, null), E.return = n, h.return = n, E.sibling = h, n.child = E, h = n.child, h.memoizedState = lh(c), h.childLanes = oh(a, D, c), n.memoizedState = rh, fl(null, h)) : (xa(n), ch(n, E)) } var V = a.memoizedState; if (V !== null && (E = V.dehydrated, E !== null)) { if (_) n.flags & 256 ? (xa(n), n.flags &= -257, n = uh(a, n, c)) : n.memoizedState !== null ? (ya(), n.child = a.child, n.flags |= 128, n = null) : (ya(), E = h.fallback, x = n.mode, h = nc({ mode: "visible", children: h.children }, x), E = Ga(E, x, c, null), E.flags |= 2, h.return = n, E.return = n, h.sibling = E, n.child = h, tn(n, a.child, null, c), h = n.child, h.memoizedState = lh(c), h.childLanes = oh(a, D, c), n.memoizedState = rh, n = fl(null, h)); else if (xa(n), Xh(E)) { if (D = E.nextSibling && E.nextSibling.dataset, D) var ue = D.dgst; D = ue, h = Error(s(419)), h.stack = "", h.digest = D, tl({ value: h, source: null, stack: null }), n = uh(a, n, c) } else if (Yt || Qn(a, n, c, !1), D = (c & a.childLanes) !== 0, Yt || D) { if (D = ft, D !== null && (h = hs(D, c), h !== 0 && h !== V.retryLane)) throw V.retryLane = h, Wa(a, h), Ni(D, a, h), ah; Yh(E) || mc(), n = uh(a, n, c) } else Yh(E) ? (n.flags |= 192, n.child = a.child, n = null) : (a = V.treeContext, bt = ns(E.nextSibling), ai = n, Ze = !0, ha = null, ss = !1, a !== null && Sp(n, a), n = ch(n, h.children), n.flags |= 4096); return n } return x ? (ya(), E = h.fallback, x = n.mode, V = a.child, ue = V.sibling, h = zs(V, { mode: "hidden", children: h.children }), h.subtreeFlags = V.subtreeFlags & 65011712, ue !== null ? E = zs(ue, E) : (E = Ga(E, x, c, null), E.flags |= 2), E.return = n, h.return = n, h.sibling = E, n.child = h, fl(null, h), h = n.child, E = a.child.memoizedState, E === null ? E = lh(c) : (x = E.cachePool, x !== null ? (V = It._currentValue, x = x.parent !== V ? { parent: V, pool: V } : x) : x = Mp(), E = { baseLanes: E.baseLanes | c, cachePool: x }), h.memoizedState = E, h.childLanes = oh(a, D, c), n.memoizedState = rh, fl(a.child, h)) : (xa(n), c = a.child, a = c.sibling, c = zs(c, { mode: "visible", children: h.children }), c.return = n, c.sibling = null, a !== null && (D = n.deletions, D === null ? (n.deletions = [a], n.flags |= 16) : D.push(a)), n.child = c, n.memoizedState = null, c) } function ch(a, n) { return n = nc({ mode: "visible", children: n }, a.mode), n.return = a, a.child = n } function nc(a, n) { return a = Li(22, a, null, n), a.lanes = 0, a } function uh(a, n, c) { return tn(n, a.child, null, c), a = ch(n, n.pendingProps.children), a.flags |= 2, n.memoizedState = null, a } function Xg(a, n, c) { a.lanes |= n; var h = a.alternate; h !== null && (h.lanes |= n), Sd(a.return, n, c) } function dh(a, n, c, h, x, _) { var D = a.memoizedState; D === null ? a.memoizedState = { isBackwards: n, rendering: null, renderingStartTime: 0, last: h, tail: c, tailMode: x, treeForkCount: _ } : (D.isBackwards = n, D.rendering = null, D.renderingStartTime = 0, D.last = h, D.tail = c, D.tailMode = x, D.treeForkCount = _) } function Ug(a, n, c) { var h = n.pendingProps, x = h.revealOrder, _ = h.tail; h = h.children; var D = Ot.current, E = (D & 2) !== 0; if (E ? (D = D & 1 | 2, n.flags |= 128) : D &= 1, ce(Ot, D), ri(a, n, h, c), h = Ze ? el : 0, !E && a !== null && (a.flags & 128) !== 0) e: for (a = n.child; a !== null;) { if (a.tag === 13) a.memoizedState !== null && Xg(a, c, n); else if (a.tag === 19) Xg(a, c, n); else if (a.child !== null) { a.child.return = a, a = a.child; continue } if (a === n) break e; for (; a.sibling === null;) { if (a.return === null || a.return === n) break e; a = a.return } a.sibling.return = a.return, a = a.sibling } switch (x) { case "forwards": for (c = n.child, x = null; c !== null;)a = c.alternate, a !== null && Wo(a) === null && (x = c), c = c.sibling; c = x, c === null ? (x = n.child, n.child = null) : (x = c.sibling, c.sibling = null), dh(n, !1, x, c, _, h); break; case "backwards": case "unstable_legacy-backwards": for (c = null, x = n.child, n.child = null; x !== null;) { if (a = x.alternate, a !== null && Wo(a) === null) { n.child = x; break } a = x.sibling, x.sibling = c, c = x, x = a } dh(n, !0, c, null, _, h); break; case "together": dh(n, !1, null, null, void 0, h); break; default: n.memoizedState = null }return n.child } function Xs(a, n, c) { if (a !== null && (n.dependencies = a.dependencies), ja |= n.lanes, (c & n.childLanes) === 0) if (a !== null) { if (Qn(a, n, c, !1), (c & n.childLanes) === 0) return null } else return null; if (a !== null && n.child !== a.child) throw Error(s(153)); if (n.child !== null) { for (a = n.child, c = zs(a, a.pendingProps), n.child = c, c.return = n; a.sibling !== null;)a = a.sibling, c = c.sibling = zs(a, a.pendingProps), c.return = n; c.sibling = null } return n.child } function hh(a, n) { return (a.lanes & n) !== 0 ? !0 : (a = a.dependencies, !!(a !== null && Fo(a))) } function t1(a, n, c) { switch (n.tag) { case 3: ge(n, n.stateNode.containerInfo), ma(n, It, a.memoizedState.cache), $a(); break; case 27: case 5: Se(n); break; case 4: ge(n, n.stateNode.containerInfo); break; case 10: ma(n, n.type, n.memoizedProps.value); break; case 31: if (n.memoizedState !== null) return n.flags |= 128, Ld(n), null; break; case 13: var h = n.memoizedState; if (h !== null) return h.dehydrated !== null ? (xa(n), n.flags |= 128, null) : (c & n.child.childLanes) !== 0 ? Yg(a, n, c) : (xa(n), a = Xs(a, n, c), a !== null ? a.sibling : null); xa(n); break; case 19: var x = (a.flags & 128) !== 0; if (h = (c & n.childLanes) !== 0, h || (Qn(a, n, c, !1), h = (c & n.childLanes) !== 0), x) { if (h) return Ug(a, n, c); n.flags |= 128 } if (x = n.memoizedState, x !== null && (x.rendering = null, x.tail = null, x.lastEffect = null), ce(Ot, Ot.current), h) break; return null; case 22: return n.lanes = 0, Lg(a, n, c, n.pendingProps); case 24: ma(n, It, a.memoizedState.cache) }return Xs(a, n, c) } function Vg(a, n, c) { if (a !== null) if (a.memoizedProps !== n.pendingProps) Yt = !0; else { if (!hh(a, c) && (n.flags & 128) === 0) return Yt = !1, t1(a, n, c); Yt = (a.flags & 131072) !== 0 } else Yt = !1, Ze && (n.flags & 1048576) !== 0 && kp(n, el, n.index); switch (n.lanes = 0, n.tag) { case 16: e: { var h = n.pendingProps; if (a = Ja(n.elementType), n.type = a, typeof a == "function") bd(a) ? (h = an(a, h), n.tag = 1, n = Ig(null, n, a, h, c)) : (n.tag = 0, n = nh(null, n, a, h, c)); else { if (a != null) { var x = a.$$typeof; if (x === T) { n.tag = 11, n = Eg(null, n, a, h, c); break e } else if (x === O) { n.tag = 14, n = Bg(null, n, a, h, c); break e } } throw n = X(a) || a, Error(s(306, n, "")) } } return n; case 0: return nh(a, n, n.type, n.pendingProps, c); case 1: return h = n.type, x = an(h, n.pendingProps), Ig(a, n, h, x, c); case 3: e: { if (ge(n, n.stateNode.containerInfo), a === null) throw Error(s(387)); h = n.pendingProps; var _ = n.memoizedState; x = _.element, Pd(a, n), ol(n, h, null, c); var D = n.memoizedState; if (h = D.cache, ma(n, It, h), h !== _.cache && Nd(n, [It], c, !0), ll(), h = D.element, _.isDehydrated) if (_ = { element: h, isDehydrated: !1, cache: D.cache }, n.updateQueue.baseState = _, n.memoizedState = _, n.flags & 256) { n = qg(a, n, h, c); break e } else if (h !== x) { x = es(Error(s(424)), n), tl(x), n = qg(a, n, h, c); break e } else for (a = n.stateNode.containerInfo, a.nodeType === 9 ? a = a.body : a = a.nodeName === "HTML" ? a.ownerDocument.body : a, bt = ns(a.firstChild), ai = n, Ze = !0, ha = null, ss = !0, c = Lp(n, null, h, c), n.child = c; c;)c.flags = c.flags & -3 | 4096, c = c.sibling; else { if ($a(), h === x) { n = Xs(a, n, c); break e } ri(a, n, h, c) } n = n.child } return n; case 26: return ac(a, n), a === null ? (c = sx(n.type, null, n.pendingProps, null)) ? n.memoizedState = c : Ze || (c = n.type, a = n.pendingProps, h = _c(J.current).createElement(c), h[si] = n, h[vi] = a, li(h, c, a), Zt(h), n.stateNode = h) : n.memoizedState = sx(n.type, a.memoizedProps, n.pendingProps, a.memoizedState), null; case 27: return Se(n), a === null && Ze && (h = n.stateNode = ex(n.type, n.pendingProps, J.current), ai = n, ss = !0, x = bt, Ca(n.type) ? (Uh = x, bt = ns(h.firstChild)) : bt = x), ri(a, n, n.pendingProps.children, c), ac(a, n), a === null && (n.flags |= 4194304), n.child; case 5: return a === null && Ze && ((x = h = bt) && (h = M1(h, n.type, n.pendingProps, ss), h !== null ? (n.stateNode = h, ai = n, bt = ns(h.firstChild), ss = !1, x = !0) : x = !1), x || fa(n)), Se(n), x = n.type, _ = n.pendingProps, D = a !== null ? a.memoizedProps : null, h = _.children, Hh(x, _) ? h = null : D !== null && Hh(x, D) && (n.flags |= 32), n.memoizedState !== null && (x = Fd(a, n, V_, null, null, c), Tl._currentValue = x), ac(a, n), ri(a, n, h, c), n.child; case 6: return a === null && Ze && ((a = c = bt) && (c = P1(c, n.pendingProps, ss), c !== null ? (n.stateNode = c, ai = n, bt = null, a = !0) : a = !1), a || fa(n)), null; case 13: return Yg(a, n, c); case 4: return ge(n, n.stateNode.containerInfo), h = n.pendingProps, a === null ? n.child = tn(n, null, h, c) : ri(a, n, h, c), n.child; case 11: return Eg(a, n, n.type, n.pendingProps, c); case 7: return ri(a, n, n.pendingProps, c), n.child; case 8: return ri(a, n, n.pendingProps.children, c), n.child; case 12: return ri(a, n, n.pendingProps.children, c), n.child; case 10: return h = n.pendingProps, ma(n, n.type, h.value), ri(a, n, h.children, c), n.child; case 9: return x = n.type._context, h = n.pendingProps.children, Za(n), x = ni(x), h = h(x), n.flags |= 1, ri(a, n, h, c), n.child; case 14: return Bg(a, n, n.type, n.pendingProps, c); case 15: return Rg(a, n, n.type, n.pendingProps, c); case 19: return Ug(a, n, c); case 31: return e1(a, n, c); case 22: return Lg(a, n, c, n.pendingProps); case 24: return Za(n), h = ni(It), a === null ? (x = Dd(), x === null && (x = ft, _ = Cd(), x.pooledCache = _, _.refCount++, _ !== null && (x.pooledCacheLanes |= c), x = _), n.memoizedState = { parent: h, cache: x }, Md(n), ma(n, It, x)) : ((a.lanes & c) !== 0 && (Pd(a, n), ol(n, null, null, c), ll()), x = a.memoizedState, _ = n.memoizedState, x.parent !== h ? (x = { parent: h, cache: h }, n.memoizedState = x, n.lanes === 0 && (n.memoizedState = n.updateQueue.baseState = x), ma(n, It, h)) : (h = _.cache, ma(n, It, h), h !== x.cache && Nd(n, [It], c, !0))), ri(a, n, n.pendingProps.children, c), n.child; case 29: throw n.pendingProps }throw Error(s(156, n.tag)) } function Us(a) { a.flags |= 4 } function fh(a, n, c, h, x) { if ((n = (a.mode & 32) !== 0) && (n = !1), n) { if (a.flags |= 16777216, (x & 335544128) === x) if (a.stateNode.complete) a.flags |= 8192; else if (yb()) a.flags |= 8192; else throw en = Yo, Ad } else a.flags &= -16777217 } function Wg(a, n) { if (n.type !== "stylesheet" || (n.state.loading & 4) !== 0) a.flags &= -16777217; else if (a.flags |= 16777216, !ox(n)) if (yb()) a.flags |= 8192; else throw en = Yo, Ad } function rc(a, n) { n !== null && (a.flags |= 4), a.flags & 16384 && (n = a.tag !== 22 ? ht() : 536870912, a.lanes |= n, ur |= n) } function ml(a, n) { if (!Ze) switch (a.tailMode) { case "hidden": n = a.tail; for (var c = null; n !== null;)n.alternate !== null && (c = n), n = n.sibling; c === null ? a.tail = null : c.sibling = null; break; case "collapsed": c = a.tail; for (var h = null; c !== null;)c.alternate !== null && (h = c), c = c.sibling; h === null ? n || a.tail === null ? a.tail = null : a.tail.sibling = null : h.sibling = null } } function xt(a) { var n = a.alternate !== null && a.alternate.child === a.child, c = 0, h = 0; if (n) for (var x = a.child; x !== null;)c |= x.lanes | x.childLanes, h |= x.subtreeFlags & 65011712, h |= x.flags & 65011712, x.return = a, x = x.sibling; else for (x = a.child; x !== null;)c |= x.lanes | x.childLanes, h |= x.subtreeFlags, h |= x.flags, x.return = a, x = x.sibling; return a.subtreeFlags |= h, a.childLanes = c, n } function i1(a, n, c) { var h = n.pendingProps; switch (_d(n), n.tag) { case 16: case 15: case 0: case 11: case 7: case 8: case 12: case 9: case 14: return xt(n), null; case 1: return xt(n), null; case 3: return c = n.stateNode, h = null, a !== null && (h = a.memoizedState.cache), n.memoizedState.cache !== h && (n.flags |= 2048), Is(It), de(), c.pendingContext && (c.context = c.pendingContext, c.pendingContext = null), (a === null || a.child === null) && (Zn(n) ? Us(n) : a === null || a.memoizedState.isDehydrated && (n.flags & 256) === 0 || (n.flags |= 1024, wd())), xt(n), null; case 26: var x = n.type, _ = n.memoizedState; return a === null ? (Us(n), _ !== null ? (xt(n), Wg(n, _)) : (xt(n), fh(n, x, null, h, c))) : _ ? _ !== a.memoizedState ? (Us(n), xt(n), Wg(n, _)) : (xt(n), n.flags &= -16777217) : (a = a.memoizedProps, a !== h && Us(n), xt(n), fh(n, x, a, h, c)), null; case 27: if (Ee(n), c = J.current, x = n.type, a !== null && n.stateNode != null) a.memoizedProps !== h && Us(n); else { if (!h) { if (n.stateNode === null) throw Error(s(166)); return xt(n), null } a = W.current, Zn(n) ? Np(n) : (a = ex(x, h, c), n.stateNode = a, Us(n)) } return xt(n), null; case 5: if (Ee(n), x = n.type, a !== null && n.stateNode != null) a.memoizedProps !== h && Us(n); else { if (!h) { if (n.stateNode === null) throw Error(s(166)); return xt(n), null } if (_ = W.current, Zn(n)) Np(n); else { var D = _c(J.current); switch (_) { case 1: _ = D.createElementNS("http://www.w3.org/2000/svg", x); break; case 2: _ = D.createElementNS("http://www.w3.org/1998/Math/MathML", x); break; default: switch (x) { case "svg": _ = D.createElementNS("http://www.w3.org/2000/svg", x); break; case "math": _ = D.createElementNS("http://www.w3.org/1998/Math/MathML", x); break; case "script": _ = D.createElement("div"), _.innerHTML = "<script><\/script>", _ = _.removeChild(_.firstChild); break; case "select": _ = typeof h.is == "string" ? D.createElement("select", { is: h.is }) : D.createElement("select"), h.multiple ? _.multiple = !0 : h.size && (_.size = h.size); break; default: _ = typeof h.is == "string" ? D.createElement(x, { is: h.is }) : D.createElement(x) } }_[si] = n, _[vi] = h; e: for (D = n.child; D !== null;) { if (D.tag === 5 || D.tag === 6) _.appendChild(D.stateNode); else if (D.tag !== 4 && D.tag !== 27 && D.child !== null) { D.child.return = D, D = D.child; continue } if (D === n) break e; for (; D.sibling === null;) { if (D.return === null || D.return === n) break e; D = D.return } D.sibling.return = D.return, D = D.sibling } n.stateNode = _; e: switch (li(_, x, h), x) { case "button": case "input": case "select": case "textarea": h = !!h.autoFocus; break e; case "img": h = !0; break e; default: h = !1 }h && Us(n) } } return xt(n), fh(n, n.type, a === null ? null : a.memoizedProps, n.pendingProps, c), null; case 6: if (a && n.stateNode != null) a.memoizedProps !== h && Us(n); else { if (typeof h != "string" && n.stateNode === null) throw Error(s(166)); if (a = J.current, Zn(n)) { if (a = n.stateNode, c = n.memoizedProps, h = null, x = ai, x !== null) switch (x.tag) { case 27: case 5: h = x.memoizedProps }a[si] = n, a = !!(a.nodeValue === c || h !== null && h.suppressHydrationWarning === !0 || Yb(a.nodeValue, c)), a || fa(n, !0) } else a = _c(a).createTextNode(h), a[si] = n, n.stateNode = a } return xt(n), null; case 31: if (c = n.memoizedState, a === null || a.memoizedState !== null) { if (h = Zn(n), c !== null) { if (a === null) { if (!h) throw Error(s(318)); if (a = n.memoizedState, a = a !== null ? a.dehydrated : null, !a) throw Error(s(557)); a[si] = n } else $a(), (n.flags & 128) === 0 && (n.memoizedState = null), n.flags |= 4; xt(n), a = !1 } else c = wd(), a !== null && a.memoizedState !== null && (a.memoizedState.hydrationErrors = c), a = !0; if (!a) return n.flags & 256 ? (Fi(n), n) : (Fi(n), null); if ((n.flags & 128) !== 0) throw Error(s(558)) } return xt(n), null; case 13: if (h = n.memoizedState, a === null || a.memoizedState !== null && a.memoizedState.dehydrated !== null) { if (x = Zn(n), h !== null && h.dehydrated !== null) { if (a === null) { if (!x) throw Error(s(318)); if (x = n.memoizedState, x = x !== null ? x.dehydrated : null, !x) throw Error(s(317)); x[si] = n } else $a(), (n.flags & 128) === 0 && (n.memoizedState = null), n.flags |= 4; xt(n), x = !1 } else x = wd(), a !== null && a.memoizedState !== null && (a.memoizedState.hydrationErrors = x), x = !0; if (!x) return n.flags & 256 ? (Fi(n), n) : (Fi(n), null) } return Fi(n), (n.flags & 128) !== 0 ? (n.lanes = c, n) : (c = h !== null, a = a !== null && a.memoizedState !== null, c && (h = n.child, x = null, h.alternate !== null && h.alternate.memoizedState !== null && h.alternate.memoizedState.cachePool !== null && (x = h.alternate.memoizedState.cachePool.pool), _ = null, h.memoizedState !== null && h.memoizedState.cachePool !== null && (_ = h.memoizedState.cachePool.pool), _ !== x && (h.flags |= 2048)), c !== a && c && (n.child.flags |= 8192), rc(n, n.updateQueue), xt(n), null); case 4: return de(), a === null && Bh(n.stateNode.containerInfo), xt(n), null; case 10: return Is(n.type), xt(n), null; case 19: if (Q(Ot), h = n.memoizedState, h === null) return xt(n), null; if (x = (n.flags & 128) !== 0, _ = h.rendering, _ === null) if (x) ml(h, !1); else { if (Tt !== 0 || a !== null && (a.flags & 128) !== 0) for (a = n.child; a !== null;) { if (_ = Wo(a), _ !== null) { for (n.flags |= 128, ml(h, !1), a = _.updateQueue, n.updateQueue = a, rc(n, a), n.subtreeFlags = 0, a = c, c = n.child; c !== null;)_p(c, a), c = c.sibling; return ce(Ot, Ot.current & 1 | 2), Ze && Fs(n, h.treeForkCount), n.child } a = a.sibling } h.tail !== null && kt() > dc && (n.flags |= 128, x = !0, ml(h, !1), n.lanes = 4194304) } else { if (!x) if (a = Wo(_), a !== null) { if (n.flags |= 128, x = !0, a = a.updateQueue, n.updateQueue = a, rc(n, a), ml(h, !0), h.tail === null && h.tailMode === "hidden" && !_.alternate && !Ze) return xt(n), null } else 2 * kt() - h.renderingStartTime > dc && c !== 536870912 && (n.flags |= 128, x = !0, ml(h, !1), n.lanes = 4194304); h.isBackwards ? (_.sibling = n.child, n.child = _) : (a = h.last, a !== null ? a.sibling = _ : n.child = _, h.last = _) } return h.tail !== null ? (a = h.tail, h.rendering = a, h.tail = a.sibling, h.renderingStartTime = kt(), a.sibling = null, c = Ot.current, ce(Ot, x ? c & 1 | 2 : c & 1), Ze && Fs(n, h.treeForkCount), a) : (xt(n), null); case 22: case 23: return Fi(n), Rd(), h = n.memoizedState !== null, a !== null ? a.memoizedState !== null !== h && (n.flags |= 8192) : h && (n.flags |= 8192), h ? (c & 536870912) !== 0 && (n.flags & 128) === 0 && (xt(n), n.subtreeFlags & 6 && (n.flags |= 8192)) : xt(n), c = n.updateQueue, c !== null && rc(n, c.retryQueue), c = null, a !== null && a.memoizedState !== null && a.memoizedState.cachePool !== null && (c = a.memoizedState.cachePool.pool), h = null, n.memoizedState !== null && n.memoizedState.cachePool !== null && (h = n.memoizedState.cachePool.pool), h !== c && (n.flags |= 2048), a !== null && Q(Qa), null; case 24: return c = null, a !== null && (c = a.memoizedState.cache), n.memoizedState.cache !== c && (n.flags |= 2048), Is(It), xt(n), null; case 25: return null; case 30: return null }throw Error(s(156, n.tag)) } function s1(a, n) { switch (_d(n), n.tag) { case 1: return a = n.flags, a & 65536 ? (n.flags = a & -65537 | 128, n) : null; case 3: return Is(It), de(), a = n.flags, (a & 65536) !== 0 && (a & 128) === 0 ? (n.flags = a & -65537 | 128, n) : null; case 26: case 27: case 5: return Ee(n), null; case 31: if (n.memoizedState !== null) { if (Fi(n), n.alternate === null) throw Error(s(340)); $a() } return a = n.flags, a & 65536 ? (n.flags = a & -65537 | 128, n) : null; case 13: if (Fi(n), a = n.memoizedState, a !== null && a.dehydrated !== null) { if (n.alternate === null) throw Error(s(340)); $a() } return a = n.flags, a & 65536 ? (n.flags = a & -65537 | 128, n) : null; case 19: return Q(Ot), null; case 4: return de(), null; case 10: return Is(n.type), null; case 22: case 23: return Fi(n), Rd(), a !== null && Q(Qa), a = n.flags, a & 65536 ? (n.flags = a & -65537 | 128, n) : null; case 24: return Is(It), null; case 25: return null; default: return null } } function Gg(a, n) { switch (_d(n), n.tag) { case 3: Is(It), de(); break; case 26: case 27: case 5: Ee(n); break; case 4: de(); break; case 31: n.memoizedState !== null && Fi(n); break; case 13: Fi(n); break; case 19: Q(Ot); break; case 10: Is(n.type); break; case 22: case 23: Fi(n), Rd(), a !== null && Q(Qa); break; case 24: Is(It) } } function pl(a, n) { try { var c = n.updateQueue, h = c !== null ? c.lastEffect : null; if (h !== null) { var x = h.next; c = x; do { if ((c.tag & a) === a) { h = void 0; var _ = c.create, D = c.inst; h = _(), D.destroy = h } c = c.next } while (c !== x) } } catch (E) { lt(n, n.return, E) } } function va(a, n, c) { try { var h = n.updateQueue, x = h !== null ? h.lastEffect : null; if (x !== null) { var _ = x.next; h = _; do { if ((h.tag & a) === a) { var D = h.inst, E = D.destroy; if (E !== void 0) { D.destroy = void 0, x = n; var V = c, ue = E; try { ue() } catch (ye) { lt(x, V, ye) } } } h = h.next } while (h !== _) } } catch (ye) { lt(n, n.return, ye) } } function $g(a) { var n = a.updateQueue; if (n !== null) { var c = a.stateNode; try { Fp(n, c) } catch (h) { lt(a, a.return, h) } } } function Kg(a, n, c) { c.props = an(a.type, a.memoizedProps), c.state = a.memoizedState; try { c.componentWillUnmount() } catch (h) { lt(a, n, h) } } function gl(a, n) { try { var c = a.ref; if (c !== null) { switch (a.tag) { case 26: case 27: case 5: var h = a.stateNode; break; case 30: h = a.stateNode; break; default: h = a.stateNode }typeof c == "function" ? a.refCleanup = c(h) : c.current = h } } catch (x) { lt(a, n, x) } } function Ns(a, n) { var c = a.ref, h = a.refCleanup; if (c !== null) if (typeof h == "function") try { h() } catch (x) { lt(a, n, x) } finally { a.refCleanup = null, a = a.alternate, a != null && (a.refCleanup = null) } else if (typeof c == "function") try { c(null) } catch (x) { lt(a, n, x) } else c.current = null } function Zg(a) { var n = a.type, c = a.memoizedProps, h = a.stateNode; try { e: switch (n) { case "button": case "input": case "select": case "textarea": c.autoFocus && h.focus(); break e; case "img": c.src ? h.src = c.src : c.srcSet && (h.srcset = c.srcSet) } } catch (x) { lt(a, a.return, x) } } function mh(a, n, c) { try { var h = a.stateNode; S1(h, a.type, c, n), h[vi] = n } catch (x) { lt(a, a.return, x) } } function Qg(a) { return a.tag === 5 || a.tag === 3 || a.tag === 26 || a.tag === 27 && Ca(a.type) || a.tag === 4 } function ph(a) { e: for (; ;) { for (; a.sibling === null;) { if (a.return === null || Qg(a.return)) return null; a = a.return } for (a.sibling.return = a.return, a = a.sibling; a.tag !== 5 && a.tag !== 6 && a.tag !== 18;) { if (a.tag === 27 && Ca(a.type) || a.flags & 2 || a.child === null || a.tag === 4) continue e; a.child.return = a, a = a.child } if (!(a.flags & 2)) return a.stateNode } } function gh(a, n, c) { var h = a.tag; if (h === 5 || h === 6) a = a.stateNode, n ? (c.nodeType === 9 ? c.body : c.nodeName === "HTML" ? c.ownerDocument.body : c).insertBefore(a, n) : (n = c.nodeType === 9 ? c.body : c.nodeName === "HTML" ? c.ownerDocument.body : c, n.appendChild(a), c = c._reactRootContainer, c != null || n.onclick !== null || (n.onclick = Rs)); else if (h !== 4 && (h === 27 && Ca(a.type) && (c = a.stateNode, n = null), a = a.child, a !== null)) for (gh(a, n, c), a = a.sibling; a !== null;)gh(a, n, c), a = a.sibling } function lc(a, n, c) { var h = a.tag; if (h === 5 || h === 6) a = a.stateNode, n ? c.insertBefore(a, n) : c.appendChild(a); else if (h !== 4 && (h === 27 && Ca(a.type) && (c = a.stateNode), a = a.child, a !== null)) for (lc(a, n, c), a = a.sibling; a !== null;)lc(a, n, c), a = a.sibling } function Jg(a) { var n = a.stateNode, c = a.memoizedProps; try { for (var h = a.type, x = n.attributes; x.length;)n.removeAttributeNode(x[0]); li(n, h, c), n[si] = a, n[vi] = c } catch (_) { lt(a, a.return, _) } } var Vs = !1, Xt = !1, bh = !1, eb = typeof WeakSet == "function" ? WeakSet : Set, Qt = null; function a1(a, n) { if (a = a.containerInfo, zh = Tc, a = hp(a), ud(a)) { if ("selectionStart" in a) var c = { start: a.selectionStart, end: a.selectionEnd }; else e: { c = (c = a.ownerDocument) && c.defaultView || window; var h = c.getSelection && c.getSelection(); if (h && h.rangeCount !== 0) { c = h.anchorNode; var x = h.anchorOffset, _ = h.focusNode; h = h.focusOffset; try { c.nodeType, _.nodeType } catch { c = null; break e } var D = 0, E = -1, V = -1, ue = 0, ye = 0, je = a, he = null; t: for (; ;) { for (var me; je !== c || x !== 0 && je.nodeType !== 3 || (E = D + x), je !== _ || h !== 0 && je.nodeType !== 3 || (V = D + h), je.nodeType === 3 && (D += je.nodeValue.length), (me = je.firstChild) !== null;)he = je, je = me; for (; ;) { if (je === a) break t; if (he === c && ++ue === x && (E = D), he === _ && ++ye === h && (V = D), (me = je.nextSibling) !== null) break; je = he, he = je.parentNode } je = me } c = E === -1 || V === -1 ? null : { start: E, end: V } } else c = null } c = c || { start: 0, end: 0 } } else c = null; for (Fh = { focusedElem: a, selectionRange: c }, Tc = !1, Qt = n; Qt !== null;)if (n = Qt, a = n.child, (n.subtreeFlags & 1028) !== 0 && a !== null) a.return = n, Qt = a; else for (; Qt !== null;) { switch (n = Qt, _ = n.alternate, a = n.flags, n.tag) { case 0: if ((a & 4) !== 0 && (a = n.updateQueue, a = a !== null ? a.events : null, a !== null)) for (c = 0; c < a.length; c++)x = a[c], x.ref.impl = x.nextImpl; break; case 11: case 15: break; case 1: if ((a & 1024) !== 0 && _ !== null) { a = void 0, c = n, x = _.memoizedProps, _ = _.memoizedState, h = c.stateNode; try { var Pe = an(c.type, x); a = h.getSnapshotBeforeUpdate(Pe, _), h.__reactInternalSnapshotBeforeUpdate = a } catch (Le) { lt(c, c.return, Le) } } break; case 3: if ((a & 1024) !== 0) { if (a = n.stateNode.containerInfo, c = a.nodeType, c === 9) qh(a); else if (c === 1) switch (a.nodeName) { case "HEAD": case "HTML": case "BODY": qh(a); break; default: a.textContent = "" } } break; case 5: case 26: case 27: case 6: case 4: case 17: break; default: if ((a & 1024) !== 0) throw Error(s(163)) }if (a = n.sibling, a !== null) { a.return = n.return, Qt = a; break } Qt = n.return } } function tb(a, n, c) { var h = c.flags; switch (c.tag) { case 0: case 11: case 15: Gs(a, c), h & 4 && pl(5, c); break; case 1: if (Gs(a, c), h & 4) if (a = c.stateNode, n === null) try { a.componentDidMount() } catch (D) { lt(c, c.return, D) } else { var x = an(c.type, n.memoizedProps); n = n.memoizedState; try { a.componentDidUpdate(x, n, a.__reactInternalSnapshotBeforeUpdate) } catch (D) { lt(c, c.return, D) } } h & 64 && $g(c), h & 512 && gl(c, c.return); break; case 3: if (Gs(a, c), h & 64 && (a = c.updateQueue, a !== null)) { if (n = null, c.child !== null) switch (c.child.tag) { case 27: case 5: n = c.child.stateNode; break; case 1: n = c.child.stateNode }try { Fp(a, n) } catch (D) { lt(c, c.return, D) } } break; case 27: n === null && h & 4 && Jg(c); case 26: case 5: Gs(a, c), n === null && h & 4 && Zg(c), h & 512 && gl(c, c.return); break; case 12: Gs(a, c); break; case 31: Gs(a, c), h & 4 && ab(a, c); break; case 13: Gs(a, c), h & 4 && nb(a, c), h & 64 && (a = c.memoizedState, a !== null && (a = a.dehydrated, a !== null && (c = f1.bind(null, c), O1(a, c)))); break; case 22: if (h = c.memoizedState !== null || Vs, !h) { n = n !== null && n.memoizedState !== null || Xt, x = Vs; var _ = Xt; Vs = h, (Xt = n) && !_ ? $s(a, c, (c.subtreeFlags & 8772) !== 0) : Gs(a, c), Vs = x, Xt = _ } break; case 30: break; default: Gs(a, c) } } function ib(a) { var n = a.alternate; n !== null && (a.alternate = null, ib(n)), a.child = null, a.deletions = null, a.sibling = null, a.tag === 5 && (n = a.stateNode, n !== null && Wu(n)), a.stateNode = null, a.return = null, a.dependencies = null, a.memoizedProps = null, a.memoizedState = null, a.pendingProps = null, a.stateNode = null, a.updateQueue = null } var vt = null, ji = !1; function Ws(a, n, c) { for (c = c.child; c !== null;)sb(a, n, c), c = c.sibling } function sb(a, n, c) { if (St && typeof St.onCommitFiberUnmount == "function") try { St.onCommitFiberUnmount(ds, c) } catch { } switch (c.tag) { case 26: Xt || Ns(c, n), Ws(a, n, c), c.memoizedState ? c.memoizedState.count-- : c.stateNode && (c = c.stateNode, c.parentNode.removeChild(c)); break; case 27: Xt || Ns(c, n); var h = vt, x = ji; Ca(c.type) && (vt = c.stateNode, ji = !1), Ws(a, n, c), Sl(c.stateNode), vt = h, ji = x; break; case 5: Xt || Ns(c, n); case 6: if (h = vt, x = ji, vt = null, Ws(a, n, c), vt = h, ji = x, vt !== null) if (ji) try { (vt.nodeType === 9 ? vt.body : vt.nodeName === "HTML" ? vt.ownerDocument.body : vt).removeChild(c.stateNode) } catch (_) { lt(c, n, _) } else try { vt.removeChild(c.stateNode) } catch (_) { lt(c, n, _) } break; case 18: vt !== null && (ji ? (a = vt, $b(a.nodeType === 9 ? a.body : a.nodeName === "HTML" ? a.ownerDocument.body : a, c.stateNode), xr(a)) : $b(vt, c.stateNode)); break; case 4: h = vt, x = ji, vt = c.stateNode.containerInfo, ji = !0, Ws(a, n, c), vt = h, ji = x; break; case 0: case 11: case 14: case 15: va(2, c, n), Xt || va(4, c, n), Ws(a, n, c); break; case 1: Xt || (Ns(c, n), h = c.stateNode, typeof h.componentWillUnmount == "function" && Kg(c, n, h)), Ws(a, n, c); break; case 21: Ws(a, n, c); break; case 22: Xt = (h = Xt) || c.memoizedState !== null, Ws(a, n, c), Xt = h; break; default: Ws(a, n, c) } } function ab(a, n) { if (n.memoizedState === null && (a = n.alternate, a !== null && (a = a.memoizedState, a !== null))) { a = a.dehydrated; try { xr(a) } catch (c) { lt(n, n.return, c) } } } function nb(a, n) { if (n.memoizedState === null && (a = n.alternate, a !== null && (a = a.memoizedState, a !== null && (a = a.dehydrated, a !== null)))) try { xr(a) } catch (c) { lt(n, n.return, c) } } function n1(a) { switch (a.tag) { case 31: case 13: case 19: var n = a.stateNode; return n === null && (n = a.stateNode = new eb), n; case 22: return a = a.stateNode, n = a._retryCache, n === null && (n = a._retryCache = new eb), n; default: throw Error(s(435, a.tag)) } } function oc(a, n) { var c = n1(a); n.forEach(function (h) { if (!c.has(h)) { c.add(h); var x = m1.bind(null, a, h); h.then(x, x) } }) } function wi(a, n) { var c = n.deletions; if (c !== null) for (var h = 0; h < c.length; h++) { var x = c[h], _ = a, D = n, E = D; e: for (; E !== null;) { switch (E.tag) { case 27: if (Ca(E.type)) { vt = E.stateNode, ji = !1; break e } break; case 5: vt = E.stateNode, ji = !1; break e; case 3: case 4: vt = E.stateNode.containerInfo, ji = !0; break e }E = E.return } if (vt === null) throw Error(s(160)); sb(_, D, x), vt = null, ji = !1, _ = x.alternate, _ !== null && (_.return = null), x.return = null } if (n.subtreeFlags & 13886) for (n = n.child; n !== null;)rb(n, a), n = n.sibling } var ms = null; function rb(a, n) { var c = a.alternate, h = a.flags; switch (a.tag) { case 0: case 11: case 14: case 15: wi(n, a), ki(a), h & 4 && (va(3, a, a.return), pl(3, a), va(5, a, a.return)); break; case 1: wi(n, a), ki(a), h & 512 && (Xt || c === null || Ns(c, c.return)), h & 64 && Vs && (a = a.updateQueue, a !== null && (h = a.callbacks, h !== null && (c = a.shared.hiddenCallbacks, a.shared.hiddenCallbacks = c === null ? h : c.concat(h)))); break; case 26: var x = ms; if (wi(n, a), ki(a), h & 512 && (Xt || c === null || Ns(c, c.return)), h & 4) { var _ = c !== null ? c.memoizedState : null; if (h = a.memoizedState, c === null) if (h === null) if (a.stateNode === null) { e: { h = a.type, c = a.memoizedProps, x = x.ownerDocument || x; t: switch (h) { case "title": _ = x.getElementsByTagName("title")[0], (!_ || _[Yr] || _[si] || _.namespaceURI === "http://www.w3.org/2000/svg" || _.hasAttribute("itemprop")) && (_ = x.createElement(h), x.head.insertBefore(_, x.querySelector("head > title"))), li(_, h, c), _[si] = a, Zt(_), h = _; break e; case "link": var D = rx("link", "href", x).get(h + (c.href || "")); if (D) { for (var E = 0; E < D.length; E++)if (_ = D[E], _.getAttribute("href") === (c.href == null || c.href === "" ? null : c.href) && _.getAttribute("rel") === (c.rel == null ? null : c.rel) && _.getAttribute("title") === (c.title == null ? null : c.title) && _.getAttribute("crossorigin") === (c.crossOrigin == null ? null : c.crossOrigin)) { D.splice(E, 1); break t } } _ = x.createElement(h), li(_, h, c), x.head.appendChild(_); break; case "meta": if (D = rx("meta", "content", x).get(h + (c.content || ""))) { for (E = 0; E < D.length; E++)if (_ = D[E], _.getAttribute("content") === (c.content == null ? null : "" + c.content) && _.getAttribute("name") === (c.name == null ? null : c.name) && _.getAttribute("property") === (c.property == null ? null : c.property) && _.getAttribute("http-equiv") === (c.httpEquiv == null ? null : c.httpEquiv) && _.getAttribute("charset") === (c.charSet == null ? null : c.charSet)) { D.splice(E, 1); break t } } _ = x.createElement(h), li(_, h, c), x.head.appendChild(_); break; default: throw Error(s(468, h)) }_[si] = a, Zt(_), h = _ } a.stateNode = h } else lx(x, a.type, a.stateNode); else a.stateNode = nx(x, h, a.memoizedProps); else _ !== h ? (_ === null ? c.stateNode !== null && (c = c.stateNode, c.parentNode.removeChild(c)) : _.count--, h === null ? lx(x, a.type, a.stateNode) : nx(x, h, a.memoizedProps)) : h === null && a.stateNode !== null && mh(a, a.memoizedProps, c.memoizedProps) } break; case 27: wi(n, a), ki(a), h & 512 && (Xt || c === null || Ns(c, c.return)), c !== null && h & 4 && mh(a, a.memoizedProps, c.memoizedProps); break; case 5: if (wi(n, a), ki(a), h & 512 && (Xt || c === null || Ns(c, c.return)), a.flags & 32) { x = a.stateNode; try { In(x, "") } catch (Pe) { lt(a, a.return, Pe) } } h & 4 && a.stateNode != null && (x = a.memoizedProps, mh(a, x, c !== null ? c.memoizedProps : x)), h & 1024 && (bh = !0); break; case 6: if (wi(n, a), ki(a), h & 4) { if (a.stateNode === null) throw Error(s(162)); h = a.memoizedProps, c = a.stateNode; try { c.nodeValue = h } catch (Pe) { lt(a, a.return, Pe) } } break; case 3: if (kc = null, x = ms, ms = jc(n.containerInfo), wi(n, a), ms = x, ki(a), h & 4 && c !== null && c.memoizedState.isDehydrated) try { xr(n.containerInfo) } catch (Pe) { lt(a, a.return, Pe) } bh && (bh = !1, lb(a)); break; case 4: h = ms, ms = jc(a.stateNode.containerInfo), wi(n, a), ki(a), ms = h; break; case 12: wi(n, a), ki(a); break; case 31: wi(n, a), ki(a), h & 4 && (h = a.updateQueue, h !== null && (a.updateQueue = null, oc(a, h))); break; case 13: wi(n, a), ki(a), a.child.flags & 8192 && a.memoizedState !== null != (c !== null && c.memoizedState !== null) && (uc = kt()), h & 4 && (h = a.updateQueue, h !== null && (a.updateQueue = null, oc(a, h))); break; case 22: x = a.memoizedState !== null; var V = c !== null && c.memoizedState !== null, ue = Vs, ye = Xt; if (Vs = ue || x, Xt = ye || V, wi(n, a), Xt = ye, Vs = ue, ki(a), h & 8192) e: for (n = a.stateNode, n._visibility = x ? n._visibility & -2 : n._visibility | 1, x && (c === null || V || Vs || Xt || nn(a)), c = null, n = a; ;) { if (n.tag === 5 || n.tag === 26) { if (c === null) { V = c = n; try { if (_ = V.stateNode, x) D = _.style, typeof D.setProperty == "function" ? D.setProperty("display", "none", "important") : D.display = "none"; else { E = V.stateNode; var je = V.memoizedProps.style, he = je != null && je.hasOwnProperty("display") ? je.display : null; E.style.display = he == null || typeof he == "boolean" ? "" : ("" + he).trim() } } catch (Pe) { lt(V, V.return, Pe) } } } else if (n.tag === 6) { if (c === null) { V = n; try { V.stateNode.nodeValue = x ? "" : V.memoizedProps } catch (Pe) { lt(V, V.return, Pe) } } } else if (n.tag === 18) { if (c === null) { V = n; try { var me = V.stateNode; x ? Kb(me, !0) : Kb(V.stateNode, !1) } catch (Pe) { lt(V, V.return, Pe) } } } else if ((n.tag !== 22 && n.tag !== 23 || n.memoizedState === null || n === a) && n.child !== null) { n.child.return = n, n = n.child; continue } if (n === a) break e; for (; n.sibling === null;) { if (n.return === null || n.return === a) break e; c === n && (c = null), n = n.return } c === n && (c = null), n.sibling.return = n.return, n = n.sibling } h & 4 && (h = a.updateQueue, h !== null && (c = h.retryQueue, c !== null && (h.retryQueue = null, oc(a, c)))); break; case 19: wi(n, a), ki(a), h & 4 && (h = a.updateQueue, h !== null && (a.updateQueue = null, oc(a, h))); break; case 30: break; case 21: break; default: wi(n, a), ki(a) } } function ki(a) { var n = a.flags; if (n & 2) { try { for (var c, h = a.return; h !== null;) { if (Qg(h)) { c = h; break } h = h.return } if (c == null) throw Error(s(160)); switch (c.tag) { case 27: var x = c.stateNode, _ = ph(a); lc(a, _, x); break; case 5: var D = c.stateNode; c.flags & 32 && (In(D, ""), c.flags &= -33); var E = ph(a); lc(a, E, D); break; case 3: case 4: var V = c.stateNode.containerInfo, ue = ph(a); gh(a, ue, V); break; default: throw Error(s(161)) } } catch (ye) { lt(a, a.return, ye) } a.flags &= -3 } n & 4096 && (a.flags &= -4097) } function lb(a) { if (a.subtreeFlags & 1024) for (a = a.child; a !== null;) { var n = a; lb(n), n.tag === 5 && n.flags & 1024 && n.stateNode.reset(), a = a.sibling } } function Gs(a, n) { if (n.subtreeFlags & 8772) for (n = n.child; n !== null;)tb(a, n.alternate, n), n = n.sibling } function nn(a) { for (a = a.child; a !== null;) { var n = a; switch (n.tag) { case 0: case 11: case 14: case 15: va(4, n, n.return), nn(n); break; case 1: Ns(n, n.return); var c = n.stateNode; typeof c.componentWillUnmount == "function" && Kg(n, n.return, c), nn(n); break; case 27: Sl(n.stateNode); case 26: case 5: Ns(n, n.return), nn(n); break; case 22: n.memoizedState === null && nn(n); break; case 30: nn(n); break; default: nn(n) }a = a.sibling } } function $s(a, n, c) { for (c = c && (n.subtreeFlags & 8772) !== 0, n = n.child; n !== null;) { var h = n.alternate, x = a, _ = n, D = _.flags; switch (_.tag) { case 0: case 11: case 15: $s(x, _, c), pl(4, _); break; case 1: if ($s(x, _, c), h = _, x = h.stateNode, typeof x.componentDidMount == "function") try { x.componentDidMount() } catch (ue) { lt(h, h.return, ue) } if (h = _, x = h.updateQueue, x !== null) { var E = h.stateNode; try { var V = x.shared.hiddenCallbacks; if (V !== null) for (x.shared.hiddenCallbacks = null, x = 0; x < V.length; x++)zp(V[x], E) } catch (ue) { lt(h, h.return, ue) } } c && D & 64 && $g(_), gl(_, _.return); break; case 27: Jg(_); case 26: case 5: $s(x, _, c), c && h === null && D & 4 && Zg(_), gl(_, _.return); break; case 12: $s(x, _, c); break; case 31: $s(x, _, c), c && D & 4 && ab(x, _); break; case 13: $s(x, _, c), c && D & 4 && nb(x, _); break; case 22: _.memoizedState === null && $s(x, _, c), gl(_, _.return); break; case 30: break; default: $s(x, _, c) }n = n.sibling } } function xh(a, n) { var c = null; a !== null && a.memoizedState !== null && a.memoizedState.cachePool !== null && (c = a.memoizedState.cachePool.pool), a = null, n.memoizedState !== null && n.memoizedState.cachePool !== null && (a = n.memoizedState.cachePool.pool), a !== c && (a != null && a.refCount++, c != null && il(c)) } function yh(a, n) { a = null, n.alternate !== null && (a = n.alternate.memoizedState.cache), n = n.memoizedState.cache, n !== a && (n.refCount++, a != null && il(a)) } function ps(a, n, c, h) { if (n.subtreeFlags & 10256) for (n = n.child; n !== null;)ob(a, n, c, h), n = n.sibling } function ob(a, n, c, h) { var x = n.flags; switch (n.tag) { case 0: case 11: case 15: ps(a, n, c, h), x & 2048 && pl(9, n); break; case 1: ps(a, n, c, h); break; case 3: ps(a, n, c, h), x & 2048 && (a = null, n.alternate !== null && (a = n.alternate.memoizedState.cache), n = n.memoizedState.cache, n !== a && (n.refCount++, a != null && il(a))); break; case 12: if (x & 2048) { ps(a, n, c, h), a = n.stateNode; try { var _ = n.memoizedProps, D = _.id, E = _.onPostCommit; typeof E == "function" && E(D, n.alternate === null ? "mount" : "update", a.passiveEffectDuration, -0) } catch (V) { lt(n, n.return, V) } } else ps(a, n, c, h); break; case 31: ps(a, n, c, h); break; case 13: ps(a, n, c, h); break; case 23: break; case 22: _ = n.stateNode, D = n.alternate, n.memoizedState !== null ? _._visibility & 2 ? ps(a, n, c, h) : bl(a, n) : _._visibility & 2 ? ps(a, n, c, h) : (_._visibility |= 2, lr(a, n, c, h, (n.subtreeFlags & 10256) !== 0 || !1)), x & 2048 && xh(D, n); break; case 24: ps(a, n, c, h), x & 2048 && yh(n.alternate, n); break; default: ps(a, n, c, h) } } function lr(a, n, c, h, x) { for (x = x && ((n.subtreeFlags & 10256) !== 0 || !1), n = n.child; n !== null;) { var _ = a, D = n, E = c, V = h, ue = D.flags; switch (D.tag) { case 0: case 11: case 15: lr(_, D, E, V, x), pl(8, D); break; case 23: break; case 22: var ye = D.stateNode; D.memoizedState !== null ? ye._visibility & 2 ? lr(_, D, E, V, x) : bl(_, D) : (ye._visibility |= 2, lr(_, D, E, V, x)), x && ue & 2048 && xh(D.alternate, D); break; case 24: lr(_, D, E, V, x), x && ue & 2048 && yh(D.alternate, D); break; default: lr(_, D, E, V, x) }n = n.sibling } } function bl(a, n) { if (n.subtreeFlags & 10256) for (n = n.child; n !== null;) { var c = a, h = n, x = h.flags; switch (h.tag) { case 22: bl(c, h), x & 2048 && xh(h.alternate, h); break; case 24: bl(c, h), x & 2048 && yh(h.alternate, h); break; default: bl(c, h) }n = n.sibling } } var xl = 8192; function or(a, n, c) { if (a.subtreeFlags & xl) for (a = a.child; a !== null;)cb(a, n, c), a = a.sibling } function cb(a, n, c) { switch (a.tag) { case 26: or(a, n, c), a.flags & xl && a.memoizedState !== null && U1(c, ms, a.memoizedState, a.memoizedProps); break; case 5: or(a, n, c); break; case 3: case 4: var h = ms; ms = jc(a.stateNode.containerInfo), or(a, n, c), ms = h; break; case 22: a.memoizedState === null && (h = a.alternate, h !== null && h.memoizedState !== null ? (h = xl, xl = 16777216, or(a, n, c), xl = h) : or(a, n, c)); break; default: or(a, n, c) } } function ub(a) { var n = a.alternate; if (n !== null && (a = n.child, a !== null)) { n.child = null; do n = a.sibling, a.sibling = null, a = n; while (a !== null) } } function yl(a) { var n = a.deletions; if ((a.flags & 16) !== 0) { if (n !== null) for (var c = 0; c < n.length; c++) { var h = n[c]; Qt = h, hb(h, a) } ub(a) } if (a.subtreeFlags & 10256) for (a = a.child; a !== null;)db(a), a = a.sibling } function db(a) { switch (a.tag) { case 0: case 11: case 15: yl(a), a.flags & 2048 && va(9, a, a.return); break; case 3: yl(a); break; case 12: yl(a); break; case 22: var n = a.stateNode; a.memoizedState !== null && n._visibility & 2 && (a.return === null || a.return.tag !== 13) ? (n._visibility &= -3, cc(a)) : yl(a); break; default: yl(a) } } function cc(a) { var n = a.deletions; if ((a.flags & 16) !== 0) { if (n !== null) for (var c = 0; c < n.length; c++) { var h = n[c]; Qt = h, hb(h, a) } ub(a) } for (a = a.child; a !== null;) { switch (n = a, n.tag) { case 0: case 11: case 15: va(8, n, n.return), cc(n); break; case 22: c = n.stateNode, c._visibility & 2 && (c._visibility &= -3, cc(n)); break; default: cc(n) }a = a.sibling } } function hb(a, n) { for (; Qt !== null;) { var c = Qt; switch (c.tag) { case 0: case 11: case 15: va(8, c, n); break; case 23: case 22: if (c.memoizedState !== null && c.memoizedState.cachePool !== null) { var h = c.memoizedState.cachePool.pool; h != null && h.refCount++ } break; case 24: il(c.memoizedState.cache) }if (h = c.child, h !== null) h.return = c, Qt = h; else e: for (c = a; Qt !== null;) { h = Qt; var x = h.sibling, _ = h.return; if (ib(h), h === c) { Qt = null; break e } if (x !== null) { x.return = _, Qt = x; break e } Qt = _ } } } var r1 = { getCacheForType: function (a) { var n = ni(It), c = n.data.get(a); return c === void 0 && (c = a(), n.data.set(a, c)), c }, cacheSignal: function () { return ni(It).controller.signal } }, l1 = typeof WeakMap == "function" ? WeakMap : Map, st = 0, ft = null, We = null, $e = 0, rt = 0, Hi = null, _a = !1, cr = !1, vh = !1, Ks = 0, Tt = 0, ja = 0, rn = 0, _h = 0, Ii = 0, ur = 0, vl = null, Si = null, jh = !1, uc = 0, fb = 0, dc = 1 / 0, hc = null, wa = null, Vt = 0, ka = null, dr = null, Zs = 0, wh = 0, kh = null, mb = null, _l = 0, Sh = null; function qi() { return (st & 2) !== 0 && $e !== 0 ? $e & -$e : I.T !== null ? Mh() : Am() } function pb() { if (Ii === 0) if (($e & 536870912) === 0 || Ze) { var a = On; On <<= 1, (On & 3932160) === 0 && (On = 262144), Ii = a } else Ii = 536870912; return a = zi.current, a !== null && (a.flags |= 32), Ii } function Ni(a, n, c) { (a === ft && (rt === 2 || rt === 9) || a.cancelPendingCommit !== null) && (hr(a, 0), Sa(a, $e, Ii, !1)), ii(a, c), ((st & 2) === 0 || a !== ft) && (a === ft && ((st & 2) === 0 && (rn |= c), Tt === 4 && Sa(a, $e, Ii, !1)), Cs(a)) } function gb(a, n, c) { if ((st & 6) !== 0) throw Error(s(327)); var h = !c && (n & 127) === 0 && (n & a.expiredLanes) === 0 || Fe(a, n), x = h ? u1(a, n) : Ch(a, n, !0), _ = h; do { if (x === 0) { cr && !h && Sa(a, n, 0, !1); break } else { if (c = a.current.alternate, _ && !o1(c)) { x = Ch(a, n, !1), _ = !1; continue } if (x === 2) { if (_ = n, a.errorRecoveryDisabledLanes & _) var D = 0; else D = a.pendingLanes & -536870913, D = D !== 0 ? D : D & 536870912 ? 536870912 : 0; if (D !== 0) { n = D; e: { var E = a; x = vl; var V = E.current.memoizedState.isDehydrated; if (V && (hr(E, D).flags |= 256), D = Ch(E, D, !1), D !== 2) { if (vh && !V) { E.errorRecoveryDisabledLanes |= _, rn |= _, x = 4; break e } _ = Si, Si = x, _ !== null && (Si === null ? Si = _ : Si.push.apply(Si, _)) } x = D } if (_ = !1, x !== 2) continue } } if (x === 1) { hr(a, 0), Sa(a, n, 0, !0); break } e: { switch (h = a, _ = x, _) { case 0: case 1: throw Error(s(345)); case 4: if ((n & 4194048) !== n) break; case 6: Sa(h, n, Ii, !_a); break e; case 2: Si = null; break; case 3: case 5: break; default: throw Error(s(329)) }if ((n & 62914560) === n && (x = uc + 300 - kt(), 10 < x)) { if (Sa(h, n, Ii, !_a), En(h, 0, !0) !== 0) break e; Zs = n, h.timeoutHandle = Wb(bb.bind(null, h, c, Si, hc, jh, n, Ii, rn, ur, _a, _, "Throttled", -0, 0), x); break e } bb(h, c, Si, hc, jh, n, Ii, rn, ur, _a, _, null, -0, 0) } } break } while (!0); Cs(a) } function bb(a, n, c, h, x, _, D, E, V, ue, ye, je, he, me) { if (a.timeoutHandle = -1, je = n.subtreeFlags, je & 8192 || (je & 16785408) === 16785408) { je = { stylesheets: null, count: 0, imgCount: 0, imgBytes: 0, suspenseyImages: [], waitingForImages: !0, waitingForViewTransition: !1, unsuspend: Rs }, cb(n, _, je); var Pe = (_ & 62914560) === _ ? uc - kt() : (_ & 4194048) === _ ? fb - kt() : 0; if (Pe = V1(je, Pe), Pe !== null) { Zs = _, a.cancelPendingCommit = Pe(Sb.bind(null, a, n, _, c, h, x, D, E, V, ye, je, null, he, me)), Sa(a, _, D, !ue); return } } Sb(a, n, _, c, h, x, D, E, V) } function o1(a) { for (var n = a; ;) { var c = n.tag; if ((c === 0 || c === 11 || c === 15) && n.flags & 16384 && (c = n.updateQueue, c !== null && (c = c.stores, c !== null))) for (var h = 0; h < c.length; h++) { var x = c[h], _ = x.getSnapshot; x = x.value; try { if (!Ri(_(), x)) return !1 } catch { return !1 } } if (c = n.child, n.subtreeFlags & 16384 && c !== null) c.return = n, n = c; else { if (n === a) break; for (; n.sibling === null;) { if (n.return === null || n.return === a) return !0; n = n.return } n.sibling.return = n.return, n = n.sibling } } return !0 } function Sa(a, n, c, h) { n &= ~_h, n &= ~rn, a.suspendedLanes |= n, a.pingedLanes &= ~n, h && (a.warmLanes |= n), h = a.expirationTimes; for (var x = n; 0 < x;) { var _ = 31 - Nt(x), D = 1 << _; h[_] = -1, x &= ~D } c !== 0 && ws(a, c, n) } function fc() { return (st & 6) === 0 ? (jl(0), !1) : !0 } function Nh() { if (We !== null) { if (rt === 0) var a = We.return; else a = We, Hs = Ka = null, qd(a), ir = null, al = 0, a = We; for (; a !== null;)Gg(a.alternate, a), a = a.return; We = null } } function hr(a, n) { var c = a.timeoutHandle; c !== -1 && (a.timeoutHandle = -1, T1(c)), c = a.cancelPendingCommit, c !== null && (a.cancelPendingCommit = null, c()), Zs = 0, Nh(), ft = a, We = c = zs(a.current, null), $e = n, rt = 0, Hi = null, _a = !1, cr = Fe(a, n), vh = !1, ur = Ii = _h = rn = ja = Tt = 0, Si = vl = null, jh = !1, (n & 8) !== 0 && (n |= n & 32); var h = a.entangledLanes; if (h !== 0) for (a = a.entanglements, h &= n; 0 < h;) { var x = 31 - Nt(h), _ = 1 << x; n |= a[x], h &= ~_ } return Ks = n, Eo(), c } function xb(a, n) { Ye = null, I.H = hl, n === tr || n === qo ? (n = Ep(), rt = 3) : n === Ad ? (n = Ep(), rt = 4) : rt = n === ah ? 8 : n !== null && typeof n == "object" && typeof n.then == "function" ? 6 : 1, Hi = n, We === null && (Tt = 1, ic(a, es(n, a.current))) } function yb() { var a = zi.current; return a === null ? !0 : ($e & 4194048) === $e ? as === null : ($e & 62914560) === $e || ($e & 536870912) !== 0 ? a === as : !1 } function vb() { var a = I.H; return I.H = hl, a === null ? hl : a } function _b() { var a = I.A; return I.A = r1, a } function mc() { Tt = 4, _a || ($e & 4194048) !== $e && zi.current !== null || (cr = !0), (ja & 134217727) === 0 && (rn & 134217727) === 0 || ft === null || Sa(ft, $e, Ii, !1) } function Ch(a, n, c) { var h = st; st |= 2; var x = vb(), _ = _b(); (ft !== a || $e !== n) && (hc = null, hr(a, n)), n = !1; var D = Tt; e: do try { if (rt !== 0 && We !== null) { var E = We, V = Hi; switch (rt) { case 8: Nh(), D = 6; break e; case 3: case 2: case 9: case 6: zi.current === null && (n = !0); var ue = rt; if (rt = 0, Hi = null, fr(a, E, V, ue), c && cr) { D = 0; break e } break; default: ue = rt, rt = 0, Hi = null, fr(a, E, V, ue) } } c1(), D = Tt; break } catch (ye) { xb(a, ye) } while (!0); return n && a.shellSuspendCounter++, Hs = Ka = null, st = h, I.H = x, I.A = _, We === null && (ft = null, $e = 0, Eo()), D } function c1() { for (; We !== null;)jb(We) } function u1(a, n) { var c = st; st |= 2; var h = vb(), x = _b(); ft !== a || $e !== n ? (hc = null, dc = kt() + 500, hr(a, n)) : cr = Fe(a, n); e: do try { if (rt !== 0 && We !== null) { n = We; var _ = Hi; t: switch (rt) { case 1: rt = 0, Hi = null, fr(a, n, _, 1); break; case 2: case 9: if (Pp(_)) { rt = 0, Hi = null, wb(n); break } n = function () { rt !== 2 && rt !== 9 || ft !== a || (rt = 7), Cs(a) }, _.then(n, n); break e; case 3: rt = 7; break e; case 4: rt = 5; break e; case 7: Pp(_) ? (rt = 0, Hi = null, wb(n)) : (rt = 0, Hi = null, fr(a, n, _, 7)); break; case 5: var D = null; switch (We.tag) { case 26: D = We.memoizedState; case 5: case 27: var E = We; if (D ? ox(D) : E.stateNode.complete) { rt = 0, Hi = null; var V = E.sibling; if (V !== null) We = V; else { var ue = E.return; ue !== null ? (We = ue, pc(ue)) : We = null } break t } }rt = 0, Hi = null, fr(a, n, _, 5); break; case 6: rt = 0, Hi = null, fr(a, n, _, 6); break; case 8: Nh(), Tt = 6; break e; default: throw Error(s(462)) } } d1(); break } catch (ye) { xb(a, ye) } while (!0); return Hs = Ka = null, I.H = h, I.A = x, st = c, We !== null ? 0 : (ft = null, $e = 0, Eo(), Tt) } function d1() { for (; We !== null && !Ue();)jb(We) } function jb(a) { var n = Vg(a.alternate, a, Ks); a.memoizedProps = a.pendingProps, n === null ? pc(a) : We = n } function wb(a) { var n = a, c = n.alternate; switch (n.tag) { case 15: case 0: n = Hg(c, n, n.pendingProps, n.type, void 0, $e); break; case 11: n = Hg(c, n, n.pendingProps, n.type.render, n.ref, $e); break; case 5: qd(n); default: Gg(c, n), n = We = _p(n, Ks), n = Vg(c, n, Ks) }a.memoizedProps = a.pendingProps, n === null ? pc(a) : We = n } function fr(a, n, c, h) { Hs = Ka = null, qd(n), ir = null, al = 0; var x = n.return; try { if (J_(a, x, n, c, $e)) { Tt = 1, ic(a, es(c, a.current)), We = null; return } } catch (_) { if (x !== null) throw We = x, _; Tt = 1, ic(a, es(c, a.current)), We = null; return } n.flags & 32768 ? (Ze || h === 1 ? a = !0 : cr || ($e & 536870912) !== 0 ? a = !1 : (_a = a = !0, (h === 2 || h === 9 || h === 3 || h === 6) && (h = zi.current, h !== null && h.tag === 13 && (h.flags |= 16384))), kb(n, a)) : pc(n) } function pc(a) { var n = a; do { if ((n.flags & 32768) !== 0) { kb(n, _a); return } a = n.return; var c = i1(n.alternate, n, Ks); if (c !== null) { We = c; return } if (n = n.sibling, n !== null) { We = n; return } We = n = a } while (n !== null); Tt === 0 && (Tt = 5) } function kb(a, n) { do { var c = s1(a.alternate, a); if (c !== null) { c.flags &= 32767, We = c; return } if (c = a.return, c !== null && (c.flags |= 32768, c.subtreeFlags = 0, c.deletions = null), !n && (a = a.sibling, a !== null)) { We = a; return } We = a = c } while (a !== null); Tt = 6, We = null } function Sb(a, n, c, h, x, _, D, E, V) { a.cancelPendingCommit = null; do gc(); while (Vt !== 0); if ((st & 6) !== 0) throw Error(s(327)); if (n !== null) { if (n === a.current) throw Error(s(177)); if (_ = n.lanes | n.childLanes, _ |= pd, js(a, c, _, D, E, V), a === ft && (We = ft = null, $e = 0), dr = n, ka = a, Zs = c, wh = _, kh = x, mb = h, (n.subtreeFlags & 10256) !== 0 || (n.flags & 10256) !== 0 ? (a.callbackNode = null, a.callbackPriority = 0, p1(yt, function () { return Ab(), null })) : (a.callbackNode = null, a.callbackPriority = 0), h = (n.flags & 13878) !== 0, (n.subtreeFlags & 13878) !== 0 || h) { h = I.T, I.T = null, x = H.p, H.p = 2, D = st, st |= 4; try { a1(a, n, c) } finally { st = D, H.p = x, I.T = h } } Vt = 1, Nb(), Cb(), Tb() } } function Nb() { if (Vt === 1) { Vt = 0; var a = ka, n = dr, c = (n.flags & 13878) !== 0; if ((n.subtreeFlags & 13878) !== 0 || c) { c = I.T, I.T = null; var h = H.p; H.p = 2; var x = st; st |= 4; try { rb(n, a); var _ = Fh, D = hp(a.containerInfo), E = _.focusedElem, V = _.selectionRange; if (D !== E && E && E.ownerDocument && dp(E.ownerDocument.documentElement, E)) { if (V !== null && ud(E)) { var ue = V.start, ye = V.end; if (ye === void 0 && (ye = ue), "selectionStart" in E) E.selectionStart = ue, E.selectionEnd = Math.min(ye, E.value.length); else { var je = E.ownerDocument || document, he = je && je.defaultView || window; if (he.getSelection) { var me = he.getSelection(), Pe = E.textContent.length, Le = Math.min(V.start, Pe), ut = V.end === void 0 ? Le : Math.min(V.end, Pe); !me.extend && Le > ut && (D = ut, ut = Le, Le = D); var ie = up(E, Le), Z = up(E, ut); if (ie && Z && (me.rangeCount !== 1 || me.anchorNode !== ie.node || me.anchorOffset !== ie.offset || me.focusNode !== Z.node || me.focusOffset !== Z.offset)) { var oe = je.createRange(); oe.setStart(ie.node, ie.offset), me.removeAllRanges(), Le > ut ? (me.addRange(oe), me.extend(Z.node, Z.offset)) : (oe.setEnd(Z.node, Z.offset), me.addRange(oe)) } } } } for (je = [], me = E; me = me.parentNode;)me.nodeType === 1 && je.push({ element: me, left: me.scrollLeft, top: me.scrollTop }); for (typeof E.focus == "function" && E.focus(), E = 0; E < je.length; E++) { var _e = je[E]; _e.element.scrollLeft = _e.left, _e.element.scrollTop = _e.top } } Tc = !!zh, Fh = zh = null } finally { st = x, H.p = h, I.T = c } } a.current = n, Vt = 2 } } function Cb() { if (Vt === 2) { Vt = 0; var a = ka, n = dr, c = (n.flags & 8772) !== 0; if ((n.subtreeFlags & 8772) !== 0 || c) { c = I.T, I.T = null; var h = H.p; H.p = 2; var x = st; st |= 4; try { tb(a, n.alternate, n) } finally { st = x, H.p = h, I.T = c } } Vt = 3 } } function Tb() { if (Vt === 4 || Vt === 3) { Vt = 0, wt(); var a = ka, n = dr, c = Zs, h = mb; (n.subtreeFlags & 10256) !== 0 || (n.flags & 10256) !== 0 ? Vt = 5 : (Vt = 0, dr = ka = null, Db(a, a.pendingLanes)); var x = a.pendingLanes; if (x === 0 && (wa = null), Uu(c), n = n.stateNode, St && typeof St.onCommitFiberRoot == "function") try { St.onCommitFiberRoot(ds, n, void 0, (n.current.flags & 128) === 128) } catch { } if (h !== null) { n = I.T, x = H.p, H.p = 2, I.T = null; try { for (var _ = a.onRecoverableError, D = 0; D < h.length; D++) { var E = h[D]; _(E.value, { componentStack: E.stack }) } } finally { I.T = n, H.p = x } } (Zs & 3) !== 0 && gc(), Cs(a), x = a.pendingLanes, (c & 261930) !== 0 && (x & 42) !== 0 ? a === Sh ? _l++ : (_l = 0, Sh = a) : _l = 0, jl(0) } } function Db(a, n) { (a.pooledCacheLanes &= n) === 0 && (n = a.pooledCache, n != null && (a.pooledCache = null, il(n))) } function gc() { return Nb(), Cb(), Tb(), Ab() } function Ab() { if (Vt !== 5) return !1; var a = ka, n = wh; wh = 0; var c = Uu(Zs), h = I.T, x = H.p; try { H.p = 32 > c ? 32 : c, I.T = null, c = kh, kh = null; var _ = ka, D = Zs; if (Vt = 0, dr = ka = null, Zs = 0, (st & 6) !== 0) throw Error(s(331)); var E = st; if (st |= 4, db(_.current), ob(_, _.current, D, c), st = E, jl(0, !1), St && typeof St.onPostCommitFiberRoot == "function") try { St.onPostCommitFiberRoot(ds, _) } catch { } return !0 } finally { H.p = x, I.T = h, Db(a, n) } } function Mb(a, n, c) { n = es(c, n), n = sh(a.stateNode, n, 2), a = ba(a, n, 2), a !== null && (ii(a, 2), Cs(a)) } function lt(a, n, c) { if (a.tag === 3) Mb(a, a, c); else for (; n !== null;) { if (n.tag === 3) { Mb(n, a, c); break } else if (n.tag === 1) { var h = n.stateNode; if (typeof n.type.getDerivedStateFromError == "function" || typeof h.componentDidCatch == "function" && (wa === null || !wa.has(h))) { a = es(c, a), c = Pg(2), h = ba(n, c, 2), h !== null && (Og(c, h, n, a), ii(h, 2), Cs(h)); break } } n = n.return } } function Th(a, n, c) { var h = a.pingCache; if (h === null) { h = a.pingCache = new l1; var x = new Set; h.set(n, x) } else x = h.get(n), x === void 0 && (x = new Set, h.set(n, x)); x.has(c) || (vh = !0, x.add(c), a = h1.bind(null, a, n, c), n.then(a, a)) } function h1(a, n, c) { var h = a.pingCache; h !== null && h.delete(n), a.pingedLanes |= a.suspendedLanes & c, a.warmLanes &= ~c, ft === a && ($e & c) === c && (Tt === 4 || Tt === 3 && ($e & 62914560) === $e && 300 > kt() - uc ? (st & 2) === 0 && hr(a, 0) : _h |= c, ur === $e && (ur = 0)), Cs(a) } function Pb(a, n) { n === 0 && (n = ht()), a = Wa(a, n), a !== null && (ii(a, n), Cs(a)) } function f1(a) { var n = a.memoizedState, c = 0; n !== null && (c = n.retryLane), Pb(a, c) } function m1(a, n) { var c = 0; switch (a.tag) { case 31: case 13: var h = a.stateNode, x = a.memoizedState; x !== null && (c = x.retryLane); break; case 19: h = a.stateNode; break; case 22: h = a.stateNode._retryCache; break; default: throw Error(s(314)) }h !== null && h.delete(n), Pb(a, c) } function p1(a, n) { return re(a, n) } var bc = null, mr = null, Dh = !1, xc = !1, Ah = !1, Na = 0; function Cs(a) { a !== mr && a.next === null && (mr === null ? bc = mr = a : mr = mr.next = a), xc = !0, Dh || (Dh = !0, b1()) } function jl(a, n) { if (!Ah && xc) { Ah = !0; do for (var c = !1, h = bc; h !== null;) { if (a !== 0) { var x = h.pendingLanes; if (x === 0) var _ = 0; else { var D = h.suspendedLanes, E = h.pingedLanes; _ = (1 << 31 - Nt(42 | a) + 1) - 1, _ &= x & ~(D & ~E), _ = _ & 201326741 ? _ & 201326741 | 1 : _ ? _ | 2 : 0 } _ !== 0 && (c = !0, Rb(h, _)) } else _ = $e, _ = En(h, h === ft ? _ : 0, h.cancelPendingCommit !== null || h.timeoutHandle !== -1), (_ & 3) === 0 || Fe(h, _) || (c = !0, Rb(h, _)); h = h.next } while (c); Ah = !1 } } function g1() { Ob() } function Ob() { xc = Dh = !1; var a = 0; Na !== 0 && C1() && (a = Na); for (var n = kt(), c = null, h = bc; h !== null;) { var x = h.next, _ = Eb(h, n); _ === 0 ? (h.next = null, c === null ? bc = x : c.next = x, x === null && (mr = c)) : (c = h, (a !== 0 || (_ & 3) !== 0) && (xc = !0)), h = x } Vt !== 0 && Vt !== 5 || jl(a), Na !== 0 && (Na = 0) } function Eb(a, n) { for (var c = a.suspendedLanes, h = a.pingedLanes, x = a.expirationTimes, _ = a.pendingLanes & -62914561; 0 < _;) { var D = 31 - Nt(_), E = 1 << D, V = x[D]; V === -1 ? ((E & c) === 0 || (E & h) !== 0) && (x[D] = nt(E, n)) : V <= n && (a.expiredLanes |= E), _ &= ~E } if (n = ft, c = $e, c = En(a, a === n ? c : 0, a.cancelPendingCommit !== null || a.timeoutHandle !== -1), h = a.callbackNode, c === 0 || a === n && (rt === 2 || rt === 9) || a.cancelPendingCommit !== null) return h !== null && h !== null && Ce(h), a.callbackNode = null, a.callbackPriority = 0; if ((c & 3) === 0 || Fe(a, c)) { if (n = c & -c, n === a.callbackPriority) return n; switch (h !== null && Ce(h), Uu(c)) { case 2: case 8: c = Bi; break; case 32: c = yt; break; case 268435456: c = us; break; default: c = yt }return h = Bb.bind(null, a), c = re(c, h), a.callbackPriority = n, a.callbackNode = c, n } return h !== null && h !== null && Ce(h), a.callbackPriority = 2, a.callbackNode = null, 2 } function Bb(a, n) { if (Vt !== 0 && Vt !== 5) return a.callbackNode = null, a.callbackPriority = 0, null; var c = a.callbackNode; if (gc() && a.callbackNode !== c) return null; var h = $e; return h = En(a, a === ft ? h : 0, a.cancelPendingCommit !== null || a.timeoutHandle !== -1), h === 0 ? null : (gb(a, h, n), Eb(a, kt()), a.callbackNode != null && a.callbackNode === c ? Bb.bind(null, a) : null) } function Rb(a, n) { if (gc()) return null; gb(a, n, !0) } function b1() { D1(function () { (st & 6) !== 0 ? re(ti, g1) : Ob() }) } function Mh() { if (Na === 0) { var a = Jn; a === 0 && (a = qa, qa <<= 1, (qa & 261888) === 0 && (qa = 256)), Na = a } return Na } function Lb(a) { return a == null || typeof a == "symbol" || typeof a == "boolean" ? null : typeof a == "function" ? a : No("" + a) } function zb(a, n) { var c = n.ownerDocument.createElement("input"); return c.name = n.name, c.value = n.value, a.id && c.setAttribute("form", a.id), n.parentNode.insertBefore(c, n), a = new FormData(a), c.parentNode.removeChild(c), a } function x1(a, n, c, h, x) { if (n === "submit" && c && c.stateNode === x) { var _ = Lb((x[vi] || null).action), D = h.submitter; D && (n = (n = D[vi] || null) ? Lb(n.formAction) : D.getAttribute("formAction"), n !== null && (_ = n, D = null)); var E = new Ao("action", "action", null, h, x); a.push({ event: E, listeners: [{ instance: null, listener: function () { if (h.defaultPrevented) { if (Na !== 0) { var V = D ? zb(x, D) : new FormData(x); Zd(c, { pending: !0, data: V, method: x.method, action: _ }, null, V) } } else typeof _ == "function" && (E.preventDefault(), V = D ? zb(x, D) : new FormData(x), Zd(c, { pending: !0, data: V, method: x.method, action: _ }, _, V)) }, currentTarget: x }] }) } } for (var Ph = 0; Ph < md.length; Ph++) { var Oh = md[Ph], y1 = Oh.toLowerCase(), v1 = Oh[0].toUpperCase() + Oh.slice(1); fs(y1, "on" + v1) } fs(pp, "onAnimationEnd"), fs(gp, "onAnimationIteration"), fs(bp, "onAnimationStart"), fs("dblclick", "onDoubleClick"), fs("focusin", "onFocus"), fs("focusout", "onBlur"), fs(R_, "onTransitionRun"), fs(L_, "onTransitionStart"), fs(z_, "onTransitionCancel"), fs(xp, "onTransitionEnd"), Fn("onMouseEnter", ["mouseout", "mouseover"]), Fn("onMouseLeave", ["mouseout", "mouseover"]), Fn("onPointerEnter", ["pointerout", "pointerover"]), Fn("onPointerLeave", ["pointerout", "pointerover"]), Ya("onChange", "change click focusin focusout input keydown keyup selectionchange".split(" ")), Ya("onSelect", "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")), Ya("onBeforeInput", ["compositionend", "keypress", "textInput", "paste"]), Ya("onCompositionEnd", "compositionend focusout keydown keypress keyup mousedown".split(" ")), Ya("onCompositionStart", "compositionstart focusout keydown keypress keyup mousedown".split(" ")), Ya("onCompositionUpdate", "compositionupdate focusout keydown keypress keyup mousedown".split(" ")); var wl = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "), _1 = new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wl)); function Fb(a, n) { n = (n & 4) !== 0; for (var c = 0; c < a.length; c++) { var h = a[c], x = h.event; h = h.listeners; e: { var _ = void 0; if (n) for (var D = h.length - 1; 0 <= D; D--) { var E = h[D], V = E.instance, ue = E.currentTarget; if (E = E.listener, V !== _ && x.isPropagationStopped()) break e; _ = E, x.currentTarget = ue; try { _(x) } catch (ye) { Oo(ye) } x.currentTarget = null, _ = V } else for (D = 0; D < h.length; D++) { if (E = h[D], V = E.instance, ue = E.currentTarget, E = E.listener, V !== _ && x.isPropagationStopped()) break e; _ = E, x.currentTarget = ue; try { _(x) } catch (ye) { Oo(ye) } x.currentTarget = null, _ = V } } } } function Ge(a, n) { var c = n[Vu]; c === void 0 && (c = n[Vu] = new Set); var h = a + "__bubble"; c.has(h) || (Hb(n, a, 2, !1), c.add(h)) } function Eh(a, n, c) { var h = 0; n && (h |= 4), Hb(c, a, h, n) } var yc = "_reactListening" + Math.random().toString(36).slice(2); function Bh(a) { if (!a[yc]) { a[yc] = !0, Om.forEach(function (c) { c !== "selectionchange" && (_1.has(c) || Eh(c, !1, a), Eh(c, !0, a)) }); var n = a.nodeType === 9 ? a : a.ownerDocument; n === null || n[yc] || (n[yc] = !0, Eh("selectionchange", !1, n)) } } function Hb(a, n, c, h) { switch (px(n)) { case 2: var x = $1; break; case 8: x = K1; break; default: x = Kh }c = x.bind(null, n, c, a), x = void 0, !td || n !== "touchstart" && n !== "touchmove" && n !== "wheel" || (x = !0), h ? x !== void 0 ? a.addEventListener(n, c, { capture: !0, passive: x }) : a.addEventListener(n, c, !0) : x !== void 0 ? a.addEventListener(n, c, { passive: x }) : a.addEventListener(n, c, !1) } function Rh(a, n, c, h, x) { var _ = h; if ((n & 1) === 0 && (n & 2) === 0 && h !== null) e: for (; ;) { if (h === null) return; var D = h.tag; if (D === 3 || D === 4) { var E = h.stateNode.containerInfo; if (E === x) break; if (D === 4) for (D = h.return; D !== null;) { var V = D.tag; if ((V === 3 || V === 4) && D.stateNode.containerInfo === x) return; D = D.return } for (; E !== null;) { if (D = Rn(E), D === null) return; if (V = D.tag, V === 5 || V === 6 || V === 26 || V === 27) { h = _ = D; continue e } E = E.parentNode } } h = h.return } Um(function () { var ue = _, ye = Ju(c), je = []; e: { var he = yp.get(a); if (he !== void 0) { var me = Ao, Pe = a; switch (a) { case "keypress": if (To(c) === 0) break e; case "keydown": case "keyup": me = m_; break; case "focusin": Pe = "focus", me = nd; break; case "focusout": Pe = "blur", me = nd; break; case "beforeblur": case "afterblur": me = nd; break; case "click": if (c.button === 2) break e; case "auxclick": case "dblclick": case "mousedown": case "mousemove": case "mouseup": case "mouseout": case "mouseover": case "contextmenu": me = Gm; break; case "drag": case "dragend": case "dragenter": case "dragexit": case "dragleave": case "dragover": case "dragstart": case "drop": me = i_; break; case "touchcancel": case "touchend": case "touchmove": case "touchstart": me = b_; break; case pp: case gp: case bp: me = n_; break; case xp: me = y_; break; case "scroll": case "scrollend": me = e_; break; case "wheel": me = __; break; case "copy": case "cut": case "paste": me = l_; break; case "gotpointercapture": case "lostpointercapture": case "pointercancel": case "pointerdown": case "pointermove": case "pointerout": case "pointerover": case "pointerup": me = Km; break; case "toggle": case "beforetoggle": me = w_ }var Le = (n & 4) !== 0, ut = !Le && (a === "scroll" || a === "scrollend"), ie = Le ? he !== null ? he + "Capture" : null : he; Le = []; for (var Z = ue, oe; Z !== null;) { var _e = Z; if (oe = _e.stateNode, _e = _e.tag, _e !== 5 && _e !== 26 && _e !== 27 || oe === null || ie === null || (_e = Ur(Z, ie), _e != null && Le.push(kl(Z, _e, oe))), ut) break; Z = Z.return } 0 < Le.length && (he = new me(he, Pe, null, c, ye), je.push({ event: he, listeners: Le })) } } if ((n & 7) === 0) { e: { if (he = a === "mouseover" || a === "pointerover", me = a === "mouseout" || a === "pointerout", he && c !== Qu && (Pe = c.relatedTarget || c.fromElement) && (Rn(Pe) || Pe[Bn])) break e; if ((me || he) && (he = ye.window === ye ? ye : (he = ye.ownerDocument) ? he.defaultView || he.parentWindow : window, me ? (Pe = c.relatedTarget || c.toElement, me = ue, Pe = Pe ? Rn(Pe) : null, Pe !== null && (ut = o(Pe), Le = Pe.tag, Pe !== ut || Le !== 5 && Le !== 27 && Le !== 6) && (Pe = null)) : (me = null, Pe = ue), me !== Pe)) { if (Le = Gm, _e = "onMouseLeave", ie = "onMouseEnter", Z = "mouse", (a === "pointerout" || a === "pointerover") && (Le = Km, _e = "onPointerLeave", ie = "onPointerEnter", Z = "pointer"), ut = me == null ? he : Xr(me), oe = Pe == null ? he : Xr(Pe), he = new Le(_e, Z + "leave", me, c, ye), he.target = ut, he.relatedTarget = oe, _e = null, Rn(ye) === ue && (Le = new Le(ie, Z + "enter", Pe, c, ye), Le.target = oe, Le.relatedTarget = ut, _e = Le), ut = _e, me && Pe) t: { for (Le = j1, ie = me, Z = Pe, oe = 0, _e = ie; _e; _e = Le(_e))oe++; _e = 0; for (var Re = Z; Re; Re = Le(Re))_e++; for (; 0 < oe - _e;)ie = Le(ie), oe--; for (; 0 < _e - oe;)Z = Le(Z), _e--; for (; oe--;) { if (ie === Z || Z !== null && ie === Z.alternate) { Le = ie; break t } ie = Le(ie), Z = Le(Z) } Le = null } else Le = null; me !== null && Ib(je, he, me, Le, !1), Pe !== null && ut !== null && Ib(je, ut, Pe, Le, !0) } } e: { if (he = ue ? Xr(ue) : window, me = he.nodeName && he.nodeName.toLowerCase(), me === "select" || me === "input" && he.type === "file") var et = ap; else if (ip(he)) if (np) et = O_; else { et = M_; var Be = A_ } else me = he.nodeName, !me || me.toLowerCase() !== "input" || he.type !== "checkbox" && he.type !== "radio" ? ue && Zu(ue.elementType) && (et = ap) : et = P_; if (et && (et = et(a, ue))) { sp(je, et, c, ye); break e } Be && Be(a, he, ue), a === "focusout" && ue && he.type === "number" && ue.memoizedProps.value != null && Ku(he, "number", he.value) } switch (Be = ue ? Xr(ue) : window, a) { case "focusin": (ip(Be) || Be.contentEditable === "true") && (Un = Be, dd = ue, Jr = null); break; case "focusout": Jr = dd = Un = null; break; case "mousedown": hd = !0; break; case "contextmenu": case "mouseup": case "dragend": hd = !1, fp(je, c, ye); break; case "selectionchange": if (B_) break; case "keydown": case "keyup": fp(je, c, ye) }var Xe; if (ld) e: { switch (a) { case "compositionstart": var Ke = "onCompositionStart"; break e; case "compositionend": Ke = "onCompositionEnd"; break e; case "compositionupdate": Ke = "onCompositionUpdate"; break e }Ke = void 0 } else Xn ? ep(a, c) && (Ke = "onCompositionEnd") : a === "keydown" && c.keyCode === 229 && (Ke = "onCompositionStart"); Ke && (Zm && c.locale !== "ko" && (Xn || Ke !== "onCompositionStart" ? Ke === "onCompositionEnd" && Xn && (Xe = Vm()) : (ua = ye, id = "value" in ua ? ua.value : ua.textContent, Xn = !0)), Be = vc(ue, Ke), 0 < Be.length && (Ke = new $m(Ke, a, null, c, ye), je.push({ event: Ke, listeners: Be }), Xe ? Ke.data = Xe : (Xe = tp(c), Xe !== null && (Ke.data = Xe)))), (Xe = S_ ? N_(a, c) : C_(a, c)) && (Ke = vc(ue, "onBeforeInput"), 0 < Ke.length && (Be = new $m("onBeforeInput", "beforeinput", null, c, ye), je.push({ event: Be, listeners: Ke }), Be.data = Xe)), x1(je, a, ue, c, ye) } Fb(je, n) }) } function kl(a, n, c) { return { instance: a, listener: n, currentTarget: c } } function vc(a, n) { for (var c = n + "Capture", h = []; a !== null;) { var x = a, _ = x.stateNode; if (x = x.tag, x !== 5 && x !== 26 && x !== 27 || _ === null || (x = Ur(a, c), x != null && h.unshift(kl(a, x, _)), x = Ur(a, n), x != null && h.push(kl(a, x, _))), a.tag === 3) return h; a = a.return } return [] } function j1(a) { if (a === null) return null; do a = a.return; while (a && a.tag !== 5 && a.tag !== 27); return a || null } function Ib(a, n, c, h, x) { for (var _ = n._reactName, D = []; c !== null && c !== h;) { var E = c, V = E.alternate, ue = E.stateNode; if (E = E.tag, V !== null && V === h) break; E !== 5 && E !== 26 && E !== 27 || ue === null || (V = ue, x ? (ue = Ur(c, _), ue != null && D.unshift(kl(c, ue, V))) : x || (ue = Ur(c, _), ue != null && D.push(kl(c, ue, V)))), c = c.return } D.length !== 0 && a.push({ event: n, listeners: D }) } var w1 = /\r\n?/g, k1 = /\u0000|\uFFFD/g; function qb(a) {
        return (typeof a == "string" ? a : "" + a).replace(w1, `
`).replace(k1, "")
    } function Yb(a, n) { return n = qb(n), qb(a) === n } function ct(a, n, c, h, x, _) { switch (c) { case "children": typeof h == "string" ? n === "body" || n === "textarea" && h === "" || In(a, h) : (typeof h == "number" || typeof h == "bigint") && n !== "body" && In(a, "" + h); break; case "className": ko(a, "class", h); break; case "tabIndex": ko(a, "tabindex", h); break; case "dir": case "role": case "viewBox": case "width": case "height": ko(a, c, h); break; case "style": Ym(a, h, _); break; case "data": if (n !== "object") { ko(a, "data", h); break } case "src": case "href": if (h === "" && (n !== "a" || c !== "href")) { a.removeAttribute(c); break } if (h == null || typeof h == "function" || typeof h == "symbol" || typeof h == "boolean") { a.removeAttribute(c); break } h = No("" + h), a.setAttribute(c, h); break; case "action": case "formAction": if (typeof h == "function") { a.setAttribute(c, "javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')"); break } else typeof _ == "function" && (c === "formAction" ? (n !== "input" && ct(a, n, "name", x.name, x, null), ct(a, n, "formEncType", x.formEncType, x, null), ct(a, n, "formMethod", x.formMethod, x, null), ct(a, n, "formTarget", x.formTarget, x, null)) : (ct(a, n, "encType", x.encType, x, null), ct(a, n, "method", x.method, x, null), ct(a, n, "target", x.target, x, null))); if (h == null || typeof h == "symbol" || typeof h == "boolean") { a.removeAttribute(c); break } h = No("" + h), a.setAttribute(c, h); break; case "onClick": h != null && (a.onclick = Rs); break; case "onScroll": h != null && Ge("scroll", a); break; case "onScrollEnd": h != null && Ge("scrollend", a); break; case "dangerouslySetInnerHTML": if (h != null) { if (typeof h != "object" || !("__html" in h)) throw Error(s(61)); if (c = h.__html, c != null) { if (x.children != null) throw Error(s(60)); a.innerHTML = c } } break; case "multiple": a.multiple = h && typeof h != "function" && typeof h != "symbol"; break; case "muted": a.muted = h && typeof h != "function" && typeof h != "symbol"; break; case "suppressContentEditableWarning": case "suppressHydrationWarning": case "defaultValue": case "defaultChecked": case "innerHTML": case "ref": break; case "autoFocus": break; case "xlinkHref": if (h == null || typeof h == "function" || typeof h == "boolean" || typeof h == "symbol") { a.removeAttribute("xlink:href"); break } c = No("" + h), a.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", c); break; case "contentEditable": case "spellCheck": case "draggable": case "value": case "autoReverse": case "externalResourcesRequired": case "focusable": case "preserveAlpha": h != null && typeof h != "function" && typeof h != "symbol" ? a.setAttribute(c, "" + h) : a.removeAttribute(c); break; case "inert": case "allowFullScreen": case "async": case "autoPlay": case "controls": case "default": case "defer": case "disabled": case "disablePictureInPicture": case "disableRemotePlayback": case "formNoValidate": case "hidden": case "loop": case "noModule": case "noValidate": case "open": case "playsInline": case "readOnly": case "required": case "reversed": case "scoped": case "seamless": case "itemScope": h && typeof h != "function" && typeof h != "symbol" ? a.setAttribute(c, "") : a.removeAttribute(c); break; case "capture": case "download": h === !0 ? a.setAttribute(c, "") : h !== !1 && h != null && typeof h != "function" && typeof h != "symbol" ? a.setAttribute(c, h) : a.removeAttribute(c); break; case "cols": case "rows": case "size": case "span": h != null && typeof h != "function" && typeof h != "symbol" && !isNaN(h) && 1 <= h ? a.setAttribute(c, h) : a.removeAttribute(c); break; case "rowSpan": case "start": h == null || typeof h == "function" || typeof h == "symbol" || isNaN(h) ? a.removeAttribute(c) : a.setAttribute(c, h); break; case "popover": Ge("beforetoggle", a), Ge("toggle", a), wo(a, "popover", h); break; case "xlinkActuate": Bs(a, "http://www.w3.org/1999/xlink", "xlink:actuate", h); break; case "xlinkArcrole": Bs(a, "http://www.w3.org/1999/xlink", "xlink:arcrole", h); break; case "xlinkRole": Bs(a, "http://www.w3.org/1999/xlink", "xlink:role", h); break; case "xlinkShow": Bs(a, "http://www.w3.org/1999/xlink", "xlink:show", h); break; case "xlinkTitle": Bs(a, "http://www.w3.org/1999/xlink", "xlink:title", h); break; case "xlinkType": Bs(a, "http://www.w3.org/1999/xlink", "xlink:type", h); break; case "xmlBase": Bs(a, "http://www.w3.org/XML/1998/namespace", "xml:base", h); break; case "xmlLang": Bs(a, "http://www.w3.org/XML/1998/namespace", "xml:lang", h); break; case "xmlSpace": Bs(a, "http://www.w3.org/XML/1998/namespace", "xml:space", h); break; case "is": wo(a, "is", h); break; case "innerText": case "textContent": break; default: (!(2 < c.length) || c[0] !== "o" && c[0] !== "O" || c[1] !== "n" && c[1] !== "N") && (c = Q0.get(c) || c, wo(a, c, h)) } } function Lh(a, n, c, h, x, _) { switch (c) { case "style": Ym(a, h, _); break; case "dangerouslySetInnerHTML": if (h != null) { if (typeof h != "object" || !("__html" in h)) throw Error(s(61)); if (c = h.__html, c != null) { if (x.children != null) throw Error(s(60)); a.innerHTML = c } } break; case "children": typeof h == "string" ? In(a, h) : (typeof h == "number" || typeof h == "bigint") && In(a, "" + h); break; case "onScroll": h != null && Ge("scroll", a); break; case "onScrollEnd": h != null && Ge("scrollend", a); break; case "onClick": h != null && (a.onclick = Rs); break; case "suppressContentEditableWarning": case "suppressHydrationWarning": case "innerHTML": case "ref": break; case "innerText": case "textContent": break; default: if (!Em.hasOwnProperty(c)) e: { if (c[0] === "o" && c[1] === "n" && (x = c.endsWith("Capture"), n = c.slice(2, x ? c.length - 7 : void 0), _ = a[vi] || null, _ = _ != null ? _[c] : null, typeof _ == "function" && a.removeEventListener(n, _, x), typeof h == "function")) { typeof _ != "function" && _ !== null && (c in a ? a[c] = null : a.hasAttribute(c) && a.removeAttribute(c)), a.addEventListener(n, h, x); break e } c in a ? a[c] = h : h === !0 ? a.setAttribute(c, "") : wo(a, c, h) } } } function li(a, n, c) { switch (n) { case "div": case "span": case "svg": case "path": case "a": case "g": case "p": case "li": break; case "img": Ge("error", a), Ge("load", a); var h = !1, x = !1, _; for (_ in c) if (c.hasOwnProperty(_)) { var D = c[_]; if (D != null) switch (_) { case "src": h = !0; break; case "srcSet": x = !0; break; case "children": case "dangerouslySetInnerHTML": throw Error(s(137, n)); default: ct(a, n, _, D, c, null) } } x && ct(a, n, "srcSet", c.srcSet, c, null), h && ct(a, n, "src", c.src, c, null); return; case "input": Ge("invalid", a); var E = _ = D = x = null, V = null, ue = null; for (h in c) if (c.hasOwnProperty(h)) { var ye = c[h]; if (ye != null) switch (h) { case "name": x = ye; break; case "type": D = ye; break; case "checked": V = ye; break; case "defaultChecked": ue = ye; break; case "value": _ = ye; break; case "defaultValue": E = ye; break; case "children": case "dangerouslySetInnerHTML": if (ye != null) throw Error(s(137, n)); break; default: ct(a, n, h, ye, c, null) } } Fm(a, _, E, V, ue, D, x, !1); return; case "select": Ge("invalid", a), h = D = _ = null; for (x in c) if (c.hasOwnProperty(x) && (E = c[x], E != null)) switch (x) { case "value": _ = E; break; case "defaultValue": D = E; break; case "multiple": h = E; default: ct(a, n, x, E, c, null) }n = _, c = D, a.multiple = !!h, n != null ? Hn(a, !!h, n, !1) : c != null && Hn(a, !!h, c, !0); return; case "textarea": Ge("invalid", a), _ = x = h = null; for (D in c) if (c.hasOwnProperty(D) && (E = c[D], E != null)) switch (D) { case "value": h = E; break; case "defaultValue": x = E; break; case "children": _ = E; break; case "dangerouslySetInnerHTML": if (E != null) throw Error(s(91)); break; default: ct(a, n, D, E, c, null) }Im(a, h, x, _); return; case "option": for (V in c) c.hasOwnProperty(V) && (h = c[V], h != null) && (V === "selected" ? a.selected = h && typeof h != "function" && typeof h != "symbol" : ct(a, n, V, h, c, null)); return; case "dialog": Ge("beforetoggle", a), Ge("toggle", a), Ge("cancel", a), Ge("close", a); break; case "iframe": case "object": Ge("load", a); break; case "video": case "audio": for (h = 0; h < wl.length; h++)Ge(wl[h], a); break; case "image": Ge("error", a), Ge("load", a); break; case "details": Ge("toggle", a); break; case "embed": case "source": case "link": Ge("error", a), Ge("load", a); case "area": case "base": case "br": case "col": case "hr": case "keygen": case "meta": case "param": case "track": case "wbr": case "menuitem": for (ue in c) if (c.hasOwnProperty(ue) && (h = c[ue], h != null)) switch (ue) { case "children": case "dangerouslySetInnerHTML": throw Error(s(137, n)); default: ct(a, n, ue, h, c, null) }return; default: if (Zu(n)) { for (ye in c) c.hasOwnProperty(ye) && (h = c[ye], h !== void 0 && Lh(a, n, ye, h, c, void 0)); return } }for (E in c) c.hasOwnProperty(E) && (h = c[E], h != null && ct(a, n, E, h, c, null)) } function S1(a, n, c, h) { switch (n) { case "div": case "span": case "svg": case "path": case "a": case "g": case "p": case "li": break; case "input": var x = null, _ = null, D = null, E = null, V = null, ue = null, ye = null; for (me in c) { var je = c[me]; if (c.hasOwnProperty(me) && je != null) switch (me) { case "checked": break; case "value": break; case "defaultValue": V = je; default: h.hasOwnProperty(me) || ct(a, n, me, null, h, je) } } for (var he in h) { var me = h[he]; if (je = c[he], h.hasOwnProperty(he) && (me != null || je != null)) switch (he) { case "type": _ = me; break; case "name": x = me; break; case "checked": ue = me; break; case "defaultChecked": ye = me; break; case "value": D = me; break; case "defaultValue": E = me; break; case "children": case "dangerouslySetInnerHTML": if (me != null) throw Error(s(137, n)); break; default: me !== je && ct(a, n, he, me, h, je) } } $u(a, D, E, V, ue, ye, _, x); return; case "select": me = D = E = he = null; for (_ in c) if (V = c[_], c.hasOwnProperty(_) && V != null) switch (_) { case "value": break; case "multiple": me = V; default: h.hasOwnProperty(_) || ct(a, n, _, null, h, V) }for (x in h) if (_ = h[x], V = c[x], h.hasOwnProperty(x) && (_ != null || V != null)) switch (x) { case "value": he = _; break; case "defaultValue": E = _; break; case "multiple": D = _; default: _ !== V && ct(a, n, x, _, h, V) }n = E, c = D, h = me, he != null ? Hn(a, !!c, he, !1) : !!h != !!c && (n != null ? Hn(a, !!c, n, !0) : Hn(a, !!c, c ? [] : "", !1)); return; case "textarea": me = he = null; for (E in c) if (x = c[E], c.hasOwnProperty(E) && x != null && !h.hasOwnProperty(E)) switch (E) { case "value": break; case "children": break; default: ct(a, n, E, null, h, x) }for (D in h) if (x = h[D], _ = c[D], h.hasOwnProperty(D) && (x != null || _ != null)) switch (D) { case "value": he = x; break; case "defaultValue": me = x; break; case "children": break; case "dangerouslySetInnerHTML": if (x != null) throw Error(s(91)); break; default: x !== _ && ct(a, n, D, x, h, _) }Hm(a, he, me); return; case "option": for (var Pe in c) he = c[Pe], c.hasOwnProperty(Pe) && he != null && !h.hasOwnProperty(Pe) && (Pe === "selected" ? a.selected = !1 : ct(a, n, Pe, null, h, he)); for (V in h) he = h[V], me = c[V], h.hasOwnProperty(V) && he !== me && (he != null || me != null) && (V === "selected" ? a.selected = he && typeof he != "function" && typeof he != "symbol" : ct(a, n, V, he, h, me)); return; case "img": case "link": case "area": case "base": case "br": case "col": case "embed": case "hr": case "keygen": case "meta": case "param": case "source": case "track": case "wbr": case "menuitem": for (var Le in c) he = c[Le], c.hasOwnProperty(Le) && he != null && !h.hasOwnProperty(Le) && ct(a, n, Le, null, h, he); for (ue in h) if (he = h[ue], me = c[ue], h.hasOwnProperty(ue) && he !== me && (he != null || me != null)) switch (ue) { case "children": case "dangerouslySetInnerHTML": if (he != null) throw Error(s(137, n)); break; default: ct(a, n, ue, he, h, me) }return; default: if (Zu(n)) { for (var ut in c) he = c[ut], c.hasOwnProperty(ut) && he !== void 0 && !h.hasOwnProperty(ut) && Lh(a, n, ut, void 0, h, he); for (ye in h) he = h[ye], me = c[ye], !h.hasOwnProperty(ye) || he === me || he === void 0 && me === void 0 || Lh(a, n, ye, he, h, me); return } }for (var ie in c) he = c[ie], c.hasOwnProperty(ie) && he != null && !h.hasOwnProperty(ie) && ct(a, n, ie, null, h, he); for (je in h) he = h[je], me = c[je], !h.hasOwnProperty(je) || he === me || he == null && me == null || ct(a, n, je, he, h, me) } function Xb(a) { switch (a) { case "css": case "script": case "font": case "img": case "image": case "input": case "link": return !0; default: return !1 } } function N1() { if (typeof performance.getEntriesByType == "function") { for (var a = 0, n = 0, c = performance.getEntriesByType("resource"), h = 0; h < c.length; h++) { var x = c[h], _ = x.transferSize, D = x.initiatorType, E = x.duration; if (_ && E && Xb(D)) { for (D = 0, E = x.responseEnd, h += 1; h < c.length; h++) { var V = c[h], ue = V.startTime; if (ue > E) break; var ye = V.transferSize, je = V.initiatorType; ye && Xb(je) && (V = V.responseEnd, D += ye * (V < E ? 1 : (E - ue) / (V - ue))) } if (--h, n += 8 * (_ + D) / (x.duration / 1e3), a++, 10 < a) break } } if (0 < a) return n / a / 1e6 } return navigator.connection && (a = navigator.connection.downlink, typeof a == "number") ? a : 5 } var zh = null, Fh = null; function _c(a) { return a.nodeType === 9 ? a : a.ownerDocument } function Ub(a) { switch (a) { case "http://www.w3.org/2000/svg": return 1; case "http://www.w3.org/1998/Math/MathML": return 2; default: return 0 } } function Vb(a, n) { if (a === 0) switch (n) { case "svg": return 1; case "math": return 2; default: return 0 }return a === 1 && n === "foreignObject" ? 0 : a } function Hh(a, n) { return a === "textarea" || a === "noscript" || typeof n.children == "string" || typeof n.children == "number" || typeof n.children == "bigint" || typeof n.dangerouslySetInnerHTML == "object" && n.dangerouslySetInnerHTML !== null && n.dangerouslySetInnerHTML.__html != null } var Ih = null; function C1() { var a = window.event; return a && a.type === "popstate" ? a === Ih ? !1 : (Ih = a, !0) : (Ih = null, !1) } var Wb = typeof setTimeout == "function" ? setTimeout : void 0, T1 = typeof clearTimeout == "function" ? clearTimeout : void 0, Gb = typeof Promise == "function" ? Promise : void 0, D1 = typeof queueMicrotask == "function" ? queueMicrotask : typeof Gb < "u" ? function (a) { return Gb.resolve(null).then(a).catch(A1) } : Wb; function A1(a) { setTimeout(function () { throw a }) } function Ca(a) { return a === "head" } function $b(a, n) { var c = n, h = 0; do { var x = c.nextSibling; if (a.removeChild(c), x && x.nodeType === 8) if (c = x.data, c === "/$" || c === "/&") { if (h === 0) { a.removeChild(x), xr(n); return } h-- } else if (c === "$" || c === "$?" || c === "$~" || c === "$!" || c === "&") h++; else if (c === "html") Sl(a.ownerDocument.documentElement); else if (c === "head") { c = a.ownerDocument.head, Sl(c); for (var _ = c.firstChild; _;) { var D = _.nextSibling, E = _.nodeName; _[Yr] || E === "SCRIPT" || E === "STYLE" || E === "LINK" && _.rel.toLowerCase() === "stylesheet" || c.removeChild(_), _ = D } } else c === "body" && Sl(a.ownerDocument.body); c = x } while (c); xr(n) } function Kb(a, n) { var c = a; a = 0; do { var h = c.nextSibling; if (c.nodeType === 1 ? n ? (c._stashedDisplay = c.style.display, c.style.display = "none") : (c.style.display = c._stashedDisplay || "", c.getAttribute("style") === "" && c.removeAttribute("style")) : c.nodeType === 3 && (n ? (c._stashedText = c.nodeValue, c.nodeValue = "") : c.nodeValue = c._stashedText || ""), h && h.nodeType === 8) if (c = h.data, c === "/$") { if (a === 0) break; a-- } else c !== "$" && c !== "$?" && c !== "$~" && c !== "$!" || a++; c = h } while (c) } function qh(a) { var n = a.firstChild; for (n && n.nodeType === 10 && (n = n.nextSibling); n;) { var c = n; switch (n = n.nextSibling, c.nodeName) { case "HTML": case "HEAD": case "BODY": qh(c), Wu(c); continue; case "SCRIPT": case "STYLE": continue; case "LINK": if (c.rel.toLowerCase() === "stylesheet") continue }a.removeChild(c) } } function M1(a, n, c, h) { for (; a.nodeType === 1;) { var x = c; if (a.nodeName.toLowerCase() !== n.toLowerCase()) { if (!h && (a.nodeName !== "INPUT" || a.type !== "hidden")) break } else if (h) { if (!a[Yr]) switch (n) { case "meta": if (!a.hasAttribute("itemprop")) break; return a; case "link": if (_ = a.getAttribute("rel"), _ === "stylesheet" && a.hasAttribute("data-precedence")) break; if (_ !== x.rel || a.getAttribute("href") !== (x.href == null || x.href === "" ? null : x.href) || a.getAttribute("crossorigin") !== (x.crossOrigin == null ? null : x.crossOrigin) || a.getAttribute("title") !== (x.title == null ? null : x.title)) break; return a; case "style": if (a.hasAttribute("data-precedence")) break; return a; case "script": if (_ = a.getAttribute("src"), (_ !== (x.src == null ? null : x.src) || a.getAttribute("type") !== (x.type == null ? null : x.type) || a.getAttribute("crossorigin") !== (x.crossOrigin == null ? null : x.crossOrigin)) && _ && a.hasAttribute("async") && !a.hasAttribute("itemprop")) break; return a; default: return a } } else if (n === "input" && a.type === "hidden") { var _ = x.name == null ? null : "" + x.name; if (x.type === "hidden" && a.getAttribute("name") === _) return a } else return a; if (a = ns(a.nextSibling), a === null) break } return null } function P1(a, n, c) { if (n === "") return null; for (; a.nodeType !== 3;)if ((a.nodeType !== 1 || a.nodeName !== "INPUT" || a.type !== "hidden") && !c || (a = ns(a.nextSibling), a === null)) return null; return a } function Zb(a, n) { for (; a.nodeType !== 8;)if ((a.nodeType !== 1 || a.nodeName !== "INPUT" || a.type !== "hidden") && !n || (a = ns(a.nextSibling), a === null)) return null; return a } function Yh(a) { return a.data === "$?" || a.data === "$~" } function Xh(a) { return a.data === "$!" || a.data === "$?" && a.ownerDocument.readyState !== "loading" } function O1(a, n) { var c = a.ownerDocument; if (a.data === "$~") a._reactRetry = n; else if (a.data !== "$?" || c.readyState !== "loading") n(); else { var h = function () { n(), c.removeEventListener("DOMContentLoaded", h) }; c.addEventListener("DOMContentLoaded", h), a._reactRetry = h } } function ns(a) { for (; a != null; a = a.nextSibling) { var n = a.nodeType; if (n === 1 || n === 3) break; if (n === 8) { if (n = a.data, n === "$" || n === "$!" || n === "$?" || n === "$~" || n === "&" || n === "F!" || n === "F") break; if (n === "/$" || n === "/&") return null } } return a } var Uh = null; function Qb(a) { a = a.nextSibling; for (var n = 0; a;) { if (a.nodeType === 8) { var c = a.data; if (c === "/$" || c === "/&") { if (n === 0) return ns(a.nextSibling); n-- } else c !== "$" && c !== "$!" && c !== "$?" && c !== "$~" && c !== "&" || n++ } a = a.nextSibling } return null } function Jb(a) { a = a.previousSibling; for (var n = 0; a;) { if (a.nodeType === 8) { var c = a.data; if (c === "$" || c === "$!" || c === "$?" || c === "$~" || c === "&") { if (n === 0) return a; n-- } else c !== "/$" && c !== "/&" || n++ } a = a.previousSibling } return null } function ex(a, n, c) { switch (n = _c(c), a) { case "html": if (a = n.documentElement, !a) throw Error(s(452)); return a; case "head": if (a = n.head, !a) throw Error(s(453)); return a; case "body": if (a = n.body, !a) throw Error(s(454)); return a; default: throw Error(s(451)) } } function Sl(a) { for (var n = a.attributes; n.length;)a.removeAttributeNode(n[0]); Wu(a) } var rs = new Map, tx = new Set; function jc(a) { return typeof a.getRootNode == "function" ? a.getRootNode() : a.nodeType === 9 ? a : a.ownerDocument } var Qs = H.d; H.d = { f: E1, r: B1, D: R1, C: L1, L: z1, m: F1, X: I1, S: H1, M: q1 }; function E1() { var a = Qs.f(), n = fc(); return a || n } function B1(a) { var n = Ln(a); n !== null && n.tag === 5 && n.type === "form" ? xg(n) : Qs.r(a) } var pr = typeof document > "u" ? null : document; function ix(a, n, c) { var h = pr; if (h && typeof n == "string" && n) { var x = Qi(n); x = 'link[rel="' + a + '"][href="' + x + '"]', typeof c == "string" && (x += '[crossorigin="' + c + '"]'), tx.has(x) || (tx.add(x), a = { rel: a, crossOrigin: c, href: n }, h.querySelector(x) === null && (n = h.createElement("link"), li(n, "link", a), Zt(n), h.head.appendChild(n))) } } function R1(a) { Qs.D(a), ix("dns-prefetch", a, null) } function L1(a, n) { Qs.C(a, n), ix("preconnect", a, n) } function z1(a, n, c) { Qs.L(a, n, c); var h = pr; if (h && a && n) { var x = 'link[rel="preload"][as="' + Qi(n) + '"]'; n === "image" && c && c.imageSrcSet ? (x += '[imagesrcset="' + Qi(c.imageSrcSet) + '"]', typeof c.imageSizes == "string" && (x += '[imagesizes="' + Qi(c.imageSizes) + '"]')) : x += '[href="' + Qi(a) + '"]'; var _ = x; switch (n) { case "style": _ = gr(a); break; case "script": _ = br(a) }rs.has(_) || (a = g({ rel: "preload", href: n === "image" && c && c.imageSrcSet ? void 0 : a, as: n }, c), rs.set(_, a), h.querySelector(x) !== null || n === "style" && h.querySelector(Nl(_)) || n === "script" && h.querySelector(Cl(_)) || (n = h.createElement("link"), li(n, "link", a), Zt(n), h.head.appendChild(n))) } } function F1(a, n) { Qs.m(a, n); var c = pr; if (c && a) { var h = n && typeof n.as == "string" ? n.as : "script", x = 'link[rel="modulepreload"][as="' + Qi(h) + '"][href="' + Qi(a) + '"]', _ = x; switch (h) { case "audioworklet": case "paintworklet": case "serviceworker": case "sharedworker": case "worker": case "script": _ = br(a) }if (!rs.has(_) && (a = g({ rel: "modulepreload", href: a }, n), rs.set(_, a), c.querySelector(x) === null)) { switch (h) { case "audioworklet": case "paintworklet": case "serviceworker": case "sharedworker": case "worker": case "script": if (c.querySelector(Cl(_))) return }h = c.createElement("link"), li(h, "link", a), Zt(h), c.head.appendChild(h) } } } function H1(a, n, c) { Qs.S(a, n, c); var h = pr; if (h && a) { var x = zn(h).hoistableStyles, _ = gr(a); n = n || "default"; var D = x.get(_); if (!D) { var E = { loading: 0, preload: null }; if (D = h.querySelector(Nl(_))) E.loading = 5; else { a = g({ rel: "stylesheet", href: a, "data-precedence": n }, c), (c = rs.get(_)) && Vh(a, c); var V = D = h.createElement("link"); Zt(V), li(V, "link", a), V._p = new Promise(function (ue, ye) { V.onload = ue, V.onerror = ye }), V.addEventListener("load", function () { E.loading |= 1 }), V.addEventListener("error", function () { E.loading |= 2 }), E.loading |= 4, wc(D, n, h) } D = { type: "stylesheet", instance: D, count: 1, state: E }, x.set(_, D) } } } function I1(a, n) { Qs.X(a, n); var c = pr; if (c && a) { var h = zn(c).hoistableScripts, x = br(a), _ = h.get(x); _ || (_ = c.querySelector(Cl(x)), _ || (a = g({ src: a, async: !0 }, n), (n = rs.get(x)) && Wh(a, n), _ = c.createElement("script"), Zt(_), li(_, "link", a), c.head.appendChild(_)), _ = { type: "script", instance: _, count: 1, state: null }, h.set(x, _)) } } function q1(a, n) { Qs.M(a, n); var c = pr; if (c && a) { var h = zn(c).hoistableScripts, x = br(a), _ = h.get(x); _ || (_ = c.querySelector(Cl(x)), _ || (a = g({ src: a, async: !0, type: "module" }, n), (n = rs.get(x)) && Wh(a, n), _ = c.createElement("script"), Zt(_), li(_, "link", a), c.head.appendChild(_)), _ = { type: "script", instance: _, count: 1, state: null }, h.set(x, _)) } } function sx(a, n, c, h) { var x = (x = J.current) ? jc(x) : null; if (!x) throw Error(s(446)); switch (a) { case "meta": case "title": return null; case "style": return typeof c.precedence == "string" && typeof c.href == "string" ? (n = gr(c.href), c = zn(x).hoistableStyles, h = c.get(n), h || (h = { type: "style", instance: null, count: 0, state: null }, c.set(n, h)), h) : { type: "void", instance: null, count: 0, state: null }; case "link": if (c.rel === "stylesheet" && typeof c.href == "string" && typeof c.precedence == "string") { a = gr(c.href); var _ = zn(x).hoistableStyles, D = _.get(a); if (D || (x = x.ownerDocument || x, D = { type: "stylesheet", instance: null, count: 0, state: { loading: 0, preload: null } }, _.set(a, D), (_ = x.querySelector(Nl(a))) && !_._p && (D.instance = _, D.state.loading = 5), rs.has(a) || (c = { rel: "preload", as: "style", href: c.href, crossOrigin: c.crossOrigin, integrity: c.integrity, media: c.media, hrefLang: c.hrefLang, referrerPolicy: c.referrerPolicy }, rs.set(a, c), _ || Y1(x, a, c, D.state))), n && h === null) throw Error(s(528, "")); return D } if (n && h !== null) throw Error(s(529, "")); return null; case "script": return n = c.async, c = c.src, typeof c == "string" && n && typeof n != "function" && typeof n != "symbol" ? (n = br(c), c = zn(x).hoistableScripts, h = c.get(n), h || (h = { type: "script", instance: null, count: 0, state: null }, c.set(n, h)), h) : { type: "void", instance: null, count: 0, state: null }; default: throw Error(s(444, a)) } } function gr(a) { return 'href="' + Qi(a) + '"' } function Nl(a) { return 'link[rel="stylesheet"][' + a + "]" } function ax(a) { return g({}, a, { "data-precedence": a.precedence, precedence: null }) } function Y1(a, n, c, h) { a.querySelector('link[rel="preload"][as="style"][' + n + "]") ? h.loading = 1 : (n = a.createElement("link"), h.preload = n, n.addEventListener("load", function () { return h.loading |= 1 }), n.addEventListener("error", function () { return h.loading |= 2 }), li(n, "link", c), Zt(n), a.head.appendChild(n)) } function br(a) { return '[src="' + Qi(a) + '"]' } function Cl(a) { return "script[async]" + a } function nx(a, n, c) { if (n.count++, n.instance === null) switch (n.type) { case "style": var h = a.querySelector('style[data-href~="' + Qi(c.href) + '"]'); if (h) return n.instance = h, Zt(h), h; var x = g({}, c, { "data-href": c.href, "data-precedence": c.precedence, href: null, precedence: null }); return h = (a.ownerDocument || a).createElement("style"), Zt(h), li(h, "style", x), wc(h, c.precedence, a), n.instance = h; case "stylesheet": x = gr(c.href); var _ = a.querySelector(Nl(x)); if (_) return n.state.loading |= 4, n.instance = _, Zt(_), _; h = ax(c), (x = rs.get(x)) && Vh(h, x), _ = (a.ownerDocument || a).createElement("link"), Zt(_); var D = _; return D._p = new Promise(function (E, V) { D.onload = E, D.onerror = V }), li(_, "link", h), n.state.loading |= 4, wc(_, c.precedence, a), n.instance = _; case "script": return _ = br(c.src), (x = a.querySelector(Cl(_))) ? (n.instance = x, Zt(x), x) : (h = c, (x = rs.get(_)) && (h = g({}, c), Wh(h, x)), a = a.ownerDocument || a, x = a.createElement("script"), Zt(x), li(x, "link", h), a.head.appendChild(x), n.instance = x); case "void": return null; default: throw Error(s(443, n.type)) } else n.type === "stylesheet" && (n.state.loading & 4) === 0 && (h = n.instance, n.state.loading |= 4, wc(h, c.precedence, a)); return n.instance } function wc(a, n, c) { for (var h = c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'), x = h.length ? h[h.length - 1] : null, _ = x, D = 0; D < h.length; D++) { var E = h[D]; if (E.dataset.precedence === n) _ = E; else if (_ !== x) break } _ ? _.parentNode.insertBefore(a, _.nextSibling) : (n = c.nodeType === 9 ? c.head : c, n.insertBefore(a, n.firstChild)) } function Vh(a, n) { a.crossOrigin == null && (a.crossOrigin = n.crossOrigin), a.referrerPolicy == null && (a.referrerPolicy = n.referrerPolicy), a.title == null && (a.title = n.title) } function Wh(a, n) { a.crossOrigin == null && (a.crossOrigin = n.crossOrigin), a.referrerPolicy == null && (a.referrerPolicy = n.referrerPolicy), a.integrity == null && (a.integrity = n.integrity) } var kc = null; function rx(a, n, c) { if (kc === null) { var h = new Map, x = kc = new Map; x.set(c, h) } else x = kc, h = x.get(c), h || (h = new Map, x.set(c, h)); if (h.has(a)) return h; for (h.set(a, null), c = c.getElementsByTagName(a), x = 0; x < c.length; x++) { var _ = c[x]; if (!(_[Yr] || _[si] || a === "link" && _.getAttribute("rel") === "stylesheet") && _.namespaceURI !== "http://www.w3.org/2000/svg") { var D = _.getAttribute(n) || ""; D = a + D; var E = h.get(D); E ? E.push(_) : h.set(D, [_]) } } return h } function lx(a, n, c) { a = a.ownerDocument || a, a.head.insertBefore(c, n === "title" ? a.querySelector("head > title") : null) } function X1(a, n, c) { if (c === 1 || n.itemProp != null) return !1; switch (a) { case "meta": case "title": return !0; case "style": if (typeof n.precedence != "string" || typeof n.href != "string" || n.href === "") break; return !0; case "link": if (typeof n.rel != "string" || typeof n.href != "string" || n.href === "" || n.onLoad || n.onError) break; return n.rel === "stylesheet" ? (a = n.disabled, typeof n.precedence == "string" && a == null) : !0; case "script": if (n.async && typeof n.async != "function" && typeof n.async != "symbol" && !n.onLoad && !n.onError && n.src && typeof n.src == "string") return !0 }return !1 } function ox(a) { return !(a.type === "stylesheet" && (a.state.loading & 3) === 0) } function U1(a, n, c, h) { if (c.type === "stylesheet" && (typeof h.media != "string" || matchMedia(h.media).matches !== !1) && (c.state.loading & 4) === 0) { if (c.instance === null) { var x = gr(h.href), _ = n.querySelector(Nl(x)); if (_) { n = _._p, n !== null && typeof n == "object" && typeof n.then == "function" && (a.count++, a = Sc.bind(a), n.then(a, a)), c.state.loading |= 4, c.instance = _, Zt(_); return } _ = n.ownerDocument || n, h = ax(h), (x = rs.get(x)) && Vh(h, x), _ = _.createElement("link"), Zt(_); var D = _; D._p = new Promise(function (E, V) { D.onload = E, D.onerror = V }), li(_, "link", h), c.instance = _ } a.stylesheets === null && (a.stylesheets = new Map), a.stylesheets.set(c, n), (n = c.state.preload) && (c.state.loading & 3) === 0 && (a.count++, c = Sc.bind(a), n.addEventListener("load", c), n.addEventListener("error", c)) } } var Gh = 0; function V1(a, n) { return a.stylesheets && a.count === 0 && Cc(a, a.stylesheets), 0 < a.count || 0 < a.imgCount ? function (c) { var h = setTimeout(function () { if (a.stylesheets && Cc(a, a.stylesheets), a.unsuspend) { var _ = a.unsuspend; a.unsuspend = null, _() } }, 6e4 + n); 0 < a.imgBytes && Gh === 0 && (Gh = 62500 * N1()); var x = setTimeout(function () { if (a.waitingForImages = !1, a.count === 0 && (a.stylesheets && Cc(a, a.stylesheets), a.unsuspend)) { var _ = a.unsuspend; a.unsuspend = null, _() } }, (a.imgBytes > Gh ? 50 : 800) + n); return a.unsuspend = c, function () { a.unsuspend = null, clearTimeout(h), clearTimeout(x) } } : null } function Sc() { if (this.count--, this.count === 0 && (this.imgCount === 0 || !this.waitingForImages)) { if (this.stylesheets) Cc(this, this.stylesheets); else if (this.unsuspend) { var a = this.unsuspend; this.unsuspend = null, a() } } } var Nc = null; function Cc(a, n) { a.stylesheets = null, a.unsuspend !== null && (a.count++, Nc = new Map, n.forEach(W1, a), Nc = null, Sc.call(a)) } function W1(a, n) { if (!(n.state.loading & 4)) { var c = Nc.get(a); if (c) var h = c.get(null); else { c = new Map, Nc.set(a, c); for (var x = a.querySelectorAll("link[data-precedence],style[data-precedence]"), _ = 0; _ < x.length; _++) { var D = x[_]; (D.nodeName === "LINK" || D.getAttribute("media") !== "not all") && (c.set(D.dataset.precedence, D), h = D) } h && c.set(null, h) } x = n.instance, D = x.getAttribute("data-precedence"), _ = c.get(D) || h, _ === h && c.set(null, x), c.set(D, x), this.count++, h = Sc.bind(this), x.addEventListener("load", h), x.addEventListener("error", h), _ ? _.parentNode.insertBefore(x, _.nextSibling) : (a = a.nodeType === 9 ? a.head : a, a.insertBefore(x, a.firstChild)), n.state.loading |= 4 } } var Tl = { $$typeof: N, Provider: null, Consumer: null, _currentValue: Y, _currentValue2: Y, _threadCount: 0 }; function G1(a, n, c, h, x, _, D, E, V) { this.tag = 1, this.containerInfo = a, this.pingCache = this.current = this.pendingChildren = null, this.timeoutHandle = -1, this.callbackNode = this.next = this.pendingContext = this.context = this.cancelPendingCommit = null, this.callbackPriority = 0, this.expirationTimes = pi(-1), this.entangledLanes = this.shellSuspendCounter = this.errorRecoveryDisabledLanes = this.expiredLanes = this.warmLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0, this.entanglements = pi(0), this.hiddenUpdates = pi(null), this.identifierPrefix = h, this.onUncaughtError = x, this.onCaughtError = _, this.onRecoverableError = D, this.pooledCache = null, this.pooledCacheLanes = 0, this.formState = V, this.incompleteTransitions = new Map } function cx(a, n, c, h, x, _, D, E, V, ue, ye, je) { return a = new G1(a, n, c, D, V, ue, ye, je, E), n = 1, _ === !0 && (n |= 24), _ = Li(3, null, null, n), a.current = _, _.stateNode = a, n = Cd(), n.refCount++, a.pooledCache = n, n.refCount++, _.memoizedState = { element: h, isDehydrated: c, cache: n }, Md(_), a } function ux(a) { return a ? (a = Gn, a) : Gn } function dx(a, n, c, h, x, _) { x = ux(x), h.context === null ? h.context = x : h.pendingContext = x, h = ga(n), h.payload = { element: c }, _ = _ === void 0 ? null : _, _ !== null && (h.callback = _), c = ba(a, h, n), c !== null && (Ni(c, a, n), rl(c, a, n)) } function hx(a, n) { if (a = a.memoizedState, a !== null && a.dehydrated !== null) { var c = a.retryLane; a.retryLane = c !== 0 && c < n ? c : n } } function $h(a, n) { hx(a, n), (a = a.alternate) && hx(a, n) } function fx(a) { if (a.tag === 13 || a.tag === 31) { var n = Wa(a, 67108864); n !== null && Ni(n, a, 67108864), $h(a, 67108864) } } function mx(a) { if (a.tag === 13 || a.tag === 31) { var n = qi(); n = Xu(n); var c = Wa(a, n); c !== null && Ni(c, a, n), $h(a, n) } } var Tc = !0; function $1(a, n, c, h) { var x = I.T; I.T = null; var _ = H.p; try { H.p = 2, Kh(a, n, c, h) } finally { H.p = _, I.T = x } } function K1(a, n, c, h) { var x = I.T; I.T = null; var _ = H.p; try { H.p = 8, Kh(a, n, c, h) } finally { H.p = _, I.T = x } } function Kh(a, n, c, h) { if (Tc) { var x = Zh(h); if (x === null) Rh(a, n, h, Dc, c), gx(a, h); else if (Q1(x, a, n, c, h)) h.stopPropagation(); else if (gx(a, h), n & 4 && -1 < Z1.indexOf(a)) { for (; x !== null;) { var _ = Ln(x); if (_ !== null) switch (_.tag) { case 3: if (_ = _.stateNode, _.current.memoizedState.isDehydrated) { var D = ui(_.pendingLanes); if (D !== 0) { var E = _; for (E.pendingLanes |= 2, E.entangledLanes |= 2; D;) { var V = 1 << 31 - Nt(D); E.entanglements[1] |= V, D &= ~V } Cs(_), (st & 6) === 0 && (dc = kt() + 500, jl(0)) } } break; case 31: case 13: E = Wa(_, 2), E !== null && Ni(E, _, 2), fc(), $h(_, 2) }if (_ = Zh(h), _ === null && Rh(a, n, h, Dc, c), _ === x) break; x = _ } x !== null && h.stopPropagation() } else Rh(a, n, h, null, c) } } function Zh(a) { return a = Ju(a), Qh(a) } var Dc = null; function Qh(a) { if (Dc = null, a = Rn(a), a !== null) { var n = o(a); if (n === null) a = null; else { var c = n.tag; if (c === 13) { if (a = u(n), a !== null) return a; a = null } else if (c === 31) { if (a = d(n), a !== null) return a; a = null } else if (c === 3) { if (n.stateNode.current.memoizedState.isDehydrated) return n.tag === 3 ? n.stateNode.containerInfo : null; a = null } else n !== a && (a = null) } } return Dc = a, null } function px(a) { switch (a) { case "beforetoggle": case "cancel": case "click": case "close": case "contextmenu": case "copy": case "cut": case "auxclick": case "dblclick": case "dragend": case "dragstart": case "drop": case "focusin": case "focusout": case "input": case "invalid": case "keydown": case "keypress": case "keyup": case "mousedown": case "mouseup": case "paste": case "pause": case "play": case "pointercancel": case "pointerdown": case "pointerup": case "ratechange": case "reset": case "resize": case "seeked": case "submit": case "toggle": case "touchcancel": case "touchend": case "touchstart": case "volumechange": case "change": case "selectionchange": case "textInput": case "compositionstart": case "compositionend": case "compositionupdate": case "beforeblur": case "afterblur": case "beforeinput": case "blur": case "fullscreenchange": case "focus": case "hashchange": case "popstate": case "select": case "selectstart": return 2; case "drag": case "dragenter": case "dragexit": case "dragleave": case "dragover": case "mousemove": case "mouseout": case "mouseover": case "pointermove": case "pointerout": case "pointerover": case "scroll": case "touchmove": case "wheel": case "mouseenter": case "mouseleave": case "pointerenter": case "pointerleave": return 8; case "message": switch (Ki()) { case ti: return 2; case Bi: return 8; case yt: case xi: return 32; case us: return 268435456; default: return 32 }default: return 32 } } var Jh = !1, Ta = null, Da = null, Aa = null, Dl = new Map, Al = new Map, Ma = [], Z1 = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" "); function gx(a, n) { switch (a) { case "focusin": case "focusout": Ta = null; break; case "dragenter": case "dragleave": Da = null; break; case "mouseover": case "mouseout": Aa = null; break; case "pointerover": case "pointerout": Dl.delete(n.pointerId); break; case "gotpointercapture": case "lostpointercapture": Al.delete(n.pointerId) } } function Ml(a, n, c, h, x, _) { return a === null || a.nativeEvent !== _ ? (a = { blockedOn: n, domEventName: c, eventSystemFlags: h, nativeEvent: _, targetContainers: [x] }, n !== null && (n = Ln(n), n !== null && fx(n)), a) : (a.eventSystemFlags |= h, n = a.targetContainers, x !== null && n.indexOf(x) === -1 && n.push(x), a) } function Q1(a, n, c, h, x) { switch (n) { case "focusin": return Ta = Ml(Ta, a, n, c, h, x), !0; case "dragenter": return Da = Ml(Da, a, n, c, h, x), !0; case "mouseover": return Aa = Ml(Aa, a, n, c, h, x), !0; case "pointerover": var _ = x.pointerId; return Dl.set(_, Ml(Dl.get(_) || null, a, n, c, h, x)), !0; case "gotpointercapture": return _ = x.pointerId, Al.set(_, Ml(Al.get(_) || null, a, n, c, h, x)), !0 }return !1 } function bx(a) { var n = Rn(a.target); if (n !== null) { var c = o(n); if (c !== null) { if (n = c.tag, n === 13) { if (n = u(c), n !== null) { a.blockedOn = n, Mm(a.priority, function () { mx(c) }); return } } else if (n === 31) { if (n = d(c), n !== null) { a.blockedOn = n, Mm(a.priority, function () { mx(c) }); return } } else if (n === 3 && c.stateNode.current.memoizedState.isDehydrated) { a.blockedOn = c.tag === 3 ? c.stateNode.containerInfo : null; return } } } a.blockedOn = null } function Ac(a) { if (a.blockedOn !== null) return !1; for (var n = a.targetContainers; 0 < n.length;) { var c = Zh(a.nativeEvent); if (c === null) { c = a.nativeEvent; var h = new c.constructor(c.type, c); Qu = h, c.target.dispatchEvent(h), Qu = null } else return n = Ln(c), n !== null && fx(n), a.blockedOn = c, !1; n.shift() } return !0 } function xx(a, n, c) { Ac(a) && c.delete(n) } function J1() { Jh = !1, Ta !== null && Ac(Ta) && (Ta = null), Da !== null && Ac(Da) && (Da = null), Aa !== null && Ac(Aa) && (Aa = null), Dl.forEach(xx), Al.forEach(xx) } function Mc(a, n) { a.blockedOn === n && (a.blockedOn = null, Jh || (Jh = !0, l.unstable_scheduleCallback(l.unstable_NormalPriority, J1))) } var Pc = null; function yx(a) { Pc !== a && (Pc = a, l.unstable_scheduleCallback(l.unstable_NormalPriority, function () { Pc === a && (Pc = null); for (var n = 0; n < a.length; n += 3) { var c = a[n], h = a[n + 1], x = a[n + 2]; if (typeof h != "function") { if (Qh(h || c) === null) continue; break } var _ = Ln(c); _ !== null && (a.splice(n, 3), n -= 3, Zd(_, { pending: !0, data: x, method: c.method, action: h }, h, x)) } })) } function xr(a) { function n(V) { return Mc(V, a) } Ta !== null && Mc(Ta, a), Da !== null && Mc(Da, a), Aa !== null && Mc(Aa, a), Dl.forEach(n), Al.forEach(n); for (var c = 0; c < Ma.length; c++) { var h = Ma[c]; h.blockedOn === a && (h.blockedOn = null) } for (; 0 < Ma.length && (c = Ma[0], c.blockedOn === null);)bx(c), c.blockedOn === null && Ma.shift(); if (c = (a.ownerDocument || a).$$reactFormReplay, c != null) for (h = 0; h < c.length; h += 3) { var x = c[h], _ = c[h + 1], D = x[vi] || null; if (typeof _ == "function") D || yx(c); else if (D) { var E = null; if (_ && _.hasAttribute("formAction")) { if (x = _, D = _[vi] || null) E = D.formAction; else if (Qh(x) !== null) continue } else E = D.action; typeof E == "function" ? c[h + 1] = E : (c.splice(h, 3), h -= 3), yx(c) } } } function vx() { function a(_) { _.canIntercept && _.info === "react-transition" && _.intercept({ handler: function () { return new Promise(function (D) { return x = D }) }, focusReset: "manual", scroll: "manual" }) } function n() { x !== null && (x(), x = null), h || setTimeout(c, 20) } function c() { if (!h && !navigation.transition) { var _ = navigation.currentEntry; _ && _.url != null && navigation.navigate(_.url, { state: _.getState(), info: "react-transition", history: "replace" }) } } if (typeof navigation == "object") { var h = !1, x = null; return navigation.addEventListener("navigate", a), navigation.addEventListener("navigatesuccess", n), navigation.addEventListener("navigateerror", n), setTimeout(c, 100), function () { h = !0, navigation.removeEventListener("navigate", a), navigation.removeEventListener("navigatesuccess", n), navigation.removeEventListener("navigateerror", n), x !== null && (x(), x = null) } } } function ef(a) { this._internalRoot = a } Oc.prototype.render = ef.prototype.render = function (a) { var n = this._internalRoot; if (n === null) throw Error(s(409)); var c = n.current, h = qi(); dx(c, h, a, n, null, null) }, Oc.prototype.unmount = ef.prototype.unmount = function () { var a = this._internalRoot; if (a !== null) { this._internalRoot = null; var n = a.containerInfo; dx(a.current, 2, null, a, null, null), fc(), n[Bn] = null } }; function Oc(a) { this._internalRoot = a } Oc.prototype.unstable_scheduleHydration = function (a) { if (a) { var n = Am(); a = { blockedOn: null, target: a, priority: n }; for (var c = 0; c < Ma.length && n !== 0 && n < Ma[c].priority; c++); Ma.splice(c, 0, a), c === 0 && bx(a) } }; var _x = e.version; if (_x !== "19.2.4") throw Error(s(527, _x, "19.2.4")); H.findDOMNode = function (a) { var n = a._reactInternals; if (n === void 0) throw typeof a.render == "function" ? Error(s(188)) : (a = Object.keys(a).join(","), Error(s(268, a))); return a = m(n), a = a !== null ? p(a) : null, a = a === null ? null : a.stateNode, a }; var ej = { bundleType: 0, version: "19.2.4", rendererPackageName: "react-dom", currentDispatcherRef: I, reconcilerVersion: "19.2.4" }; if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u") { var Ec = __REACT_DEVTOOLS_GLOBAL_HOOK__; if (!Ec.isDisabled && Ec.supportsFiber) try { ds = Ec.inject(ej), St = Ec } catch { } } return Ol.createRoot = function (a, n) { if (!r(a)) throw Error(s(299)); var c = !1, h = "", x = Tg, _ = Dg, D = Ag; return n != null && (n.unstable_strictMode === !0 && (c = !0), n.identifierPrefix !== void 0 && (h = n.identifierPrefix), n.onUncaughtError !== void 0 && (x = n.onUncaughtError), n.onCaughtError !== void 0 && (_ = n.onCaughtError), n.onRecoverableError !== void 0 && (D = n.onRecoverableError)), n = cx(a, 1, !1, null, null, c, h, null, x, _, D, vx), a[Bn] = n.current, Bh(a), new ef(n) }, Ol.hydrateRoot = function (a, n, c) { if (!r(a)) throw Error(s(299)); var h = !1, x = "", _ = Tg, D = Dg, E = Ag, V = null; return c != null && (c.unstable_strictMode === !0 && (h = !0), c.identifierPrefix !== void 0 && (x = c.identifierPrefix), c.onUncaughtError !== void 0 && (_ = c.onUncaughtError), c.onCaughtError !== void 0 && (D = c.onCaughtError), c.onRecoverableError !== void 0 && (E = c.onRecoverableError), c.formState !== void 0 && (V = c.formState)), n = cx(a, 1, !0, n, c ?? null, h, x, V, _, D, E, vx), n.context = ux(null), c = n.current, h = qi(), h = Xu(h), x = ga(h), x.callback = null, ba(c, x, h), c = h, n.current.lanes = c, ii(n, c), Cs(n), a[Bn] = n.current, Bh(a), new Oc(n) }, Ol.version = "19.2.4", Ol
} var Mx; function cj() { if (Mx) return af.exports; Mx = 1; function l() { if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function")) try { __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l) } catch (e) { console.error(e) } } return l(), af.exports = oj(), af.exports } var uj = cj(); var Px = "popstate"; function dj(l = {}) { function e(s, r) { let { pathname: o, search: u, hash: d } = s.location; return Tf("", { pathname: o, search: u, hash: d }, r.state && r.state.usr || null, r.state && r.state.key || "default") } function t(s, r) { return typeof r == "string" ? r : Ul(r) } return fj(e, t, null, l) } function _t(l, e) { if (l === !1 || l === null || typeof l > "u") throw new Error(e) } function ys(l, e) { if (!l) { typeof console < "u" && console.warn(e); try { throw new Error(e) } catch { } } } function hj() { return Math.random().toString(36).substring(2, 10) } function Ox(l, e) { return { usr: l.state, key: l.key, idx: e } } function Tf(l, e, t = null, s) { return { pathname: typeof l == "string" ? l : l.pathname, search: "", hash: "", ...typeof e == "string" ? Br(e) : e, state: t, key: e && e.key || s || hj() } } function Ul({ pathname: l = "/", search: e = "", hash: t = "" }) { return e && e !== "?" && (l += e.charAt(0) === "?" ? e : "?" + e), t && t !== "#" && (l += t.charAt(0) === "#" ? t : "#" + t), l } function Br(l) { let e = {}; if (l) { let t = l.indexOf("#"); t >= 0 && (e.hash = l.substring(t), l = l.substring(0, t)); let s = l.indexOf("?"); s >= 0 && (e.search = l.substring(s), l = l.substring(0, s)), l && (e.pathname = l) } return e } function fj(l, e, t, s = {}) { let { window: r = document.defaultView, v5Compat: o = !1 } = s, u = r.history, d = "POP", f = null, m = p(); m == null && (m = 0, u.replaceState({ ...u.state, idx: m }, "")); function p() { return (u.state || { idx: null }).idx } function g() { d = "POP"; let j = p(), S = j == null ? null : j - m; m = j, f && f({ action: d, location: k.location, delta: S }) } function y(j, S) { d = "PUSH"; let w = Tf(k.location, j, S); m = p() + 1; let N = Ox(w, m), T = k.createHref(w); try { u.pushState(N, "", T) } catch (R) { if (R instanceof DOMException && R.name === "DataCloneError") throw R; r.location.assign(T) } o && f && f({ action: d, location: k.location, delta: 1 }) } function b(j, S) { d = "REPLACE"; let w = Tf(k.location, j, S); m = p(); let N = Ox(w, m), T = k.createHref(w); u.replaceState(N, "", T), o && f && f({ action: d, location: k.location, delta: 0 }) } function v(j) { return mj(j) } let k = { get action() { return d }, get location() { return l(r, u) }, listen(j) { if (f) throw new Error("A history only accepts one active listener"); return r.addEventListener(Px, g), f = j, () => { r.removeEventListener(Px, g), f = null } }, createHref(j) { return e(r, j) }, createURL: v, encodeLocation(j) { let S = v(j); return { pathname: S.pathname, search: S.search, hash: S.hash } }, push: y, replace: b, go(j) { return u.go(j) } }; return k } function mj(l, e = !1) { let t = "http://localhost"; typeof window < "u" && (t = window.location.origin !== "null" ? window.location.origin : window.location.href), _t(t, "No window.location.(origin|href) available to create URL"); let s = typeof l == "string" ? l : Ul(l); return s = s.replace(/ $/, "%20"), !e && s.startsWith("//") && (s = t + s), new URL(s, t) } function iv(l, e, t = "/") { return pj(l, e, t, !1) } function pj(l, e, t, s) { let r = typeof e == "string" ? Br(e) : e, o = sa(r.pathname || "/", t); if (o == null) return null; let u = sv(l); gj(u); let d = null; for (let f = 0; d == null && f < u.length; ++f) { let m = Cj(o); d = Sj(u[f], m, s) } return d } function sv(l, e = [], t = [], s = "", r = !1) { let o = (u, d, f = r, m) => { let p = { relativePath: m === void 0 ? u.path || "" : m, caseSensitive: u.caseSensitive === !0, childrenIndex: d, route: u }; if (p.relativePath.startsWith("/")) { if (!p.relativePath.startsWith(s) && f) return; _t(p.relativePath.startsWith(s), `Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`), p.relativePath = p.relativePath.slice(s.length) } let g = ea([s, p.relativePath]), y = t.concat(p); u.children && u.children.length > 0 && (_t(u.index !== !0, `Index routes must not have child routes. Please remove all child routes from route path "${g}".`), sv(u.children, e, y, g, f)), !(u.path == null && !u.index) && e.push({ path: g, score: wj(g, u.index), routesMeta: y }) }; return l.forEach((u, d) => { if (u.path === "" || !u.path?.includes("?")) o(u, d); else for (let f of av(u.path)) o(u, d, !0, f) }), e } function av(l) { let e = l.split("/"); if (e.length === 0) return []; let [t, ...s] = e, r = t.endsWith("?"), o = t.replace(/\?$/, ""); if (s.length === 0) return r ? [o, ""] : [o]; let u = av(s.join("/")), d = []; return d.push(...u.map(f => f === "" ? o : [o, f].join("/"))), r && d.push(...u), d.map(f => l.startsWith("/") && f === "" ? "/" : f) } function gj(l) { l.sort((e, t) => e.score !== t.score ? t.score - e.score : kj(e.routesMeta.map(s => s.childrenIndex), t.routesMeta.map(s => s.childrenIndex))) } var bj = /^:[\w-]+$/, xj = 3, yj = 2, vj = 1, _j = 10, jj = -2, Ex = l => l === "*"; function wj(l, e) { let t = l.split("/"), s = t.length; return t.some(Ex) && (s += jj), e && (s += yj), t.filter(r => !Ex(r)).reduce((r, o) => r + (bj.test(o) ? xj : o === "" ? vj : _j), s) } function kj(l, e) { return l.length === e.length && l.slice(0, -1).every((s, r) => s === e[r]) ? l[l.length - 1] - e[e.length - 1] : 0 } function Sj(l, e, t = !1) { let { routesMeta: s } = l, r = {}, o = "/", u = []; for (let d = 0; d < s.length; ++d) { let f = s[d], m = d === s.length - 1, p = o === "/" ? e : e.slice(o.length) || "/", g = iu({ path: f.relativePath, caseSensitive: f.caseSensitive, end: m }, p), y = f.route; if (!g && m && t && !s[s.length - 1].route.index && (g = iu({ path: f.relativePath, caseSensitive: f.caseSensitive, end: !1 }, p)), !g) return null; Object.assign(r, g.params), u.push({ params: r, pathname: ea([o, g.pathname]), pathnameBase: Mj(ea([o, g.pathnameBase])), route: y }), g.pathnameBase !== "/" && (o = ea([o, g.pathnameBase])) } return u } function iu(l, e) { typeof l == "string" && (l = { path: l, caseSensitive: !1, end: !0 }); let [t, s] = Nj(l.path, l.caseSensitive, l.end), r = e.match(t); if (!r) return null; let o = r[0], u = o.replace(/(.)\/+$/, "$1"), d = r.slice(1); return { params: s.reduce((m, { paramName: p, isOptional: g }, y) => { if (p === "*") { let v = d[y] || ""; u = o.slice(0, o.length - v.length).replace(/(.)\/+$/, "$1") } const b = d[y]; return g && !b ? m[p] = void 0 : m[p] = (b || "").replace(/%2F/g, "/"), m }, {}), pathname: o, pathnameBase: u, pattern: l } } function Nj(l, e = !1, t = !0) { ys(l === "*" || !l.endsWith("*") || l.endsWith("/*"), `Route path "${l}" will be treated as if it were "${l.replace(/\*$/, "/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/, "/*")}".`); let s = [], r = "^" + l.replace(/\/*\*?$/, "").replace(/^\/*/, "/").replace(/[\\.*+^${}|()[\]]/g, "\\$&").replace(/\/:([\w-]+)(\?)?/g, (u, d, f) => (s.push({ paramName: d, isOptional: f != null }), f ? "/?([^\\/]+)?" : "/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g, "(/$1)?$2"); return l.endsWith("*") ? (s.push({ paramName: "*" }), r += l === "*" || l === "/*" ? "(.*)$" : "(?:\\/(.+)|\\/*)$") : t ? r += "\\/*$" : l !== "" && l !== "/" && (r += "(?:(?=\\/|$))"), [new RegExp(r, e ? void 0 : "i"), s] } function Cj(l) { try { return l.split("/").map(e => decodeURIComponent(e).replace(/\//g, "%2F")).join("/") } catch (e) { return ys(!1, `The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`), l } } function sa(l, e) { if (e === "/") return l; if (!l.toLowerCase().startsWith(e.toLowerCase())) return null; let t = e.endsWith("/") ? e.length - 1 : e.length, s = l.charAt(t); return s && s !== "/" ? null : l.slice(t) || "/" } var Tj = /^(?:[a-z][a-z0-9+.-]*:|\/\/)/i; function Dj(l, e = "/") { let { pathname: t, search: s = "", hash: r = "" } = typeof l == "string" ? Br(l) : l, o; return t ? (t = t.replace(/\/\/+/g, "/"), t.startsWith("/") ? o = Bx(t.substring(1), "/") : o = Bx(t, e)) : o = e, { pathname: o, search: Pj(s), hash: Oj(r) } } function Bx(l, e) { let t = e.replace(/\/+$/, "").split("/"); return l.split("/").forEach(r => { r === ".." ? t.length > 1 && t.pop() : r !== "." && t.push(r) }), t.length > 1 ? t.join("/") : "/" } function of(l, e, t, s) { return `Cannot include a '${l}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.` } function Aj(l) { return l.filter((e, t) => t === 0 || e.route.path && e.route.path.length > 0) } function nm(l) { let e = Aj(l); return e.map((t, s) => s === e.length - 1 ? t.pathname : t.pathnameBase) } function rm(l, e, t, s = !1) { let r; typeof l == "string" ? r = Br(l) : (r = { ...l }, _t(!r.pathname || !r.pathname.includes("?"), of("?", "pathname", "search", r)), _t(!r.pathname || !r.pathname.includes("#"), of("#", "pathname", "hash", r)), _t(!r.search || !r.search.includes("#"), of("#", "search", "hash", r))); let o = l === "" || r.pathname === "", u = o ? "/" : r.pathname, d; if (u == null) d = t; else { let g = e.length - 1; if (!s && u.startsWith("..")) { let y = u.split("/"); for (; y[0] === "..";)y.shift(), g -= 1; r.pathname = y.join("/") } d = g >= 0 ? e[g] : "/" } let f = Dj(r, d), m = u && u !== "/" && u.endsWith("/"), p = (o || u === ".") && t.endsWith("/"); return !f.pathname.endsWith("/") && (m || p) && (f.pathname += "/"), f } var ea = l => l.join("/").replace(/\/\/+/g, "/"), Mj = l => l.replace(/\/+$/, "").replace(/^\/*/, "/"), Pj = l => !l || l === "?" ? "" : l.startsWith("?") ? l : "?" + l, Oj = l => !l || l === "#" ? "" : l.startsWith("#") ? l : "#" + l, Ej = class { constructor(l, e, t, s = !1) { this.status = l, this.statusText = e || "", this.internal = s, t instanceof Error ? (this.data = t.toString(), this.error = t) : this.data = t } }; function Bj(l) { return l != null && typeof l.status == "number" && typeof l.statusText == "string" && typeof l.internal == "boolean" && "data" in l } function Rj(l) { return l.map(e => e.route.path).filter(Boolean).join("/").replace(/\/\/*/g, "/") || "/" } var nv = typeof window < "u" && typeof window.document < "u" && typeof window.document.createElement < "u"; function rv(l, e) { let t = l; if (typeof t != "string" || !Tj.test(t)) return { absoluteURL: void 0, isExternal: !1, to: t }; let s = t, r = !1; if (nv) try { let o = new URL(window.location.href), u = t.startsWith("//") ? new URL(o.protocol + t) : new URL(t), d = sa(u.pathname, e); u.origin === o.origin && d != null ? t = d + u.search + u.hash : r = !0 } catch { ys(!1, `<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`) } return { absoluteURL: s, isExternal: r, to: t } } Object.getOwnPropertyNames(Object.prototype).sort().join("\0"); var lv = ["POST", "PUT", "PATCH", "DELETE"]; new Set(lv); var Lj = ["GET", ...lv]; new Set(Lj); var Rr = C.createContext(null); Rr.displayName = "DataRouter"; var _u = C.createContext(null); _u.displayName = "DataRouterState"; var zj = C.createContext(!1), ov = C.createContext({ isTransitioning: !1 }); ov.displayName = "ViewTransition"; var Fj = C.createContext(new Map); Fj.displayName = "Fetchers"; var Hj = C.createContext(null); Hj.displayName = "Await"; var $i = C.createContext(null); $i.displayName = "Navigation"; var uo = C.createContext(null); uo.displayName = "Location"; var cs = C.createContext({ outlet: null, matches: [], isDataRoute: !1 }); cs.displayName = "Route"; var lm = C.createContext(null); lm.displayName = "RouteError"; var cv = "REACT_ROUTER_ERROR", Ij = "REDIRECT", qj = "ROUTE_ERROR_RESPONSE"; function Yj(l) { if (l.startsWith(`${cv}:${Ij}:{`)) try { let e = JSON.parse(l.slice(28)); if (typeof e == "object" && e && typeof e.status == "number" && typeof e.statusText == "string" && typeof e.location == "string" && typeof e.reloadDocument == "boolean" && typeof e.replace == "boolean") return e } catch { } } function Xj(l) { if (l.startsWith(`${cv}:${qj}:{`)) try { let e = JSON.parse(l.slice(40)); if (typeof e == "object" && e && typeof e.status == "number" && typeof e.statusText == "string") return new Ej(e.status, e.statusText, e.data) } catch { } } function Uj(l, { relative: e } = {}) { _t(Lr(), "useHref() may be used only in the context of a <Router> component."); let { basename: t, navigator: s } = C.useContext($i), { hash: r, pathname: o, search: u } = ho(l, { relative: e }), d = o; return t !== "/" && (d = o === "/" ? t : ea([t, o])), s.createHref({ pathname: d, search: u, hash: r }) } function Lr() { return C.useContext(uo) != null } function Oi() { return _t(Lr(), "useLocation() may be used only in the context of a <Router> component."), C.useContext(uo).location } var uv = "You should call navigate() in a React.useEffect(), not when your component is first rendered."; function dv(l) { C.useContext($i).static || C.useLayoutEffect(l) } function bi() { let { isDataRoute: l } = C.useContext(cs); return l ? n2() : Vj() } function Vj() { _t(Lr(), "useNavigate() may be used only in the context of a <Router> component."); let l = C.useContext(Rr), { basename: e, navigator: t } = C.useContext($i), { matches: s } = C.useContext(cs), { pathname: r } = Oi(), o = JSON.stringify(nm(s)), u = C.useRef(!1); return dv(() => { u.current = !0 }), C.useCallback((f, m = {}) => { if (ys(u.current, uv), !u.current) return; if (typeof f == "number") { t.go(f); return } let p = rm(f, JSON.parse(o), r, m.relative === "path"); l == null && e !== "/" && (p.pathname = p.pathname === "/" ? e : ea([e, p.pathname])), (m.replace ? t.replace : t.push)(p, m.state, m) }, [e, t, o, r, l]) } var hv = C.createContext(null); function fv() { return C.useContext(hv) } function Wj(l) { let e = C.useContext(cs).outlet; return C.useMemo(() => e && C.createElement(hv.Provider, { value: l }, e), [e, l]) } function ju() { let { matches: l } = C.useContext(cs), e = l[l.length - 1]; return e ? e.params : {} } function ho(l, { relative: e } = {}) { let { matches: t } = C.useContext(cs), { pathname: s } = Oi(), r = JSON.stringify(nm(t)); return C.useMemo(() => rm(l, JSON.parse(r), s, e === "path"), [l, r, s, e]) } function Gj(l, e) { return mv(l, e) } function mv(l, e, t, s, r) {
    _t(Lr(), "useRoutes() may be used only in the context of a <Router> component."); let { navigator: o } = C.useContext($i), { matches: u } = C.useContext(cs), d = u[u.length - 1], f = d ? d.params : {}, m = d ? d.pathname : "/", p = d ? d.pathnameBase : "/", g = d && d.route; {
        let w = g && g.path || ""; gv(m, !g || w.endsWith("*") || w.endsWith("*?"), `You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w === "/" ? "*" : `${w}/*`}">.`)
    } let y = Oi(), b; if (e) { let w = typeof e == "string" ? Br(e) : e; _t(p === "/" || w.pathname?.startsWith(p), `When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${w.pathname}" was given in the \`location\` prop.`), b = w } else b = y; let v = b.pathname || "/", k = v; if (p !== "/") { let w = p.replace(/^\//, "").split("/"); k = "/" + v.replace(/^\//, "").split("/").slice(w.length).join("/") } let j = iv(l, { pathname: k }); ys(g || j != null, `No routes matched location "${b.pathname}${b.search}${b.hash}" `), ys(j == null || j[j.length - 1].route.element !== void 0 || j[j.length - 1].route.Component !== void 0 || j[j.length - 1].route.lazy !== void 0, `Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`); let S = Jj(j && j.map(w => Object.assign({}, w, { params: Object.assign({}, f, w.params), pathname: ea([p, o.encodeLocation ? o.encodeLocation(w.pathname.replace(/\?/g, "%3F").replace(/#/g, "%23")).pathname : w.pathname]), pathnameBase: w.pathnameBase === "/" ? p : ea([p, o.encodeLocation ? o.encodeLocation(w.pathnameBase.replace(/\?/g, "%3F").replace(/#/g, "%23")).pathname : w.pathnameBase]) })), u, t, s, r); return e && S ? C.createElement(uo.Provider, { value: { location: { pathname: "/", search: "", hash: "", state: null, key: "default", ...b }, navigationType: "POP" } }, S) : S
} function $j() { let l = a2(), e = Bj(l) ? `${l.status} ${l.statusText}` : l instanceof Error ? l.message : JSON.stringify(l), t = l instanceof Error ? l.stack : null, s = "rgba(200,200,200, 0.5)", r = { padding: "0.5rem", backgroundColor: s }, o = { padding: "2px 4px", backgroundColor: s }, u = null; return console.error("Error handled by React Router default ErrorBoundary:", l), u = C.createElement(C.Fragment, null, C.createElement("p", null, " Hey developer "), C.createElement("p", null, "You can provide a way better UX than this when your app throws errors by providing your own ", C.createElement("code", { style: o }, "ErrorBoundary"), " or", " ", C.createElement("code", { style: o }, "errorElement"), " prop on your route.")), C.createElement(C.Fragment, null, C.createElement("h2", null, "Unexpected Application Error!"), C.createElement("h3", { style: { fontStyle: "italic" } }, e), t ? C.createElement("pre", { style: r }, t) : null, u) } var Kj = C.createElement($j, null), pv = class extends C.Component { constructor(l) { super(l), this.state = { location: l.location, revalidation: l.revalidation, error: l.error } } static getDerivedStateFromError(l) { return { error: l } } static getDerivedStateFromProps(l, e) { return e.location !== l.location || e.revalidation !== "idle" && l.revalidation === "idle" ? { error: l.error, location: l.location, revalidation: l.revalidation } : { error: l.error !== void 0 ? l.error : e.error, location: e.location, revalidation: l.revalidation || e.revalidation } } componentDidCatch(l, e) { this.props.onError ? this.props.onError(l, e) : console.error("React Router caught the following error during render", l) } render() { let l = this.state.error; if (this.context && typeof l == "object" && l && "digest" in l && typeof l.digest == "string") { const t = Xj(l.digest); t && (l = t) } let e = l !== void 0 ? C.createElement(cs.Provider, { value: this.props.routeContext }, C.createElement(lm.Provider, { value: l, children: this.props.component })) : this.props.children; return this.context ? C.createElement(Zj, { error: l }, e) : e } }; pv.contextType = zj; var cf = new WeakMap; function Zj({ children: l, error: e }) { let { basename: t } = C.useContext($i); if (typeof e == "object" && e && "digest" in e && typeof e.digest == "string") { let s = Yj(e.digest); if (s) { let r = cf.get(e); if (r) throw r; let o = rv(s.location, t); if (nv && !cf.get(e)) if (o.isExternal || s.reloadDocument) window.location.href = o.absoluteURL || o.to; else { const u = Promise.resolve().then(() => window.__reactRouterDataRouter.navigate(o.to, { replace: s.replace })); throw cf.set(e, u), u } return C.createElement("meta", { httpEquiv: "refresh", content: `0;url=${o.absoluteURL || o.to}` }) } } return l } function Qj({ routeContext: l, match: e, children: t }) { let s = C.useContext(Rr); return s && s.static && s.staticContext && (e.route.errorElement || e.route.ErrorBoundary) && (s.staticContext._deepestRenderedBoundaryId = e.route.id), C.createElement(cs.Provider, { value: l }, t) } function Jj(l, e = [], t = null, s = null, r = null) { if (l == null) { if (!t) return null; if (t.errors) l = t.matches; else if (e.length === 0 && !t.initialized && t.matches.length > 0) l = t.matches; else return null } let o = l, u = t?.errors; if (u != null) { let p = o.findIndex(g => g.route.id && u?.[g.route.id] !== void 0); _t(p >= 0, `Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`), o = o.slice(0, Math.min(o.length, p + 1)) } let d = !1, f = -1; if (t) for (let p = 0; p < o.length; p++) { let g = o[p]; if ((g.route.HydrateFallback || g.route.hydrateFallbackElement) && (f = p), g.route.id) { let { loaderData: y, errors: b } = t, v = g.route.loader && !y.hasOwnProperty(g.route.id) && (!b || b[g.route.id] === void 0); if (g.route.lazy || v) { d = !0, f >= 0 ? o = o.slice(0, f + 1) : o = [o[0]]; break } } } let m = t && s ? (p, g) => { s(p, { location: t.location, params: t.matches?.[0]?.params ?? {}, unstable_pattern: Rj(t.matches), errorInfo: g }) } : void 0; return o.reduceRight((p, g, y) => { let b, v = !1, k = null, j = null; t && (b = u && g.route.id ? u[g.route.id] : void 0, k = g.route.errorElement || Kj, d && (f < 0 && y === 0 ? (gv("route-fallback", !1, "No `HydrateFallback` element provided to render during initial hydration"), v = !0, j = null) : f === y && (v = !0, j = g.route.hydrateFallbackElement || null))); let S = e.concat(o.slice(0, y + 1)), w = () => { let N; return b ? N = k : v ? N = j : g.route.Component ? N = C.createElement(g.route.Component, null) : g.route.element ? N = g.route.element : N = p, C.createElement(Qj, { match: g, routeContext: { outlet: p, matches: S, isDataRoute: t != null }, children: N }) }; return t && (g.route.ErrorBoundary || g.route.errorElement || y === 0) ? C.createElement(pv, { location: t.location, revalidation: t.revalidation, component: k, error: b, children: w(), routeContext: { outlet: null, matches: S, isDataRoute: !0 }, onError: m }) : w() }, null) } function om(l) { return `${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.` } function e2(l) { let e = C.useContext(Rr); return _t(e, om(l)), e } function t2(l) { let e = C.useContext(_u); return _t(e, om(l)), e } function i2(l) { let e = C.useContext(cs); return _t(e, om(l)), e } function cm(l) { let e = i2(l), t = e.matches[e.matches.length - 1]; return _t(t.route.id, `${l} can only be used on routes that contain a unique "id"`), t.route.id } function s2() { return cm("useRouteId") } function a2() { let l = C.useContext(lm), e = t2("useRouteError"), t = cm("useRouteError"); return l !== void 0 ? l : e.errors?.[t] } function n2() { let { router: l } = e2("useNavigate"), e = cm("useNavigate"), t = C.useRef(!1); return dv(() => { t.current = !0 }), C.useCallback(async (r, o = {}) => { ys(t.current, uv), t.current && (typeof r == "number" ? await l.navigate(r) : await l.navigate(r, { fromRouteId: e, ...o })) }, [l, e]) } var Rx = {}; function gv(l, e, t) { !e && !Rx[l] && (Rx[l] = !0, ys(!1, t)) } C.memo(r2); function r2({ routes: l, future: e, state: t, onError: s }) { return mv(l, void 0, t, s, e) } function su({ to: l, replace: e, state: t, relative: s }) { _t(Lr(), "<Navigate> may be used only in the context of a <Router> component."); let { static: r } = C.useContext($i); ys(!r, "<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change."); let { matches: o } = C.useContext(cs), { pathname: u } = Oi(), d = bi(), f = rm(l, nm(o), u, s === "path"), m = JSON.stringify(f); return C.useEffect(() => { d(JSON.parse(m), { replace: e, state: t, relative: s }) }, [d, m, s, e, t]), null } function l2(l) { return Wj(l.context) } function dt(l) { _t(!1, "A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.") } function o2({ basename: l = "/", children: e = null, location: t, navigationType: s = "POP", navigator: r, static: o = !1, unstable_useTransitions: u }) { _t(!Lr(), "You cannot render a <Router> inside another <Router>. You should never have more than one in your app."); let d = l.replace(/^\/*/, "/"), f = C.useMemo(() => ({ basename: d, navigator: r, static: o, unstable_useTransitions: u, future: {} }), [d, r, o, u]); typeof t == "string" && (t = Br(t)); let { pathname: m = "/", search: p = "", hash: g = "", state: y = null, key: b = "default" } = t, v = C.useMemo(() => { let k = sa(m, d); return k == null ? null : { location: { pathname: k, search: p, hash: g, state: y, key: b }, navigationType: s } }, [d, m, p, g, y, b, s]); return ys(v != null, `<Router basename="${d}"> is not able to match the URL "${m}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`), v == null ? null : C.createElement($i.Provider, { value: f }, C.createElement(uo.Provider, { children: e, value: v })) } function c2({ children: l, location: e }) { return Gj(Df(l), e) } function Df(l, e = []) { let t = []; return C.Children.forEach(l, (s, r) => { if (!C.isValidElement(s)) return; let o = [...e, r]; if (s.type === C.Fragment) { t.push.apply(t, Df(s.props.children, o)); return } _t(s.type === dt, `[${typeof s.type == "string" ? s.type : s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`), _t(!s.props.index || !s.props.children, "An index route cannot have child routes."); let u = { id: s.props.id || o.join("-"), caseSensitive: s.props.caseSensitive, element: s.props.element, Component: s.props.Component, index: s.props.index, path: s.props.path, middleware: s.props.middleware, loader: s.props.loader, action: s.props.action, hydrateFallbackElement: s.props.hydrateFallbackElement, HydrateFallback: s.props.HydrateFallback, errorElement: s.props.errorElement, ErrorBoundary: s.props.ErrorBoundary, hasErrorBoundary: s.props.hasErrorBoundary === !0 || s.props.ErrorBoundary != null || s.props.errorElement != null, shouldRevalidate: s.props.shouldRevalidate, handle: s.props.handle, lazy: s.props.lazy }; s.props.children && (u.children = Df(s.props.children, o)), t.push(u) }), t } var Gc = "get", $c = "application/x-www-form-urlencoded"; function wu(l) { return typeof HTMLElement < "u" && l instanceof HTMLElement } function u2(l) { return wu(l) && l.tagName.toLowerCase() === "button" } function d2(l) { return wu(l) && l.tagName.toLowerCase() === "form" } function h2(l) { return wu(l) && l.tagName.toLowerCase() === "input" } function f2(l) { return !!(l.metaKey || l.altKey || l.ctrlKey || l.shiftKey) } function m2(l, e) { return l.button === 0 && (!e || e === "_self") && !f2(l) } var Bc = null; function p2() { if (Bc === null) try { new FormData(document.createElement("form"), 0), Bc = !1 } catch { Bc = !0 } return Bc } var g2 = new Set(["application/x-www-form-urlencoded", "multipart/form-data", "text/plain"]); function uf(l) { return l != null && !g2.has(l) ? (ys(!1, `"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${$c}"`), null) : l } function b2(l, e) { let t, s, r, o, u; if (d2(l)) { let d = l.getAttribute("action"); s = d ? sa(d, e) : null, t = l.getAttribute("method") || Gc, r = uf(l.getAttribute("enctype")) || $c, o = new FormData(l) } else if (u2(l) || h2(l) && (l.type === "submit" || l.type === "image")) { let d = l.form; if (d == null) throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>'); let f = l.getAttribute("formaction") || d.getAttribute("action"); if (s = f ? sa(f, e) : null, t = l.getAttribute("formmethod") || d.getAttribute("method") || Gc, r = uf(l.getAttribute("formenctype")) || uf(d.getAttribute("enctype")) || $c, o = new FormData(d, l), !p2()) { let { name: m, type: p, value: g } = l; if (p === "image") { let y = m ? `${m}.` : ""; o.append(`${y}x`, "0"), o.append(`${y}y`, "0") } else m && o.append(m, g) } } else { if (wu(l)) throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">'); t = Gc, s = null, r = $c, u = l } return o && r === "text/plain" && (u = o, o = void 0), { action: s, method: t.toLowerCase(), encType: r, formData: o, body: u } } Object.getOwnPropertyNames(Object.prototype).sort().join("\0"); function um(l, e) { if (l === !1 || l === null || typeof l > "u") throw new Error(e) } function x2(l, e, t, s) { let r = typeof l == "string" ? new URL(l, typeof window > "u" ? "server://singlefetch/" : window.location.origin) : l; return t ? r.pathname.endsWith("/") ? r.pathname = `${r.pathname}_.${s}` : r.pathname = `${r.pathname}.${s}` : r.pathname === "/" ? r.pathname = `_root.${s}` : e && sa(r.pathname, e) === "/" ? r.pathname = `${e.replace(/\/$/, "")}/_root.${s}` : r.pathname = `${r.pathname.replace(/\/$/, "")}.${s}`, r } async function y2(l, e) { if (l.id in e) return e[l.id]; try { let t = await import(l.module); return e[l.id] = t, t } catch (t) { return console.error(`Error loading route module \`${l.module}\`, reloading page...`), console.error(t), window.__reactRouterContext && window.__reactRouterContext.isSpaMode, window.location.reload(), new Promise(() => { }) } } function v2(l) { return l == null ? !1 : l.href == null ? l.rel === "preload" && typeof l.imageSrcSet == "string" && typeof l.imageSizes == "string" : typeof l.rel == "string" && typeof l.href == "string" } async function _2(l, e, t) { let s = await Promise.all(l.map(async r => { let o = e.routes[r.route.id]; if (o) { let u = await y2(o, t); return u.links ? u.links() : [] } return [] })); return S2(s.flat(1).filter(v2).filter(r => r.rel === "stylesheet" || r.rel === "preload").map(r => r.rel === "stylesheet" ? { ...r, rel: "prefetch", as: "style" } : { ...r, rel: "prefetch" })) } function Lx(l, e, t, s, r, o) { let u = (f, m) => t[m] ? f.route.id !== t[m].route.id : !0, d = (f, m) => t[m].pathname !== f.pathname || t[m].route.path?.endsWith("*") && t[m].params["*"] !== f.params["*"]; return o === "assets" ? e.filter((f, m) => u(f, m) || d(f, m)) : o === "data" ? e.filter((f, m) => { let p = s.routes[f.route.id]; if (!p || !p.hasLoader) return !1; if (u(f, m) || d(f, m)) return !0; if (f.route.shouldRevalidate) { let g = f.route.shouldRevalidate({ currentUrl: new URL(r.pathname + r.search + r.hash, window.origin), currentParams: t[0]?.params || {}, nextUrl: new URL(l, window.origin), nextParams: f.params, defaultShouldRevalidate: !0 }); if (typeof g == "boolean") return g } return !0 }) : [] } function j2(l, e, { includeHydrateFallback: t } = {}) { return w2(l.map(s => { let r = e.routes[s.route.id]; if (!r) return []; let o = [r.module]; return r.clientActionModule && (o = o.concat(r.clientActionModule)), r.clientLoaderModule && (o = o.concat(r.clientLoaderModule)), t && r.hydrateFallbackModule && (o = o.concat(r.hydrateFallbackModule)), r.imports && (o = o.concat(r.imports)), o }).flat(1)) } function w2(l) { return [...new Set(l)] } function k2(l) { let e = {}, t = Object.keys(l).sort(); for (let s of t) e[s] = l[s]; return e } function S2(l, e) { let t = new Set; return new Set(e), l.reduce((s, r) => { let o = JSON.stringify(k2(r)); return t.has(o) || (t.add(o), s.push({ key: o, link: r })), s }, []) } function bv() { let l = C.useContext(Rr); return um(l, "You must render this element inside a <DataRouterContext.Provider> element"), l } function N2() { let l = C.useContext(_u); return um(l, "You must render this element inside a <DataRouterStateContext.Provider> element"), l } var dm = C.createContext(void 0); dm.displayName = "FrameworkContext"; function xv() { let l = C.useContext(dm); return um(l, "You must render this element inside a <HydratedRouter> element"), l } function C2(l, e) { let t = C.useContext(dm), [s, r] = C.useState(!1), [o, u] = C.useState(!1), { onFocus: d, onBlur: f, onMouseEnter: m, onMouseLeave: p, onTouchStart: g } = e, y = C.useRef(null); C.useEffect(() => { if (l === "render" && u(!0), l === "viewport") { let k = S => { S.forEach(w => { u(w.isIntersecting) }) }, j = new IntersectionObserver(k, { threshold: .5 }); return y.current && j.observe(y.current), () => { j.disconnect() } } }, [l]), C.useEffect(() => { if (s) { let k = setTimeout(() => { u(!0) }, 100); return () => { clearTimeout(k) } } }, [s]); let b = () => { r(!0) }, v = () => { r(!1), u(!1) }; return t ? l !== "intent" ? [o, y, {}] : [o, y, { onFocus: El(d, b), onBlur: El(f, v), onMouseEnter: El(m, b), onMouseLeave: El(p, v), onTouchStart: El(g, b) }] : [!1, y, {}] } function El(l, e) { return t => { l && l(t), t.defaultPrevented || e(t) } } function T2({ page: l, ...e }) { let { router: t } = bv(), s = C.useMemo(() => iv(t.routes, l, t.basename), [t.routes, l, t.basename]); return s ? C.createElement(A2, { page: l, matches: s, ...e }) : null } function D2(l) { let { manifest: e, routeModules: t } = xv(), [s, r] = C.useState([]); return C.useEffect(() => { let o = !1; return _2(l, e, t).then(u => { o || r(u) }), () => { o = !0 } }, [l, e, t]), s } function A2({ page: l, matches: e, ...t }) { let s = Oi(), { future: r, manifest: o, routeModules: u } = xv(), { basename: d } = bv(), { loaderData: f, matches: m } = N2(), p = C.useMemo(() => Lx(l, e, m, o, s, "data"), [l, e, m, o, s]), g = C.useMemo(() => Lx(l, e, m, o, s, "assets"), [l, e, m, o, s]), y = C.useMemo(() => { if (l === s.pathname + s.search + s.hash) return []; let k = new Set, j = !1; if (e.forEach(w => { let N = o.routes[w.route.id]; !N || !N.hasLoader || (!p.some(T => T.route.id === w.route.id) && w.route.id in f && u[w.route.id]?.shouldRevalidate || N.hasClientLoader ? j = !0 : k.add(w.route.id)) }), k.size === 0) return []; let S = x2(l, d, r.unstable_trailingSlashAwareDataRequests, "data"); return j && k.size > 0 && S.searchParams.set("_routes", e.filter(w => k.has(w.route.id)).map(w => w.route.id).join(",")), [S.pathname + S.search] }, [d, r.unstable_trailingSlashAwareDataRequests, f, s, o, p, e, l, u]), b = C.useMemo(() => j2(g, o), [g, o]), v = D2(g); return C.createElement(C.Fragment, null, y.map(k => C.createElement("link", { key: k, rel: "prefetch", as: "fetch", href: k, ...t })), b.map(k => C.createElement("link", { key: k, rel: "modulepreload", href: k, ...t })), v.map(({ key: k, link: j }) => C.createElement("link", { key: k, nonce: t.nonce, ...j, crossOrigin: j.crossOrigin ?? t.crossOrigin }))) } function M2(...l) { return e => { l.forEach(t => { typeof t == "function" ? t(e) : t != null && (t.current = e) }) } } var P2 = typeof window < "u" && typeof window.document < "u" && typeof window.document.createElement < "u"; try { P2 && (window.__reactRouterVersion = "7.13.0") } catch { } function O2({ basename: l, children: e, unstable_useTransitions: t, window: s }) { let r = C.useRef(); r.current == null && (r.current = dj({ window: s, v5Compat: !0 })); let o = r.current, [u, d] = C.useState({ action: o.action, location: o.location }), f = C.useCallback(m => { t === !1 ? d(m) : C.startTransition(() => d(m)) }, [t]); return C.useLayoutEffect(() => o.listen(f), [o, f]), C.createElement(o2, { basename: l, children: e, location: u.location, navigationType: u.action, navigator: o, unstable_useTransitions: t }) } var yv = /^(?:[a-z][a-z0-9+.-]*:|\/\/)/i, vv = C.forwardRef(function ({ onClick: e, discover: t = "render", prefetch: s = "none", relative: r, reloadDocument: o, replace: u, state: d, target: f, to: m, preventScrollReset: p, viewTransition: g, unstable_defaultShouldRevalidate: y, ...b }, v) { let { basename: k, unstable_useTransitions: j } = C.useContext($i), S = typeof m == "string" && yv.test(m), w = rv(m, k); m = w.to; let N = Uj(m, { relative: r }), [T, R, P] = C2(s, b), O = R2(m, { replace: u, state: d, target: f, preventScrollReset: p, relative: r, viewTransition: g, unstable_defaultShouldRevalidate: y, unstable_useTransitions: j }); function z(B) { e && e(B), B.defaultPrevented || O(B) } let F = C.createElement("a", { ...b, ...P, href: w.absoluteURL || N, onClick: w.isExternal || o ? e : z, ref: M2(v, R), target: f, "data-discover": !S && t === "render" ? "true" : void 0 }); return T && !S ? C.createElement(C.Fragment, null, F, C.createElement(T2, { page: N })) : F }); vv.displayName = "Link"; var Af = C.forwardRef(function ({ "aria-current": e = "page", caseSensitive: t = !1, className: s = "", end: r = !1, style: o, to: u, viewTransition: d, children: f, ...m }, p) { let g = ho(u, { relative: m.relative }), y = Oi(), b = C.useContext(_u), { navigator: v, basename: k } = C.useContext($i), j = b != null && I2(g) && d === !0, S = v.encodeLocation ? v.encodeLocation(g).pathname : g.pathname, w = y.pathname, N = b && b.navigation && b.navigation.location ? b.navigation.location.pathname : null; t || (w = w.toLowerCase(), N = N ? N.toLowerCase() : null, S = S.toLowerCase()), N && k && (N = sa(N, k) || N); const T = S !== "/" && S.endsWith("/") ? S.length - 1 : S.length; let R = w === S || !r && w.startsWith(S) && w.charAt(T) === "/", P = N != null && (N === S || !r && N.startsWith(S) && N.charAt(S.length) === "/"), O = { isActive: R, isPending: P, isTransitioning: j }, z = R ? e : void 0, F; typeof s == "function" ? F = s(O) : F = [s, R ? "active" : null, P ? "pending" : null, j ? "transitioning" : null].filter(Boolean).join(" "); let B = typeof o == "function" ? o(O) : o; return C.createElement(vv, { ...m, "aria-current": z, className: F, ref: p, style: B, to: u, viewTransition: d }, typeof f == "function" ? f(O) : f) }); Af.displayName = "NavLink"; var E2 = C.forwardRef(({ discover: l = "render", fetcherKey: e, navigate: t, reloadDocument: s, replace: r, state: o, method: u = Gc, action: d, onSubmit: f, relative: m, preventScrollReset: p, viewTransition: g, unstable_defaultShouldRevalidate: y, ...b }, v) => { let { unstable_useTransitions: k } = C.useContext($i), j = F2(), S = H2(d, { relative: m }), w = u.toLowerCase() === "get" ? "get" : "post", N = typeof d == "string" && yv.test(d), T = R => { if (f && f(R), R.defaultPrevented) return; R.preventDefault(); let P = R.nativeEvent.submitter, O = P?.getAttribute("formmethod") || u, z = () => j(P || R.currentTarget, { fetcherKey: e, method: O, navigate: t, replace: r, state: o, relative: m, preventScrollReset: p, viewTransition: g, unstable_defaultShouldRevalidate: y }); k && t !== !1 ? C.startTransition(() => z()) : z() }; return C.createElement("form", { ref: v, method: w, action: S, onSubmit: s ? f : T, ...b, "data-discover": !N && l === "render" ? "true" : void 0 }) }); E2.displayName = "Form"; function B2(l) { return `${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.` } function _v(l) { let e = C.useContext(Rr); return _t(e, B2(l)), e } function R2(l, { target: e, replace: t, state: s, preventScrollReset: r, relative: o, viewTransition: u, unstable_defaultShouldRevalidate: d, unstable_useTransitions: f } = {}) { let m = bi(), p = Oi(), g = ho(l, { relative: o }); return C.useCallback(y => { if (m2(y, e)) { y.preventDefault(); let b = t !== void 0 ? t : Ul(p) === Ul(g), v = () => m(l, { replace: b, state: s, preventScrollReset: r, relative: o, viewTransition: u, unstable_defaultShouldRevalidate: d }); f ? C.startTransition(() => v()) : v() } }, [p, m, g, t, s, e, l, r, o, u, d, f]) } var L2 = 0, z2 = () => `__${String(++L2)}__`; function F2() { let { router: l } = _v("useSubmit"), { basename: e } = C.useContext($i), t = s2(), s = l.fetch, r = l.navigate; return C.useCallback(async (o, u = {}) => { let { action: d, method: f, encType: m, formData: p, body: g } = b2(o, e); if (u.navigate === !1) { let y = u.fetcherKey || z2(); await s(y, t, u.action || d, { unstable_defaultShouldRevalidate: u.unstable_defaultShouldRevalidate, preventScrollReset: u.preventScrollReset, formData: p, body: g, formMethod: u.method || f, formEncType: u.encType || m, flushSync: u.flushSync }) } else await r(u.action || d, { unstable_defaultShouldRevalidate: u.unstable_defaultShouldRevalidate, preventScrollReset: u.preventScrollReset, formData: p, body: g, formMethod: u.method || f, formEncType: u.encType || m, replace: u.replace, state: u.state, fromRouteId: t, flushSync: u.flushSync, viewTransition: u.viewTransition }) }, [s, r, e, t]) } function H2(l, { relative: e } = {}) { let { basename: t } = C.useContext($i), s = C.useContext(cs); _t(s, "useFormAction must be used inside a RouteContext"); let [r] = s.matches.slice(-1), o = { ...ho(l || ".", { relative: e }) }, u = Oi(); if (l == null) { o.search = u.search; let d = new URLSearchParams(o.search), f = d.getAll("index"); if (f.some(p => p === "")) { d.delete("index"), f.filter(g => g).forEach(g => d.append("index", g)); let p = d.toString(); o.search = p ? `?${p}` : "" } } return (!l || l === ".") && r.route.index && (o.search = o.search ? o.search.replace(/^\?/, "?index&") : "?index"), t !== "/" && (o.pathname = o.pathname === "/" ? t : ea([t, o.pathname])), Ul(o) } function I2(l, { relative: e } = {}) { let t = C.useContext(ov); _t(t != null, "`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?"); let { basename: s } = _v("useViewTransitionState"), r = ho(l, { relative: e }); if (!t.isTransitioning) return !1; let o = sa(t.currentLocation.pathname, s) || t.currentLocation.pathname, u = sa(t.nextLocation.pathname, s) || t.nextLocation.pathname; return iu(r.pathname, u) != null || iu(r.pathname, o) != null } var gt = tv(); const q2 = ev(gt), jv = C.createContext(), wv = () => { const l = C.useContext(jv); if (!l) throw new Error("useTheme must be used within a ThemeProvider"); return l }, Y2 = ({ children: l }) => { const [e, t] = C.useState(() => localStorage.getItem("theme") || "light"); C.useEffect(() => { localStorage.setItem("theme", e), document.documentElement.setAttribute("data-theme", e) }, [e]), C.useEffect(() => { const r = localStorage.getItem("theme") || "light"; document.documentElement.setAttribute("data-theme", r) }, []); const s = () => { t(r => r === "light" ? "dark" : "light") }; return i.jsx(jv.Provider, { value: { theme: e, toggleTheme: s }, children: l }) }; function kv(l, e) { return function () { return l.apply(e, arguments) } } const { toString: X2 } = Object.prototype, { getPrototypeOf: hm } = Object, { iterator: ku, toStringTag: Sv } = Symbol, Su = (l => e => { const t = X2.call(e); return l[t] || (l[t] = t.slice(8, -1).toLowerCase()) })(Object.create(null)), _s = l => (l = l.toLowerCase(), e => Su(e) === l), Nu = l => e => typeof e === l, { isArray: zr } = Array, Nr = Nu("undefined"); function fo(l) { return l !== null && !Nr(l) && l.constructor !== null && !Nr(l.constructor) && Ai(l.constructor.isBuffer) && l.constructor.isBuffer(l) } const Nv = _s("ArrayBuffer"); function U2(l) { let e; return typeof ArrayBuffer < "u" && ArrayBuffer.isView ? e = ArrayBuffer.isView(l) : e = l && l.buffer && Nv(l.buffer), e } const V2 = Nu("string"), Ai = Nu("function"), Cv = Nu("number"), mo = l => l !== null && typeof l == "object", W2 = l => l === !0 || l === !1, Kc = l => { if (Su(l) !== "object") return !1; const e = hm(l); return (e === null || e === Object.prototype || Object.getPrototypeOf(e) === null) && !(Sv in l) && !(ku in l) }, G2 = l => { if (!mo(l) || fo(l)) return !1; try { return Object.keys(l).length === 0 && Object.getPrototypeOf(l) === Object.prototype } catch { return !1 } }, $2 = _s("Date"), K2 = _s("File"), Z2 = _s("Blob"), Q2 = _s("FileList"), J2 = l => mo(l) && Ai(l.pipe), ew = l => { let e; return l && (typeof FormData == "function" && l instanceof FormData || Ai(l.append) && ((e = Su(l)) === "formdata" || e === "object" && Ai(l.toString) && l.toString() === "[object FormData]")) }, tw = _s("URLSearchParams"), [iw, sw, aw, nw] = ["ReadableStream", "Request", "Response", "Headers"].map(_s), rw = l => l.trim ? l.trim() : l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, ""); function po(l, e, { allOwnKeys: t = !1 } = {}) { if (l === null || typeof l > "u") return; let s, r; if (typeof l != "object" && (l = [l]), zr(l)) for (s = 0, r = l.length; s < r; s++)e.call(null, l[s], s, l); else { if (fo(l)) return; const o = t ? Object.getOwnPropertyNames(l) : Object.keys(l), u = o.length; let d; for (s = 0; s < u; s++)d = o[s], e.call(null, l[d], d, l) } } function Tv(l, e) { if (fo(l)) return null; e = e.toLowerCase(); const t = Object.keys(l); let s = t.length, r; for (; s-- > 0;)if (r = t[s], e === r.toLowerCase()) return r; return null } const fn = typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : global, Dv = l => !Nr(l) && l !== fn; function Mf() { const { caseless: l, skipUndefined: e } = Dv(this) && this || {}, t = {}, s = (r, o) => { const u = l && Tv(t, o) || o; Kc(t[u]) && Kc(r) ? t[u] = Mf(t[u], r) : Kc(r) ? t[u] = Mf({}, r) : zr(r) ? t[u] = r.slice() : (!e || !Nr(r)) && (t[u] = r) }; for (let r = 0, o = arguments.length; r < o; r++)arguments[r] && po(arguments[r], s); return t } const lw = (l, e, t, { allOwnKeys: s } = {}) => (po(e, (r, o) => { t && Ai(r) ? Object.defineProperty(l, o, { value: kv(r, t), writable: !0, enumerable: !0, configurable: !0 }) : Object.defineProperty(l, o, { value: r, writable: !0, enumerable: !0, configurable: !0 }) }, { allOwnKeys: s }), l), ow = l => (l.charCodeAt(0) === 65279 && (l = l.slice(1)), l), cw = (l, e, t, s) => { l.prototype = Object.create(e.prototype, s), Object.defineProperty(l.prototype, "constructor", { value: l, writable: !0, enumerable: !1, configurable: !0 }), Object.defineProperty(l, "super", { value: e.prototype }), t && Object.assign(l.prototype, t) }, uw = (l, e, t, s) => { let r, o, u; const d = {}; if (e = e || {}, l == null) return e; do { for (r = Object.getOwnPropertyNames(l), o = r.length; o-- > 0;)u = r[o], (!s || s(u, l, e)) && !d[u] && (e[u] = l[u], d[u] = !0); l = t !== !1 && hm(l) } while (l && (!t || t(l, e)) && l !== Object.prototype); return e }, dw = (l, e, t) => { l = String(l), (t === void 0 || t > l.length) && (t = l.length), t -= e.length; const s = l.indexOf(e, t); return s !== -1 && s === t }, hw = l => { if (!l) return null; if (zr(l)) return l; let e = l.length; if (!Cv(e)) return null; const t = new Array(e); for (; e-- > 0;)t[e] = l[e]; return t }, fw = (l => e => l && e instanceof l)(typeof Uint8Array < "u" && hm(Uint8Array)), mw = (l, e) => { const s = (l && l[ku]).call(l); let r; for (; (r = s.next()) && !r.done;) { const o = r.value; e.call(l, o[0], o[1]) } }, pw = (l, e) => { let t; const s = []; for (; (t = l.exec(e)) !== null;)s.push(t); return s }, gw = _s("HTMLFormElement"), bw = l => l.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g, function (t, s, r) { return s.toUpperCase() + r }), zx = (({ hasOwnProperty: l }) => (e, t) => l.call(e, t))(Object.prototype), xw = _s("RegExp"), Av = (l, e) => { const t = Object.getOwnPropertyDescriptors(l), s = {}; po(t, (r, o) => { let u; (u = e(r, o, l)) !== !1 && (s[o] = u || r) }), Object.defineProperties(l, s) }, yw = l => { Av(l, (e, t) => { if (Ai(l) && ["arguments", "caller", "callee"].indexOf(t) !== -1) return !1; const s = l[t]; if (Ai(s)) { if (e.enumerable = !1, "writable" in e) { e.writable = !1; return } e.set || (e.set = () => { throw Error("Can not rewrite read-only method '" + t + "'") }) } }) }, vw = (l, e) => { const t = {}, s = r => { r.forEach(o => { t[o] = !0 }) }; return zr(l) ? s(l) : s(String(l).split(e)), t }, _w = () => { }, jw = (l, e) => l != null && Number.isFinite(l = +l) ? l : e; function ww(l) { return !!(l && Ai(l.append) && l[Sv] === "FormData" && l[ku]) } const kw = l => { const e = new Array(10), t = (s, r) => { if (mo(s)) { if (e.indexOf(s) >= 0) return; if (fo(s)) return s; if (!("toJSON" in s)) { e[r] = s; const o = zr(s) ? [] : {}; return po(s, (u, d) => { const f = t(u, r + 1); !Nr(f) && (o[d] = f) }), e[r] = void 0, o } } return s }; return t(l, 0) }, Sw = _s("AsyncFunction"), Nw = l => l && (mo(l) || Ai(l)) && Ai(l.then) && Ai(l.catch), Mv = ((l, e) => l ? setImmediate : e ? ((t, s) => (fn.addEventListener("message", ({ source: r, data: o }) => { r === fn && o === t && s.length && s.shift()() }, !1), r => { s.push(r), fn.postMessage(t, "*") }))(`axios@${Math.random()}`, []) : t => setTimeout(t))(typeof setImmediate == "function", Ai(fn.postMessage)), Cw = typeof queueMicrotask < "u" ? queueMicrotask.bind(fn) : typeof process < "u" && process.nextTick || Mv, Tw = l => l != null && Ai(l[ku]), pe = { isArray: zr, isArrayBuffer: Nv, isBuffer: fo, isFormData: ew, isArrayBufferView: U2, isString: V2, isNumber: Cv, isBoolean: W2, isObject: mo, isPlainObject: Kc, isEmptyObject: G2, isReadableStream: iw, isRequest: sw, isResponse: aw, isHeaders: nw, isUndefined: Nr, isDate: $2, isFile: K2, isBlob: Z2, isRegExp: xw, isFunction: Ai, isStream: J2, isURLSearchParams: tw, isTypedArray: fw, isFileList: Q2, forEach: po, merge: Mf, extend: lw, trim: rw, stripBOM: ow, inherits: cw, toFlatObject: uw, kindOf: Su, kindOfTest: _s, endsWith: dw, toArray: hw, forEachEntry: mw, matchAll: pw, isHTMLForm: gw, hasOwnProperty: zx, hasOwnProp: zx, reduceDescriptors: Av, freezeMethods: yw, toObjectSet: vw, toCamelCase: bw, noop: _w, toFiniteNumber: jw, findKey: Tv, global: fn, isContextDefined: Dv, isSpecCompliantForm: ww, toJSONObject: kw, isAsyncFn: Sw, isThenable: Nw, setImmediate: Mv, asap: Cw, isIterable: Tw }; let He = class Pv extends Error { static from(e, t, s, r, o, u) { const d = new Pv(e.message, t || e.code, s, r, o); return d.cause = e, d.name = e.name, u && Object.assign(d, u), d } constructor(e, t, s, r, o) { super(e), this.name = "AxiosError", this.isAxiosError = !0, t && (this.code = t), s && (this.config = s), r && (this.request = r), o && (this.response = o, this.status = o.status) } toJSON() { return { message: this.message, name: this.name, description: this.description, number: this.number, fileName: this.fileName, lineNumber: this.lineNumber, columnNumber: this.columnNumber, stack: this.stack, config: pe.toJSONObject(this.config), code: this.code, status: this.status } } }; He.ERR_BAD_OPTION_VALUE = "ERR_BAD_OPTION_VALUE"; He.ERR_BAD_OPTION = "ERR_BAD_OPTION"; He.ECONNABORTED = "ECONNABORTED"; He.ETIMEDOUT = "ETIMEDOUT"; He.ERR_NETWORK = "ERR_NETWORK"; He.ERR_FR_TOO_MANY_REDIRECTS = "ERR_FR_TOO_MANY_REDIRECTS"; He.ERR_DEPRECATED = "ERR_DEPRECATED"; He.ERR_BAD_RESPONSE = "ERR_BAD_RESPONSE"; He.ERR_BAD_REQUEST = "ERR_BAD_REQUEST"; He.ERR_CANCELED = "ERR_CANCELED"; He.ERR_NOT_SUPPORT = "ERR_NOT_SUPPORT"; He.ERR_INVALID_URL = "ERR_INVALID_URL"; const Dw = null; function Pf(l) { return pe.isPlainObject(l) || pe.isArray(l) } function Ov(l) { return pe.endsWith(l, "[]") ? l.slice(0, -2) : l } function Fx(l, e, t) { return l ? l.concat(e).map(function (r, o) { return r = Ov(r), !t && o ? "[" + r + "]" : r }).join(t ? "." : "") : e } function Aw(l) { return pe.isArray(l) && !l.some(Pf) } const Mw = pe.toFlatObject(pe, {}, null, function (e) { return /^is[A-Z]/.test(e) }); function Cu(l, e, t) { if (!pe.isObject(l)) throw new TypeError("target must be an object"); e = e || new FormData, t = pe.toFlatObject(t, { metaTokens: !0, dots: !1, indexes: !1 }, !1, function (k, j) { return !pe.isUndefined(j[k]) }); const s = t.metaTokens, r = t.visitor || p, o = t.dots, u = t.indexes, f = (t.Blob || typeof Blob < "u" && Blob) && pe.isSpecCompliantForm(e); if (!pe.isFunction(r)) throw new TypeError("visitor must be a function"); function m(v) { if (v === null) return ""; if (pe.isDate(v)) return v.toISOString(); if (pe.isBoolean(v)) return v.toString(); if (!f && pe.isBlob(v)) throw new He("Blob is not supported. Use a Buffer instead."); return pe.isArrayBuffer(v) || pe.isTypedArray(v) ? f && typeof Blob == "function" ? new Blob([v]) : Buffer.from(v) : v } function p(v, k, j) { let S = v; if (v && !j && typeof v == "object") { if (pe.endsWith(k, "{}")) k = s ? k : k.slice(0, -2), v = JSON.stringify(v); else if (pe.isArray(v) && Aw(v) || (pe.isFileList(v) || pe.endsWith(k, "[]")) && (S = pe.toArray(v))) return k = Ov(k), S.forEach(function (N, T) { !(pe.isUndefined(N) || N === null) && e.append(u === !0 ? Fx([k], T, o) : u === null ? k : k + "[]", m(N)) }), !1 } return Pf(v) ? !0 : (e.append(Fx(j, k, o), m(v)), !1) } const g = [], y = Object.assign(Mw, { defaultVisitor: p, convertValue: m, isVisitable: Pf }); function b(v, k) { if (!pe.isUndefined(v)) { if (g.indexOf(v) !== -1) throw Error("Circular reference detected in " + k.join(".")); g.push(v), pe.forEach(v, function (S, w) { (!(pe.isUndefined(S) || S === null) && r.call(e, S, pe.isString(w) ? w.trim() : w, k, y)) === !0 && b(S, k ? k.concat(w) : [w]) }), g.pop() } } if (!pe.isObject(l)) throw new TypeError("data must be an object"); return b(l), e } function Hx(l) { const e = { "!": "%21", "'": "%27", "(": "%28", ")": "%29", "~": "%7E", "%20": "+", "%00": "\0" }; return encodeURIComponent(l).replace(/[!'()~]|%20|%00/g, function (s) { return e[s] }) } function fm(l, e) { this._pairs = [], l && Cu(l, this, e) } const Ev = fm.prototype; Ev.append = function (e, t) { this._pairs.push([e, t]) }; Ev.toString = function (e) { const t = e ? function (s) { return e.call(this, s, Hx) } : Hx; return this._pairs.map(function (r) { return t(r[0]) + "=" + t(r[1]) }, "").join("&") }; function Pw(l) { return encodeURIComponent(l).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+") } function Bv(l, e, t) { if (!e) return l; const s = t && t.encode || Pw, r = pe.isFunction(t) ? { serialize: t } : t, o = r && r.serialize; let u; if (o ? u = o(e, r) : u = pe.isURLSearchParams(e) ? e.toString() : new fm(e, r).toString(s), u) { const d = l.indexOf("#"); d !== -1 && (l = l.slice(0, d)), l += (l.indexOf("?") === -1 ? "?" : "&") + u } return l } class Ix { constructor() { this.handlers = [] } use(e, t, s) { return this.handlers.push({ fulfilled: e, rejected: t, synchronous: s ? s.synchronous : !1, runWhen: s ? s.runWhen : null }), this.handlers.length - 1 } eject(e) { this.handlers[e] && (this.handlers[e] = null) } clear() { this.handlers && (this.handlers = []) } forEach(e) { pe.forEach(this.handlers, function (s) { s !== null && e(s) }) } } const Rv = { silentJSONParsing: !0, forcedJSONParsing: !0, clarifyTimeoutError: !1 }, Ow = typeof URLSearchParams < "u" ? URLSearchParams : fm, Ew = typeof FormData < "u" ? FormData : null, Bw = typeof Blob < "u" ? Blob : null, Rw = { isBrowser: !0, classes: { URLSearchParams: Ow, FormData: Ew, Blob: Bw }, protocols: ["http", "https", "file", "blob", "url", "data"] }, mm = typeof window < "u" && typeof document < "u", Of = typeof navigator == "object" && navigator || void 0, Lw = mm && (!Of || ["ReactNative", "NativeScript", "NS"].indexOf(Of.product) < 0), zw = typeof WorkerGlobalScope < "u" && self instanceof WorkerGlobalScope && typeof self.importScripts == "function", Fw = mm && window.location.href || "http://localhost", Hw = Object.freeze(Object.defineProperty({ __proto__: null, hasBrowserEnv: mm, hasStandardBrowserEnv: Lw, hasStandardBrowserWebWorkerEnv: zw, navigator: Of, origin: Fw }, Symbol.toStringTag, { value: "Module" })), mi = { ...Hw, ...Rw }; function Iw(l, e) { return Cu(l, new mi.classes.URLSearchParams, { visitor: function (t, s, r, o) { return mi.isNode && pe.isBuffer(t) ? (this.append(s, t.toString("base64")), !1) : o.defaultVisitor.apply(this, arguments) }, ...e }) } function qw(l) { return pe.matchAll(/\w+|\[(\w*)]/g, l).map(e => e[0] === "[]" ? "" : e[1] || e[0]) } function Yw(l) { const e = {}, t = Object.keys(l); let s; const r = t.length; let o; for (s = 0; s < r; s++)o = t[s], e[o] = l[o]; return e } function Lv(l) { function e(t, s, r, o) { let u = t[o++]; if (u === "__proto__") return !0; const d = Number.isFinite(+u), f = o >= t.length; return u = !u && pe.isArray(r) ? r.length : u, f ? (pe.hasOwnProp(r, u) ? r[u] = [r[u], s] : r[u] = s, !d) : ((!r[u] || !pe.isObject(r[u])) && (r[u] = []), e(t, s, r[u], o) && pe.isArray(r[u]) && (r[u] = Yw(r[u])), !d) } if (pe.isFormData(l) && pe.isFunction(l.entries)) { const t = {}; return pe.forEachEntry(l, (s, r) => { e(qw(s), r, t, 0) }), t } return null } function Xw(l, e, t) { if (pe.isString(l)) try { return (e || JSON.parse)(l), pe.trim(l) } catch (s) { if (s.name !== "SyntaxError") throw s } return (t || JSON.stringify)(l) } const go = { transitional: Rv, adapter: ["xhr", "http", "fetch"], transformRequest: [function (e, t) { const s = t.getContentType() || "", r = s.indexOf("application/json") > -1, o = pe.isObject(e); if (o && pe.isHTMLForm(e) && (e = new FormData(e)), pe.isFormData(e)) return r ? JSON.stringify(Lv(e)) : e; if (pe.isArrayBuffer(e) || pe.isBuffer(e) || pe.isStream(e) || pe.isFile(e) || pe.isBlob(e) || pe.isReadableStream(e)) return e; if (pe.isArrayBufferView(e)) return e.buffer; if (pe.isURLSearchParams(e)) return t.setContentType("application/x-www-form-urlencoded;charset=utf-8", !1), e.toString(); let d; if (o) { if (s.indexOf("application/x-www-form-urlencoded") > -1) return Iw(e, this.formSerializer).toString(); if ((d = pe.isFileList(e)) || s.indexOf("multipart/form-data") > -1) { const f = this.env && this.env.FormData; return Cu(d ? { "files[]": e } : e, f && new f, this.formSerializer) } } return o || r ? (t.setContentType("application/json", !1), Xw(e)) : e }], transformResponse: [function (e) { const t = this.transitional || go.transitional, s = t && t.forcedJSONParsing, r = this.responseType === "json"; if (pe.isResponse(e) || pe.isReadableStream(e)) return e; if (e && pe.isString(e) && (s && !this.responseType || r)) { const u = !(t && t.silentJSONParsing) && r; try { return JSON.parse(e, this.parseReviver) } catch (d) { if (u) throw d.name === "SyntaxError" ? He.from(d, He.ERR_BAD_RESPONSE, this, null, this.response) : d } } return e }], timeout: 0, xsrfCookieName: "XSRF-TOKEN", xsrfHeaderName: "X-XSRF-TOKEN", maxContentLength: -1, maxBodyLength: -1, env: { FormData: mi.classes.FormData, Blob: mi.classes.Blob }, validateStatus: function (e) { return e >= 200 && e < 300 }, headers: { common: { Accept: "application/json, text/plain, */*", "Content-Type": void 0 } } }; pe.forEach(["delete", "get", "head", "post", "put", "patch"], l => { go.headers[l] = {} }); const Uw = pe.toObjectSet(["age", "authorization", "content-length", "content-type", "etag", "expires", "from", "host", "if-modified-since", "if-unmodified-since", "last-modified", "location", "max-forwards", "proxy-authorization", "referer", "retry-after", "user-agent"]), Vw = l => {
    const e = {}; let t, s, r; return l && l.split(`
`).forEach(function (u) { r = u.indexOf(":"), t = u.substring(0, r).trim().toLowerCase(), s = u.substring(r + 1).trim(), !(!t || e[t] && Uw[t]) && (t === "set-cookie" ? e[t] ? e[t].push(s) : e[t] = [s] : e[t] = e[t] ? e[t] + ", " + s : s) }), e
}, qx = Symbol("internals"); function Bl(l) { return l && String(l).trim().toLowerCase() } function Zc(l) { return l === !1 || l == null ? l : pe.isArray(l) ? l.map(Zc) : String(l) } function Ww(l) { const e = Object.create(null), t = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g; let s; for (; s = t.exec(l);)e[s[1]] = s[2]; return e } const Gw = l => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(l.trim()); function df(l, e, t, s, r) { if (pe.isFunction(s)) return s.call(this, e, t); if (r && (e = t), !!pe.isString(e)) { if (pe.isString(s)) return e.indexOf(s) !== -1; if (pe.isRegExp(s)) return s.test(e) } } function $w(l) { return l.trim().toLowerCase().replace(/([a-z\d])(\w*)/g, (e, t, s) => t.toUpperCase() + s) } function Kw(l, e) { const t = pe.toCamelCase(" " + e);["get", "set", "has"].forEach(s => { Object.defineProperty(l, s + t, { value: function (r, o, u) { return this[s].call(this, e, r, o, u) }, configurable: !0 }) }) } let Mi = class {
    constructor(e) { e && this.set(e) } set(e, t, s) { const r = this; function o(d, f, m) { const p = Bl(f); if (!p) throw new Error("header name must be a non-empty string"); const g = pe.findKey(r, p); (!g || r[g] === void 0 || m === !0 || m === void 0 && r[g] !== !1) && (r[g || f] = Zc(d)) } const u = (d, f) => pe.forEach(d, (m, p) => o(m, p, f)); if (pe.isPlainObject(e) || e instanceof this.constructor) u(e, t); else if (pe.isString(e) && (e = e.trim()) && !Gw(e)) u(Vw(e), t); else if (pe.isObject(e) && pe.isIterable(e)) { let d = {}, f, m; for (const p of e) { if (!pe.isArray(p)) throw TypeError("Object iterator must return a key-value pair"); d[m = p[0]] = (f = d[m]) ? pe.isArray(f) ? [...f, p[1]] : [f, p[1]] : p[1] } u(d, t) } else e != null && o(t, e, s); return this } get(e, t) { if (e = Bl(e), e) { const s = pe.findKey(this, e); if (s) { const r = this[s]; if (!t) return r; if (t === !0) return Ww(r); if (pe.isFunction(t)) return t.call(this, r, s); if (pe.isRegExp(t)) return t.exec(r); throw new TypeError("parser must be boolean|regexp|function") } } } has(e, t) { if (e = Bl(e), e) { const s = pe.findKey(this, e); return !!(s && this[s] !== void 0 && (!t || df(this, this[s], s, t))) } return !1 } delete(e, t) { const s = this; let r = !1; function o(u) { if (u = Bl(u), u) { const d = pe.findKey(s, u); d && (!t || df(s, s[d], d, t)) && (delete s[d], r = !0) } } return pe.isArray(e) ? e.forEach(o) : o(e), r } clear(e) { const t = Object.keys(this); let s = t.length, r = !1; for (; s--;) { const o = t[s]; (!e || df(this, this[o], o, e, !0)) && (delete this[o], r = !0) } return r } normalize(e) { const t = this, s = {}; return pe.forEach(this, (r, o) => { const u = pe.findKey(s, o); if (u) { t[u] = Zc(r), delete t[o]; return } const d = e ? $w(o) : String(o).trim(); d !== o && delete t[o], t[d] = Zc(r), s[d] = !0 }), this } concat(...e) { return this.constructor.concat(this, ...e) } toJSON(e) { const t = Object.create(null); return pe.forEach(this, (s, r) => { s != null && s !== !1 && (t[r] = e && pe.isArray(s) ? s.join(", ") : s) }), t } [Symbol.iterator]() { return Object.entries(this.toJSON())[Symbol.iterator]() } toString() {
        return Object.entries(this.toJSON()).map(([e, t]) => e + ": " + t).join(`
`)
    } getSetCookie() { return this.get("set-cookie") || [] } get [Symbol.toStringTag]() { return "AxiosHeaders" } static from(e) { return e instanceof this ? e : new this(e) } static concat(e, ...t) { const s = new this(e); return t.forEach(r => s.set(r)), s } static accessor(e) { const s = (this[qx] = this[qx] = { accessors: {} }).accessors, r = this.prototype; function o(u) { const d = Bl(u); s[d] || (Kw(r, u), s[d] = !0) } return pe.isArray(e) ? e.forEach(o) : o(e), this }
}; Mi.accessor(["Content-Type", "Content-Length", "Accept", "Accept-Encoding", "User-Agent", "Authorization"]); pe.reduceDescriptors(Mi.prototype, ({ value: l }, e) => { let t = e[0].toUpperCase() + e.slice(1); return { get: () => l, set(s) { this[t] = s } } }); pe.freezeMethods(Mi); function hf(l, e) { const t = this || go, s = e || t, r = Mi.from(s.headers); let o = s.data; return pe.forEach(l, function (d) { o = d.call(t, o, r.normalize(), e ? e.status : void 0) }), r.normalize(), o } function zv(l) { return !!(l && l.__CANCEL__) } let bo = class extends He { constructor(e, t, s) { super(e ?? "canceled", He.ERR_CANCELED, t, s), this.name = "CanceledError", this.__CANCEL__ = !0 } }; function Fv(l, e, t) { const s = t.config.validateStatus; !t.status || !s || s(t.status) ? l(t) : e(new He("Request failed with status code " + t.status, [He.ERR_BAD_REQUEST, He.ERR_BAD_RESPONSE][Math.floor(t.status / 100) - 4], t.config, t.request, t)) } function Zw(l) { const e = /^([-+\w]{1,25})(:?\/\/|:)/.exec(l); return e && e[1] || "" } function Qw(l, e) { l = l || 10; const t = new Array(l), s = new Array(l); let r = 0, o = 0, u; return e = e !== void 0 ? e : 1e3, function (f) { const m = Date.now(), p = s[o]; u || (u = m), t[r] = f, s[r] = m; let g = o, y = 0; for (; g !== r;)y += t[g++], g = g % l; if (r = (r + 1) % l, r === o && (o = (o + 1) % l), m - u < e) return; const b = p && m - p; return b ? Math.round(y * 1e3 / b) : void 0 } } function Jw(l, e) { let t = 0, s = 1e3 / e, r, o; const u = (m, p = Date.now()) => { t = p, r = null, o && (clearTimeout(o), o = null), l(...m) }; return [(...m) => { const p = Date.now(), g = p - t; g >= s ? u(m, p) : (r = m, o || (o = setTimeout(() => { o = null, u(r) }, s - g))) }, () => r && u(r)] } const au = (l, e, t = 3) => { let s = 0; const r = Qw(50, 250); return Jw(o => { const u = o.loaded, d = o.lengthComputable ? o.total : void 0, f = u - s, m = r(f), p = u <= d; s = u; const g = { loaded: u, total: d, progress: d ? u / d : void 0, bytes: f, rate: m || void 0, estimated: m && d && p ? (d - u) / m : void 0, event: o, lengthComputable: d != null, [e ? "download" : "upload"]: !0 }; l(g) }, t) }, Yx = (l, e) => { const t = l != null; return [s => e[0]({ lengthComputable: t, total: l, loaded: s }), e[1]] }, Xx = l => (...e) => pe.asap(() => l(...e)), ek = mi.hasStandardBrowserEnv ? ((l, e) => t => (t = new URL(t, mi.origin), l.protocol === t.protocol && l.host === t.host && (e || l.port === t.port)))(new URL(mi.origin), mi.navigator && /(msie|trident)/i.test(mi.navigator.userAgent)) : () => !0, tk = mi.hasStandardBrowserEnv ? { write(l, e, t, s, r, o, u) { if (typeof document > "u") return; const d = [`${l}=${encodeURIComponent(e)}`]; pe.isNumber(t) && d.push(`expires=${new Date(t).toUTCString()}`), pe.isString(s) && d.push(`path=${s}`), pe.isString(r) && d.push(`domain=${r}`), o === !0 && d.push("secure"), pe.isString(u) && d.push(`SameSite=${u}`), document.cookie = d.join("; ") }, read(l) { if (typeof document > "u") return null; const e = document.cookie.match(new RegExp("(?:^|; )" + l + "=([^;]*)")); return e ? decodeURIComponent(e[1]) : null }, remove(l) { this.write(l, "", Date.now() - 864e5, "/") } } : { write() { }, read() { return null }, remove() { } }; function ik(l) { return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(l) } function sk(l, e) { return e ? l.replace(/\/?\/$/, "") + "/" + e.replace(/^\/+/, "") : l } function Hv(l, e, t) { let s = !ik(e); return l && (s || t == !1) ? sk(l, e) : e } const Ux = l => l instanceof Mi ? { ...l } : l; function bn(l, e) { e = e || {}; const t = {}; function s(m, p, g, y) { return pe.isPlainObject(m) && pe.isPlainObject(p) ? pe.merge.call({ caseless: y }, m, p) : pe.isPlainObject(p) ? pe.merge({}, p) : pe.isArray(p) ? p.slice() : p } function r(m, p, g, y) { if (pe.isUndefined(p)) { if (!pe.isUndefined(m)) return s(void 0, m, g, y) } else return s(m, p, g, y) } function o(m, p) { if (!pe.isUndefined(p)) return s(void 0, p) } function u(m, p) { if (pe.isUndefined(p)) { if (!pe.isUndefined(m)) return s(void 0, m) } else return s(void 0, p) } function d(m, p, g) { if (g in e) return s(m, p); if (g in l) return s(void 0, m) } const f = { url: o, method: o, data: o, baseURL: u, transformRequest: u, transformResponse: u, paramsSerializer: u, timeout: u, timeoutMessage: u, withCredentials: u, withXSRFToken: u, adapter: u, responseType: u, xsrfCookieName: u, xsrfHeaderName: u, onUploadProgress: u, onDownloadProgress: u, decompress: u, maxContentLength: u, maxBodyLength: u, beforeRedirect: u, transport: u, httpAgent: u, httpsAgent: u, cancelToken: u, socketPath: u, responseEncoding: u, validateStatus: d, headers: (m, p, g) => r(Ux(m), Ux(p), g, !0) }; return pe.forEach(Object.keys({ ...l, ...e }), function (p) { const g = f[p] || r, y = g(l[p], e[p], p); pe.isUndefined(y) && g !== d || (t[p] = y) }), t } const Iv = l => { const e = bn({}, l); let { data: t, withXSRFToken: s, xsrfHeaderName: r, xsrfCookieName: o, headers: u, auth: d } = e; if (e.headers = u = Mi.from(u), e.url = Bv(Hv(e.baseURL, e.url, e.allowAbsoluteUrls), l.params, l.paramsSerializer), d && u.set("Authorization", "Basic " + btoa((d.username || "") + ":" + (d.password ? unescape(encodeURIComponent(d.password)) : ""))), pe.isFormData(t)) { if (mi.hasStandardBrowserEnv || mi.hasStandardBrowserWebWorkerEnv) u.setContentType(void 0); else if (pe.isFunction(t.getHeaders)) { const f = t.getHeaders(), m = ["content-type", "content-length"]; Object.entries(f).forEach(([p, g]) => { m.includes(p.toLowerCase()) && u.set(p, g) }) } } if (mi.hasStandardBrowserEnv && (s && pe.isFunction(s) && (s = s(e)), s || s !== !1 && ek(e.url))) { const f = r && o && tk.read(o); f && u.set(r, f) } return e }, ak = typeof XMLHttpRequest < "u", nk = ak && function (l) { return new Promise(function (t, s) { const r = Iv(l); let o = r.data; const u = Mi.from(r.headers).normalize(); let { responseType: d, onUploadProgress: f, onDownloadProgress: m } = r, p, g, y, b, v; function k() { b && b(), v && v(), r.cancelToken && r.cancelToken.unsubscribe(p), r.signal && r.signal.removeEventListener("abort", p) } let j = new XMLHttpRequest; j.open(r.method.toUpperCase(), r.url, !0), j.timeout = r.timeout; function S() { if (!j) return; const N = Mi.from("getAllResponseHeaders" in j && j.getAllResponseHeaders()), R = { data: !d || d === "text" || d === "json" ? j.responseText : j.response, status: j.status, statusText: j.statusText, headers: N, config: l, request: j }; Fv(function (O) { t(O), k() }, function (O) { s(O), k() }, R), j = null } "onloadend" in j ? j.onloadend = S : j.onreadystatechange = function () { !j || j.readyState !== 4 || j.status === 0 && !(j.responseURL && j.responseURL.indexOf("file:") === 0) || setTimeout(S) }, j.onabort = function () { j && (s(new He("Request aborted", He.ECONNABORTED, l, j)), j = null) }, j.onerror = function (T) { const R = T && T.message ? T.message : "Network Error", P = new He(R, He.ERR_NETWORK, l, j); P.event = T || null, s(P), j = null }, j.ontimeout = function () { let T = r.timeout ? "timeout of " + r.timeout + "ms exceeded" : "timeout exceeded"; const R = r.transitional || Rv; r.timeoutErrorMessage && (T = r.timeoutErrorMessage), s(new He(T, R.clarifyTimeoutError ? He.ETIMEDOUT : He.ECONNABORTED, l, j)), j = null }, o === void 0 && u.setContentType(null), "setRequestHeader" in j && pe.forEach(u.toJSON(), function (T, R) { j.setRequestHeader(R, T) }), pe.isUndefined(r.withCredentials) || (j.withCredentials = !!r.withCredentials), d && d !== "json" && (j.responseType = r.responseType), m && ([y, v] = au(m, !0), j.addEventListener("progress", y)), f && j.upload && ([g, b] = au(f), j.upload.addEventListener("progress", g), j.upload.addEventListener("loadend", b)), (r.cancelToken || r.signal) && (p = N => { j && (s(!N || N.type ? new bo(null, l, j) : N), j.abort(), j = null) }, r.cancelToken && r.cancelToken.subscribe(p), r.signal && (r.signal.aborted ? p() : r.signal.addEventListener("abort", p))); const w = Zw(r.url); if (w && mi.protocols.indexOf(w) === -1) { s(new He("Unsupported protocol " + w + ":", He.ERR_BAD_REQUEST, l)); return } j.send(o || null) }) }, rk = (l, e) => { const { length: t } = l = l ? l.filter(Boolean) : []; if (e || t) { let s = new AbortController, r; const o = function (m) { if (!r) { r = !0, d(); const p = m instanceof Error ? m : this.reason; s.abort(p instanceof He ? p : new bo(p instanceof Error ? p.message : p)) } }; let u = e && setTimeout(() => { u = null, o(new He(`timeout of ${e}ms exceeded`, He.ETIMEDOUT)) }, e); const d = () => { l && (u && clearTimeout(u), u = null, l.forEach(m => { m.unsubscribe ? m.unsubscribe(o) : m.removeEventListener("abort", o) }), l = null) }; l.forEach(m => m.addEventListener("abort", o)); const { signal: f } = s; return f.unsubscribe = () => pe.asap(d), f } }, lk = function* (l, e) { let t = l.byteLength; if (t < e) { yield l; return } let s = 0, r; for (; s < t;)r = s + e, yield l.slice(s, r), s = r }, ok = async function* (l, e) { for await (const t of ck(l)) yield* lk(t, e) }, ck = async function* (l) { if (l[Symbol.asyncIterator]) { yield* l; return } const e = l.getReader(); try { for (; ;) { const { done: t, value: s } = await e.read(); if (t) break; yield s } } finally { await e.cancel() } }, Vx = (l, e, t, s) => { const r = ok(l, e); let o = 0, u, d = f => { u || (u = !0, s && s(f)) }; return new ReadableStream({ async pull(f) { try { const { done: m, value: p } = await r.next(); if (m) { d(), f.close(); return } let g = p.byteLength; if (t) { let y = o += g; t(y) } f.enqueue(new Uint8Array(p)) } catch (m) { throw d(m), m } }, cancel(f) { return d(f), r.return() } }, { highWaterMark: 2 }) }, Wx = 64 * 1024, { isFunction: Rc } = pe, uk = (({ Request: l, Response: e }) => ({ Request: l, Response: e }))(pe.global), { ReadableStream: Gx, TextEncoder: $x } = pe.global, Kx = (l, ...e) => { try { return !!l(...e) } catch { return !1 } }, dk = l => { l = pe.merge.call({ skipUndefined: !0 }, uk, l); const { fetch: e, Request: t, Response: s } = l, r = e ? Rc(e) : typeof fetch == "function", o = Rc(t), u = Rc(s); if (!r) return !1; const d = r && Rc(Gx), f = r && (typeof $x == "function" ? (v => k => v.encode(k))(new $x) : async v => new Uint8Array(await new t(v).arrayBuffer())), m = o && d && Kx(() => { let v = !1; const k = new t(mi.origin, { body: new Gx, method: "POST", get duplex() { return v = !0, "half" } }).headers.has("Content-Type"); return v && !k }), p = u && d && Kx(() => pe.isReadableStream(new s("").body)), g = { stream: p && (v => v.body) }; r && ["text", "arrayBuffer", "blob", "formData", "stream"].forEach(v => { !g[v] && (g[v] = (k, j) => { let S = k && k[v]; if (S) return S.call(k); throw new He(`Response type '${v}' is not supported`, He.ERR_NOT_SUPPORT, j) }) }); const y = async v => { if (v == null) return 0; if (pe.isBlob(v)) return v.size; if (pe.isSpecCompliantForm(v)) return (await new t(mi.origin, { method: "POST", body: v }).arrayBuffer()).byteLength; if (pe.isArrayBufferView(v) || pe.isArrayBuffer(v)) return v.byteLength; if (pe.isURLSearchParams(v) && (v = v + ""), pe.isString(v)) return (await f(v)).byteLength }, b = async (v, k) => { const j = pe.toFiniteNumber(v.getContentLength()); return j ?? y(k) }; return async v => { let { url: k, method: j, data: S, signal: w, cancelToken: N, timeout: T, onDownloadProgress: R, onUploadProgress: P, responseType: O, headers: z, withCredentials: F = "same-origin", fetchOptions: B } = Iv(v), A = e || fetch; O = O ? (O + "").toLowerCase() : "text"; let L = rk([w, N && N.toAbortSignal()], T), M = null; const X = L && L.unsubscribe && (() => { L.unsubscribe() }); let U; try { if (P && m && j !== "get" && j !== "head" && (U = await b(z, S)) !== 0) { let q = new t(k, { method: "POST", body: S, duplex: "half" }), Q; if (pe.isFormData(S) && (Q = q.headers.get("content-type")) && z.setContentType(Q), q.body) { const [ce, W] = Yx(U, au(Xx(P))); S = Vx(q.body, Wx, ce, W) } } pe.isString(F) || (F = F ? "include" : "omit"); const I = o && "credentials" in t.prototype, H = { ...B, signal: L, method: j.toUpperCase(), headers: z.normalize().toJSON(), body: S, duplex: "half", credentials: I ? F : void 0 }; M = o && new t(k, H); let Y = await (o ? A(M, B) : A(k, H)); const ee = p && (O === "stream" || O === "response"); if (p && (R || ee && X)) { const q = {};["status", "statusText", "headers"].forEach(ae => { q[ae] = Y[ae] }); const Q = pe.toFiniteNumber(Y.headers.get("content-length")), [ce, W] = R && Yx(Q, au(Xx(R), !0)) || []; Y = new s(Vx(Y.body, Wx, ce, () => { W && W(), X && X() }), q) } O = O || "text"; let fe = await g[pe.findKey(g, O) || "text"](Y, v); return !ee && X && X(), await new Promise((q, Q) => { Fv(q, Q, { data: fe, headers: Mi.from(Y.headers), status: Y.status, statusText: Y.statusText, config: v, request: M }) }) } catch (I) { throw X && X(), I && I.name === "TypeError" && /Load failed|fetch/i.test(I.message) ? Object.assign(new He("Network Error", He.ERR_NETWORK, v, M), { cause: I.cause || I }) : He.from(I, I && I.code, v, M) } } }, hk = new Map, qv = l => { let e = l && l.env || {}; const { fetch: t, Request: s, Response: r } = e, o = [s, r, t]; let u = o.length, d = u, f, m, p = hk; for (; d--;)f = o[d], m = p.get(f), m === void 0 && p.set(f, m = d ? new Map : dk(e)), p = m; return m }; qv(); const pm = { http: Dw, xhr: nk, fetch: { get: qv } }; pe.forEach(pm, (l, e) => { if (l) { try { Object.defineProperty(l, "name", { value: e }) } catch { } Object.defineProperty(l, "adapterName", { value: e }) } }); const Zx = l => `- ${l}`, fk = l => pe.isFunction(l) || l === null || l === !1; function mk(l, e) {
    l = pe.isArray(l) ? l : [l]; const { length: t } = l; let s, r; const o = {}; for (let u = 0; u < t; u++) { s = l[u]; let d; if (r = s, !fk(s) && (r = pm[(d = String(s)).toLowerCase()], r === void 0)) throw new He(`Unknown adapter '${d}'`); if (r && (pe.isFunction(r) || (r = r.get(e)))) break; o[d || "#" + u] = r } if (!r) {
        const u = Object.entries(o).map(([f, m]) => `adapter ${f} ` + (m === !1 ? "is not supported by the environment" : "is not available in the build")); let d = t ? u.length > 1 ? `since :
`+ u.map(Zx).join(`
`) : " " + Zx(u[0]) : "as no adapter specified"; throw new He("There is no suitable adapter to dispatch the request " + d, "ERR_NOT_SUPPORT")
    } return r
} const Yv = { getAdapter: mk, adapters: pm }; function ff(l) { if (l.cancelToken && l.cancelToken.throwIfRequested(), l.signal && l.signal.aborted) throw new bo(null, l) } function Qx(l) { return ff(l), l.headers = Mi.from(l.headers), l.data = hf.call(l, l.transformRequest), ["post", "put", "patch"].indexOf(l.method) !== -1 && l.headers.setContentType("application/x-www-form-urlencoded", !1), Yv.getAdapter(l.adapter || go.adapter, l)(l).then(function (s) { return ff(l), s.data = hf.call(l, l.transformResponse, s), s.headers = Mi.from(s.headers), s }, function (s) { return zv(s) || (ff(l), s && s.response && (s.response.data = hf.call(l, l.transformResponse, s.response), s.response.headers = Mi.from(s.response.headers))), Promise.reject(s) }) } const Xv = "1.13.4", Tu = {};["object", "boolean", "number", "function", "string", "symbol"].forEach((l, e) => { Tu[l] = function (s) { return typeof s === l || "a" + (e < 1 ? "n " : " ") + l } }); const Jx = {}; Tu.transitional = function (e, t, s) { function r(o, u) { return "[Axios v" + Xv + "] Transitional option '" + o + "'" + u + (s ? ". " + s : "") } return (o, u, d) => { if (e === !1) throw new He(r(u, " has been removed" + (t ? " in " + t : "")), He.ERR_DEPRECATED); return t && !Jx[u] && (Jx[u] = !0, console.warn(r(u, " has been deprecated since v" + t + " and will be removed in the near future"))), e ? e(o, u, d) : !0 } }; Tu.spelling = function (e) { return (t, s) => (console.warn(`${s} is likely a misspelling of ${e}`), !0) }; function pk(l, e, t) { if (typeof l != "object") throw new He("options must be an object", He.ERR_BAD_OPTION_VALUE); const s = Object.keys(l); let r = s.length; for (; r-- > 0;) { const o = s[r], u = e[o]; if (u) { const d = l[o], f = d === void 0 || u(d, o, l); if (f !== !0) throw new He("option " + o + " must be " + f, He.ERR_BAD_OPTION_VALUE); continue } if (t !== !0) throw new He("Unknown option " + o, He.ERR_BAD_OPTION) } } const Qc = { assertOptions: pk, validators: Tu }, Ts = Qc.validators; let mn = class {
    constructor(e) { this.defaults = e || {}, this.interceptors = { request: new Ix, response: new Ix } } async request(e, t) {
        try { return await this._request(e, t) } catch (s) {
            if (s instanceof Error) {
                let r = {}; Error.captureStackTrace ? Error.captureStackTrace(r) : r = new Error; const o = r.stack ? r.stack.replace(/^.+\n/, "") : ""; try {
                    s.stack ? o && !String(s.stack).endsWith(o.replace(/^.+\n.+\n/, "")) && (s.stack += `
`+ o) : s.stack = o
                } catch { }
            } throw s
        }
    } _request(e, t) { typeof e == "string" ? (t = t || {}, t.url = e) : t = e || {}, t = bn(this.defaults, t); const { transitional: s, paramsSerializer: r, headers: o } = t; s !== void 0 && Qc.assertOptions(s, { silentJSONParsing: Ts.transitional(Ts.boolean), forcedJSONParsing: Ts.transitional(Ts.boolean), clarifyTimeoutError: Ts.transitional(Ts.boolean) }, !1), r != null && (pe.isFunction(r) ? t.paramsSerializer = { serialize: r } : Qc.assertOptions(r, { encode: Ts.function, serialize: Ts.function }, !0)), t.allowAbsoluteUrls !== void 0 || (this.defaults.allowAbsoluteUrls !== void 0 ? t.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls : t.allowAbsoluteUrls = !0), Qc.assertOptions(t, { baseUrl: Ts.spelling("baseURL"), withXsrfToken: Ts.spelling("withXSRFToken") }, !0), t.method = (t.method || this.defaults.method || "get").toLowerCase(); let u = o && pe.merge(o.common, o[t.method]); o && pe.forEach(["delete", "get", "head", "post", "put", "patch", "common"], v => { delete o[v] }), t.headers = Mi.concat(u, o); const d = []; let f = !0; this.interceptors.request.forEach(function (k) { typeof k.runWhen == "function" && k.runWhen(t) === !1 || (f = f && k.synchronous, d.unshift(k.fulfilled, k.rejected)) }); const m = []; this.interceptors.response.forEach(function (k) { m.push(k.fulfilled, k.rejected) }); let p, g = 0, y; if (!f) { const v = [Qx.bind(this), void 0]; for (v.unshift(...d), v.push(...m), y = v.length, p = Promise.resolve(t); g < y;)p = p.then(v[g++], v[g++]); return p } y = d.length; let b = t; for (; g < y;) { const v = d[g++], k = d[g++]; try { b = v(b) } catch (j) { k.call(this, j); break } } try { p = Qx.call(this, b) } catch (v) { return Promise.reject(v) } for (g = 0, y = m.length; g < y;)p = p.then(m[g++], m[g++]); return p } getUri(e) { e = bn(this.defaults, e); const t = Hv(e.baseURL, e.url, e.allowAbsoluteUrls); return Bv(t, e.params, e.paramsSerializer) }
}; pe.forEach(["delete", "get", "head", "options"], function (e) { mn.prototype[e] = function (t, s) { return this.request(bn(s || {}, { method: e, url: t, data: (s || {}).data })) } }); pe.forEach(["post", "put", "patch"], function (e) { function t(s) { return function (o, u, d) { return this.request(bn(d || {}, { method: e, headers: s ? { "Content-Type": "multipart/form-data" } : {}, url: o, data: u })) } } mn.prototype[e] = t(), mn.prototype[e + "Form"] = t(!0) }); let gk = class Uv { constructor(e) { if (typeof e != "function") throw new TypeError("executor must be a function."); let t; this.promise = new Promise(function (o) { t = o }); const s = this; this.promise.then(r => { if (!s._listeners) return; let o = s._listeners.length; for (; o-- > 0;)s._listeners[o](r); s._listeners = null }), this.promise.then = r => { let o; const u = new Promise(d => { s.subscribe(d), o = d }).then(r); return u.cancel = function () { s.unsubscribe(o) }, u }, e(function (o, u, d) { s.reason || (s.reason = new bo(o, u, d), t(s.reason)) }) } throwIfRequested() { if (this.reason) throw this.reason } subscribe(e) { if (this.reason) { e(this.reason); return } this._listeners ? this._listeners.push(e) : this._listeners = [e] } unsubscribe(e) { if (!this._listeners) return; const t = this._listeners.indexOf(e); t !== -1 && this._listeners.splice(t, 1) } toAbortSignal() { const e = new AbortController, t = s => { e.abort(s) }; return this.subscribe(t), e.signal.unsubscribe = () => this.unsubscribe(t), e.signal } static source() { let e; return { token: new Uv(function (r) { e = r }), cancel: e } } }; function bk(l) { return function (t) { return l.apply(null, t) } } function xk(l) { return pe.isObject(l) && l.isAxiosError === !0 } const Ef = { Continue: 100, SwitchingProtocols: 101, Processing: 102, EarlyHints: 103, Ok: 200, Created: 201, Accepted: 202, NonAuthoritativeInformation: 203, NoContent: 204, ResetContent: 205, PartialContent: 206, MultiStatus: 207, AlreadyReported: 208, ImUsed: 226, MultipleChoices: 300, MovedPermanently: 301, Found: 302, SeeOther: 303, NotModified: 304, UseProxy: 305, Unused: 306, TemporaryRedirect: 307, PermanentRedirect: 308, BadRequest: 400, Unauthorized: 401, PaymentRequired: 402, Forbidden: 403, NotFound: 404, MethodNotAllowed: 405, NotAcceptable: 406, ProxyAuthenticationRequired: 407, RequestTimeout: 408, Conflict: 409, Gone: 410, LengthRequired: 411, PreconditionFailed: 412, PayloadTooLarge: 413, UriTooLong: 414, UnsupportedMediaType: 415, RangeNotSatisfiable: 416, ExpectationFailed: 417, ImATeapot: 418, MisdirectedRequest: 421, UnprocessableEntity: 422, Locked: 423, FailedDependency: 424, TooEarly: 425, UpgradeRequired: 426, PreconditionRequired: 428, TooManyRequests: 429, RequestHeaderFieldsTooLarge: 431, UnavailableForLegalReasons: 451, InternalServerError: 500, NotImplemented: 501, BadGateway: 502, ServiceUnavailable: 503, GatewayTimeout: 504, HttpVersionNotSupported: 505, VariantAlsoNegotiates: 506, InsufficientStorage: 507, LoopDetected: 508, NotExtended: 510, NetworkAuthenticationRequired: 511, WebServerIsDown: 521, ConnectionTimedOut: 522, OriginIsUnreachable: 523, TimeoutOccurred: 524, SslHandshakeFailed: 525, InvalidSslCertificate: 526 }; Object.entries(Ef).forEach(([l, e]) => { Ef[e] = l }); function Vv(l) { const e = new mn(l), t = kv(mn.prototype.request, e); return pe.extend(t, mn.prototype, e, { allOwnKeys: !0 }), pe.extend(t, e, null, { allOwnKeys: !0 }), t.create = function (r) { return Vv(bn(l, r)) }, t } const Pt = Vv(go); Pt.Axios = mn; Pt.CanceledError = bo; Pt.CancelToken = gk; Pt.isCancel = zv; Pt.VERSION = Xv; Pt.toFormData = Cu; Pt.AxiosError = He; Pt.Cancel = Pt.CanceledError; Pt.all = function (e) { return Promise.all(e) }; Pt.spread = bk; Pt.isAxiosError = xk; Pt.mergeConfig = bn; Pt.AxiosHeaders = Mi; Pt.formToJSON = l => Lv(pe.isHTMLForm(l) ? new FormData(l) : l); Pt.getAdapter = Yv.getAdapter; Pt.HttpStatusCode = Ef; Pt.default = Pt; const { Axios: VA, AxiosError: WA, CanceledError: GA, isCancel: $A, CancelToken: KA, VERSION: ZA, all: QA, Cancel: JA, isAxiosError: eM, spread: tM, toFormData: iM, AxiosHeaders: sM, HttpStatusCode: aM, formToJSON: nM, getAdapter: rM, mergeConfig: lM } = Pt, Wv = "http://127.0.0.1:8000/api", we = Pt.create({ baseURL: Wv }); we.interceptors.request.use(l => { const e = localStorage.getItem("accessToken"); return e && (l.headers.Authorization = `Bearer ${e}`), l }, l => Promise.reject(l)); we.interceptors.response.use(l => l, async l => { const e = l.config; if (l.response?.status === 401 && !e._retry) { e._retry = !0; const t = localStorage.getItem("refreshToken"); if (t) try { const s = await Pt.post(`${Wv}/token/refresh/`, { refresh: t }); return localStorage.setItem("accessToken", s.data.access), e.headers.Authorization = `Bearer ${s.data.access}`, we(e) } catch { localStorage.removeItem("accessToken"), localStorage.removeItem("refreshToken"), localStorage.removeItem("user"), window.location.href = "/login" } } return Promise.reject(l) }); const Gv = C.createContext(), xo = () => { const l = C.useContext(Gv); if (!l) throw new Error("useAuth must be used within an AuthProvider"); return l }, yk = ({ children: l }) => { const [e, t] = C.useState(null), [s, r] = C.useState(!0), o = async () => { const m = localStorage.getItem("refreshToken"); if (!m) return !1; try { const p = await we.post("/token/refresh/", { refresh: m }); return localStorage.setItem("accessToken", p.data.access), !0 } catch { return !1 } }, u = () => { localStorage.removeItem("accessToken"), localStorage.removeItem("refreshToken"), localStorage.removeItem("user"), t(null) }, d = async () => { const m = localStorage.getItem("accessToken"), p = localStorage.getItem("user"); if (m && p) try { t(JSON.parse(p)); const g = await we.get("/user/"); t(g.data), localStorage.setItem("user", JSON.stringify(g.data)) } catch { await o() || u() } r(!1) }; C.useEffect(() => { d() }, []); const f = async (m, p) => { try { const g = await we.post("/token/", { username: m, password: p }), { access: y, refresh: b, user: v } = g.data; return localStorage.setItem("accessToken", y), localStorage.setItem("refreshToken", b), localStorage.setItem("user", JSON.stringify(v)), t(v), { success: !0 } } catch (g) { let y = "Tizimga kirishda xatolik yuz berdi"; return g.response?.status === 401 ? y = "Foydalanuvchi nomi yoki parol noto'g'ri" : g.response?.status === 400 ? y = g.response?.data?.detail || "Ma'lumotlar noto'g'ri kiritilgan" : g.response?.status === 500 ? y = "Server xatosi. Iltimos, keyinroq urinib ko'ring" : g.response ? g.response?.data?.detail && (y = g.response.data.detail) : y = "Tarmoq xatosi. Internet aloqasini tekshiring", { success: !1, error: y } } }; return i.jsx(Gv.Provider, { value: { user: e, loading: s, login: f, logout: u, refreshToken: o, refreshUser: d }, children: l }) }, $v = C.createContext(), Kv = () => { const l = C.useContext($v); if (!l) throw new Error("useSidebar must be used within a SidebarProvider"); return l }, vk = ({ children: l }) => { const [e, t] = C.useState(() => { if (typeof window < "u" && window.innerWidth < 1024) return !1; const d = localStorage.getItem("sidebarOpen"); return d !== null ? JSON.parse(d) : !0 }), [s, r] = C.useState(typeof window < "u" ? window.innerWidth < 1024 : !1); C.useEffect(() => { const d = () => { const f = window.innerWidth < 1024; r(f), f && t(!1) }; return window.addEventListener("resize", d), () => window.removeEventListener("resize", d) }, []), C.useEffect(() => { s || localStorage.setItem("sidebarOpen", JSON.stringify(e)) }, [e, s]); const o = () => t(d => !d), u = () => t(!1); return i.jsx($v.Provider, { value: { isOpen: e, isMobile: s, toggleSidebar: o, closeSidebar: u }, children: l }) }; var _k = l => { switch (l) { case "success": return kk; case "info": return Nk; case "warning": return Sk; case "error": return Ck; default: return null } }, jk = Array(12).fill(0), wk = ({ visible: l, className: e }) => Me.createElement("div", { className: ["sonner-loading-wrapper", e].filter(Boolean).join(" "), "data-visible": l }, Me.createElement("div", { className: "sonner-spinner" }, jk.map((t, s) => Me.createElement("div", { className: "sonner-loading-bar", key: `spinner-bar-${s}` })))), kk = Me.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 20 20", fill: "currentColor", height: "20", width: "20" }, Me.createElement("path", { fillRule: "evenodd", d: "M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z", clipRule: "evenodd" })), Sk = Me.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", fill: "currentColor", height: "20", width: "20" }, Me.createElement("path", { fillRule: "evenodd", d: "M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z", clipRule: "evenodd" })), Nk = Me.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 20 20", fill: "currentColor", height: "20", width: "20" }, Me.createElement("path", { fillRule: "evenodd", d: "M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z", clipRule: "evenodd" })), Ck = Me.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 20 20", fill: "currentColor", height: "20", width: "20" }, Me.createElement("path", { fillRule: "evenodd", d: "M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z", clipRule: "evenodd" })), Tk = Me.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "12", height: "12", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "1.5", strokeLinecap: "round", strokeLinejoin: "round" }, Me.createElement("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), Me.createElement("line", { x1: "6", y1: "6", x2: "18", y2: "18" })), Dk = () => { let [l, e] = Me.useState(document.hidden); return Me.useEffect(() => { let t = () => { e(document.hidden) }; return document.addEventListener("visibilitychange", t), () => window.removeEventListener("visibilitychange", t) }, []), l }, Bf = 1, Ak = class { constructor() { this.subscribe = l => (this.subscribers.push(l), () => { let e = this.subscribers.indexOf(l); this.subscribers.splice(e, 1) }), this.publish = l => { this.subscribers.forEach(e => e(l)) }, this.addToast = l => { this.publish(l), this.toasts = [...this.toasts, l] }, this.create = l => { var e; let { message: t, ...s } = l, r = typeof l?.id == "number" || ((e = l.id) == null ? void 0 : e.length) > 0 ? l.id : Bf++, o = this.toasts.find(d => d.id === r), u = l.dismissible === void 0 ? !0 : l.dismissible; return this.dismissedToasts.has(r) && this.dismissedToasts.delete(r), o ? this.toasts = this.toasts.map(d => d.id === r ? (this.publish({ ...d, ...l, id: r, title: t }), { ...d, ...l, id: r, dismissible: u, title: t }) : d) : this.addToast({ title: t, ...s, dismissible: u, id: r }), r }, this.dismiss = l => (this.dismissedToasts.add(l), l || this.toasts.forEach(e => { this.subscribers.forEach(t => t({ id: e.id, dismiss: !0 })) }), this.subscribers.forEach(e => e({ id: l, dismiss: !0 })), l), this.message = (l, e) => this.create({ ...e, message: l }), this.error = (l, e) => this.create({ ...e, message: l, type: "error" }), this.success = (l, e) => this.create({ ...e, type: "success", message: l }), this.info = (l, e) => this.create({ ...e, type: "info", message: l }), this.warning = (l, e) => this.create({ ...e, type: "warning", message: l }), this.loading = (l, e) => this.create({ ...e, type: "loading", message: l }), this.promise = (l, e) => { if (!e) return; let t; e.loading !== void 0 && (t = this.create({ ...e, promise: l, type: "loading", message: e.loading, description: typeof e.description != "function" ? e.description : void 0 })); let s = l instanceof Promise ? l : l(), r = t !== void 0, o, u = s.then(async f => { if (o = ["resolve", f], Me.isValidElement(f)) r = !1, this.create({ id: t, type: "default", message: f }); else if (Pk(f) && !f.ok) { r = !1; let m = typeof e.error == "function" ? await e.error(`HTTP error! status: ${f.status}`) : e.error, p = typeof e.description == "function" ? await e.description(`HTTP error! status: ${f.status}`) : e.description; this.create({ id: t, type: "error", message: m, description: p }) } else if (e.success !== void 0) { r = !1; let m = typeof e.success == "function" ? await e.success(f) : e.success, p = typeof e.description == "function" ? await e.description(f) : e.description; this.create({ id: t, type: "success", message: m, description: p }) } }).catch(async f => { if (o = ["reject", f], e.error !== void 0) { r = !1; let m = typeof e.error == "function" ? await e.error(f) : e.error, p = typeof e.description == "function" ? await e.description(f) : e.description; this.create({ id: t, type: "error", message: m, description: p }) } }).finally(() => { var f; r && (this.dismiss(t), t = void 0), (f = e.finally) == null || f.call(e) }), d = () => new Promise((f, m) => u.then(() => o[0] === "reject" ? m(o[1]) : f(o[1])).catch(m)); return typeof t != "string" && typeof t != "number" ? { unwrap: d } : Object.assign(t, { unwrap: d }) }, this.custom = (l, e) => { let t = e?.id || Bf++; return this.create({ jsx: l(t), id: t, ...e }), t }, this.getActiveToasts = () => this.toasts.filter(l => !this.dismissedToasts.has(l.id)), this.subscribers = [], this.toasts = [], this.dismissedToasts = new Set } }, Ti = new Ak, Mk = (l, e) => { let t = e?.id || Bf++; return Ti.addToast({ title: l, ...e, id: t }), t }, Pk = l => l && typeof l == "object" && "ok" in l && typeof l.ok == "boolean" && "status" in l && typeof l.status == "number", Ok = Mk, Ek = () => Ti.toasts, Bk = () => Ti.getActiveToasts(), $ = Object.assign(Ok, { success: Ti.success, info: Ti.info, warning: Ti.warning, error: Ti.error, custom: Ti.custom, message: Ti.message, promise: Ti.promise, dismiss: Ti.dismiss, loading: Ti.loading }, { getHistory: Ek, getToasts: Bk }); function Rk(l, { insertAt: e } = {}) { if (typeof document > "u") return; let t = document.head || document.getElementsByTagName("head")[0], s = document.createElement("style"); s.type = "text/css", e === "top" && t.firstChild ? t.insertBefore(s, t.firstChild) : t.appendChild(s), s.styleSheet ? s.styleSheet.cssText = l : s.appendChild(document.createTextNode(l)) } Rk(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`); function Lc(l) { return l.label !== void 0 } var Lk = 3, zk = "32px", Fk = "16px", ey = 4e3, Hk = 356, Ik = 14, qk = 20, Yk = 200; function gs(...l) { return l.filter(Boolean).join(" ") } function Xk(l) { let [e, t] = l.split("-"), s = []; return e && s.push(e), t && s.push(t), s } var Uk = l => { var e, t, s, r, o, u, d, f, m, p, g; let { invert: y, toast: b, unstyled: v, interacting: k, setHeights: j, visibleToasts: S, heights: w, index: N, toasts: T, expanded: R, removeToast: P, defaultRichColors: O, closeButton: z, style: F, cancelButtonStyle: B, actionButtonStyle: A, className: L = "", descriptionClassName: M = "", duration: X, position: U, gap: I, loadingIcon: H, expandByDefault: Y, classNames: ee, icons: fe, closeButtonAriaLabel: q = "Close toast", pauseWhenPageIsHidden: Q } = l, [ce, W] = Me.useState(null), [ae, J] = Me.useState(null), [G, ge] = Me.useState(!1), [de, Se] = Me.useState(!1), [Ee, be] = Me.useState(!1), [se, Ne] = Me.useState(!1), [xe, K] = Me.useState(!1), [ve, Ae] = Me.useState(0), [ne, re] = Me.useState(0), Ce = Me.useRef(b.duration || X || ey), Ue = Me.useRef(null), wt = Me.useRef(null), kt = N === 0, Ki = N + 1 <= S, ti = b.type, Bi = b.dismissible !== !1, yt = b.className || "", xi = b.descriptionClassName || "", us = Me.useMemo(() => w.findIndex(Fe => Fe.toastId === b.id) || 0, [w, b.id]), qr = Me.useMemo(() => { var Fe; return (Fe = b.closeButton) != null ? Fe : z }, [b.closeButton, z]), Pn = Me.useMemo(() => b.duration || X || ey, [b.duration, X]), ds = Me.useRef(0), St = Me.useRef(0), Kt = Me.useRef(0), Nt = Me.useRef(null), [qu, Yu] = U.split("-"), jo = Me.useMemo(() => w.reduce((Fe, nt, ht) => ht >= us ? Fe : Fe + nt.height, 0), [w, us]), qa = Dk(), On = b.invert || y, oa = ti === "loading"; St.current = Me.useMemo(() => us * I + jo, [us, jo]), Me.useEffect(() => { Ce.current = Pn }, [Pn]), Me.useEffect(() => { ge(!0) }, []), Me.useEffect(() => { let Fe = wt.current; if (Fe) { let nt = Fe.getBoundingClientRect().height; return re(nt), j(ht => [{ toastId: b.id, height: nt, position: b.position }, ...ht]), () => j(ht => ht.filter(pi => pi.toastId !== b.id)) } }, [j, b.id]), Me.useLayoutEffect(() => { if (!G) return; let Fe = wt.current, nt = Fe.style.height; Fe.style.height = "auto"; let ht = Fe.getBoundingClientRect().height; Fe.style.height = nt, re(ht), j(pi => pi.find(ii => ii.toastId === b.id) ? pi.map(ii => ii.toastId === b.id ? { ...ii, height: ht } : ii) : [{ toastId: b.id, height: ht, position: b.position }, ...pi]) }, [G, b.title, b.description, j, b.id]); let ui = Me.useCallback(() => { Se(!0), Ae(St.current), j(Fe => Fe.filter(nt => nt.toastId !== b.id)), setTimeout(() => { P(b) }, Yk) }, [b, P, j, St]); Me.useEffect(() => { if (b.promise && ti === "loading" || b.duration === 1 / 0 || b.type === "loading") return; let Fe; return R || k || Q && qa ? (() => { if (Kt.current < ds.current) { let nt = new Date().getTime() - ds.current; Ce.current = Ce.current - nt } Kt.current = new Date().getTime() })() : Ce.current !== 1 / 0 && (ds.current = new Date().getTime(), Fe = setTimeout(() => { var nt; (nt = b.onAutoClose) == null || nt.call(b, b), ui() }, Ce.current)), () => clearTimeout(Fe) }, [R, k, b, ti, Q, qa, ui]), Me.useEffect(() => { b.delete && ui() }, [ui, b.delete]); function En() { var Fe, nt, ht; return fe != null && fe.loading ? Me.createElement("div", { className: gs(ee?.loader, (Fe = b?.classNames) == null ? void 0 : Fe.loader, "sonner-loader"), "data-visible": ti === "loading" }, fe.loading) : H ? Me.createElement("div", { className: gs(ee?.loader, (nt = b?.classNames) == null ? void 0 : nt.loader, "sonner-loader"), "data-visible": ti === "loading" }, H) : Me.createElement(wk, { className: gs(ee?.loader, (ht = b?.classNames) == null ? void 0 : ht.loader), visible: ti === "loading" }) } return Me.createElement("li", { tabIndex: 0, ref: wt, className: gs(L, yt, ee?.toast, (e = b?.classNames) == null ? void 0 : e.toast, ee?.default, ee?.[ti], (t = b?.classNames) == null ? void 0 : t[ti]), "data-sonner-toast": "", "data-rich-colors": (s = b.richColors) != null ? s : O, "data-styled": !(b.jsx || b.unstyled || v), "data-mounted": G, "data-promise": !!b.promise, "data-swiped": xe, "data-removed": de, "data-visible": Ki, "data-y-position": qu, "data-x-position": Yu, "data-index": N, "data-front": kt, "data-swiping": Ee, "data-dismissible": Bi, "data-type": ti, "data-invert": On, "data-swipe-out": se, "data-swipe-direction": ae, "data-expanded": !!(R || Y && G), style: { "--index": N, "--toasts-before": N, "--z-index": T.length - N, "--offset": `${de ? ve : St.current}px`, "--initial-height": Y ? "auto" : `${ne}px`, ...F, ...b.style }, onDragEnd: () => { be(!1), W(null), Nt.current = null }, onPointerDown: Fe => { oa || !Bi || (Ue.current = new Date, Ae(St.current), Fe.target.setPointerCapture(Fe.pointerId), Fe.target.tagName !== "BUTTON" && (be(!0), Nt.current = { x: Fe.clientX, y: Fe.clientY })) }, onPointerUp: () => { var Fe, nt, ht, pi; if (se || !Bi) return; Nt.current = null; let ii = Number(((Fe = wt.current) == null ? void 0 : Fe.style.getPropertyValue("--swipe-amount-x").replace("px", "")) || 0), js = Number(((nt = wt.current) == null ? void 0 : nt.style.getPropertyValue("--swipe-amount-y").replace("px", "")) || 0), ws = new Date().getTime() - ((ht = Ue.current) == null ? void 0 : ht.getTime()), yi = ce === "x" ? ii : js, hs = Math.abs(yi) / ws; if (Math.abs(yi) >= qk || hs > .11) { Ae(St.current), (pi = b.onDismiss) == null || pi.call(b, b), J(ce === "x" ? ii > 0 ? "right" : "left" : js > 0 ? "down" : "up"), ui(), Ne(!0), K(!1); return } be(!1), W(null) }, onPointerMove: Fe => { var nt, ht, pi, ii; if (!Nt.current || !Bi || ((nt = window.getSelection()) == null ? void 0 : nt.toString().length) > 0) return; let js = Fe.clientY - Nt.current.y, ws = Fe.clientX - Nt.current.x, yi = (ht = l.swipeDirections) != null ? ht : Xk(U); !ce && (Math.abs(ws) > 1 || Math.abs(js) > 1) && W(Math.abs(ws) > Math.abs(js) ? "x" : "y"); let hs = { x: 0, y: 0 }; ce === "y" ? (yi.includes("top") || yi.includes("bottom")) && (yi.includes("top") && js < 0 || yi.includes("bottom") && js > 0) && (hs.y = js) : ce === "x" && (yi.includes("left") || yi.includes("right")) && (yi.includes("left") && ws < 0 || yi.includes("right") && ws > 0) && (hs.x = ws), (Math.abs(hs.x) > 0 || Math.abs(hs.y) > 0) && K(!0), (pi = wt.current) == null || pi.style.setProperty("--swipe-amount-x", `${hs.x}px`), (ii = wt.current) == null || ii.style.setProperty("--swipe-amount-y", `${hs.y}px`) } }, qr && !b.jsx ? Me.createElement("button", { "aria-label": q, "data-disabled": oa, "data-close-button": !0, onClick: oa || !Bi ? () => { } : () => { var Fe; ui(), (Fe = b.onDismiss) == null || Fe.call(b, b) }, className: gs(ee?.closeButton, (r = b?.classNames) == null ? void 0 : r.closeButton) }, (o = fe?.close) != null ? o : Tk) : null, b.jsx || C.isValidElement(b.title) ? b.jsx ? b.jsx : typeof b.title == "function" ? b.title() : b.title : Me.createElement(Me.Fragment, null, ti || b.icon || b.promise ? Me.createElement("div", { "data-icon": "", className: gs(ee?.icon, (u = b?.classNames) == null ? void 0 : u.icon) }, b.promise || b.type === "loading" && !b.icon ? b.icon || En() : null, b.type !== "loading" ? b.icon || fe?.[ti] || _k(ti) : null) : null, Me.createElement("div", { "data-content": "", className: gs(ee?.content, (d = b?.classNames) == null ? void 0 : d.content) }, Me.createElement("div", { "data-title": "", className: gs(ee?.title, (f = b?.classNames) == null ? void 0 : f.title) }, typeof b.title == "function" ? b.title() : b.title), b.description ? Me.createElement("div", { "data-description": "", className: gs(M, xi, ee?.description, (m = b?.classNames) == null ? void 0 : m.description) }, typeof b.description == "function" ? b.description() : b.description) : null), C.isValidElement(b.cancel) ? b.cancel : b.cancel && Lc(b.cancel) ? Me.createElement("button", { "data-button": !0, "data-cancel": !0, style: b.cancelButtonStyle || B, onClick: Fe => { var nt, ht; Lc(b.cancel) && Bi && ((ht = (nt = b.cancel).onClick) == null || ht.call(nt, Fe), ui()) }, className: gs(ee?.cancelButton, (p = b?.classNames) == null ? void 0 : p.cancelButton) }, b.cancel.label) : null, C.isValidElement(b.action) ? b.action : b.action && Lc(b.action) ? Me.createElement("button", { "data-button": !0, "data-action": !0, style: b.actionButtonStyle || A, onClick: Fe => { var nt, ht; Lc(b.action) && ((ht = (nt = b.action).onClick) == null || ht.call(nt, Fe), !Fe.defaultPrevented && ui()) }, className: gs(ee?.actionButton, (g = b?.classNames) == null ? void 0 : g.actionButton) }, b.action.label) : null)) }; function ty() { if (typeof window > "u" || typeof document > "u") return "ltr"; let l = document.documentElement.getAttribute("dir"); return l === "auto" || !l ? window.getComputedStyle(document.documentElement).direction : l } function Vk(l, e) { let t = {}; return [l, e].forEach((s, r) => { let o = r === 1, u = o ? "--mobile-offset" : "--offset", d = o ? Fk : zk; function f(m) { ["top", "right", "bottom", "left"].forEach(p => { t[`${u}-${p}`] = typeof m == "number" ? `${m}px` : m }) } typeof s == "number" || typeof s == "string" ? f(s) : typeof s == "object" ? ["top", "right", "bottom", "left"].forEach(m => { s[m] === void 0 ? t[`${u}-${m}`] = d : t[`${u}-${m}`] = typeof s[m] == "number" ? `${s[m]}px` : s[m] }) : f(d) }), t } var Zv = C.forwardRef(function (l, e) { let { invert: t, position: s = "bottom-right", hotkey: r = ["altKey", "KeyT"], expand: o, closeButton: u, className: d, offset: f, mobileOffset: m, theme: p = "light", richColors: g, duration: y, style: b, visibleToasts: v = Lk, toastOptions: k, dir: j = ty(), gap: S = Ik, loadingIcon: w, icons: N, containerAriaLabel: T = "Notifications", pauseWhenPageIsHidden: R } = l, [P, O] = Me.useState([]), z = Me.useMemo(() => Array.from(new Set([s].concat(P.filter(Q => Q.position).map(Q => Q.position)))), [P, s]), [F, B] = Me.useState([]), [A, L] = Me.useState(!1), [M, X] = Me.useState(!1), [U, I] = Me.useState(p !== "system" ? p : typeof window < "u" && window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light"), H = Me.useRef(null), Y = r.join("+").replace(/Key/g, "").replace(/Digit/g, ""), ee = Me.useRef(null), fe = Me.useRef(!1), q = Me.useCallback(Q => { O(ce => { var W; return (W = ce.find(ae => ae.id === Q.id)) != null && W.delete || Ti.dismiss(Q.id), ce.filter(({ id: ae }) => ae !== Q.id) }) }, []); return Me.useEffect(() => Ti.subscribe(Q => { if (Q.dismiss) { O(ce => ce.map(W => W.id === Q.id ? { ...W, delete: !0 } : W)); return } setTimeout(() => { q2.flushSync(() => { O(ce => { let W = ce.findIndex(ae => ae.id === Q.id); return W !== -1 ? [...ce.slice(0, W), { ...ce[W], ...Q }, ...ce.slice(W + 1)] : [Q, ...ce] }) }) }) }), []), Me.useEffect(() => { if (p !== "system") { I(p); return } if (p === "system" && (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? I("dark") : I("light")), typeof window > "u") return; let Q = window.matchMedia("(prefers-color-scheme: dark)"); try { Q.addEventListener("change", ({ matches: ce }) => { I(ce ? "dark" : "light") }) } catch { Q.addListener(({ matches: W }) => { try { I(W ? "dark" : "light") } catch (ae) { console.error(ae) } }) } }, [p]), Me.useEffect(() => { P.length <= 1 && L(!1) }, [P]), Me.useEffect(() => { let Q = ce => { var W, ae; r.every(J => ce[J] || ce.code === J) && (L(!0), (W = H.current) == null || W.focus()), ce.code === "Escape" && (document.activeElement === H.current || (ae = H.current) != null && ae.contains(document.activeElement)) && L(!1) }; return document.addEventListener("keydown", Q), () => document.removeEventListener("keydown", Q) }, [r]), Me.useEffect(() => { if (H.current) return () => { ee.current && (ee.current.focus({ preventScroll: !0 }), ee.current = null, fe.current = !1) } }, [H.current]), Me.createElement("section", { ref: e, "aria-label": `${T} ${Y}`, tabIndex: -1, "aria-live": "polite", "aria-relevant": "additions text", "aria-atomic": "false", suppressHydrationWarning: !0 }, z.map((Q, ce) => { var W; let [ae, J] = Q.split("-"); return P.length ? Me.createElement("ol", { key: Q, dir: j === "auto" ? ty() : j, tabIndex: -1, ref: H, className: d, "data-sonner-toaster": !0, "data-theme": U, "data-y-position": ae, "data-lifted": A && P.length > 1 && !o, "data-x-position": J, style: { "--front-toast-height": `${((W = F[0]) == null ? void 0 : W.height) || 0}px`, "--width": `${Hk}px`, "--gap": `${S}px`, ...b, ...Vk(f, m) }, onBlur: G => { fe.current && !G.currentTarget.contains(G.relatedTarget) && (fe.current = !1, ee.current && (ee.current.focus({ preventScroll: !0 }), ee.current = null)) }, onFocus: G => { G.target instanceof HTMLElement && G.target.dataset.dismissible === "false" || fe.current || (fe.current = !0, ee.current = G.relatedTarget) }, onMouseEnter: () => L(!0), onMouseMove: () => L(!0), onMouseLeave: () => { M || L(!1) }, onDragEnd: () => L(!1), onPointerDown: G => { G.target instanceof HTMLElement && G.target.dataset.dismissible === "false" || X(!0) }, onPointerUp: () => X(!1) }, P.filter(G => !G.position && ce === 0 || G.position === Q).map((G, ge) => { var de, Se; return Me.createElement(Uk, { key: G.id, icons: N, index: ge, toast: G, defaultRichColors: g, duration: (de = k?.duration) != null ? de : y, className: k?.className, descriptionClassName: k?.descriptionClassName, invert: t, visibleToasts: v, closeButton: (Se = k?.closeButton) != null ? Se : u, interacting: M, position: Q, style: k?.style, unstyled: k?.unstyled, classNames: k?.classNames, cancelButtonStyle: k?.cancelButtonStyle, actionButtonStyle: k?.actionButtonStyle, removeToast: q, toasts: P.filter(Ee => Ee.position == G.position), heights: F.filter(Ee => Ee.position == G.position), setHeights: B, expandByDefault: o, gap: S, loadingIcon: w, expanded: A, pauseWhenPageIsHidden: R, swipeDirections: l.swipeDirections }) })) : null })) }); const Mn = l => { C.useEffect(() => { const e = document.title; return document.title = l ? `${l} | Bino CRM` : "Bino CRM", () => { document.title = e } }, [l]) }, Wk = () => { const l = Oi(); return C.useEffect(() => { const e = { "/": "Asosiy", "/login": "Kirish", "/cities": "Shaharlar", "/buildings": "Binolar", "/homes": "Uylar", "/clients": "Mijozlar", "/contracts": "Shartnomalar", "/leads": "Leadlar" }; let t = "Bino CRM"; for (const [s, r] of Object.entries(e)) if (l.pathname === s || l.pathname.startsWith(s + "/")) { t = `${r} | Bino CRM`; break } document.title = t }, [l.pathname]), null }, Gk = ({ children: l, requiredPermission: e }) => { const { user: t, loading: s } = xo(), r = Oi(); return s ? i.jsxs("div", { className: "loading-container", children: [i.jsx("div", { className: "loading-spinner" }), i.jsx("p", { children: "Yuklanmoqda..." })] }) : t ? e && !t.is_superuser && !t.permissions?.[e] ? i.jsx(su, { to: "/", replace: !0 }) : l : i.jsx(su, { to: "/login", state: { from: r }, replace: !0 }) }, $k = () => { const { user: l, logout: e } = xo(), { theme: t, toggleTheme: s } = wv(), { isOpen: r, isMobile: o, toggleSidebar: u, closeSidebar: d } = Kv(), f = bi(), m = Oi(), [p, g] = C.useState(() => { const N = m.pathname; return N.startsWith("/buildings") ? ["buildings"] : N.startsWith("/homes") ? ["homes"] : N.startsWith("/clients") ? ["clients"] : N.startsWith("/contracts") ? ["contracts"] : N.startsWith("/leads") ? ["leads"] : N.startsWith("/expenses") || N.startsWith("/expense-categories") ? ["chiqimlar"] : [] }), y = () => { e(), f("/login") }, b = () => { o && d() }, v = N => { g(T => T.includes(N) ? T.filter(R => R !== N) : [...T, N]) }, k = N => p.includes(N), j = N => m.pathname.startsWith(N), w = [{ type: "link", path: "/", icon: i.jsx(tS, {}), label: "Asosiy", permission: null }, { type: "link", path: "/cities", icon: i.jsx(iS, {}), label: "Shaharlar", permission: "can_view_cities" }, { type: "link", path: "/buildings", icon: i.jsx(sS, {}), label: "Binolar", permission: "can_view_buildings" }, { type: "group", key: "homes", icon: i.jsx(aS, {}), label: "Xonadonlar", basePath: "/homes", permission: "can_view_homes", children: [{ path: "/homes", label: "Xonadonlar ro'yxati" }, { path: "/homes/create", label: "Qo'lda qo'shish" }] }, { type: "link", path: "/clients", icon: i.jsx(nS, {}), label: "Mijozlar", permission: "can_view_clients" }, { type: "group", key: "contracts", icon: i.jsx(rS, {}), label: "Shartnomalar", basePath: "/contracts", permission: "can_view_contracts", children: [{ path: "/contracts", label: "Shartnomalar ro'yxati" }, { path: "/contracts/create", label: "Shartnoma qo'shish" }] }, { type: "link", icon: i.jsx(lS, {}), label: "Leadlar", path: "/leads", permission: "can_view_leads" }, { type: "link", icon: i.jsx(gS, {}), label: "Formalar", path: "/forms", permission: "can_view_forms" }, { type: "link", path: "/buildings/info", icon: i.jsx(dS, {}), label: "Binolar ma'lumoti", permission: "can_view_buildings_info" }, { type: "link", path: "/analytics", icon: i.jsx(hS, {}), label: "Analitika", permission: "can_view_analytics" }, { type: "link", path: "/sms", icon: i.jsx(pS, {}), label: "SMS Xizmati", permission: "can_view_sms" }, { type: "group", key: "chiqimlar", icon: i.jsx(mS, {}), label: "Chiqimlar", basePath: "/expenses", permission: "can_view_expenses", children: [{ path: "/expenses", label: "Xarajatlar" }, { path: "/expense-categories", label: "Kategoriyalar" }, { path: "/expenses/buildings", label: "Ob'ektlar tahlili" }] }].filter(N => l?.is_superuser || !N.permission ? !0 : l?.permissions?.[N.permission]); return l?.is_superuser && w.push({ type: "link", path: "/users", icon: i.jsx(fS, {}), label: "Foydalanuvchilar" }), i.jsxs(i.Fragment, { children: [o && r && i.jsx("div", { className: "sidebar-overlay visible", onClick: d }), o && !r && i.jsx("button", { className: "mobile-menu-btn", onClick: u, children: i.jsx(Kk, {}) }), !o && i.jsx("button", { className: `sidebar-toggle ${r ? "sidebar-open" : "sidebar-closed"}`, onClick: u, children: r ? i.jsx(Zk, {}) : i.jsx(Qk, {}) }), i.jsx("aside", { className: `sidebar ${r ? "open" : "closed"}`, children: i.jsxs("div", { className: "sidebar-inner", children: [i.jsx("div", { className: "sidebar-header", children: i.jsxs("div", { className: "logo", children: [i.jsx("div", { className: "logo-icon", children: i.jsx(eS, {}) }), i.jsxs("div", { className: "logo-text", children: [i.jsx("span", { className: "logo-title", children: "Bino" }), i.jsx("span", { className: "logo-sub", children: "CRM System" })] })] }) }), i.jsxs("div", { className: "sidebar-user", children: [i.jsx("div", { className: "avatar", children: (l?.first_name?.[0] || l?.username?.[0] || "U").toUpperCase() }), i.jsxs("div", { className: "user-info", children: [i.jsx("span", { className: "user-name", children: l?.first_name ? `${l.first_name} ${l.last_name || ""}` : l?.username || "User" }), i.jsx("span", { className: "user-role", children: l?.is_superuser ? "Superadmin" : l?.is_staff ? "Admin" : "Foydalanuvchi" })] })] }), i.jsxs("nav", { className: "sidebar-nav", children: [i.jsx("p", { className: "nav-title", children: "MENU" }), i.jsx("ul", { className: "nav-list", children: w.map((N, T) => i.jsx("li", { style: { animationDelay: `${T * .05}s` }, children: N.type === "link" ? i.jsxs(Af, { to: N.path, className: ({ isActive: R }) => `nav-link ${R ? "active" : ""}`, end: N.path === "/" || N.path === "/buildings", onClick: b, children: [i.jsx("span", { className: "nav-icon", children: N.icon }), i.jsx("span", { className: "nav-label", children: N.label })] }) : i.jsxs("div", { className: "nav-group", children: [i.jsxs("button", { className: `nav-group-toggle ${j(N.basePath) ? "active" : ""} ${k(N.key) ? "expanded" : ""}`, onClick: () => v(N.key), children: [i.jsx("span", { className: "nav-icon", children: N.icon }), i.jsx("span", { className: "nav-label", children: N.label }), i.jsx("span", { className: "nav-arrow", children: i.jsx(Jk, {}) })] }), i.jsx("ul", { className: `nav-submenu ${k(N.key) ? "open" : ""}`, children: N.children.map(R => i.jsx("li", { children: i.jsx(Af, { to: R.path, className: ({ isActive: P }) => `nav-sublink ${P ? "active" : ""}`, end: !0, onClick: b, children: R.label }) }, R.path)) })] }) }, N.key || N.path)) })] }), i.jsxs("div", { className: "sidebar-footer", children: [i.jsxs("button", { className: "footer-btn theme-btn", onClick: s, children: [t === "light" ? i.jsx(oS, {}) : i.jsx(cS, {}), i.jsx("span", { children: t === "light" ? "Tungi rejim" : "Kunduzgi rejim" })] }), i.jsxs("button", { className: "footer-btn logout-btn", onClick: y, children: [i.jsx(uS, {}), i.jsx("span", { children: "Chiqish" })] })] })] }) })] }) }, Kk = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "3", y1: "6", x2: "21", y2: "6" }), i.jsx("line", { x1: "3", y1: "12", x2: "21", y2: "12" }), i.jsx("line", { x1: "3", y1: "18", x2: "21", y2: "18" })] }), Zk = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2.5", children: i.jsx("polyline", { points: "15 18 9 12 15 6" }) }), Qk = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2.5", children: i.jsx("polyline", { points: "9 18 15 12 9 6" }) }), Jk = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2.5", children: i.jsx("polyline", { points: "6 9 12 15 18 9" }) }), eS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M3 21H21" }), i.jsx("path", { d: "M5 21V7L12 3L19 7V21" }), i.jsx("path", { d: "M9 21V15H15V21" })] }), tS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" }), i.jsx("polyline", { points: "9 22 9 12 15 12 15 22" })] }), iS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M3 21h18M5 21V7l8-4 8 4v14" }), i.jsx("rect", { x: "9", y: "9", width: "2", height: "2" }), i.jsx("rect", { x: "13", y: "9", width: "2", height: "2" })] }), sS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "4", y: "2", width: "16", height: "20", rx: "2" }), i.jsx("path", { d: "M9 22v-4h6v4" }), i.jsx("path", { d: "M8 6h.01M16 6h.01M8 10h.01M16 10h.01" })] }), aS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M3 12l9-9 9 9" }), i.jsx("path", { d: "M5 10v10a1 1 0 001 1h12a1 1 0 001-1V10" })] }), nS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" }), i.jsx("circle", { cx: "9", cy: "7", r: "4" }), i.jsx("path", { d: "M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" })] }), rS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }), i.jsx("polyline", { points: "14 2 14 8 20 8" }), i.jsx("line", { x1: "16", y1: "13", x2: "8", y2: "13" }), i.jsx("line", { x1: "16", y1: "17", x2: "8", y2: "17" })] }), lS = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" }) }), oS = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" }) }), cS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "12", cy: "12", r: "5" }), i.jsx("line", { x1: "12", y1: "1", x2: "12", y2: "3" }), i.jsx("line", { x1: "12", y1: "21", x2: "12", y2: "23" }), i.jsx("line", { x1: "4.22", y1: "4.22", x2: "5.64", y2: "5.64" }), i.jsx("line", { x1: "18.36", y1: "18.36", x2: "19.78", y2: "19.78" }), i.jsx("line", { x1: "1", y1: "12", x2: "3", y2: "12" }), i.jsx("line", { x1: "21", y1: "12", x2: "23", y2: "12" }), i.jsx("line", { x1: "4.22", y1: "19.78", x2: "5.64", y2: "18.36" }), i.jsx("line", { x1: "18.36", y1: "5.64", x2: "19.78", y2: "4.22" })] }), uS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" }), i.jsx("polyline", { points: "16 17 21 12 16 7" }), i.jsx("line", { x1: "21", y1: "12", x2: "9", y2: "12" })] }), dS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("line", { x1: "12", y1: "16", x2: "12", y2: "12" }), i.jsx("line", { x1: "12", y1: "8", x2: "12.01", y2: "8" })] }), hS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M21.21 15.89A10 10 0 1 1 8 2.83" }), i.jsx("path", { d: "M22 12A10 10 0 0 0 12 2v10z" })] }), fS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" }), i.jsx("circle", { cx: "12", cy: "7", r: "4" })] }), mS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4" }), i.jsx("path", { d: "M4 6v12c0 1.1.9 2 2 2h14v-4" }), i.jsx("path", { d: "M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z" })] }), pS = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: i.jsx("path", { d: "M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" }) }), gS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }), i.jsx("polyline", { points: "14 2 14 8 20 8" }), i.jsx("line", { x1: "12", y1: "18", x2: "12", y2: "12" }), i.jsx("line", { x1: "9", y1: "15", x2: "15", y2: "15" })] }), bS = ({ children: l }) => { const { isOpen: e, isMobile: t } = Kv(), s = () => t ? "main-content mobile" : e ? "main-content sidebar-open" : "main-content sidebar-closed"; return i.jsxs("div", { className: "app-layout", children: [i.jsx($k, {}), i.jsx("main", { className: s(), children: l })] }) }, xS = () => { const [l, e] = C.useState(""), [t, s] = C.useState(""), [r, o] = C.useState(""), [u, d] = C.useState(!1), { login: f } = xo(), { theme: m, toggleTheme: p } = wv(), g = bi(), b = Oi().state?.from?.pathname || "/", v = async k => { k.preventDefault(), o(""), d(!0); const j = await f(l, t); j.success ? g(b, { replace: !0 }) : o(j.error), d(!1) }; return i.jsxs("div", { className: "login-page", children: [i.jsxs("div", { className: "login-bg", children: [i.jsx("div", { className: "bg-shape bg-shape-1" }), i.jsx("div", { className: "bg-shape bg-shape-2" }), i.jsx("div", { className: "bg-shape bg-shape-3" })] }), i.jsx("button", { className: "theme-toggle", onClick: p, children: m === "light" ? i.jsx(yS, {}) : i.jsx(vS, {}) }), i.jsxs("div", { className: "login-card", children: [i.jsx("div", { className: "login-logo", children: i.jsx("div", { className: "logo-icon", children: i.jsx(_S, {}) }) }), i.jsx("h1", { className: "login-title", children: "Bino CRM" }), i.jsx("p", { className: "login-subtitle", children: "Tizimga kirish" }), i.jsxs("form", { onSubmit: v, className: "login-form", children: [r && i.jsxs("div", { className: "error-box", children: [i.jsx(SS, {}), i.jsx("span", { children: r })] }), i.jsxs("div", { className: "input-group", children: [i.jsx(jS, {}), i.jsx("input", { type: "text", placeholder: "Foydalanuvchi nomi", value: l, onChange: k => e(k.target.value), required: !0 })] }), i.jsxs("div", { className: "input-group", children: [i.jsx(wS, {}), i.jsx("input", { type: "password", placeholder: "Parol", value: t, onChange: k => s(k.target.value), required: !0 })] }), i.jsxs("button", { type: "submit", className: "login-btn", disabled: u, children: [u ? "Kirish..." : "Kirish", !u && i.jsx(kS, {})] })] }), i.jsx("p", { className: "login-footer", children: " 2024 Bino CRM" })] })] }) }, yS = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" }) }), vS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "12", cy: "12", r: "5" }), i.jsx("line", { x1: "12", y1: "1", x2: "12", y2: "3" }), i.jsx("line", { x1: "12", y1: "21", x2: "12", y2: "23" }), i.jsx("line", { x1: "4.22", y1: "4.22", x2: "5.64", y2: "5.64" }), i.jsx("line", { x1: "18.36", y1: "18.36", x2: "19.78", y2: "19.78" }), i.jsx("line", { x1: "1", y1: "12", x2: "3", y2: "12" }), i.jsx("line", { x1: "21", y1: "12", x2: "23", y2: "12" }), i.jsx("line", { x1: "4.22", y1: "19.78", x2: "5.64", y2: "18.36" }), i.jsx("line", { x1: "18.36", y1: "5.64", x2: "19.78", y2: "4.22" })] }), _S = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M3 21H21" }), i.jsx("path", { d: "M5 21V7L12 3L19 7V21" }), i.jsx("path", { d: "M9 21V15H15V21" })] }), jS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" }), i.jsx("circle", { cx: "12", cy: "7", r: "4" })] }), wS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "3", y: "11", width: "18", height: "11", rx: "2", ry: "2" }), i.jsx("path", { d: "M7 11V7a5 5 0 0 1 10 0v4" })] }), kS = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M5 12h14M12 5l7 7-7 7" }) }), SS = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("line", { x1: "12", y1: "8", x2: "12", y2: "12" }), i.jsx("line", { x1: "12", y1: "16", x2: "12.01", y2: "16" })] }), Rf = { getContractsStats: l => we.get("/analytics/contracts_stats/", { params: l }), getLeadsStats: l => we.get("/analytics/leads_stats/", { params: l }), getSummary: () => we.get("/analytics/summary/") }; function Mt(l, e, t, s) { function r(o) { return o instanceof t ? o : new t(function (u) { u(o) }) } return new (t || (t = Promise))(function (o, u) { function d(p) { try { m(s.next(p)) } catch (g) { u(g) } } function f(p) { try { m(s.throw(p)) } catch (g) { u(g) } } function m(p) { p.done ? o(p.value) : r(p.value).then(d, f) } m((s = s.apply(l, e || [])).next()) }) } class Ie { constructor(e) { Object.defineProperty(this, "_value", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this._value = e } get value() { return this._value / 100 } get percent() { return this._value } toString() { return "" + this._value + "%" } interpolate(e, t) { return e + this.value * (t - e) } static normalize(e, t, s) { return e instanceof Ie ? e : t === s ? new Ie(0) : new Ie(Math.min(Math.max((e - t) * (1 / (s - t)), 0), 1) * 100) } } function Jt(l) { return new Ie(l) } Jt(0); const Te = Jt(100), Oe = Jt(50); function iy(l) { return l instanceof Ie } function Ps(l) { return Number(l) !== l } function NS(l) { return {}.toString.call(l) } function Ui(l) { if (l != null && !le(l)) { let e = Number(l); if (Ps(e) && xn(l) && l != "" && l.match(/[0-9]+/)) { const t = l.replace(/[^0-9.\-]+/g, ""); return l === t ? e : Ui(t) } return e } return l } function CS(l) { if (Lf(l)) return new Date(l); if (le(l)) return new Date(l); { let e = Number(l); return le(e) ? new Date(e) : new Date(l) } } function TS(l) { if (Ps(l)) return "NaN"; if (l === 1 / 0) return "Infinity"; if (l === -1 / 0) return "-Infinity"; if (l === 0 && 1 / l === -1 / 0) return "-0"; let e = l < 0; l = Math.abs(l); let t = /^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec("" + l), s = t[1], r = t[2] || "", o; if (t[3] === void 0) o = r === "" ? s : s + "." + r; else { let u = +t[3]; if (l < 1) { let d = u - 1; o = "0." + sy("0", d) + s + r } else { let d = u - r.length; d === 0 ? o = s + r : d < 0 ? o = s + r.slice(0, d) + "." + r.slice(d) : o = s + r + sy("0", d) } } return e ? "-" + o : o } function sy(l, e) { return new Array(e + 1).join(l) } function Lf(l) { return NS(l) === "[object Date]" } function xn(l) { return typeof l == "string" } function le(l) { return typeof l == "number" && Number(l) == l } function yo(l) { return typeof l == "object" && l !== null } const za = "____", vr = "____"; function Vl(l, e) { const t = l.length; for (let s = 0; s < t; ++s)if (l[s] === e) return s; return -1 } function DS(l, e) { const t = l.length; for (let s = 0; s < t; ++s)if (e(l[s])) return !0; return !1 } function zf(l, e) { const t = l.length, s = new Array(t); for (let r = 0; r < t; ++r)s[r] = e(l[r], r); return s } function te(l, e) { const t = l.length; for (let s = 0; s < t; ++s)e(l[s], s) } function Yl(l, e) { let t = l.length; for (; t > 0;)--t, e(l[t], t) } function gm(l, e) { const t = l.length; for (let s = 0; s < t && e(l[s], s); ++s); } function Vi(l, e) { let t = !1, s = 0; for (; ;) { if (s = l.indexOf(e, s), s === -1) return t; t = !0, l.splice(s, 1) } } function ci(l, e) { let t = l.indexOf(e); return t !== -1 ? (l.splice(t, 1), !0) : !1 } function Ff(l, e, t) { let s = Vl(l, e); s !== -1 && If(l, s), l.push(e) } function Wl(l, e) { l.indexOf(e) === -1 && l.push(e) } function Hf(l) { const e = l.length, t = new Array(e); for (let s = 0; s < e; ++s)t[s] = l[s]; return t } function mf(l, e, t) { l.splice(e, 0, t) } function If(l, e) { l.splice(e, 1) } function Qv(l, e) { const t = l.length; for (let s = 0; s < t; ++s)if (e(l[s], s)) return s; return -1 } function AS(l, e) { let t = l.length; for (; t > 0;)if (--t, e(l[t], t)) return t; return -1 } function Jv(l, e) { const t = Qv(l, e); if (t !== -1) return l[t] } function MS(l, e) { const t = AS(l, e); if (t !== -1) return l[t] } function PS(l, e) { let t = 0, s = l.length, r = !1; for (; t < s;) { const o = t + s >> 1, u = e(l[o]); u < 0 ? t = o + 1 : u === 0 ? (r = !0, t = o + 1) : s = o } return { found: r, index: r ? t - 1 : t } } function OS(l, e) { let t = 0, s = l.length, r = !1; for (; t < s;) { const o = t + s >> 1, u = e(l[o]); u < 0 ? t = o + 1 : (u === 0 && (r = !0), s = o) } return { found: r, index: t } } function Du(l, e) { let t = l.length; for (; t > 0;)--t, e(l[t]) || l.splice(t, 1) } function Wi(l) { return Object.keys(l) } function As(l) { return Object.entries(l) } function ES(l, e) { return Wi(l).sort(e) } function zl(l) { return Object.assign({}, l) } function it(l, e) { Wi(l).forEach(t => { e(t, l[t]) }) } function BS(l, e) { for (let t in l) if (RS(l, t) && !e(t, l[t])) break } function RS(l, e) { return {}.hasOwnProperty.call(l, e) } class bm { constructor() { Object.defineProperty(this, "_disposed", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this._disposed = !1 } isDisposed() { return this._disposed } dispose() { this._disposed || (this._disposed = !0, this._dispose()) } } class Gt { constructor(e) { Object.defineProperty(this, "_disposed", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_dispose", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this._disposed = !1, this._dispose = e } isDisposed() { return this._disposed } dispose() { this._disposed || (this._disposed = !0, this._dispose()) } } class LS extends bm { constructor() { super(...arguments), Object.defineProperty(this, "_disposers", { enumerable: !0, configurable: !0, writable: !0, value: [] }) } _dispose() { te(this._disposers, e => { e.dispose() }) } } class Di extends bm { constructor(e) { super(), Object.defineProperty(this, "_disposers", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this._disposers = e } _dispose() { te(this._disposers, e => { e.dispose() }) } get disposers() { return this._disposers } } class e0 extends Gt { constructor() { super(...arguments), Object.defineProperty(this, "_counter", { enumerable: !0, configurable: !0, writable: !0, value: 0 }) } increment() { return ++this._counter, new Gt(() => { --this._counter, this._counter === 0 && this.dispose() }) } } function zS(l) { l.parentNode && l.parentNode.removeChild(l) } function jt(l, e, t, s) { return l.addEventListener(e, t, s || !1), new Gt(() => { l.removeEventListener(e, t, s || !1) }) } function t0(l) { return jt(window, "resize", e => { l() }) } function ta(l) { switch (l) { case "touchevents": return window.hasOwnProperty("TouchEvent"); case "pointerevents": return window.hasOwnProperty("PointerEvent"); case "mouseevents": return window.hasOwnProperty("MouseEvent"); case "wheelevents": return window.hasOwnProperty("WheelEvent"); case "keyboardevents": return window.hasOwnProperty("KeyboardEvent") }return !1 } function pf(l) { return l.pointerId || 0 } function FS() { if (document.activeElement && document.activeElement != document.body) if (document.activeElement.blur) document.activeElement.blur(); else { let l = document.createElement("button"); l.style.position = "fixed", l.style.top = "0px", l.style.left = "-10000px", document.body.appendChild(l), l.focus(), l.blur(), document.body.removeChild(l) } } function HS(l) { l && l.focus() } function qf(l) { if (ta("pointerevents")) return l; if (ta("touchevents")) switch (l) { case "pointerover": return "touchstart"; case "pointerout": return "touchend"; case "pointerleave": return "touchend"; case "pointerdown": return "touchstart"; case "pointermove": return "touchmove"; case "pointerup": return "touchend"; case "click": return "click"; case "dblclick": return "dblclick" } else if (ta("mouseevents")) switch (l) { case "pointerover": return "mouseover"; case "pointerout": return "mouseout"; case "pointerleave": return "mouseleave"; case "pointerdown": return "mousedown"; case "pointermove": return "mousemove"; case "pointerup": return "mouseup"; case "click": return "click"; case "dblclick": return "dblclick" }return l } function Yf(l) { if (typeof Touch < "u" && l instanceof Touch) return !0; if (typeof PointerEvent < "u" && l instanceof PointerEvent && l.pointerType != null) switch (l.pointerType) { case "touch": case "pen": case 2: return !0; case "mouse": case 4: return !1; default: return !(l instanceof MouseEvent) } else if (l.type != null && l.type.match(/^mouse/)) return !1; return !0 } function zc(l, e, t) { l.style[e] = t } function IS(l, e) { return l.style[e] } function i0(l) { if (l.composedPath) { const e = l.composedPath(); return e.length === 0 ? null : e[0] } else return l.target } function qS(l, e) { let t = e; for (; ;) { if (l === t) return !0; if (t.parentNode === null) { if (t.host == null) return !1; t = t.host } else t = t.parentNode } } function s0(l, e) { return l.target && qS(e.root.dom, l.target) } function yr(l, e) { e ? l.style.pointerEvents = "auto" : l.style.pointerEvents = "none" } function Fl(l) { if (l.key !== void 0) return l.key; switch (l.keyCode) { case 9: return "Tab"; case 13: return "Enter"; case 16: return "Shift"; case 17: return "Control"; case 27: return "Escape"; case 32: return " "; case 37: return "ArrowLeft"; case 38: return "ArrowUp"; case 39: return "ArrowRight"; case 40: return "ArrowDown"; case 46: return "Delete" }return "" + l.keyCode } function YS() { return /apple/i.test(navigator.vendor) && "ontouchend" in document } function XS() { return YS() ? 1 : void 0 } function mt(l, e) { return le(l) ? l : l != null && le(l.value) && le(e) ? e * l.value : 0 } function a0(l) { let e = ("" + l).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/); return e ? Math.max(0, (e[1] ? e[1].length : 0) - (e[2] ? +e[2] : 0)) : 0 } function Rt(l, e = 0, t = "0") { return typeof l != "string" && (l = l.toString()), e > l.length ? Array(e - l.length + 1).join(t) + l : l } function US(l) { return l.replace(/^[\s]*/, "") } function VS(l) { return l.replace(/[\s]*$/, "") } function jr(l) { return US(VS(l)) } function WS(l, e, t = !1, s = "...") { if (l.length > e) { let r = e - 1; for (; r >= 0 && l.charAt(r).match(/\w/);)r--; return r >= 0 && t == !1 ? l.substring(0, r + 1) + "..." : l.substring(0, e) + s } else return l } function xm(l) { return l.replace(/\/(date|number|duration)$/i, "") } function ay(l) { return l && l.replace(/<[^>]*>/g, "") } function ny(l) { return l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&") } function GS(l) { const e = /[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/, t = /([^]*[])/gi; let s = l.split(/(\s+)/), r = []; return s.forEach(o => { if (o.match(/^\s+$/)) (o = " ") && (o = "  "), r.push(o); else if (e.test(o)) { let u = o.split(t).filter(d => d !== ""); r = r.concat(u) } else r = r.concat([...o]) }), r } function ry(l, e = !1) { const t = new Date(l.getFullYear(), 0, 0), s = l.getTime() - t.getTime() + (t.getTimezoneOffset() - l.getTimezoneOffset()) * 60 * 1e3, r = 1e3 * 60 * 60 * 24; return Math.floor(s / r) } function nu(l, e = !1) { const t = new Date(Date.UTC(l.getFullYear(), l.getMonth(), l.getDate())), s = t.getUTCDay() || 7; t.setUTCDate(t.getUTCDate() + 4 - s); const r = new Date(Date.UTC(t.getUTCFullYear(), 0, 1)); return Math.ceil(((t.getTime() - r.getTime()) / 864e5 + 1) / 7) } function $S(l, e = !1) { const t = new Date(Date.UTC(l.getFullYear(), l.getMonth(), l.getDate())), s = t.getUTCDay() || 7; return t.setUTCDate(t.getUTCDate() + 4 - s), new Date(Date.UTC(t.getUTCFullYear(), 0, 1)).getFullYear() } function KS(l, e = !1) { const t = nu(new Date(l.getFullYear(), l.getMonth(), 1), e); let s = nu(l, e); return s == 1 && (s = 53), s - t + 1 } function ZS(l, e, t = 1, s = !1) { let r = new Date(e, 0, 4, 0, 0, 0, 0); return s && r.setUTCFullYear(e), l * 7 + t - ((r.getDay() || 7) + 3) } function Fc(l, e) { return l > 12 ? l -= 12 : l === 0 && (l = 12), e != null ? l + (e - 1) : l } function Hc(l, e = !1, t = !1, s = !1, r) { if (s) return e ? "Coordinated Universal Time" : "UTC"; if (r) { const d = l.toLocaleString("en-US", { timeZone: r }), f = l.toLocaleString("en-US", { timeZone: r, timeZoneName: e ? "long" : "short" }); return jr(f.substr(d.length)) } let o = l.toLocaleString("UTC"), u = l.toLocaleString("UTC", { timeZoneName: e ? "long" : "short" }).substr(o.length); return t === !1 && (u = u.replace(/ (standard|daylight|summer|winter) /i, " ")), jr(u) } function QS(l, e) { const t = e || new Date(Date.UTC(2012, 0, 1, 0, 0, 0, 0)), s = new Date(t.toLocaleString("en-US", { timeZone: "UTC" })); return (new Date(t.toLocaleString("en-US", { timeZone: l })).getTime() - s.getTime()) / 6e4 * -1 } function ly(l) { return l.charAt(0).toUpperCase() + l.slice(1) } function n0(l) { let e, t, s, r = l.h, o = l.s, u = l.l; if (o == 0) e = t = s = u; else { let d = function (g, y, b) { return b < 0 && (b += 1), b > 1 && (b -= 1), b < .16666666666666666 ? g + (y - g) * 6 * b : b < .5 ? y : b < .6666666666666666 ? g + (y - g) * (.6666666666666666 - b) * 6 : g }, f = u < .5 ? u * (1 + o) : u + o - u * o, m = 2 * u - f; e = d(m, f, r + 1 / 3), t = d(m, f, r), s = d(m, f, r - 1 / 3) } return { r: Math.round(e * 255), g: Math.round(t * 255), b: Math.round(s * 255) } } function r0(l) { let e = l.r / 255, t = l.g / 255, s = l.b / 255, r = Math.max(e, t, s), o = Math.min(e, t, s), u = 0, d = 0, f = (r + o) / 2; if (r === o) u = d = 0; else { let m = r - o; switch (d = f > .5 ? m / (2 - r - o) : m / (r + o), r) { case e: u = (t - s) / m + (t < s ? 6 : 0); break; case t: u = (s - e) / m + 2; break; case s: u = (e - t) / m + 4; break }u /= 6 } return { h: u, s: d, l: f } } function JS(l, e) { return l && { r: Math.max(0, Math.min(255, l.r + Jc(l.r, e))), g: Math.max(0, Math.min(255, l.g + Jc(l.g, e))), b: Math.max(0, Math.min(255, l.b + Jc(l.b, e))), a: l.a } } function Jc(l, e) { let t = e > 0 ? 255 - l : l; return Math.round(t * e) } function eN(l, e) { if (l) { let t = Math.min(Math.max(l.r, l.g, l.b), 230), s = Jc(t, e); return { r: Math.max(0, Math.min(255, Math.round(l.r + s))), g: Math.max(0, Math.min(255, Math.round(l.g + s))), b: Math.max(0, Math.min(255, Math.round(l.b + s))), a: l.a } } else return l } function oy(l) { return (l.r * 299 + l.g * 587 + l.b * 114) / 1e3 >= 128 } function tN(l, e) { if (l === void 0 || e == 1) return l; let t = r0(l); return t.s = e, n0(t) } function iN(l, e = { r: 255, g: 255, b: 255 }, t = { r: 255, g: 255, b: 255 }) { let s = e, r = t; return oy(t) && (s = t, r = e), oy(l) ? r : s } function Ve(l, e) { return l || (l = []), [...l, ...e].filter((t, s, r) => r.indexOf(t) === s) } function l0(l, e) { return !(!e || l.left != e.left || l.right != e.right || l.top != e.top || l.bottom != e.bottom) } function o0(l) { return l[0] === "#" && (l = l.substr(1)), l.length == 3 && (l = l[0].repeat(2) + l[1].repeat(2) + l[2].repeat(2)), parseInt(l, 16) } function sN(l) { l = l.replace(/[ ]/g, ""); let e = l.match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i); if (e) e.push("1"); else if (e = l.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i), !e) return 0; let t = ""; for (let s = 1; s <= 3; s++) { let r = parseInt(e[s]).toString(16); r.length == 1 && (r = "0" + r), t += r } return o0(t) } function Je(l) { return ke.fromAny(l) } class ke { constructor(e) { Object.defineProperty(this, "_hex", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this._hex = e | 0 } get hex() { return this._hex } get r() { return this._hex >>> 16 } get g() { return this._hex >> 8 & 255 } get b() { return this._hex & 255 } toCSS(e = 1) { return "rgba(" + this.r + ", " + this.g + ", " + this.b + ", " + e + ")" } toCSSHex() { return "#" + Rt(this.r.toString(16), 2) + Rt(this.g.toString(16), 2) + Rt(this.b.toString(16), 2) } toHSL(e = 1) { return r0({ r: this.r, g: this.g, b: this.b }) } static fromHSL(e, t, s) { const r = n0({ h: e, s: t, l: s }); return this.fromRGB(r.r, r.g, r.b) } toString() { return this.toCSSHex() } static fromHex(e) { return new ke(e) } static fromRGB(e, t, s) { return new ke((s | 0) + (t << 8) + (e << 16)) } static fromString(e) { return new ke(o0(e)) } static fromCSS(e) { return new ke(sN(e)) } static fromAny(e) { if (xn(e)) { if (e[0] == "#") return ke.fromString(e); if (e.substr(0, 3) == "rgb") return ke.fromCSS(e) } else { if (le(e)) return ke.fromHex(e); if (e instanceof ke) return ke.fromHex(e.hex) } throw new Error("Unknown color syntax: " + e) } static alternative(e, t, s) { const r = iN({ r: e.r, g: e.g, b: e.b }, t ? { r: t.r, g: t.g, b: t.b } : void 0, s ? { r: s.r, g: s.g, b: s.b } : void 0); return this.fromRGB(r.r, r.g, r.b) } static interpolate(e, t, s, r = "rgb") { if (r == "hsl") { const o = t.toHSL(), u = s.toHSL(); return ke.fromHSL(Oa(e, o.h, u.h), Oa(e, o.s, u.s), Oa(e, o.l, u.l)) } else return ke.fromRGB(Oa(e, t.r, s.r), Oa(e, t.g, s.g), Oa(e, t.b, s.b)) } static lighten(e, t) { const s = JS({ r: e.r, g: e.g, b: e.b }, t); return ke.fromRGB(s.r, s.g, s.b) } static brighten(e, t) { const s = eN({ r: e.r, g: e.g, b: e.b }, t); return ke.fromRGB(s.r, s.g, s.b) } static saturate(e, t) { const s = tN({ r: e.r, g: e.g, b: e.b }, t); return ke.fromRGB(s.r, s.g, s.b) } } class Fr { constructor() { Object.defineProperty(this, "_listeners", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_killed", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_disabled", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_iterating", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_enabled", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_disposed", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this._listeners = [], this._killed = [], this._disabled = {}, this._iterating = 0, this._enabled = !0, this._disposed = !1 } isDisposed() { return this._disposed } dispose() { if (!this._disposed) { this._disposed = !0; const e = this._listeners; this._iterating = 1, this._listeners = null, this._disabled = null; try { te(e, t => { t.disposer.dispose() }) } finally { this._killed = null, this._iterating = null } } } hasListeners() { return this._listeners.length !== 0 } hasListenersByType(e) { return DS(this._listeners, t => (t.type === null || t.type === e) && !t.killed) } enable() { this._enabled = !0 } disable() { this._enabled = !1 } enableType(e) { delete this._disabled[e] } disableType(e, t = 1 / 0) { this._disabled[e] = t } _removeListener(e) { if (this._iterating === 0) { const t = this._listeners.indexOf(e); if (t === -1) throw new Error("Invalid state: could not remove listener"); this._listeners.splice(t, 1) } else this._killed.push(e) } _removeExistingListener(e, t, s, r) { if (this._disposed) throw new Error("EventDispatcher is disposed"); this._eachListener(o => { o.once === e && o.type === t && (s === void 0 || o.callback === s) && o.context === r && o.disposer.dispose() }) } isEnabled(e) { if (this._disposed) throw new Error("EventDispatcher is disposed"); return this._enabled && this._listeners.length > 0 && this.hasListenersByType(e) && this._disabled[e] === void 0 } removeType(e) { if (this._disposed) throw new Error("EventDispatcher is disposed"); this._eachListener(t => { t.type === e && t.disposer.dispose() }) } has(e, t, s) { return Qv(this._listeners, o => o.once !== !0 && o.type === e && (t === void 0 || o.callback === t) && o.context === s) !== -1 } _shouldDispatch(e) { if (this._disposed) throw new Error("EventDispatcher is disposed"); const t = this._disabled[e]; return le(t) ? (t <= 1 ? delete this._disabled[e] : --this._disabled[e], !1) : this._enabled } _eachListener(e) { ++this._iterating; try { te(this._listeners, e) } finally { --this._iterating, this._iterating === 0 && this._killed.length !== 0 && (te(this._killed, t => { this._removeListener(t) }), this._killed.length = 0) } } dispatch(e, t) { this._shouldDispatch(e) && this._eachListener(s => { !s.killed && (s.type === null || s.type === e) && (s._debounceDelay ? (s._debounceTimeout && window.clearTimeout(s._debounceTimeout), s._debounceTimeout = window.setTimeout(() => { s._debounceTimeout = void 0, s.killed || s.dispatch(e, t) }, s._debounceDelay)) : s.dispatch(e, t)) }) } _on(e, t, s, r, o, u, d) { if (this._disposed) throw new Error("EventDispatcher is disposed"); this._removeExistingListener(e, t, s, r); const f = { type: t, callback: s, context: r, shouldClone: o, dispatch: u, killed: !1, once: e, disposer: new Gt(() => { f.killed = !0, f._debounceTimeout && window.clearTimeout(f._debounceTimeout), this._removeListener(f) }), _debounceDelay: d }; return this._listeners.push(f), f } onAll(e, t, s = !0) { return this._on(!1, null, e, t, s, (r, o) => e.call(t, o)).disposer } on(e, t, s, r = !0) { return this._on(!1, e, t, s, r, (o, u) => t.call(s, u)).disposer } onDebounced(e, t, s, r, o = !0) { return this._on(!1, e, t, r, o, (u, d) => t.call(r, d), s).disposer } once(e, t, s, r = !0) { const o = this._on(!0, e, t, s, r, (u, d) => { o.disposer.dispose(), t.call(s, d) }); return o.disposer } off(e, t, s) { this._removeExistingListener(!1, e, t, s) } copyFrom(e) { if (this._disposed) throw new Error("EventDispatcher is disposed"); if (e === this) throw new Error("Cannot copyFrom the same TargetedEventDispatcher"); const t = []; return te(e._listeners, s => { !s.killed && s.shouldClone && (s.type === null ? t.push(this.onAll(s.callback, s.context)) : s.once ? t.push(this.once(s.type, s.callback, s.context)) : t.push(this.on(s.type, s.callback, s.context))) }), new Di(t) } } function cy(l) { return Mt(this, void 0, void 0, function* () { if (l !== void 0) { const e = []; it(l, (t, s) => { e.push(s.waitForStop()) }), yield Promise.all(e) } }) } function Oa(l, e, t) { return e + l * (t - e) } function aN(l, e, t) { return l >= 1 ? t : e } function c0(l, e, t) { return new Ie(Oa(l, e.percent, t.percent)) } function nN(l, e, t) { return ke.interpolate(l, e, t) } function rN(l, e) { return typeof l == "number" && typeof e == "number" ? Oa : l instanceof Ie && e instanceof Ie ? c0 : l instanceof ke && e instanceof ke ? nN : aN } var pn; (function (l) { l[l.Stopped = 0] = "Stopped", l[l.Playing = 1] = "Playing", l[l.Paused = 2] = "Paused" })(pn || (pn = {})); function Rl(l, e) { if (!(l >= 0 && l < e)) throw new Error("Index out of bounds: " + l) } class Hr { constructor(e = []) { Object.defineProperty(this, "_values", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "events", { enumerable: !0, configurable: !0, writable: !0, value: new Fr }), this._values = e } get values() { return this._values } contains(e) { return this._values.indexOf(e) !== -1 } removeValue(e) { let t = 0, s = this._values.length; for (; t < s;)this._values[t] === e ? (this.removeIndex(t), --s) : ++t } indexOf(e) { return Vl(this._values, e) } get length() { return this._values.length } hasIndex(e) { return e >= 0 && e < this._values.length } getIndex(e) { return this._values[e] } _onPush(e) { this.events.isEnabled("push") && this.events.dispatch("push", { type: "push", target: this, newValue: e }) } _onInsertIndex(e, t) { this.events.isEnabled("insertIndex") && this.events.dispatch("insertIndex", { type: "insertIndex", target: this, index: e, newValue: t }) } _onSetIndex(e, t, s) { this.events.isEnabled("setIndex") && this.events.dispatch("setIndex", { type: "setIndex", target: this, index: e, oldValue: t, newValue: s }) } _onSwap(e, t) { this.events.isEnabled("swap") && this.events.dispatch("swap", { type: "swap", target: this, a: e, b: t }) } _onRemoveIndex(e, t) { this.events.isEnabled("removeIndex") && this.events.dispatch("removeIndex", { type: "removeIndex", target: this, index: e, oldValue: t }) } _onMoveIndex(e, t, s) { this.events.isEnabled("moveIndex") && this.events.dispatch("moveIndex", { type: "moveIndex", target: this, oldIndex: e, newIndex: t, value: s }) } _onClear(e) { this.events.isEnabled("clear") && this.events.dispatch("clear", { type: "clear", target: this, oldValues: e }) } setIndex(e, t) { Rl(e, this._values.length); const s = this._values[e]; return s !== t && (this._values[e] = t, this._onSetIndex(e, s, t)), s } insertIndex(e, t) { return Rl(e, this._values.length + 1), mf(this._values, e, t), this._onInsertIndex(e, t), t } swap(e, t) { const s = this._values.length; if (Rl(e, s), Rl(t, s), e !== t) { const r = this._values[e], o = this._values[t]; this._values[e] = o, this._values[t] = r, this._onSwap(r, o) } } removeIndex(e) { Rl(e, this._values.length); const t = this._values[e]; return If(this._values, e), this._onRemoveIndex(e, t), t } moveValue(e, t) { let s = this.indexOf(e); if (s !== -1) if (If(this._values, s), t == null) { const r = this._values.length; this._values.push(e), this._onMoveIndex(s, r, e) } else mf(this._values, t, e), this._onMoveIndex(s, t, e); else t == null ? (this._values.push(e), this._onPush(e)) : (mf(this._values, t, e), this._onInsertIndex(t, e)); return e } push(e) { return this._values.push(e), this._onPush(e), e } unshift(e) { return this.insertIndex(0, e), e } pushAll(e) { te(e, t => { this.push(t) }) } copyFrom(e) { this.pushAll(e._values) } pop() { return this._values.length - 1 < 0 ? void 0 : this.removeIndex(this._values.length - 1) } shift() { return this._values.length ? this.removeIndex(0) : void 0 } setAll(e) { const t = this._values; this._values = [], this._onClear(t), te(e, s => { this._values.push(s), this._onPush(s) }) } clear() { this.setAll([]) } *[Symbol.iterator]() { const e = this._values.length; for (let t = 0; t < e; ++t)yield this._values[t] } each(e) { te(this._values, e) } eachReverse(e) { Yl(this._values, e) } } class ru extends Hr { constructor() { super(...arguments), Object.defineProperty(this, "autoDispose", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "_disposed", { enumerable: !0, configurable: !0, writable: !0, value: !1 }) } swap(e, t) { const s = this.autoDispose; this.autoDispose = !1, super.swap(e, t), this.autoDispose = s } _onSetIndex(e, t, s) { this.autoDispose && t.dispose(), super._onSetIndex(e, t, s) } _onRemoveIndex(e, t) { this.autoDispose && t.dispose(), super._onRemoveIndex(e, t) } _onClear(e) { this.autoDispose && te(e, t => { t.dispose() }), super._onClear(e) } _dispose() { this.autoDispose && te(this._values, e => { e.dispose() }) } isDisposed() { return this._disposed } dispose() { this._disposed || (this._disposed = !0, this._dispose()) } } class At extends ru { constructor(e, t) { super(), Object.defineProperty(this, "template", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "make", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this.template = e, this.make = t } _dispose() { super._dispose(), this.autoDispose && this.template.dispose() } } class lN extends Hr { constructor(e) { super(), Object.defineProperty(this, "_disposed", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_container", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_events", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this._container = e, this._events = this.events.onAll(t => { if (t.type === "clear") te(t.oldValues, s => { this._onRemoved(s) }); else if (t.type === "push") this._onInserted(t.newValue); else if (t.type === "setIndex") this._onRemoved(t.oldValue), this._onInserted(t.newValue, t.index); else if (t.type === "insertIndex") this._onInserted(t.newValue, t.index); else if (t.type === "removeIndex") this._onRemoved(t.oldValue); else if (t.type === "moveIndex") this._onRemoved(t.value), this._onInserted(t.value, t.newIndex); else throw new Error("Unknown IListEvent type") }) } _onInserted(e, t) { e._setParent(this._container, !0); const s = this._container._childrenDisplay; t === void 0 ? s.addChild(e._display) : s.addChildAt(e._display, t) } _onRemoved(e) { this._container._childrenDisplay.removeChild(e._display), this._container.markDirtyBounds(), this._container.markDirty() } isDisposed() { return this._disposed } dispose() { this._disposed || (this._disposed = !0, this._events.dispose(), te(this.values, e => { e.dispose() })) } } const u0 = Math.PI, Cr = u0 / 180, wr = 180 / u0; function Lt(l, e, t) { if (!le(e) || e <= 0) return Math.round(l); { let s = Math.pow(10, e); return Math.round(l * s) / s } } function oN(l, e) { if (!le(e) || e <= 0) return Math.ceil(l); { let t = Math.pow(10, e); return Math.ceil(l * t) / t } } function Dt(l, e, t) { return Math.min(Math.max(l, e), t) } function zt(l) { return Math.sin(Cr * l) } function hi(l) { return Math.tan(Cr * l) } function Wt(l) { return Math.cos(Cr * l) } function Au(l) { return l = l % 360, l < 0 && (l += 360), l } function Xf(l, e, t, s, r) { let o = Number.MAX_VALUE, u = Number.MAX_VALUE, d = -Number.MAX_VALUE, f = -Number.MAX_VALUE, m = []; m.push(gf(r, t)), m.push(gf(r, s)); let p = Math.min(Math.floor(t / 90) * 90, Math.floor(s / 90) * 90), g = Math.max(Math.ceil(t / 90) * 90, Math.ceil(s / 90) * 90); for (let y = p; y <= g; y += 90)y >= t && y <= s && m.push(gf(r, y)); for (let y = 0; y < m.length; y++) { let b = m[y]; b.x < o && (o = b.x), b.y < u && (u = b.y), b.x > d && (d = b.x), b.y > f && (f = b.y) } return { left: l + o, top: e + u, right: l + d, bottom: e + f } } function gf(l, e) { return { x: l * Wt(e), y: l * zt(e) } } function cN(l) { const e = l.length; if (e > 0) { let t = l[0], s = t.left, r = t.top, o = t.right, u = t.bottom; if (e > 1) for (let d = 1; d < e; d++)t = l[d], s = Math.min(t.left, s), o = Math.max(t.right, o), r = Math.min(t.top, r), u = Math.max(t.bottom, u); return { left: s, right: o, top: r, bottom: u } } return { left: 0, right: 0, top: 0, bottom: 0 } } function uN(l, e) { return l.x >= e.left && l.y >= e.top && l.x <= e.right && l.y <= e.bottom } function Ic(l, e) { e || (e = { x: l.x * 2, y: l.y * 2 }); let t = e.x - l.x, s = e.y - l.y, r = Math.atan2(s, t) * wr; return r < 0 && (r += 360), Au(r) } function uy(l) { return l } function Ea(l) { return l * l * l } function un(l) { return function (e) { return 1 - l(1 - e) } } class dN { constructor(e, t) { Object.defineProperty(this, "_entity", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_settings", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_userSettings", { enumerable: !0, configurable: !0, writable: !0, value: {} }), this._entity = e, this._settings = t, it(t, s => { this._userSettings[s] = !0 }) } get(e, t) { const s = this._settings[e]; return s !== void 0 ? s : t } setRaw(e, t) { this._settings[e] = t } set(e, t) { this._userSettings[e] = !0, this.setRaw(e, t) } remove(e) { delete this._userSettings[e], delete this._settings[e] } setAll(e) { As(e).forEach(([t, s]) => { this.set(t, s) }) } _eachSetting(e) { it(this._settings, e) } apply() { const e = {}; e.stateAnimationEasing = !0, e.stateAnimationDuration = !0; const t = this._entity.states.lookup("default"); this._eachSetting((s, r) => { e[s] || (e[s] = !0, this !== t && (s in t._settings || (t._settings[s] = this._entity.get(s))), this._entity.set(s, r)) }) } applyAnimate(e) { e == null && (e = this._settings.stateAnimationDuration), e == null && (e = this.get("stateAnimationDuration", this._entity.get("stateAnimationDuration", 0))); let t = this._settings.stateAnimationEasing; t == null && (t = this.get("stateAnimationEasing", this._entity.get("stateAnimationEasing", Ea))); const s = this._entity.states.lookup("default"), r = {}; r.stateAnimationEasing = !0, r.stateAnimationDuration = !0; const o = {}; return this._eachSetting((u, d) => { if (!r[u]) { r[u] = !0, this != s && (u in s._settings || (s._settings[u] = this._entity.get(u))); const f = this._entity.animate({ key: u, to: d, duration: e, easing: t }); f && (o[u] = f) } }), o } } class hN { constructor(e) { Object.defineProperty(this, "_states", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_entity", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this._entity = e } lookup(e) { return this._states[e] } create(e, t) { const s = this._states[e]; if (s) return s.setAll(t), s; { const r = new dN(this._entity, t); return this._states[e] = r, r } } remove(e) { delete this._states[e] } apply(e) { const t = this._states[e]; t && t.apply(), this._entity._applyState(e) } applyAnimate(e, t) { let s; const r = this._states[e]; return r && (s = r.applyAnimate(t)), this._entity._applyStateAnimated(e, t), s } } class fN { constructor() { Object.defineProperty(this, "version", { enumerable: !0, configurable: !0, writable: !0, value: "5.15.6" }), Object.defineProperty(this, "licenses", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "entitiesById", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "rootElements", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "autoDispose", { enumerable: !0, configurable: !0, writable: !0, value: !1 }) } } const Js = new fN; function gn(l, e) { return l === e ? 0 : l < e ? -1 : 1 } function d0(l, e, t) { const s = l.length, r = e.length, o = Math.min(s, r); for (let u = 0; u < o; ++u) { const d = t(l[u], e[u]); if (d !== 0) return d } return gn(s, r) } function dy(l, e) { return l === e ? 0 : l < e ? -1 : 1 } class mN { constructor(e) { Object.defineProperty(this, "_entity", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_callbacks", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_disabled", { enumerable: !0, configurable: !0, writable: !0, value: {} }), this._entity = e } add(e, t) { let s = this._callbacks[e]; return s === void 0 && (s = this._callbacks[e] = []), s.push(t), this._entity._markDirtyKey(e), new Gt(() => { ci(s, t) && this._entity._markDirtyKey(e) }) } remove(e) { const t = this._callbacks[e]; t !== void 0 && (delete this._callbacks[e], t.length !== 0 && this._entity._markDirtyKey(e)) } enable(e) { this._disabled[e] && (delete this._disabled[e], this._entity._markDirtyKey(e)) } disable(e) { this._disabled[e] || (this._disabled[e] = !0, this._entity._markDirtyKey(e)) } fold(e, t) { if (!this._disabled[e]) { const s = this._callbacks[e]; if (s !== void 0) for (let r = 0, o = s.length; r < o; ++r)t = s[r](t, this._entity, e) } return t } } class qc { constructor(e, t, s, r, o, u, d) { Object.defineProperty(this, "_animation", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_from", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_to", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_duration", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_easing", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_loops", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_interpolate", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_oldTime", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_time", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_stopped", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_playing", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "events", { enumerable: !0, configurable: !0, writable: !0, value: new Fr }), this._animation = e, this._from = t, this._to = s, this._duration = r, this._easing = o, this._loops = u, this._interpolate = rN(t, s), this._oldTime = d } get to() { return this._to } get from() { return this._from } get playing() { return this._playing } get stopped() { return this._stopped } stop() { this._stopped || (this._stopped = !0, this._playing = !1, this.events.isEnabled("stopped") && this.events.dispatch("stopped", { type: "stopped", target: this })) } pause() { this._playing = !1, this._oldTime = null } play() { !this._stopped && !this._playing && (this._playing = !0, this._animation._startAnimation()) } get percentage() { return this._time / this._duration } waitForStop() { return new Promise((e, t) => { if (this._stopped) e(); else { const s = () => { r.dispose(), e() }, r = this.events.on("stopped", s) } }) } _checkEnded() { return this._loops > 1 ? (--this._loops, !1) : !0 } _run(e) { this._oldTime !== null && (this._time += e - this._oldTime, this._time > this._duration && (this._time = this._duration)), this._oldTime = e } _reset(e) { this._oldTime = e, this._time = 0 } _value(e) { return this._interpolate(this._easing(e), this._from, this._to) } } let pN = 0; class h0 { constructor(e) { Object.defineProperty(this, "uid", { enumerable: !0, configurable: !0, writable: !0, value: ++pN }), Object.defineProperty(this, "_settings", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_privateSettings", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_settingEvents", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_privateSettingEvents", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_prevSettings", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_prevPrivateSettings", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_animatingSettings", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_animatingPrivateSettings", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_disposed", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_userProperties", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "enableDispose", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), this._settings = e } _checkDirty() { Wi(this._settings).forEach(e => { this._userProperties[e] = !0, this._markDirtyKey(e) }) } resetUserSettings() { this._userProperties = {} } _runAnimation(e) { let t = pn.Stopped; if (!this.isDisposed()) { let s = !1, r = !1; it(this._animatingSettings, (o, u) => { if (u.stopped) this._stopAnimation(o); else if (u.playing) { u._run(e); const d = u.percentage; d >= 1 ? u._checkEnded() ? this.set(o, u._value(1)) : (s = !0, u._reset(e), this._set(o, u._value(1))) : (s = !0, this._set(o, u._value(d))) } else r = !0 }), it(this._animatingPrivateSettings, (o, u) => { if (u.stopped) this._stopAnimationPrivate(o); else if (u.playing) { u._run(e); const d = u.percentage; d >= 1 ? u._checkEnded() ? this.setPrivate(o, u._value(1)) : (s = !0, u._reset(e), this._setPrivate(o, u._value(1))) : (s = !0, this._setPrivate(o, u._value(d))) } else r = !0 }), s ? t = pn.Playing : r && (t = pn.Paused) } return t } _markDirtyKey(e) { this.markDirty() } _markDirtyPrivateKey(e) { this.markDirty() } on(e, t) { let s = this._settingEvents[e]; return s === void 0 && (s = this._settingEvents[e] = []), s.push(t), new Gt(() => { ci(s, t), s.length === 0 && delete this._settingEvents[e] }) } off(e, t) { let s = this._settingEvents[e]; s !== void 0 && t !== void 0 ? ci(s, t) : delete this._settingEvents[e] } onPrivate(e, t) { let s = this._privateSettingEvents[e]; return s === void 0 && (s = this._privateSettingEvents[e] = []), s.push(t), new Gt(() => { ci(s, t), s.length === 0 && delete this._privateSettingEvents[e] }) } offPrivate(e, t) { let s = this._privateSettingEvents[e]; s !== void 0 && t !== void 0 ? ci(s, t) : delete this._privateSettingEvents[e] } getRaw(e, t) { const s = this._settings[e]; return s !== void 0 ? s : t } has(e) { return e in this._settings } get(e, t) { return this.getRaw(e, t) } _sendKeyEvent(e, t) { const s = this._settingEvents[e]; s !== void 0 && te(s, r => { r(t, this, e) }) } _sendPrivateKeyEvent(e, t) { const s = this._privateSettingEvents[e]; s !== void 0 && te(s, r => { r(t, this, e) }) } _setRaw(e, t, s) { this._prevSettings[e] = t, this._sendKeyEvent(e, s) } setRaw(e, t) { const s = this._settings[e]; this._settings[e] = t, s !== t && this._setRaw(e, s, t) } _set(e, t) { const s = this._settings[e]; this._settings[e] = t, s !== t && (this._setRaw(e, s, t), this._markDirtyKey(e)) } _stopAnimation(e) { const t = this._animatingSettings[e]; t && (delete this._animatingSettings[e], t.stop()) } set(e, t) { return this._set(e, t), this._stopAnimation(e), t } remove(e) { e in this._settings && (this._prevSettings[e] = this._settings[e], delete this._settings[e], this._sendKeyEvent(e, void 0), this._markDirtyKey(e)), this._stopAnimation(e) } removeAll() { te(Wi(this._settings), e => { this.remove(e) }) } getPrivate(e, t) { const s = this._privateSettings[e]; return s !== void 0 ? s : t } _setPrivateRaw(e, t, s) { this._prevPrivateSettings[e] = t, this._sendPrivateKeyEvent(e, s) } setPrivateRaw(e, t) { const s = this._privateSettings[e]; this._privateSettings[e] = t, s !== t && this._setPrivateRaw(e, s, t) } _setPrivate(e, t) { const s = this._privateSettings[e]; this._privateSettings[e] = t, s !== t && (this._setPrivateRaw(e, s, t), this._markDirtyPrivateKey(e)) } _stopAnimationPrivate(e) { const t = this._animatingPrivateSettings[e]; t && (t.stop(), delete this._animatingPrivateSettings[e]) } setPrivate(e, t) { return this._setPrivate(e, t), this._stopAnimationPrivate(e), t } removePrivate(e) { e in this._privateSettings && (this._prevPrivateSettings[e] = this._privateSettings[e], delete this._privateSettings[e], this._markDirtyPrivateKey(e)), this._stopAnimationPrivate(e) } setAll(e) { it(e, (t, s) => { this.set(t, s) }) } animate(e) { const t = e.key, s = e.to, r = e.duration || 0, o = e.loops || 1, u = e.from === void 0 ? this.get(t) : e.from, d = e.easing === void 0 ? uy : e.easing; if (r === 0) this.set(t, s); else if (u === void 0 || u === s) this.set(t, s); else { this.set(t, u); const m = this._animatingSettings[t] = new qc(this, u, s, r, d, o, this._animationTime()); return this._startAnimation(), m } const f = new qc(this, u, s, r, d, o, null); return f.stop(), f } animatePrivate(e) { const t = e.key, s = e.to, r = e.duration || 0, o = e.loops || 1, u = e.from === void 0 ? this.getPrivate(t) : e.from, d = e.easing === void 0 ? uy : e.easing; if (r === 0) this.setPrivate(t, s); else if (u === void 0 || u === s) this.setPrivate(t, s); else { this.setPrivate(t, u); const m = this._animatingPrivateSettings[t] = new qc(this, u, s, r, d, o, this._animationTime()); return this._startAnimation(), m } const f = new qc(this, u, s, r, d, o, null); return f.stop(), f } _dispose() { } isDisposed() { return this._disposed } dispose() { this.enableDispose && !this._disposed && (this._disposed = !0, this._dispose()) } } class Ut extends h0 { constructor(e, t, s, r = []) { if (super(t), Object.defineProperty(this, "_root", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_user_id", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "states", { enumerable: !0, configurable: !0, writable: !0, value: new hN(this) }), Object.defineProperty(this, "adapters", { enumerable: !0, configurable: !0, writable: !0, value: new mN(this) }), Object.defineProperty(this, "events", { enumerable: !0, configurable: !0, writable: !0, value: this._createEvents() }), Object.defineProperty(this, "_userPrivateProperties", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_dirty", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_dirtyPrivate", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_template", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_templates", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_internalTemplates", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_defaultThemes", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_templateDisposers", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_disposers", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_runSetup", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "_disposerProperties", { enumerable: !0, configurable: !0, writable: !0, value: {} }), !s) throw new Error("You cannot use `new Class()`, instead use `Class.new()`"); this._root = e, this._internalTemplates = r, t.id && this._registerId(t.id) } static new(e, t, s) { const r = new this(e, t, !0); return r._template = s, r._afterNew(), r } static _new(e, t, s = []) { const r = new this(e, t, !0, s); return r._afterNew(), r } _afterNew() { this._checkDirty(); let e = !1; const t = this._template; t && (e = !0, t._setObjectTemplate(this)), te(this._internalTemplates, s => { e = !0, s._setObjectTemplate(this) }), e && this._applyTemplates(!1), this.states.create("default", {}), this._setDefaults() } _afterNewApplyThemes() { this._checkDirty(); const e = this._template; e && e._setObjectTemplate(this), te(this._internalTemplates, t => { t._setObjectTemplate(this) }), this.states.create("default", {}), this._setDefaults(), this._applyThemes() } _createEvents() { return new Fr } get classNames() { return this.constructor.classNames } get className() { return this.constructor.className } _setDefaults() { } _setDefaultFn(e, t) { const s = this.get(e); if (s) return s; { const r = t(); return this.set(e, r), r } } _setDefault(e, t) { this.has(e) || super.set(e, t) } _setRawDefault(e, t) { this.has(e) || super.setRaw(e, t) } _clearDirty() { Wi(this._dirty).forEach(e => { this._dirty[e] = !1 }), Wi(this._dirtyPrivate).forEach(e => { this._dirtyPrivate[e] = !1 }) } isDirty(e) { return !!this._dirty[e] } isPrivateDirty(e) { return !!this._dirtyPrivate[e] } _markDirtyKey(e) { this._dirty[e] = !0, super._markDirtyKey(e) } _markDirtyPrivateKey(e) { this._dirtyPrivate[e] = !0, super._markDirtyKey(e) } isType(e) { return this.classNames.indexOf(e) !== -1 } _pushPropertyDisposer(e, t) { let s = this._disposerProperties[e]; return s === void 0 && (s = this._disposerProperties[e] = []), s.push(t), t } _disposeProperty(e) { const t = this._disposerProperties[e]; t !== void 0 && (te(t, s => { s.dispose() }), delete this._disposerProperties[e]) } set template(e) { const t = this._template; t !== e && (this._template = e, t && t._removeObjectTemplate(this), e && e._setObjectTemplate(this), this._applyTemplates()) } get template() { return this._template } markDirty() { this._root._addDirtyEntity(this) } _startAnimation() { this._root._addAnimation(this) } _animationTime() { return this._root.animationTime } _applyState(e) { } _applyStateAnimated(e, t) { } get(e, t) { const s = this.adapters.fold(e, this._settings[e]); return s !== void 0 ? s : t } isUserSetting(e) { return this._userProperties[e] || !1 } set(e, t) { return this._userProperties[e] = !0, super.set(e, t) } setRaw(e, t) { this._userProperties[e] = !0, super.setRaw(e, t) } _setSoft(e, t) { return this._userProperties[e] ? t : super.set(e, t) } remove(e) { delete this._userProperties[e], this._removeTemplateProperty(e) } setPrivate(e, t) { return this._userPrivateProperties[e] = !0, super.setPrivate(e, t) } setPrivateRaw(e, t) { this._userPrivateProperties[e] = !0, super.setPrivateRaw(e, t) } removePrivate(e) { delete this._userPrivateProperties[e], this._removeTemplatePrivateProperty(e) } _setTemplateProperty(e, t, s) { if (!this._userProperties[t]) { const r = this._findTemplateByKey(t); e === r && super.set(t, s) } } _setTemplatePrivateProperty(e, t, s) { if (!this._userPrivateProperties[t]) { const r = this._findTemplateByPrivateKey(t); e === r && super.setPrivate(t, s) } } _removeTemplateProperty(e) { if (!this._userProperties[e]) { const t = this._findTemplateByKey(e); t ? super.set(e, t._settings[e]) : super.remove(e) } } _removeTemplatePrivateProperty(e) { if (!this._userPrivateProperties[e]) { const t = this._findTemplateByPrivateKey(e); t ? super.setPrivate(e, t._privateSettings[e]) : super.removePrivate(e) } } _walkParents(e) { e(this._root._rootContainer), e(this) } _applyStateByKey(e) { const t = this.states.create(e, {}), s = {}; this._eachTemplate(r => { const o = r.states.lookup(e); o && o._apply(t, s) }), it(t._settings, r => { !s[r] && !t._userSettings[r] && t.remove(r) }) } _applyTemplate(e, t) { this._templateDisposers.push(e._apply(this, t)), it(e._settings, (s, r) => { !t.settings[s] && !this._userProperties[s] && (t.settings[s] = !0, super.set(s, r)) }), it(e._privateSettings, (s, r) => { !t.privateSettings[s] && !this._userPrivateProperties[s] && (t.privateSettings[s] = !0, super.setPrivate(s, r)) }), this._runSetup && e.setup && (this._runSetup = !1, e.setup(this)) } _findStaticTemplate(e) { if (this._template && e(this._template)) return this._template } _eachTemplate(e) { this._findStaticTemplate(t => (e(t), !1)), Yl(this._internalTemplates, e), te(this._templates, e) } _applyTemplates(e = !0) { e && this._disposeTemplates(); const t = { settings: {}, privateSettings: {}, states: {} }; this._eachTemplate(s => { this._applyTemplate(s, t) }), e && (it(this._settings, s => { !this._userProperties[s] && !t.settings[s] && super.remove(s) }), it(this._privateSettings, s => { !this._userPrivateProperties[s] && !t.privateSettings[s] && super.removePrivate(s) })) } _findTemplate(e) { const t = this._findStaticTemplate(e); if (t === void 0) { const s = MS(this._internalTemplates, e); return s === void 0 ? Jv(this._templates, e) : s } else return t } _findTemplateByKey(e) { return this._findTemplate(t => e in t._settings) } _findTemplateByPrivateKey(e) { return this._findTemplate(t => e in t._privateSettings) } _disposeTemplates() { te(this._templateDisposers, e => { e.dispose() }), this._templateDisposers.length = 0 } _removeTemplates() { te(this._templates, e => { e._removeObjectTemplate(this) }), this._templates.length = 0 } _applyThemes(e = !1) { if (this.get("ignoreThemes")) return !1; let t = !1; const s = []; let r = []; const o = new Set, u = this.get("themeTagsSelf"); return u && te(u, d => { o.add(d) }), this._walkParents(d => { d === this._root._rootContainer && (t = !0), d._defaultThemes.length > 0 && s.push(d._defaultThemes); const f = d.get("themes"); f && r.push(f); const m = d.get("themeTags"); m && te(m, p => { o.add(p) }) }), r = s.concat(r), this._removeTemplates(), (t || e) && Yl(this.classNames, d => { const f = []; te(r, m => { te(m, p => { const g = p._lookupRules(d); g && Yl(g, y => { if (y.tags.every(v => o.has(v))) { const v = OS(f, k => { const j = gn(y.tags.length, k.tags.length); return j === 0 ? d0(y.tags, k.tags, gn) : j }); f.splice(v.index, 0, y) } }) }) }), te(f, m => { this._templates.push(m.template), m.template._setObjectTemplate(this) }) }), this._applyTemplates(), (t || e) && (this._runSetup = !1), t || e } _changed() { } _beforeChanged() { if (this.isDirty("id")) { const e = this.get("id"); e && this._registerId(e); const t = this._prevSettings.id; t && (delete this._root.entitiesById[t], delete Js.entitiesById[t]) } } _registerId(e) { if (this._root.entitiesById[e] && this._root.entitiesById[e] !== this) throw new Error('An entity with id "' + e + '" already exists.'); this._root.entitiesById[e] = this, Js.entitiesById[e] = this } _afterChanged() { } addDisposer(e) { return this._disposers.push(e), e } _dispose() { super._dispose(); const e = this._template; e && e._removeObjectTemplate(this), te(this._internalTemplates, s => { s._removeObjectTemplate(this) }), this._removeTemplates(), this._disposeTemplates(), this.events.dispose(), this._disposers.forEach(s => { s.dispose() }), it(this._disposerProperties, (s, r) => { te(r, o => { o.dispose() }) }); const t = this.get("id"); t && (delete this._root.entitiesById[t], delete Js.entitiesById[t]) } setTimeout(e, t) { const s = setTimeout(() => { this.removeDispose(r), e() }, t), r = new Gt(() => { clearTimeout(s) }); return this._disposers.push(r), r } removeDispose(e) { if (!this.isDisposed()) { let t = Vl(this._disposers, e); t > -1 && this._disposers.splice(t, 1) } e.dispose() } hasTag(e) { return Vl(this.get("themeTags", []), e) !== -1 } addTag(e) { if (!this.hasTag(e)) { const t = this.get("themeTags", []); t.push(e), this.set("themeTags", t) } } removeTag(e) { if (this.hasTag(e)) { const t = this.get("themeTags", []); Vi(t, e), this.set("themeTags", t) } } _t(e, t, ...s) { return this._root.language.translate(e, t, ...s) } get root() { return this._root } } Object.defineProperty(Ut, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Entity" }); Object.defineProperty(Ut, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: ["Entity"] }); function Uf(l) { it(l, (e, t) => { yo(t) && typeof t.dispose == "function" && (t.enableDispose = !0, t.dispose()) }) } class gN { constructor(e, t, s) { Object.defineProperty(this, "_settings", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_name", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_template", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this._name = e, this._template = t, this._settings = s } _dispose() { Uf(this._settings) } get(e, t) { const s = this._settings[e]; return s !== void 0 ? s : t } set(e, t) { this._settings[e] = t, this._template._stateChanged(this._name) } remove(e) { delete this._settings[e], this._template._stateChanged(this._name) } setAll(e) { Wi(e).forEach(t => { this._settings[t] = e[t] }), this._template._stateChanged(this._name) } _apply(e, t) { it(this._settings, (s, r) => { !t[s] && !e._userSettings[s] && (t[s] = !0, e.setRaw(s, r)) }) } } class bN { constructor(e) { Object.defineProperty(this, "_template", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_states", { enumerable: !0, configurable: !0, writable: !0, value: {} }), this._template = e } _dispose() { it(this._states, (e, t) => { t._dispose() }) } lookup(e) { return this._states[e] } create(e, t) { const s = this._states[e]; if (s) return s.setAll(t), s; { const r = new gN(e, this._template, t); return this._states[e] = r, this._template._stateChanged(e), r } } remove(e) { delete this._states[e], this._template._stateChanged(e) } _apply(e, t) { it(this._states, (s, r) => { let o = t.states[s]; o == null && (o = t.states[s] = {}); const u = e.states.create(s, {}); r._apply(u, o) }) } } class xN { constructor() { Object.defineProperty(this, "_callbacks", { enumerable: !0, configurable: !0, writable: !0, value: {} }) } add(e, t) { let s = this._callbacks[e]; return s === void 0 && (s = this._callbacks[e] = []), s.push(t), new Gt(() => { ci(s, t), s.length === 0 && delete this._callbacks[e] }) } remove(e) { this._callbacks[e] !== void 0 && delete this._callbacks[e] } _apply(e) { const t = []; return it(this._callbacks, (s, r) => { te(r, o => { t.push(e.adapters.add(s, o)) }) }), new Di(t) } } class at { constructor(e, t) { if (Object.defineProperty(this, "_disposed", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_settings", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_privateSettings", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_settingEvents", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_privateSettingEvents", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_entities", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "states", { enumerable: !0, configurable: !0, writable: !0, value: new bN(this) }), Object.defineProperty(this, "adapters", { enumerable: !0, configurable: !0, writable: !0, value: new xN }), Object.defineProperty(this, "events", { enumerable: !0, configurable: !0, writable: !0, value: new Fr }), Object.defineProperty(this, "setup", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), !t) throw new Error("You cannot use `new Class()`, instead use `Class.new()`"); this._settings = e } static new(e) { return new at(e, !0) } _dispose() { Uf(this._settings), Uf(this._privateSettings) } isDisposed() { return this._disposed } dispose() { this._disposed || (this._disposed = !0, this._dispose()) } _checkDisposed() { if (this._disposed) throw new Error("Template is disposed") } get entities() { return this._entities } get(e, t) { this._checkDisposed(); const s = this._settings[e]; return s !== void 0 ? s : t } setRaw(e, t) { this._checkDisposed(), this._settings[e] = t } set(e, t) { this._checkDisposed(), this._settings[e] !== t && (this.setRaw(e, t), this._entities.forEach(s => { s._setTemplateProperty(this, e, t) })) } remove(e) { this._checkDisposed(), e in this._settings && (delete this._settings[e], this._entities.forEach(t => { t._removeTemplateProperty(e) })) } removeAll() { this._checkDisposed(), it(this._settings, (e, t) => { this.remove(e) }) } getPrivate(e, t) { this._checkDisposed(); const s = this._privateSettings[e]; return s !== void 0 ? s : t } setPrivateRaw(e, t) { return this._checkDisposed(), this._privateSettings[e] = t, t } setPrivate(e, t) { return this._checkDisposed(), this._privateSettings[e] !== t && (this.setPrivateRaw(e, t), this._entities.forEach(s => { s._setTemplatePrivateProperty(this, e, t) })), t } removePrivate(e) { this._checkDisposed(), e in this._privateSettings && (delete this._privateSettings[e], this._entities.forEach(t => { t._removeTemplatePrivateProperty(e) })) } setAll(e) { this._checkDisposed(), it(e, (t, s) => { this.set(t, s) }) } on(e, t) { this._checkDisposed(); let s = this._settingEvents[e]; return s === void 0 && (s = this._settingEvents[e] = []), s.push(t), new Gt(() => { ci(s, t), s.length === 0 && delete this._settingEvents[e] }) } onPrivate(e, t) { this._checkDisposed(); let s = this._privateSettingEvents[e]; return s === void 0 && (s = this._privateSettingEvents[e] = []), s.push(t), new Gt(() => { ci(s, t), s.length === 0 && delete this._privateSettingEvents[e] }) } _apply(e, t) { this._checkDisposed(); const s = []; return it(this._settingEvents, (r, o) => { te(o, u => { s.push(e.on(r, u)) }) }), it(this._privateSettingEvents, (r, o) => { te(o, u => { s.push(e.onPrivate(r, u)) }) }), this.states._apply(e, t), s.push(this.adapters._apply(e)), s.push(e.events.copyFrom(this.events)), new Di(s) } _setObjectTemplate(e) { this._checkDisposed(), this._entities.push(e) } _removeObjectTemplate(e) { Vi(this._entities, e) } _stateChanged(e) { this._checkDisposed(), this._entities.forEach(t => { t._applyStateByKey(e) }) } } class Mu extends Fr { constructor(e) { super(), Object.defineProperty(this, "_sprite", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_rendererDisposers", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_dispatchParents", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), this._sprite = e } _makePointerEvent(e, t) { return { type: e, originalEvent: t.event, point: t.point, simulated: t.simulated, native: t.native, target: this._sprite } } _onRenderer(e, t) { this._sprite.set("interactive", !0), this._sprite._display.interactive = !0; let s = this._rendererDisposers[e]; if (s === void 0) { const r = this._sprite._display.on(e, o => { t.call(this, o) }); s = this._rendererDisposers[e] = new e0(() => { delete this._rendererDisposers[e], r.dispose() }) } return s.increment() } _on(e, t, s, r, o, u, d) { const f = super._on(e, t, s, r, o, u, d), m = Mu.RENDERER_EVENTS[t]; return m !== void 0 && (f.disposer = new Di([f.disposer, this._onRenderer(t, m)])), f } stopParentDispatch() { this._dispatchParents = !1 } dispatchParents(e, t) { const s = this._dispatchParents; this._dispatchParents = !0; try { this.dispatch(e, t), this._dispatchParents && this._sprite.parent && this._sprite.parent.events.dispatchParents(e, t) } finally { this._dispatchParents = s } } } Object.defineProperty(Mu, "RENDERER_EVENTS", { enumerable: !0, configurable: !0, writable: !0, value: { click: function (l) { this.isEnabled("click") && !this._sprite.isDragging() && this._sprite._hasDown() && !this._sprite._hasMoved(this._makePointerEvent("click", l)) && this.dispatch("click", this._makePointerEvent("click", l)) }, rightclick: function (l) { this.isEnabled("rightclick") && this.dispatch("rightclick", this._makePointerEvent("rightclick", l)) }, middleclick: function (l) { this.isEnabled("middleclick") && this.dispatch("middleclick", this._makePointerEvent("middleclick", l)) }, dblclick: function (l) { this.dispatchParents("dblclick", this._makePointerEvent("dblclick", l)) }, pointerover: function (l) { const e = this._sprite; let t = !0; if (e.getPrivate("trustBounds")) { e._getBounds(); const s = e.globalBounds(); if (e.isType("Graphics")) { const r = e.get("strokeWidth", 1) / 2; r >= 1 && (s.left -= r, s.right += r, s.top -= r, s.bottom += r) } uN(l.point, s) || (t = !1, e._root._renderer.removeHovering(e._display)) } t && this.isEnabled("pointerover") && this.dispatch("pointerover", this._makePointerEvent("pointerover", l)) }, pointerout: function (l) { this.isEnabled("pointerout") && this.dispatch("pointerout", this._makePointerEvent("pointerout", l)) }, pointerdown: function (l) { this.dispatchParents("pointerdown", this._makePointerEvent("pointerdown", l)) }, pointerup: function (l) { this.isEnabled("pointerup") && this.dispatch("pointerup", this._makePointerEvent("pointerup", l)) }, globalpointerup: function (l) { this.isEnabled("globalpointerup") && this.dispatch("globalpointerup", this._makePointerEvent("globalpointerup", l)) }, globalpointermove: function (l) { this.isEnabled("globalpointermove") && this.dispatch("globalpointermove", this._makePointerEvent("globalpointermove", l)) }, wheel: function (l) { this.dispatchParents("wheel", { type: "wheel", target: this._sprite, originalEvent: l.event, point: l.point }) } } }); class vs extends Ut { constructor() { super(...arguments), Object.defineProperty(this, "_adjustedLocalBounds", { enumerable: !0, configurable: !0, writable: !0, value: { left: 0, right: 0, top: 0, bottom: 0 } }), Object.defineProperty(this, "_localBounds", { enumerable: !0, configurable: !0, writable: !0, value: { left: 0, right: 0, top: 0, bottom: 0 } }), Object.defineProperty(this, "_parent", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_dataItem", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_templateField", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_sizeDirty", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_isDragging", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_dragEvent", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_dragPoint", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_isHidden", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_isShowing", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_isHiding", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_isDown", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_downPoint", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_downPoints", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_toggleDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_dragDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_tooltipDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_hoverDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_focusDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_tooltipMoveDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_tooltipPointerDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_virtualParent", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }) } _afterNew() { this.setPrivateRaw("visible", !0), super._afterNew() } markDirtyKey(e) { this._markDirtyKey(e) } _markDirtyKey(e) { super._markDirtyKey(e), (e == "x" || e == "y" || e == "dx" || e == "dy") && (this.markDirtyBounds(), this._addPercentagePositionChildren(), this.markDirtyPosition()) } _markDirtyPrivateKey(e) { super._markDirtyPrivateKey(e), (e == "x" || e == "y") && this.markDirtyPosition() } _removeTemplateField() { this._templateField && this._templateField._removeObjectTemplate(this) } _createEvents() { return new Mu(this) } _processTemplateField() { let e; const t = this.get("templateField"); if (t) { const s = this.dataItem; if (s) { const r = s.dataContext; r && (e = r[t], !(e instanceof at) && e && (e = at.new(e))) } } this._templateField !== e && (this._removeTemplateField(), this._templateField = e, e && e._setObjectTemplate(this), this._applyTemplates()) } _setDataItem(e) { const t = this._dataItem; this._dataItem = e, this._processTemplateField(); const s = "dataitemchanged"; e != t && this.events.isEnabled(s) && this.events.dispatch(s, { type: s, target: this, oldDataItem: t, newDataItem: e }) } set dataItem(e) { this._setDataItem(e) } get dataItem() { if (this._dataItem) return this._dataItem; { let e = this._parent; for (; e;) { if (e._dataItem) return e._dataItem; e = e._parent } } } _addPercentageSizeChildren() { let e = this.parent; e && (this.get("width") instanceof Ie || this.get("height") instanceof Ie ? Wl(e._percentageSizeChildren, this) : ci(e._percentageSizeChildren, this)) } _addPercentagePositionChildren() { let e = this.parent; e && (this.get("x") instanceof Ie || this.get("y") instanceof Ie ? Wl(e._percentagePositionChildren, this) : ci(e._percentagePositionChildren, this)) } markDirtyPosition() { this._root._addDirtyPosition(this) } updatePivotPoint() { const e = this._localBounds; if (e) { const t = this.get("centerX"); t != null && (this._display.pivot.x = e.left + mt(t, e.right - e.left)); const s = this.get("centerY"); s != null && (this._display.pivot.y = e.top + mt(s, e.bottom - e.top)) } } _beforeChanged() { if (super._beforeChanged(), this._handleStates(), this.isDirty("tooltip")) { const e = this._prevSettings.tooltip; e && e.dispose() } if ((this.isDirty("layer") || this.isDirty("layerMargin")) && (this._display.setLayer(this.get("layer"), this.get("layerMargin")), this.markDirtyLayer()), this.isDirty("tooltipPosition")) { const e = this._tooltipMoveDp; e && (e.dispose(), this._tooltipMoveDp = void 0); const t = this._tooltipPointerDp; t && (t.dispose(), this._tooltipPointerDp = void 0), this.get("tooltipPosition") == "pointer" && (this.isHover() && (this._tooltipMoveDp = this.events.on("globalpointermove", s => { this.showTooltip(s.point) })), this._tooltipPointerDp = new Di([this.events.on("pointerover", () => { this._tooltipMoveDp = this.events.on("globalpointermove", s => { this.showTooltip(s.point) }) }), this.events.on("pointerout", () => { const s = this._tooltipMoveDp; s && (s.dispose(), this._tooltipMoveDp = void 0) })])) } } _handleStates() { this.isDirty("active") && (this.get("active") ? (this.states.applyAnimate("active"), this.set("ariaChecked", !0)) : (this.isHidden() || this.states.applyAnimate("default"), this.set("ariaChecked", !1)), this.markDirtyAccessibility()), this.isDirty("disabled") && (this.get("disabled") ? (this.states.applyAnimate("disabled"), this.set("ariaChecked", !1)) : (this.isHidden() || this.states.applyAnimate("default"), this.set("ariaChecked", !0)), this.markDirtyAccessibility()) } _changed() { super._changed(); const e = this._display, t = this.events; if (this.isDirty("draggable")) { const r = this.get("draggable"); r ? (this.set("interactive", !0), this._dragDp = new Di([t.on("pointerdown", o => { this.dragStart(o) }), t.on("globalpointermove", o => { this.dragMove(o) }), t.on("globalpointerup", o => { this.dragStop(o) })])) : this._dragDp && (this._dragDp.dispose(), this._dragDp = void 0), e.cancelTouch = !!r } if (this.isDirty("tooltipText") || this.isDirty("tooltipHTML") || this.isDirty("showTooltipOn")) { const r = this.get("tooltipText"), o = this.get("tooltipHTML"), u = this.get("showTooltipOn", "hover"); this._tooltipDp && (this._tooltipDp.dispose(), this._tooltipDp = void 0), (r || o) && (u == "click" ? (this._tooltipDp = new Di([t.on("click", () => { this.setTimeout(() => { const d = this.getTooltip(); d && !d.isHidden() && d.get("tooltipTarget") === this ? this.hideTooltip() : this.showTooltip() }, 10) }), jt(document, "click", d => { this.hideTooltip() })]), this._disposers.push(this._tooltipDp)) : u == "always" || (this._tooltipDp = new Di([t.on("pointerover", () => { this.showTooltip() }), t.on("pointerout", () => { this.hideTooltip() })]), this._disposers.push(this._tooltipDp))) } if (this.isDirty("toggleKey")) { let r = this.get("toggleKey"); r && r != "none" ? this._toggleDp = t.on("click", () => { this._isDragging || this.set(r, !this.get(r)) }) : this._toggleDp && (this._toggleDp.dispose(), this._toggleDp = void 0) } if (this.isDirty("opacity") && (e.alpha = Math.max(0, this.get("opacity", 1)), this.get("focusable") && this.markDirtyAccessibility()), this.isDirty("rotation") && (this.markDirtyBounds(), e.angle = this.get("rotation", 0)), this.isDirty("scale") && (this.markDirtyBounds(), e.scale = this.get("scale", 0)), (this.isDirty("centerX") || this.isDirty("centerY")) && (this.markDirtyBounds(), this.updatePivotPoint()), (this.isDirty("visible") || this.isPrivateDirty("visible") || this.isDirty("forceHidden")) && (!this.get("visible") || !this.getPrivate("visible") || this.get("forceHidden") ? (e.visible = !1, this.hideTooltip()) : e.visible = !0, this.markDirtyBounds(), this.get("focusable") && this.markDirtyAccessibility()), this.isDirty("width") || this.isDirty("height")) { this.markDirtyBounds(), this._addPercentageSizeChildren(); const r = this.parent; r && (this.isDirty("width") && this.get("width") instanceof Ie || this.isDirty("height") && this.get("height") instanceof Ie) && (r.markDirty(), r._prevWidth = 0), this._sizeDirty = !0 } if ((this.isDirty("maxWidth") || this.isDirty("maxHeight") || this.isPrivateDirty("width") || this.isPrivateDirty("height") || this.isDirty("minWidth") || this.isDirty("minHeight") || this.isPrivateDirty("maxWidth") || this.isPrivateDirty("maxHeight") || this.isPrivateDirty("minWidth") || this.isPrivateDirty("minHeight") || this.isDirty("marginLeft") || this.isDirty("marginTop") || this.isDirty("marginRight") || this.isDirty("marginBottom")) && (this.markDirtyBounds(), this._sizeDirty = !0), this._sizeDirty && this._updateSize(), this.isDirty("wheelable")) { const r = this.get("wheelable"); r && this.set("interactive", !0), e.wheelable = !!r } (this.isDirty("tabindexOrder") || this.isDirty("focusableGroup")) && (this.get("focusable") ? this._root._registerTabindexOrder(this) : this._root._unregisterTabindexOrder(this)), this.isDirty("filter") && (e.filter = this.get("filter")); let s = this.get("filter", ""); if (this.isDirty("blur")) { const r = this.get("blur", 0); r != 0 && (s += " blur(" + r + "px)") } if (this.isDirty("saturate")) { const r = this.get("saturate", 1); r != 1 && (s += " saturate(" + r + ")") } if (this.isDirty("brightness")) { const r = this.get("brightness", 1); r != 1 && (s += " brightness(" + r + ")") } if (this.isDirty("contrast")) { const r = this.get("contrast", 1); r != 1 && (s += " contrast(" + r + ")") } if (this.isDirty("sepia")) { const r = this.get("sepia", 0); r != 0 && (s += " sepia(" + r + ")") } if (this.isDirty("hue")) { const r = this.get("hue", 0); r != 0 && (s += " hue-rotate(" + r + "deg)") } if (this.isDirty("invert")) { const r = this.get("invert", 0); r != 0 && (s += " invert(" + r + ")") } if (s && (e.filter = s), this.isDirty("cursorOverStyle") && (e.cursorOverStyle = this.get("cursorOverStyle")), this.isDirty("hoverOnFocus") && (this.get("hoverOnFocus") ? this._focusDp = new Di([t.on("focus", () => { this.showTooltip() }), t.on("blur", () => { this.hideTooltip() })]) : this._focusDp && (this._focusDp.dispose(), this._focusDp = void 0)), this.isDirty("focusable") && (this.get("focusable") ? this._root._registerTabindexOrder(this) : this._root._unregisterTabindexOrder(this), this.markDirtyAccessibility(), this._disposers.push(t.on("blur", () => { this.setPrivateRaw("touchHovering", !1) })), this._disposers.push(t.once("boundschanged", () => { this.markDirtyAccessibility() }))), this.isPrivateDirty("focusable") && this.markDirtyAccessibility(), (this.isDirty("role") || this.isDirty("ariaLive") || this.isDirty("ariaChecked") || this.isDirty("ariaHidden") || this.isDirty("ariaOrientation") || this.isDirty("ariaValueNow") || this.isDirty("ariaValueMin") || this.isDirty("ariaValueMax") || this.isDirty("ariaValueText") || this.isDirty("ariaLabel") || this.isDirty("ariaControls")) && this.markDirtyAccessibility(), this.isDirty("exportable") && (e.exportable = this.get("exportable")), this.isDirty("interactive")) { const r = this.events; this.get("interactive") && !r.isDisposed() ? this._hoverDp = new Di([r.on("click", o => { Yf(o.originalEvent) && (this.getPrivate("touchHovering") || this.setTimeout(() => { this._handleOver(), (this.get("tooltipText") || this.get("tooltipHTML")) && this.showTooltip(), this.setPrivateRaw("touchHovering", !0), this.events.dispatch("pointerover", { type: "pointerover", target: o.target, originalEvent: o.originalEvent, point: o.point, simulated: o.simulated }) }, 10)) }), r.on("globalpointerup", o => { Yf(o.originalEvent) && this.getPrivate("touchHovering") && (this._handleOut(), (this.get("tooltipText") || this.get("tooltipHTML")) && this.hideTooltip(), this.setPrivateRaw("touchHovering", !1), this.events.dispatch("pointerout", { type: "pointerout", target: o.target, originalEvent: o.originalEvent, point: o.point, simulated: o.simulated })), this._isDown && this._handleUp(o) }), r.on("pointerover", () => { this._handleOver() }), r.on("pointerout", () => { this._handleOut() }), r.on("pointerdown", o => { this._handleDown(o) })]) : (this._display.interactive = !1, this._hoverDp && (this._hoverDp.dispose(), this._hoverDp = void 0)) } this.isDirty("forceInactive") && (this._display.inactive = this.get("forceInactive", null)), this.get("showTooltipOn") == "always" && this._display.visible && this.showTooltip() } dragStart(e) { this._dragEvent = e, this.events.stopParentDispatch() } dragStop(e) { if (this._dragEvent = void 0, this._dragPoint = void 0, this.events.stopParentDispatch(), this._isDragging) { this._isDragging = !1; const t = "dragstop"; this.events.isEnabled(t) && this.events.dispatch(t, { type: t, target: this, originalEvent: e.originalEvent, point: e.point, simulated: e.simulated }) } } _handleOver() { this.isHidden() || (this.get("active") && this.states.lookup("hoverActive") ? this.states.applyAnimate("hoverActive") : this.get("disabled") && this.states.lookup("hoverDisabled") ? this.states.applyAnimate("hoverDisabled") : this.states.applyAnimate("hover"), this.get("draggable") && this._isDown && this.states.lookup("down") && this.states.applyAnimate("down")) } _handleOut() { this.isHidden() || (this.get("active") && this.states.lookup("active") ? this.states.applyAnimate("active") : this.get("disabled") && this.states.lookup("disabled") ? this.states.applyAnimate("disabled") : (this.states.lookup("hover") || this.states.lookup("hoverActive")) && this.states.applyAnimate("default"), this.get("draggable") && this._isDown && this.states.lookup("down") && this.states.applyAnimate("down")) } _handleUp(e) { if (!this.isHidden()) { this.get("active") && this.states.lookup("active") ? this.states.applyAnimate("active") : this.get("disabled") && this.states.lookup("disabled") ? this.states.applyAnimate("disabled") : this.states.lookup("down") && (this.isHover() ? this.states.applyAnimate("hover") : this.states.applyAnimate("default")), this._downPoint = void 0; const t = pf(e.originalEvent); delete this._downPoints[t], Wi(this._downPoints).length == 0 && (this._isDown = !1) } } _hasMoved(e) { const t = pf(e.originalEvent), s = this._downPoints[t]; if (s) { const r = Math.abs(s.x - e.point.x), o = Math.abs(s.y - e.point.y); return r > 5 || o > 5 } return !1 } _hasDown() { return Wi(this._downPoints).length > 0 } _handleDown(e) { const t = this.parent; if (t && !this.get("draggable") && t._handleDown(e), this.get("interactive") && !this.isHidden()) { this.states.lookup("down") && this.states.applyAnimate("down"), this._downPoint = { x: e.point.x, y: e.point.y }, this._isDown = !0; const s = pf(e.originalEvent); this._downPoints[s] = { x: e.point.x, y: e.point.y } } } dragMove(e) { let t = this._dragEvent; if (t) { if (t.simulated && !e.simulated) return !0; let s = 0, r = this.parent, o = 1; for (; r != null;)s += r.get("rotation", 0), r = r.parent, r && (o *= r.get("scale", 1)); let u = (e.point.x - t.point.x) / o, d = (e.point.y - t.point.y) / o; const f = this.events; if (t.simulated && !this._isDragging) { this._isDragging = !0, this._dragEvent = e, this._dragPoint = { x: this.x(), y: this.y() }; const m = "dragstart"; f.isEnabled(m) && f.dispatch(m, { type: m, target: this, originalEvent: e.originalEvent, point: e.point, simulated: e.simulated }) } if (this._isDragging) { let m = this._dragPoint; this.set("x", m.x + u * Wt(s) + d * zt(s)), this.set("y", m.y + d * Wt(s) - u * zt(s)); const p = "dragged"; f.isEnabled(p) && f.dispatch(p, { type: p, target: this, originalEvent: e.originalEvent, point: e.point, simulated: e.simulated }) } else if (Math.hypot(u, d) > 5) { this._isDragging = !0, this._dragEvent = e, this._dragPoint = { x: this.x(), y: this.y() }; const m = "dragstart"; f.isEnabled(m) && f.dispatch(m, { type: m, target: this, originalEvent: e.originalEvent, point: e.point, simulated: e.simulated }) } } } _updateSize() { } _getBounds() { this._localBounds = this._display.getLocalBounds() } depth() { let e = this.parent, t = 0; for (; ;)if (e) ++t, e = e.parent; else return t } markDirtySize() { this._sizeDirty = !0, this.markDirty() } markDirtyBounds() { const e = this._display; if (this.get("isMeasured")) { this._root._addDirtyBounds(this), e.isMeasured = !0, e.invalidateBounds(); const t = this.parent; t && this.get("position") != "absolute" && (t.get("width") == null || t.get("height") == null || t.get("layout")) && t.markDirtyBounds(), this.get("focusable") && this.markDirtyAccessibility() } } markDirtyAccessibility() { this._root._invalidateAccessibility(this) } markDirtyLayer() { this._display.markDirtyLayer(!0) } markDirty() { super.markDirty(), this.markDirtyLayer() } _updateBounds() { const e = this._adjustedLocalBounds; let t; if (!this.get("visible") || !this.getPrivate("visible") || this.get("forceHidden") ? (t = { left: 0, right: 0, top: 0, bottom: 0 }, this._localBounds = t, this._adjustedLocalBounds = t) : (this._getBounds(), this._fixMinBounds(this._localBounds), this.updatePivotPoint(), this._adjustedLocalBounds = this._display.getAdjustedBounds(this._localBounds), t = this._adjustedLocalBounds), !e || e.left !== t.left || e.top !== t.top || e.right !== t.right || e.bottom !== t.bottom) { const s = "boundschanged"; this.events.isEnabled(s) && this.events.dispatch(s, { type: s, target: this }), this.parent && (this.parent.markDirty(), this.parent.markDirtyBounds()), this.getPrivate("showingTooltip") && this.showTooltip() } } _fixMinBounds(e) { let t = this.get("minWidth", this.getPrivate("minWidth")), s = this.get("minHeight", this.getPrivate("minHeight")); le(t) && e.right - e.left < t && (e.right = e.left + t), le(s) && e.bottom - e.top < s && (e.bottom = e.top + s); let r = this.getPrivate("width"), o = this.getPrivate("height"); le(r) && (r > 0 ? e.right = e.left + r : e.left = e.right + r), le(o) && (o > 0 ? e.bottom = e.top + o : e.top = e.bottom + o) } _removeParent(e) { e && (e.children.removeValue(this), ci(e._percentageSizeChildren, this), ci(e._percentagePositionChildren, this)) } _clearDirty() { super._clearDirty(), this._sizeDirty = !1 } hover() { this.isDisposed() || (this.showTooltip(), this._handleOver()) } unhover() { this.isDisposed() || (this.hideTooltip(), this._handleOut()) } showTooltip(e) { if (!this.isDisposed()) { const t = this.getTooltip(), s = this.get("tooltipText"), r = this.get("tooltipHTML"); if ((s || r) && t) { const o = this.get("tooltipPosition"), u = this.getPrivate("tooltipTarget", this); if ((o == "fixed" || !e) && (this._display._setMatrix(), e = this.toGlobal(u._getTooltipPoint())), o == "pointer") { const m = this.getPrivate("lastTooltipCoords"); if (m && m.x == e.x && m.y == e.y) return; this.setPrivate("lastTooltipCoords", e) } t.set("pointTo", e), t.set("tooltipTarget", u), t.get("x") || t.set("x", e.x), t.get("y") || t.set("y", e.y), s && t.label.set("text", s), r && t.label.set("html", r); const d = this.dataItem; if (d && t.label._setDataItem(d), this.get("showTooltipOn") == "always" && (e.x < 0 || e.x > this._root.width() || e.y < 0 || e.y > this._root.height())) { this.hideTooltip(); return } t.label.text.markDirtyText(); const f = t.show(); return this.setPrivateRaw("showingTooltip", !0), f } } } hideTooltip() { const e = this.getTooltip(); if (e && (this.removePrivate("lastTooltipCoords"), e.get("tooltipTarget") == this.getPrivate("tooltipTarget", this) || this.get("tooltip") == e)) { let t = e.get("keepTargetHover") && e.get("stateAnimationDuration", 0) == 0 ? 400 : void 0; const s = e.hide(t); return this.setPrivateRaw("showingTooltip", !1), s } } _getTooltipPoint() { const e = this._localBounds; if (e) { let t = 0, s = 0; return this.get("isMeasured") ? (t = e.left + mt(this.get("tooltipX", 0), e.right - e.left), s = e.top + mt(this.get("tooltipY", 0), e.bottom - e.top)) : (t = mt(this.get("tooltipX", 0), this.width()), s = mt(this.get("tooltipY", 0), this.height())), { x: t, y: s } } return { x: 0, y: 0 } } getTooltip() { let e = this.get("tooltip"); if (e) return e; { let t = this.parent; if (t) return t.getTooltip() } } _updatePosition() { const e = this.parent; let t = this.get("dx", 0), s = this.get("dy", 0), r = this.get("x"), o = this.getPrivate("x"), u = 0, d = 0; const f = this.get("position"); r instanceof Ie && (e ? r = e.innerWidth() * r.value + e.get("paddingLeft", 0) : r = 0), le(r) ? u = r + t : o != null ? u = o : e && f == "relative" && (u = e.get("paddingLeft", 0) + t); let m = this.get("y"), p = this.getPrivate("y"); m instanceof Ie && (e ? m = e.innerHeight() * m.value + e.get("paddingTop", 0) : m = 0), le(m) ? d = m + s : p != null ? d = p : e && f == "relative" && (d = e.get("paddingTop", 0) + s); const g = this._display; if (g.x != u || g.y != d) { g.invalidateBounds(), g.x = u, g.y = d; const y = "positionchanged"; this.events.isEnabled(y) && this.events.dispatch(y, { type: y, target: this }) } this.getPrivate("showingTooltip") && this.showTooltip() } x() { let e = this.get("x"), t = this.getPrivate("x"); const s = this.parent; return s ? e instanceof Ie ? mt(e, s.innerWidth()) + s.get("paddingLeft", 0) : le(e) ? e : t ?? s.get("paddingLeft", this._display.x) : this._display.x } y() { let e = this.getPrivate("y"); if (e != null) return e; let t = this.get("y"); const s = this.parent; return s ? t instanceof Ie ? mt(t, s.innerHeight()) + s.get("paddingTop", 0) : le(t) ? t : e ?? s.get("paddingTop", this._display.y) : this._display.y } _dispose() { super._dispose(), this._display.dispose(), this._removeTemplateField(), this._removeParent(this.parent), this._root._removeFocusElement(this); const e = this.get("tooltip"); e && e.dispose(), this.markDirty() } adjustedLocalBounds() { return this._fixMinBounds(this._adjustedLocalBounds), this._adjustedLocalBounds } localBounds() { return this._localBounds } bounds() { const e = this._adjustedLocalBounds, t = this.x(), s = this.y(); return { left: e.left + t, right: e.right + t, top: e.top + s, bottom: e.bottom + s } } globalBounds() { const e = this.localBounds(), t = this.toGlobal({ x: e.left, y: e.top }), s = this.toGlobal({ x: e.right, y: e.top }), r = this.toGlobal({ x: e.right, y: e.bottom }), o = this.toGlobal({ x: e.left, y: e.bottom }); return { left: Math.min(t.x, s.x, r.x, o.x), top: Math.min(t.y, s.y, r.y, o.y), right: Math.max(t.x, s.x, r.x, o.x), bottom: Math.max(t.y, s.y, r.y, o.y) } } _onShow(e) { } _onHide(e) { } appear(e, t) { return Mt(this, void 0, void 0, function* () { return yield this.hide(0), t ? new Promise((s, r) => { this.setTimeout(() => { s(this.show(e)) }, t) }) : this.show(e) }) } show(e) { return Mt(this, void 0, void 0, function* () { if (!this._isShowing) { this._isHidden = !1, this._isShowing = !0, this._isHiding = !1, this.states.lookup("default").get("visible") && this.set("visible", !0), this._onShow(e); const t = this.states.applyAnimate("default", e); yield cy(t), this._isShowing = !1 } }) } hide(e) { return Mt(this, void 0, void 0, function* () { if (!this._isHiding && !this._isHidden) { this._isHiding = !0, this._isShowing = !1; let t = this.states.lookup("hidden"); t || (t = this.states.create("hidden", { opacity: 0, visible: !1 })), this._isHidden = !0, this._onHide(e); const s = this.states.applyAnimate("hidden", e); yield cy(s), this._isHiding = !1 } }) } isHidden() { return this._isHidden } isShowing() { return this._isShowing } isHiding() { return this._isHiding } isHover() { return this._display.hovering() } isFocus() { return this._root.focused(this) } isDragging() { return this._isDragging } isVisible() { return !!(this.get("visible") && this.getPrivate("visible") && !this.get("forceHidden")) } isVisibleDeep() { return this._parent ? this._parent.isVisibleDeep() && this.isVisible() : this.isVisible() } compositeOpacity() { const e = this.get("opacity", 1); return this._parent ? this._parent.compositeOpacity() * e : e } compositeScale() { const e = this.get("scale", 1); return this._parent ? this._parent.compositeScale() * e : e } compositeRotation() { const e = this.get("rotation", 0); return this._parent ? this._parent.compositeRotation() + e : e } width() { let e = this.get("width"), t = this.get("maxWidth", this.getPrivate("maxWidth")), s = this.get("minWidth", this.getPrivate("minWidth")), r = this.getPrivate("width"), o = 0; if (le(r)) o = r; else if (e == null) this._adjustedLocalBounds && (o = this._adjustedLocalBounds.right - this._adjustedLocalBounds.left); else if (e instanceof Ie) { const u = this.parent; u ? o = u.innerWidth() * e.value : o = this._root.width() * e.value } else le(e) && (o = e); return le(s) && (o = Math.max(s, o)), le(t) && (o = Math.min(t, o)), o } maxWidth() { let e = this.get("maxWidth", this.getPrivate("maxWidth")); if (le(e)) return e; { let s = this.get("width"); if (le(s)) return s } const t = this.parent; return t ? t.innerWidth() : this._root.width() } maxHeight() { let e = this.get("maxHeight", this.getPrivate("maxHeight")); if (le(e)) return e; { let s = this.get("height"); if (le(s)) return s } const t = this.parent; return t ? t.innerHeight() : this._root.height() } height() { let e = this.get("height"), t = this.get("maxHeight", this.getPrivate("maxHeight")), s = this.get("minHeight", this.getPrivate("minHeight")), r = this.getPrivate("height"), o = 0; if (le(r)) o = r; else if (e == null) this._adjustedLocalBounds && (o = this._adjustedLocalBounds.bottom - this._adjustedLocalBounds.top); else if (e instanceof Ie) { const u = this.parent; u ? o = u.innerHeight() * e.value : o = this._root.height() * e.value } else le(e) && (o = e); return le(s) && (o = Math.max(s, o)), le(t) && (o = Math.min(t, o)), o } _findStaticTemplate(e) { return this._templateField && e(this._templateField) ? this._templateField : super._findStaticTemplate(e) } _walkParents(e) { (this._parent || this._virtualParent) && this._walkParent(e) } _walkParent(e) { this._parent ? this._parent._walkParent(e) : this._virtualParent && this._virtualParent._walkParent(e), e(this) } set virtualParent(e) { this._virtualParent !== e && (this._virtualParent = e, this._applyThemes()) } get parent() { return this._parent } _setParent(e, t = !1) { const s = this._parent; e !== s && (this.markDirtyBounds(), e.markDirty(), this._parent = e, t && (this._removeParent(s), e && (this._addPercentageSizeChildren(), this._addPercentagePositionChildren())), this.markDirtyPosition(), this._applyThemes()) } getNumberFormatter() { return this.get("numberFormatter", this._root.numberFormatter) } getDateFormatter() { return this.get("dateFormatter", this._root.dateFormatter) } getDurationFormatter() { return this.get("durationFormatter", this._root.durationFormatter) } toGlobal(e) { return this._display.toGlobal(e) } toLocal(e) { return this._display.toLocal(e) } _getDownPoint() { const e = this._getDownPointId(); if (e) return this._downPoints[e] } _getDownPointId() { if (this._downPoints) return ES(this._downPoints, (e, t) => e > t ? 1 : e < t ? -1 : 0)[0] } toFront() { const e = this.parent; e && e.children.moveValue(this, e.children.length - 1) } toBack() { const e = this.parent; e && e.children.moveValue(this, 0) } } Object.defineProperty(vs, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Sprite" }); Object.defineProperty(vs, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Ut.classNames.concat([vs.className]) }); class Gl extends Ut { constructor() { super(...arguments), Object.defineProperty(this, "_display", { enumerable: !0, configurable: !0, writable: !0, value: this._root._renderer.makeGraphics() }), Object.defineProperty(this, "_backgroundDisplay", { enumerable: !0, configurable: !0, writable: !0, value: this._root._renderer.makeGraphics() }), Object.defineProperty(this, "_clear", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_pattern", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }) } _afterNew() { super._afterNewApplyThemes() } get pattern() { return this._pattern } _draw() { } _beforeChanged() { super._beforeChanged(), (this.isDirty("repetition") || this.isDirty("width") || this.isDirty("height") || this.isDirty("rotation") || this.isDirty("strokeWidth") || this.isDirty("strokeDasharray") || this.isDirty("strokeDashoffset") || this.isDirty("colorOpacity") || this.isDirty("fillOpacity")) && (this._clear = !0), this._checkDirtyFill() } _checkDirtyFill() { (this.isDirty("color") || this.isDirty("fill")) && (this._clear = !0) } _changed() { if (super._changed(), this._clear) { const e = this.get("repetition", ""), t = this.get("width", 100), s = this.get("height", 100), r = this.get("fill"), o = this.get("fillOpacity", 1), u = this._backgroundDisplay, d = this._display; d.clear(), u.clear(), r && o > 0 && (u.beginFill(r, o), u.drawRect(0, 0, t, s), u.endFill()), d.angle = this.get("rotation", 0), this._draw(), this._pattern = this._root._renderer.createPattern(d, u, e, t, s) } this._clear = !1 } } Object.defineProperty(Gl, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Pattern" }); Object.defineProperty(Gl, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Ut.classNames.concat([Gl.className]) }); class $l extends Gl { constructor() { super(...arguments), Object.defineProperty(this, "_image", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }) } _beforeChanged() { super._beforeChanged(), this._clear = !0, this.isDirty("src") && this._load(); const e = this.get("canvas"); e && (this.set("width", e.width), this.set("height", e.height)) } _draw() { super._draw(); const e = this.get("colorOpacity"); e !== void 0 && (this._display.alpha = Math.max(0, e)); const t = this._image; if (t) { const r = this.get("width", 100), o = this.get("height", 100), u = this.get("fit", "image"); let d = 0, f = 0; u == "pattern" ? (d = r, f = o, this.markDirty()) : (d = t.width, f = t.height, u == "image" && (this.set("width", d), this.set("height", f))); const m = this.get("centered", !0); let p = 0, g = 0; m && (p = r / 2 - d / 2, g = o / 2 - f / 2), this._display.image(t, d, f, p, g) } const s = this.get("canvas"); s && this._display.image(s, s.width, s.height, 0, 0) } _load() { const e = this.get("src"); if (e) { const t = new Image; t.src = e, t.decode().then(() => { this._image = t, this._draw(), this.events.isEnabled("loaded") && this.events.dispatch("loaded", { type: "loaded", target: this }) }).catch(s => { }) } } } Object.defineProperty($l, "className", { enumerable: !0, configurable: !0, writable: !0, value: "PicturePattern" }); Object.defineProperty($l, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Gl.classNames.concat([$l.className]) }); var lu; (function (l) { l.ADD = "lighter", l.COLOR = "color", l.COLOR_BURN = "color-burn", l.COLOR_DODGE = "color-dodge", l.DARKEN = "darken", l.DIFFERENCE = "difference", l.DST_OVER = "destination-over", l.EXCLUSION = "exclusion", l.HARD_LIGHT = "hard-light", l.HUE = "hue", l.LIGHTEN = "lighten", l.LUMINOSITY = "luminosity", l.MULTIPLY = "multiply", l.NORMAL = "source-over", l.OVERLAY = "overlay", l.SATURATION = "saturation", l.SCREEN = "screen", l.SOFT_LIGHT = "soft-light", l.SRC_ATOP = "source-atop", l.XOR = "xor" })(lu || (lu = {})); const Vf = ["fill", "fillOpacity", "stroke", "strokeWidth", "strokeOpacity", "fillPattern", "strokePattern", "fillGradient", "strokeGradient", "strokeDasharray", "strokeDashoffset", "shadowBlur", "shadowColor", "shadowOpacity", "shadowOffsetX", "shadowOffsetY", "blur", "sepia", "invert", "brightness", "hue", "contrast", "saturate"]; class Qe extends vs { constructor() { super(...arguments), Object.defineProperty(this, "_display", { enumerable: !0, configurable: !0, writable: !0, value: this._root._renderer.makeGraphics() }), Object.defineProperty(this, "_clear", { enumerable: !0, configurable: !0, writable: !0, value: !1 }) } _beforeChanged() { if (super._beforeChanged(), (this.isDirty("draw") || this.isDirty("svgPath")) && this.markDirtyBounds(), (this.isDirty("fill") || this.isDirty("stroke") || this.isDirty("visible") || this.isDirty("forceHidden") || this.isDirty("scale") || this.isDirty("fillGradient") || this.isDirty("strokeGradient") || this.isDirty("fillPattern") || this.isDirty("strokePattern") || this.isDirty("fillOpacity") || this.isDirty("strokeOpacity") || this.isDirty("strokeWidth") || this.isDirty("draw") || this.isDirty("blendMode") || this.isDirty("strokeDasharray") || this.isDirty("strokeDashoffset") || this.isDirty("svgPath") || this.isDirty("lineJoin") || this.isDirty("lineCap") || this.isDirty("shadowColor") || this.isDirty("shadowBlur") || this.isDirty("shadowOffsetX") || this.isDirty("shadowOffsetY")) && (this._clear = !0), this._display.crisp = this.get("crisp", !1), this.isDirty("fillGradient")) { const e = this.get("fillGradient"); if (e) { this._display.isMeasured = !0; const t = e.get("target"); t && (this._disposers.push(t.events.on("boundschanged", () => { this._markDirtyKey("fill") })), this._disposers.push(t.events.on("positionchanged", () => { this._markDirtyKey("fill") }))) } } if (this.isDirty("strokeGradient")) { const e = this.get("strokeGradient"); if (e) { this._display.isMeasured = !0; const t = e.get("target"); t && (this._disposers.push(t.events.on("boundschanged", () => { this._markDirtyKey("stroke") })), this._disposers.push(t.events.on("positionchanged", () => { this._markDirtyKey("stroke") }))) } } } _changed() { if (super._changed(), this._clear) { this.markDirtyBounds(), this.markDirtyLayer(), this._display.clear(); let e = this.get("strokeDasharray"); le(e) && (e < .5 ? e = [0] : e = [e]), this._display.setLineDash(e); const t = this.get("strokeDashoffset"); t && this._display.setLineDashOffset(t); const s = this.get("blendMode", lu.NORMAL); this._display.blendMode = s; const r = this.get("draw"); r && typeof r == "function" && r(this._display, this); const o = this.get("svgPath"); o != null && this._display.svgPath(o) } } _afterChanged() { if (super._afterChanged(), this._clear) { const e = this.get("fill"), t = this.get("fillGradient"), s = this.get("fillPattern"), r = this.get("fillOpacity"), o = this.get("stroke"), u = this.get("strokeGradient"), d = this.get("strokePattern"), f = this.get("shadowColor"), m = this.get("shadowBlur"), p = this.get("shadowOffsetX"), g = this.get("shadowOffsetY"), y = this.get("shadowOpacity"); if (f && (m || p || g) && this._display.shadow(f, m, p, g, y), e && !t && (this._display.beginFill(e, r), this._display.endFill()), t) { if (e) { const v = t.get("stops", []); v.length && te(v, k => { (!k.color || k.colorInherited) && e && (k.color = e, k.colorInherited = !0), (k.opacity == null || k.opacityInherited) && (k.opacity = r, k.opacityInherited = !0) }) } const b = t.getFill(this); b && (this._display.beginFill(b, r), this._display.endFill()) } if (s) { const b = s.pattern; b && (this._display.beginFill(b, r), this._display.endFill(), s instanceof $l && s.events.once("loaded", () => { this._clear = !0, this.markDirty() })) } if (o || u || d) { const b = this.get("strokeOpacity"); let v = this.get("strokeWidth", 1); this.get("nonScalingStroke") && (v = v / this.get("scale", 1)), this.get("crisp") && (v /= this._root._renderer.resolution); const k = this.get("lineJoin"), j = this.get("lineCap"); if (o && !u && (this._display.lineStyle(v, o, b, k, j), this._display.endStroke()), u) { const S = u.get("stops", []); S.length && te(S, N => { (!N.color || N.colorInherited) && o && (N.color = o, N.colorInherited = !0), (N.opacity == null || N.opacityInherited) && (N.opacity = b, N.opacityInherited = !0) }); const w = u.getFill(this); w && (this._display.lineStyle(v, w, b, k, j), this._display.endStroke()) } if (d) { let S = d.pattern; S && (this._display.lineStyle(v, S, b, k, j), this._display.endStroke(), d instanceof $l && d.events.once("loaded", () => { this._clear = !0, this.markDirty() })) } } this.getPrivate("showingTooltip") && this.showTooltip() } this._clear = !1 } } Object.defineProperty(Qe, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Graphics" }); Object.defineProperty(Qe, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: vs.classNames.concat([Qe.className]) }); class Gi extends Qe { _afterNew() { super._afterNew(), this._display.isMeasured = !0, this.setPrivateRaw("trustBounds", !0) } _beforeChanged() { super._beforeChanged(), (this.isDirty("width") || this.isDirty("height") || this.isPrivateDirty("width") || this.isPrivateDirty("height")) && (this._clear = !0) } _changed() { super._changed(), this._clear && !this.get("draw") && this._draw() } _draw() { let e = this.width(), t = this.height(), s = 0, r = 0, o = e / Math.abs(e), u = t / Math.abs(t); if (this.get("containStroke", !1)) { const d = this.get("strokeWidth", 0); e -= d * o, t -= d * u, s += d / 2 * o, r += d / 2 * u } this._display.drawRect(s, r, e, t) } _updateSize() { this.markDirty(), this._clear = !0 } } Object.defineProperty(Gi, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Rectangle" }); Object.defineProperty(Gi, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Qe.classNames.concat([Gi.className]) }); function ia(l, e) { l.get("reverseChildren", !1) ? l.children.eachReverse(e) : l.children.each(e) } class aa extends Ut { } Object.defineProperty(aa, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Layout" }); Object.defineProperty(aa, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Ut.classNames.concat([aa.className]) }); class Tr extends aa { updateContainer(e) { let t = e.get("paddingLeft", 0), s = e.innerWidth(), r = 0; ia(e, u => { if (u.isVisible() && u.get("position") == "relative") { let d = u.get("width"); if (d instanceof Ie) { r += d.value; let f = s * d.value, m = u.get("minWidth", u.getPrivate("minWidth", -1 / 0)); m > f && (s -= m, r -= d.value); let p = u.get("maxWidth", u.getPrivate("maxWidth", 1 / 0)); f > p && (s -= p, r -= d.value) } else le(d) || (d = u.width()), s -= d + u.get("marginLeft", 0) + u.get("marginRight", 0) } }), (s <= 0 || s == 1 / 0) && (s = .1), ia(e, u => { if (u.isVisible() && u.get("position") == "relative") { let d = u.get("width"); if (d instanceof Ie) { let f = s * d.value / r - u.get("marginLeft", 0) - u.get("marginRight", 0), m = u.get("minWidth", u.getPrivate("minWidth", -1 / 0)), p = u.get("maxWidth", u.getPrivate("maxWidth", 1 / 0)); f = Math.min(Math.max(m, f), p), u.setPrivate("width", f) } else u._prevSettings.width instanceof Ie && u.setPrivate("width", void 0) } }); let o = t; ia(e, u => { if (u.get("position") == "relative") if (u.isVisible()) { let d = u.adjustedLocalBounds(), f = u.get("marginLeft", 0), m = u.get("marginRight", 0), p = u.get("maxWidth"), g = d.left, y = d.right; p && y - g > p && (y = g + p); let b = o + f - g; u.setPrivate("x", b), o = b + y + m } else u.setPrivate("x", void 0) }) } } Object.defineProperty(Tr, "className", { enumerable: !0, configurable: !0, writable: !0, value: "HorizontalLayout" }); Object.defineProperty(Tr, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: aa.classNames.concat([Tr.className]) }); class Dr extends aa { updateContainer(e) { let t = e.get("paddingTop", 0), s = e.innerHeight(), r = 0; ia(e, u => { if (u.isVisible() && u.get("position") == "relative") { let d = u.get("height"); if (d instanceof Ie) { r += d.value; let f = s * d.value, m = u.get("minHeight", u.getPrivate("minHeight", -1 / 0)); m > f && (s -= m, r -= d.value); let p = u.get("maxHeight", u.getPrivate("maxHeight", 1 / 0)); f > p && (s -= p, r -= d.value) } else le(d) || (d = u.height()), s -= d + u.get("marginTop", 0) + u.get("marginBottom", 0) } }), (s <= 0 || s == 1 / 0) && (s = .1), ia(e, u => { if (u.isVisible() && u.get("position") == "relative") { let d = u.get("height"); if (d instanceof Ie) { let f = s * d.value / r - u.get("marginTop", 0) - u.get("marginBottom", 0), m = u.get("minHeight", u.getPrivate("minHeight", -1 / 0)), p = u.get("maxHeight", u.getPrivate("maxHeight", 1 / 0)); f = Math.min(Math.max(m, f), p), u.setPrivate("height", f) } else u._prevSettings.height instanceof Ie && u.setPrivate("height", void 0) } }); let o = t; ia(e, u => { if (u.get("position") == "relative") if (u.isVisible()) { let d = u.adjustedLocalBounds(), f = u.get("marginTop", 0), m = d.top, p = d.bottom, g = u.get("maxHeight"); g && p - m > g && (p = m + g); let y = u.get("marginBottom", 0), b = o + f - m; u.setPrivate("y", b), o = b + p + y } else u.setPrivate("y", void 0) }) } } Object.defineProperty(Dr, "className", { enumerable: !0, configurable: !0, writable: !0, value: "VerticalLayout" }); Object.defineProperty(Dr, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: aa.classNames.concat([Dr.className]) }); class yn extends aa { _afterNew() { this._setRawDefault("maxColumns", Number.MAX_VALUE), super._afterNew() } updateContainer(e) { let t = e.get("paddingLeft", 0), s = e.get("paddingRight", 0), r = e.get("paddingTop", 0), o = e.maxWidth() - t - s, u = o, d = 1; ia(e, v => { if (v.get("visible") && v.getPrivate("visible") && !v.get("forceHidden") && v.get("position") != "absolute") { let k = v.width(); k < u && (u = k), k > d && (d = k) } }), u = Dt(u, 1, o), d = Dt(d, 1, o); let f = 1; this.get("fixedWidthGrid") ? f = o / d : f = o / u, f = Math.max(1, Math.floor(f)), f = Math.min(this.get("maxColumns", Number.MAX_VALUE), f); let m = this.getColumnWidths(e, f, d, o), p = r, g = 0, y = 0; f = m.length; let b = t; ia(e, v => { if (v.get("position") == "relative" && v.isVisible()) { const k = v.get("marginTop", 0), j = v.get("marginBottom", 0); let S = v.adjustedLocalBounds(), w = v.get("marginLeft", 0), N = v.get("marginRight", 0), T = b + w - S.left, R = p + k - S.top; v.setPrivate("x", T), v.setPrivate("y", R), b += m[g] + N, y = Math.max(y, v.height() + k + j), g++, g >= f && (g = 0, b = t, p += y, y = 0) } }) } getColumnWidths(e, t, s, r) { let o = 0, u = [], d = 0; return ia(e, f => { let m = f.adjustedLocalBounds(); f.get("position") != "absolute" && f.isVisible() && (this.get("fixedWidthGrid") ? u[d] = s : u[d] = Math.max(u[d] | 0, m.right - m.left + f.get("marginLeft", 0) + f.get("marginRight", 0)), d < e.children.length - 1 && (d++, d == t && (d = 0))) }), te(u, f => { o += f }), o > r ? t > 2 ? (t -= 1, this.getColumnWidths(e, t, s, r)) : [r] : u } } Object.defineProperty(yn, "className", { enumerable: !0, configurable: !0, writable: !0, value: "GridLayout" }); Object.defineProperty(yn, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: aa.classNames.concat([yn.className]) }); class xs { static escape(e) { return e.replace(/\[\[/g, this.prefix + "1").replace(/([^\/\]]{1})\]\]/g, "$1" + this.prefix + "2").replace(/\]\]/g, this.prefix + "2").replace(/\{\{/g, this.prefix + "3").replace(/\}\}/g, this.prefix + "4").replace(/\'\'/g, this.prefix + "5") } static unescape(e) { return e.replace(new RegExp(this.prefix + "1", "g"), "[[").replace(new RegExp(this.prefix + "2", "g"), "]]").replace(new RegExp(this.prefix + "3", "g"), "{{").replace(new RegExp(this.prefix + "4", "g"), "}}").replace(new RegExp(this.prefix + "5", "g"), "''") } static cleanUp(e) { return e.replace(/\[\[/g, "[").replace(/\]\]/g, "]").replace(/\{\{/g, "{").replace(/\}\}/g, "}").replace(/\'\'/g, "'") } static chunk(e, t = !1, s = !1) { let r = []; e = this.escape(e); let o = t ? e.split("'") : [e]; for (let u = 0; u < o.length; u++) { let d = o[u]; if (d !== "") if (u % 2 === 0) { d = d.replace(/\]\[/g, "]" + za + "["), d = d.replace(/\[\]/g, "[ ]"); let f = d.split(/[\[\]]+/); for (let m = 0; m < f.length; m++) { let p = this.cleanUp(this.unescape(f[m])); p !== za && p !== "" && (m % 2 === 0 ? r.push({ type: "value", text: p }) : r.push({ type: s ? "value" : "format", text: "[" + p + "]" })) } } else { let f = d.split(/[\[\]]+/); for (let m = 0; m < f.length; m++) { let p = this.cleanUp(this.unescape(f[m])); p !== "" && (m % 2 === 0 ? r.push({ type: "text", text: p }) : this.isImage(p) ? r.push({ type: "image", text: "[" + p + "]" }) : r.push({ type: "format", text: "[" + p + "]" })) } } } return r } static isImage(e) { return !!e.match(/img[ ]?:/) } static getTextStyle(e) { let t = {}; if (e == "" || e == "[ ]") return {}; const s = e.match(/('[^']*')|("[^"]*")/gi); if (s) for (let o = 0; o < s.length; o++)e = e.replace(s[o], s[o].replace(/['"]*/g, "").replace(/[ ]+/g, "+")); let r = e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi); if (!r) return {}; for (let o = 0; o < r.length; o++)if (r[o].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i)) t.fontWeight = r[o]; else if (r[o].match(/^(underline|line-through)$/i)) t.textDecoration = r[o]; else if (r[o] != "/") if (!r[o].match(/:/)) t.fill = ke.fromString(r[o]); else { const u = r[o].replace("+", " ").split(/:[ ]*/); t[u[0]] = u[1] } return t } } Object.defineProperty(xs, "prefix", { enumerable: !0, configurable: !0, writable: !0, value: "__amcharts__" }); function Ar(l, e) { if (e != null) { e = "" + e, e = xs.escape(e); let t = e.match(/\{([^}]+)\}/g), s; if (t) for (s = 0; s < t.length; s++) { let r = t[s].replace(/\{([^}]+)\}/, "$1"), o = Wf(l, r); o == null && (o = ""), e = e.split(t[s]).join(o) } e = xs.unescape(e) } else e = ""; return e } function Wf(l, e, t) { let s; const r = l.dataItem; let o = [], u = /(format[a-zA-Z]*)\((.*)\)|([^.]+)/g, d; for (; d = u.exec(e), d !== null;)if (d[3]) { o.push({ prop: d[3] }); const f = l.getDateFormatter().get("dateFields", []), m = l.getNumberFormatter().get("numericFields", []), p = l.getDurationFormatter().get("durationFields", []); f.indexOf(d[3]) !== -1 ? o.push({ method: "formatDate", params: [] }) : m.indexOf(d[3]) !== -1 ? o.push({ method: "formatNumber", params: [] }) : p.indexOf(d[3]) !== -1 && o.push({ method: "formatDuration", params: [] }) } else { let f = []; if (jr(d[2]) != "") { let m = /'([^']*)'|"([^"]*)"|([0-9\-]+)/g, p; for (; p = m.exec(d[2]), p !== null;)f.push(p[1] || p[2] || p[3]) } o.push({ method: d[1], params: f }) } if (r) { s = dn(l, o, r._settings), (s == null || yo(s)) && (s = dn(l, o, r)); let f = r.dataContext; s == null && f && (s = dn(l, o, f), s == null && (s = dn(l, [{ prop: e }], f)), s == null && f.dataContext && (s = dn(l, o, f.dataContext))), s == null && r.component && r.component.dataItem !== r && (s = Wf(r.component, e)) } return s == null && (s = dn(l, o, l)), s == null && l.parent && (s = Wf(l.parent, e)), s } function yN(l, e) { const t = l.getPrivate("customData"); if (yo(t)) return t[e] } function dn(l, e, t, s) { let r = t, o = !1; for (let u = 0, d = e.length; u < d; u++) { let f = e[u]; if (f.prop) { if (r instanceof vs) { let m = r.get(f.prop); m == null && (m = r.getPrivate(f.prop)), m == null && (m = yN(r, f.prop)), m == null && (m = r[f.prop]), r = m } else if (r.get) { let m = r.get(f.prop); m == null && (m = r[f.prop]), r = m } else r = r[f.prop]; if (r == null) return } else switch (f.method) { case "formatNumber": let m = Ui(r); m != null && (r = l.getNumberFormatter().format(m, f.params[0] || void 0), o = !0); break; case "formatDate": let p = CS(r); if (!Lf(p) || Ps(p.getTime())) return; p != null && (r = l.getDateFormatter().format(p, f.params[0] || void 0), o = !0); break; case "formatDuration": let g = Ui(r); g != null && (r = l.getDurationFormatter().format(g, f.params[0] || void 0, f.params[1] || void 0), o = !0); break; case "urlEncode": case "encodeURIComponent": r = encodeURIComponent(r); break; default: r[f.method] && r[f.method].apply(t, f.params); break } } if (!o) { let u = [{ method: "", params: s }]; le(r) ? (u[0].method = "formatNumber", u[0].params = "") : Lf(r) && (u[0].method = "formatDate", u[0].params = ""), u[0].method && (r = dn(l, u, r)) } return r } class ze extends vs { constructor() { super(...arguments), Object.defineProperty(this, "_display", { enumerable: !0, configurable: !0, writable: !0, value: this._root._renderer.makeContainer() }), Object.defineProperty(this, "_childrenDisplay", { enumerable: !0, configurable: !0, writable: !0, value: this._root._renderer.makeContainer() }), Object.defineProperty(this, "children", { enumerable: !0, configurable: !0, writable: !0, value: new lN(this) }), Object.defineProperty(this, "_percentageSizeChildren", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_percentagePositionChildren", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_prevWidth", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_prevHeight", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_contentWidth", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_contentHeight", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_contentMask", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_vsbd0", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_vsbd1", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_hsbd0", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_hsbd1", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_childrenPrep", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_childrenUpdt", { enumerable: !0, configurable: !0, writable: !0, value: !1 }) } _afterNew() { super._afterNew(), this._display.addChild(this._childrenDisplay) } _afterChanged() { super._afterChanged(), this._childrenPrep = !1, this._childrenUpdt = !1 } _dispose() { Yl(this.allChildren(), e => { e.dispose() }), this.getPrivate("htmlElement") && this._root._removeHTMLContent(this), super._dispose() } _beforeChanged() { this._childrenPrep || this._prepareChildren(), this._childrenUpdt || this._updateChildren(), super._beforeChanged() } _changed() { if (super._changed(), this.isDirty("interactiveChildren") && (this._display.interactiveChildren = this.get("interactiveChildren", !1)), this.isDirty("layout") && (this._prevWidth = 0, this._prevHeight = 0, this.markDirtyBounds(), this._prevSettings.layout && this.children.each(e => { e.removePrivate("x"), e.removePrivate("y") })), (this.isDirty("paddingTop") || this.isDirty("paddingBottom") || this.isDirty("paddingLeft") || this.isDirty("paddingRight")) && this.children.each(e => { e.markDirtyPosition() }), this.isDirty("maskContent")) { const e = this._childrenDisplay; let t = this._contentMask; this.get("maskContent") ? t || (t = Gi.new(this._root, { x: -.5, y: -.5, width: this.width() + 1, height: this.height() + 1 }), this._contentMask = t, e.addChildAt(t._display, 0), e.mask = t._display) : t && (e.removeChild(t._display), e.mask = null, t.dispose(), this._contentMask = void 0) } } _updateSize() { super._updateSize(), te(this._percentageSizeChildren, e => { e._updateSize() }), te(this._percentagePositionChildren, e => { e.markDirtyPosition(), e._updateSize() }), this.updateBackground() } updateBackground() { const e = this.get("background"); let t = this._localBounds; if (t && !this.isHidden()) { let s = t.left, r = t.top, o = t.right - s, u = t.bottom - r, d = this.get("maxWidth"), f = this.get("maxHeight"); f && u > f && (u = f), d && o > d && (o = d); let m = this.width(), p = this.height(); e && (e.setAll({ width: o, height: u, x: s, y: r }), this._display.interactive && (e._display.interactive = !0)); const g = this._contentMask; g && g.setAll({ width: m + 1, height: p + 1 }); const y = this.get("verticalScrollbar"); if (y) { y.set("height", p), y.set("x", m - y.width() - y.get("marginRight", 0)), y.set("end", y.get("start", 0) + p / this._contentHeight); const b = y.get("background"); b && b.setAll({ width: y.width(), height: p }); let v = !0; this._contentHeight <= p && (v = !1), y.setPrivate("visible", v) } } } _applyThemes(e = !1) { return super._applyThemes(e) ? (this.eachChildren(t => { t._applyThemes(e) }), !0) : !1 } _applyState(e) { super._applyState(e), this.get("setStateOnChildren") && this.eachChildren(t => { t.states.apply(e) }) } _applyStateAnimated(e, t) { super._applyStateAnimated(e, t), this.get("setStateOnChildren") && this.eachChildren(s => { s.states.applyAnimate(e, t) }) } innerWidth() { return this.width() - this.get("paddingRight", 0) - this.get("paddingLeft", 0) } innerHeight() { return this.height() - this.get("paddingTop", 0) - this.get("paddingBottom", 0) } _getBounds() { if (this.get("html")) { let e = this._localBounds; e && (this._contentWidth = e.right - e.left, this._contentHeight = e.bottom - e.top) } else { let e = this.get("width"), t = this.get("height"), s = this.getPrivate("width"), r = this.getPrivate("height"), o = { left: 0, top: 0, right: this.width(), bottom: this.height() }, u = this.get("layout"), d = !1, f = !1; if ((u instanceof Tr || u instanceof yn) && (d = !0), u instanceof Dr && (f = !0), !((e != null || s != null) && (t != null || r != null) && !this.get("verticalScrollbar"))) { let m = Number.MAX_VALUE, p = m, g = -m, y = m, b = -m; const v = this.get("paddingLeft", 0), k = this.get("paddingTop", 0), j = this.get("paddingRight", 0), S = this.get("paddingBottom", 0); this.children.each(T => { if (T.get("position") != "absolute" && T.get("isMeasured")) { let R = T.adjustedLocalBounds(), P = T.x(), O = T.y(), z = P + R.left, F = P + R.right, B = O + R.top, A = O + R.bottom; d && (z -= T.get("marginLeft", 0), F += T.get("marginRight", 0)), f && (B -= T.get("marginTop", 0), A += T.get("marginBottom", 0)), z < p && (p = z), F > g && (g = F), B < y && (y = B), A > b && (b = A) } }), p == m && (p = 0), g == -m && (g = 0), y == m && (y = 0), b == -m && (b = 0), o.left = p - v, o.top = y - k, o.right = g + j, o.bottom = b + S; const w = this.get("minWidth"); le(w) && w > 0 && o.right - o.left < w && (o.right >= w ? o.left = o.right - w : o.right = o.left + w); const N = this.get("minHeight"); le(N) && N > 0 && o.bottom - o.top < N && (o.bottom >= N ? o.top = o.bottom - N : o.bottom = o.top + N) } this._contentWidth = o.right - o.left, this._contentHeight = o.bottom - o.top, le(e) && (o.left = 0, o.right = e), le(s) && (o.left = 0, o.right = s), le(t) && (o.top = 0, o.bottom = t), le(r) && (o.top = 0, o.bottom = r), this._localBounds = o } } _updateBounds() { const e = this.get("layout"); e && e.updateContainer(this), super._updateBounds(), this.updateBackground() } markDirty() { super.markDirty(), this._root._addDirtyParent(this) } _prepareChildren() { this._childrenPrep = !0; const e = this.innerWidth(), t = this.innerHeight(); if (e != this._prevWidth || t != this._prevHeight) { let s = this.get("layout"), r = !1, o = !1; s && ((s instanceof Tr || s instanceof yn) && (r = !0), s instanceof Dr && (o = !0)), te(this._percentageSizeChildren, u => { if (!r) { let d = u.get("width"); d instanceof Ie && u.setPrivate("width", d.value * e) } if (!o) { let d = u.get("height"); d instanceof Ie && u.setPrivate("height", d.value * t) } }), te(this._percentagePositionChildren, u => { u.markDirtyPosition(), u.markDirtyBounds() }), this._prevWidth = e, this._prevHeight = t, this._sizeDirty = !0, this.updateBackground() } } _updateHTMLContent() { const e = this.get("html", ""); e && e !== "" ? this._root._setHTMLContent(this, Ar(this, e)) : this._root._removeHTMLContent(this), this._root._positionHTMLElement(this) } scrollToChild(e) { const t = this.get("verticalScrollbar"); if (t) { let s = e.y(), r = this.innerHeight(), o = e.height(), u = this._contentHeight, d = 1 - (r - o / 2) / u; if (s + o * .7 + this._childrenDisplay.y > r || s - o * .3 + this._childrenDisplay.y < 0) { let f = Math.max(0, Math.min(d, (s - o / 2) / u)); t.animate({ key: "start", to: f, duration: t.get("animationDuration", 0), easing: t.get("animationEasing") }) } } } _updateChildren() { if (this._childrenUpdt = !0, this.isDirty("html") && this._updateHTMLContent(), this.isDirty("verticalScrollbar")) { const e = this.get("verticalScrollbar"); if (e) { e._setParent(this), e.startGrip.setPrivate("visible", !1), e.endGrip.setPrivate("visible", !1), this.set("maskContent", !0), this.set("paddingRight", e.width() + e.get("marginRight", 0) + e.get("marginLeft", 0)); let t = this.get("background"); t || (t = this.set("background", Gi.new(this._root, { themeTags: ["background"], fillOpacity: 0, fill: this._root.interfaceColors.get("alternativeBackground") }))), this._vsbd0 = this.events.on("wheel", s => { const r = s.originalEvent; if (s0(r, this)) r.preventDefault(); else return; let o = r.deltaY / 5e3; const u = e.get("start", 0), d = e.get("end", 1); u + o <= 0 && (o = -u), d + o >= 1 && (o = 1 - d), u + o >= 0 && d + o <= 1 && (e.set("start", u + o), e.set("end", d + o)) }), this._disposers.push(this._vsbd0), this._vsbd1 = e.events.on("rangechanged", () => { let s = this._contentHeight; const r = this._childrenDisplay, o = this._contentMask; r.y = -e.get("start", 0) * s, r.markDirtyLayer(), o && (o._display.y = -r.y, r.mask = o._display) }), this._disposers.push(this._vsbd1), this._display.addChild(e._display) } else { const t = this._prevSettings.verticalScrollbar; if (t) { this._display.removeChild(t._display), this._vsbd0 && this._vsbd0.dispose(), this._vsbd1 && this._vsbd1.dispose(); const s = this._childrenDisplay; s.y = 0, this.setPrivate("height", void 0), this.set("maskContent", !1), this.set("paddingRight", void 0) } } } if (this.isDirty("background")) { const e = this._prevSettings.background; e && this._display.removeChild(e._display); const t = this.get("background"); t instanceof vs && (t.set("isMeasured", !1), t._setParent(this), this._display.addChildAt(t._display, 0)) } if (this.isDirty("mask")) { const e = this.get("mask"), t = this._prevSettings.mask; if (t && (this._display.removeChild(t._display), t != e && t.dispose()), e) { const s = e.parent; s && s.children.removeValue(e), e._setParent(this), this._display.addChildAt(e._display, 0), this._childrenDisplay.mask = e._display } } } _processTemplateField() { super._processTemplateField(), this.children.each(e => { e._processTemplateField() }) } walkChildren(e) { this.children.each((t, s) => { t instanceof ze && t.walkChildren(e), e(t, s) }) } eachChildren(e) { const t = this.get("background"); t && e(t); const s = this.get("verticalScrollbar"); s && e(s); const r = this.get("mask"); r && e(r), this.children.values.forEach(o => { e(o) }) } allChildren() { const e = []; return this.eachChildren(t => { e.push(t) }), e } _setDataItem(e) { const t = e !== this._dataItem; super._setDataItem(e); const s = this.get("html", ""); s && s !== "" && t && this._root._setHTMLContent(this, Ar(this, s)) } contentWidth() { return this._contentWidth } contentHeight() { return this._contentHeight } } Object.defineProperty(ze, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Container" }); Object.defineProperty(ze, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: vs.classNames.concat([ze.className]) }); class vn extends vs { constructor() { super(...arguments), Object.defineProperty(this, "textStyle", { enumerable: !0, configurable: !0, writable: !0, value: this._root._renderer.makeTextStyle() }), Object.defineProperty(this, "_display", { enumerable: !0, configurable: !0, writable: !0, value: this._root._renderer.makeText("", this.textStyle) }), Object.defineProperty(this, "_textStyles", { enumerable: !0, configurable: !0, writable: !0, value: ["textAlign", "fontFamily", "fontSize", "fontStyle", "fontWeight", "fontStyle", "fontVariant", "textDecoration", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "shadowOpacity", "lineHeight", "baselineRatio", "direction", "textBaseline", "oversizedBehavior", "breakWords", "ellipsis", "minScale", "maxChars"] }), Object.defineProperty(this, "_originalScale", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }) } _updateBounds() { if (this.get("text")) { super._updateBounds(); let e = this.get("fillGradient"); e && (this._display.style.fill = e.getFill(this)) } else { let e = { left: 0, right: 0, top: 0, bottom: 0 }; this._adjustedLocalBounds = e } } _changed() { super._changed(), this._display.clear(); let e = this.textStyle; if (this.isDirty("opacity")) { let t = this.get("opacity", 1); this._display.alpha = t } if ((this.isDirty("text") || this.isDirty("populateText")) && (this._display.text = this._getText(), this.markDirtyBounds(), this.get("role") == "tooltip" && this._root.updateTooltip(this)), this.isPrivateDirty("tooltipElement") && this.getPrivate("tooltipElement") && this._disposers.push(new Gt(() => { this._root._removeTooltipElement(this) })), this.isDirty("width") && (e.wordWrapWidth = this.width(), this.markDirtyBounds()), this.isDirty("oversizedBehavior") && (e.oversizedBehavior = this.get("oversizedBehavior", "none"), this._display.invalidateVisibility(), this.markDirtyBounds()), this.isDirty("breakWords") && (e.breakWords = this.get("breakWords", !1), this.markDirtyBounds()), this.isDirty("ellipsis") && (e.ellipsis = this.get("ellipsis"), this.markDirtyBounds()), this.isDirty("ignoreFormatting") && (e.ignoreFormatting = this.get("ignoreFormatting", !1), this.markDirtyBounds()), this.isDirty("minScale") && (e.minScale = this.get("minScale", 0), this.markDirtyBounds()), this.isDirty("fill") || this.isDirty("fillGradient")) { const t = this.get("fill"), s = this.get("fillGradient"), r = this.get("fillOpacity"); if (s) { if (t) { const o = s.get("stops", []); o.length && te(o, u => { (!u.color || u.colorInherited) && t && (u.color = t, u.colorInherited = !0), (u.opacity == null || u.opacityInherited) && (u.opacity = r, u.opacityInherited = !0) }) } e.fill = s.getFill(this) } else t && (e.fill = t) } if (this.isDirty("fillOpacity")) { let t = this.get("fillOpacity", 1); t && (e.fillOpacity = t) } (this.isDirty("maxWidth") || this.isPrivateDirty("maxWidth")) && (e.maxWidth = this.get("maxWidth", this.getPrivate("maxWidth")), this.markDirtyBounds()), (this.isDirty("maxHeight") || this.isPrivateDirty("maxHeight")) && (e.maxHeight = this.get("maxHeight", this.getPrivate("maxHeight")), this.markDirtyBounds()), te(this._textStyles, t => { this._dirty[t] && (e[t] = this.get(t), this.markDirtyBounds()) }), e.fontSize = this.get("fontSize"), e.fontFamily = this.get("fontFamily"), this._display.style = e, this.isDirty("role") && this.get("role") == "tooltip" && this._root.updateTooltip(this) } _getText() { let e = this.get("text", ""); return this.get("maxChars") && (e = WS(e, this.get("maxChars", 1e8), this.get("breakWords"), this.get("ellipsis"))), this.get("populateText") ? Ar(this, e) : e } _getAccessibleText() { const e = this.get("ariaLabel"); return e !== void 0 ? this.get("populateText") ? Ar(this, e) : e : this._getText() } markDirtyText() { this._display.text = this._getText(), this.get("role") == "tooltip" && this._root.updateTooltip(this), this.markDirtyBounds(), this.markDirty() } _setDataItem(e) { super._setDataItem(e), this.get("populateText") && this.markDirtyText() } getNumberFormatter() { return this.parent ? this.parent.getNumberFormatter() : super.getNumberFormatter() } getDateFormatter() { return this.parent ? this.parent.getDateFormatter() : super.getDateFormatter() } getDurationFormatter() { return this.parent ? this.parent.getDurationFormatter() : super.getDurationFormatter() } } Object.defineProperty(vn, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Text" }); Object.defineProperty(vn, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: vs.classNames.concat([vn.className]) }); class vN { constructor() { Object.defineProperty(this, "_observer", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_targets", { enumerable: !0, configurable: !0, writable: !0, value: [] }), this._observer = new ResizeObserver(e => { te(e, t => { te(this._targets, s => { s.target === t.target && s.callback() }) }) }) } addTarget(e, t) { this._observer.observe(e, { box: "border-box" }), this._targets.push({ target: e, callback: t }) } removeTarget(e) { this._observer.unobserve(e), Du(this._targets, t => t.target !== e) } } class Pu { constructor() { Object.defineProperty(this, "_timer", { enumerable: !0, configurable: !0, writable: !0, value: null }), Object.defineProperty(this, "_targets", { enumerable: !0, configurable: !0, writable: !0, value: [] }) } addTarget(e, t) { if (this._timer === null) { let r = null; const o = () => { const u = Date.now(); (r === null || u > r + Pu.delay) && (r = u, te(this._targets, d => { let f = d.target.getBoundingClientRect(); (f.width !== d.size.width || f.height !== d.size.height) && (d.size = f, d.callback()) })), this._targets.length === 0 ? this._timer = null : this._timer = requestAnimationFrame(o) }; this._timer = requestAnimationFrame(o) } let s = { width: 0, height: 0, left: 0, right: 0, top: 0, bottom: 0, x: 0, y: 0 }; this._targets.push({ target: e, callback: t, size: s }) } removeTarget(e) { Du(this._targets, t => t.target !== e), this._targets.length === 0 && this._timer !== null && (cancelAnimationFrame(this._timer), this._timer = null) } } Object.defineProperty(Pu, "delay", { enumerable: !0, configurable: !0, writable: !0, value: 200 }); let Yc = null; function _N() { return Yc === null && (typeof ResizeObserver < "u" ? Yc = new vN : Yc = new Pu), Yc } class jN { constructor(e, t) { Object.defineProperty(this, "_sensor", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_element", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_listener", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_disposed", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), this._sensor = _N(), this._element = e, this._listener = t0(t), this._sensor.addTarget(e, t) } isDisposed() { return this._disposed } dispose() { this._disposed || (this._disposed = !0, this._sensor.removeTarget(this._element), this._listener.dispose()) } get sensor() { return this._sensor } } class ou extends Ut { } Object.defineProperty(ou, "className", { enumerable: !0, configurable: !0, writable: !0, value: "InterfaceColors" }); Object.defineProperty(ou, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Ut.classNames.concat([ou.className]) }); class Pi extends ze { constructor() { super(...arguments), Object.defineProperty(this, "_text", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_textKeys", { enumerable: !0, configurable: !0, writable: !0, value: ["text", "fill", "fillGradient", "fillOpacity", "textAlign", "fontFamily", "fontSize", "fontStyle", "fontWeight", "fontStyle", "fontVariant", "textDecoration", "shadowColor", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "shadowOpacity", "lineHeight", "baselineRatio", "direction", "textBaseline", "oversizedBehavior", "breakWords", "ellipsis", "minScale", "populateText", "role", "ignoreFormatting", "maxChars", "ariaLabel"] }) } get text() { return this._text } _afterNew() { super._afterNew(), this._makeText(), te(this._textKeys, e => { const t = this.get(e); t != null && this._text.set(e, t) }), this.get("html", "") !== "" && this._text.set("text", ""), this.onPrivate("maxWidth", () => { this._setMaxDimentions() }), this.onPrivate("maxHeight", () => { this._setMaxDimentions() }) } _makeText() { this._text = this.children.push(vn.new(this._root, {})) } _updateChildren() { super._updateChildren(); const e = this._text; if (te(this._textKeys, s => { this._text.set(s, this.get(s)) }), (this.isDirty("maxWidth") || this.isDirty("maxHeight") || this.isDirty("rotation")) && this._setMaxDimentions(), this.get("html", "") !== "" ? e.set("text", "") : (e.set("text", this.get("text")), this._maybeUpdateHTMLColor()), (this.isDirty("fill") || this.isDirty("fillGradient")) && this._maybeUpdateHTMLColor(), this.isDirty("textAlign") || this.isDirty("width")) { const s = this.get("textAlign"); let r; this.get("width") != null ? s == "right" ? r = Te : s == "center" ? r = Oe : r = 0 : s == "left" || s == "start" ? r = this.get("paddingLeft", 0) : (s == "right" || s == "end") && (r = -this.get("paddingRight", 0)), e.set("x", r) } const t = this.get("background"); t && t.setPrivate("visible", e._display.textVisible) } _maybeUpdateHTMLColor() { const e = this.getPrivate("htmlElement"); e && this.get("fill") && (e.style.color = this.get("fill").toCSSHex()) } _setMaxDimentions() { const e = this.get("rotation"), t = e == 90 || e == 270 || e == -90, s = this._text, r = this.get("maxWidth", this.getPrivate("maxWidth", 1 / 0)); le(r) ? s.set(t ? "maxHeight" : "maxWidth", r - this.get("paddingTop", 0) - this.get("paddingBottom", 0)) : s.set(t ? "maxHeight" : "maxWidth", void 0); const o = this.get("maxHeight", this.getPrivate("maxHeight", 1 / 0)); le(o) ? s.set(t ? "maxWidth" : "maxHeight", o - this.get("paddingLeft", 0) - this.get("paddingRight", 0)) : s.set(t ? "maxWidth" : "maxHeight", void 0), this.root.events.once("frameended", () => { s.markDirtyBounds() }) } _setDataItem(e) { super._setDataItem(e), this._markDirtyKey("text"), this._markDirtyKey("html"); const t = this._text; t.get("populateText") && t.markDirtyText(); const s = this.get("html"); s && s !== "" && this._updateHTMLContent() } getText() { return this._text._getText() } getAccessibleText() { return this._text._getAccessibleText() } } Object.defineProperty(Pi, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Label" }); Object.defineProperty(Pi, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: ze.classNames.concat([Pi.className]) }); class kr extends Qe { _beforeChanged() { super._beforeChanged(), (this.isDirty("pointerBaseWidth") || this.isDirty("cornerRadius") || this.isDirty("pointerLength") || this.isDirty("pointerX") || this.isDirty("pointerY") || this.isDirty("width") || this.isDirty("height")) && (this._clear = !0) } _changed() { if (super._changed(), this._clear) { this.markDirtyBounds(); let e = this.width(), t = this.height(); if (e > 0 && t > 0) { let s = this.get("cornerRadius", 8); s = Dt(s, 0, Math.min(e / 2, t / 2)); let r = this.get("pointerX", 0), o = this.get("pointerY", 0), u = this.get("pointerBaseWidth", 15) / 2, d = 0, f = 0, m = e, p = 0, g = e, y = t, b = 0, v = t, k = (r - d) * (y - f) - (o - f) * (g - d), j = (r - b) * (p - v) - (o - v) * (m - b); const S = this._display; if (S.moveTo(s, 0), k > 0 && j > 0) { let w = Math.round(Dt(r, s + u, e - u - s)); o = Dt(o, -1 / 0, 0), S.lineTo(w - u, 0), S.lineTo(r, o), S.lineTo(w + u, 0) } if (S.lineTo(e - s, 0), S.arcTo(e, 0, e, s, s), k > 0 && j < 0) { let w = Math.round(Dt(o, s + u, t - u - s)); r = Dt(r, e, 1 / 0), S.lineTo(e, s), S.lineTo(e, Math.max(w - u, s)), S.lineTo(r, o), S.lineTo(e, w + u) } if (S.lineTo(e, t - s), S.arcTo(e, t, e - s, t, s), k < 0 && j < 0) { let w = Math.round(Dt(r, s + u, e - u - s)); o = Dt(o, t, 1 / 0), S.lineTo(e - s, t), S.lineTo(w + u, t), S.lineTo(r, o), S.lineTo(w - u, t) } if (S.lineTo(s, t), S.arcTo(0, t, 0, t - s, s), k < 0 && j > 0) { let w = Math.round(Dt(o, s + u, t - s - u)); r = Dt(r, -1 / 0, 0), S.lineTo(0, t - s), S.lineTo(0, w + u), S.lineTo(r, o), S.lineTo(0, Math.max(w - u, s)) } S.lineTo(0, s), S.arcTo(0, 0, s, 0, s), S.closePath() } } } } Object.defineProperty(kr, "className", { enumerable: !0, configurable: !0, writable: !0, value: "PointedRectangle" }); Object.defineProperty(kr, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Qe.classNames.concat([kr.className]) }); class Os extends ze { constructor(e, t, s, r = []) { super(e, t, s, r), Object.defineProperty(this, "_fx", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_fy", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_label", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_fillDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_fillGrDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_strokeDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_labelDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_w", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_h", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_keepHoverDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_htmlContentHovered", { enumerable: !0, configurable: !0, writable: !0, value: !1 }) } _afterNew() { this._settings.themeTags = Ve(this._settings.themeTags, ["tooltip"]), super._afterNew(), this._setDefaultFn("background", () => kr.new(this._root, {})).set("themeTags", ["tooltip", "background"]), this._label = this.children.push(Pi.new(this._root, {})), this._disposers.push(this._label.events.on("boundschanged", () => { this._updateBackground() })), this._disposers.push(this.on("bounds", () => { this._updateBackground() })), this._updateTextColor(), this._root.tooltipContainer.children.push(this), this.hide(0), this._disposers.push(this.label.onPrivate("htmlElement", t => { t && (this._disposers.push(jt(t, "pointerover", s => { this._htmlContentHovered = !0 })), this._disposers.push(jt(t, "pointerout", s => { this._htmlContentHovered = !1 }))) })), this.on("visible", t => { this._handleReaderAnnouncement() }), this.label.events.on("dataitemchanged", t => { this._handleReaderAnnouncement() }), this._root._tooltips.push(this) } _handleReaderAnnouncement() { this.get("readerAnnounce") && this.isVisibleDeep() && this._root.readerAlert(this.label.getAccessibleText()) } get label() { return this._label } _dispose() { super._dispose(), Vi(this._root._tooltips, this) } _updateChildren() { super._updateChildren(), (this.isDirty("pointerOrientation") || this.isPrivateDirty("minWidth") || this.isPrivateDirty("minHeight")) && this.get("background")._markDirtyKey("width"), this.get("labelText") != null && this.label.set("text", this.get("labelText")), this.get("labelHTML") != null && this.label.set("html", this.get("labelHTML")), this.get("labelAriaLabel") != null && this.label.set("ariaLabel", this.get("labelAriaLabel")) } _changed() { if (super._changed(), (this.isDirty("pointTo") || this.isDirty("pointerOrientation")) && this._updateBackground(), this.isDirty("tooltipTarget") && this.updateBackgroundColor(), this.isDirty("keepTargetHover")) if (this.get("keepTargetHover")) { const t = this.get("background"); this._keepHoverDp = new Di([t.events.on("pointerover", s => { let r = this.get("tooltipTarget"); r && (r.parent && r.parent.getPrivate("tooltipTarget") == r && (r = r.parent), r.hover()) }), t.events.on("pointerout", s => { let r = this.get("tooltipTarget"); r && (r.parent && r.parent.getPrivate("tooltipTarget") == r && (r = r.parent), this._htmlContentHovered || r.unhover()) })]), this.label.onPrivate("htmlElement", s => { this._keepHoverDp && s && this._keepHoverDp.disposers.push(jt(s, "pointerleave", r => { const o = this.root._renderer.getEvent(r); t.events.dispatch("pointerout", { type: "pointerout", originalEvent: o.event, point: o.point, simulated: !1, target: t }) })) }) } else this._keepHoverDp && (this._keepHoverDp.dispose(), this._keepHoverDp = void 0) } _onShow() { super._onShow(), this.updateBackgroundColor() } updateBackgroundColor() { let e = this.get("tooltipTarget"); const t = this.get("background"); let s, r; if (e && t) { if (s = e.get("fill"), r = e.get("stroke"), s == null && (s = r), this.get("getFillFromSprite") && (this._fillDp && this._fillDp.dispose(), s != null && t.set("fill", s), this._fillDp = e.on("fill", o => { o != null && (t.set("fill", o), this._updateTextColor(o)) }), this._disposers.push(this._fillDp)), this.get("getFillGradientFromSprite")) { this._fillGrDp && this._fillGrDp.dispose(); let o = e.get("fillGradient"); o != null && t.set("fillGradient", o), this._fillGrDp = e.on("fillGradient", u => { u != null && t.set("fillGradient", u) }), this._disposers.push(this._fillGrDp) } this.get("getStrokeFromSprite") && (this._strokeDp && this._strokeDp.dispose(), s != null && t.set("stroke", s), this._strokeDp = e.on("fill", o => { o != null && t.set("stroke", o) }), this._disposers.push(this._strokeDp)), this.get("getLabelFillFromSprite") && (this._labelDp && this._labelDp.dispose(), s != null && this.label.set("fill", s), this._labelDp = e.on("fill", o => { o != null && this.label.set("fill", o) }), this._disposers.push(this._labelDp)) } this._updateTextColor(s) } _updateTextColor(e) { this.get("autoTextColor") && (e == null && (e = this.get("background").get("fill")), e == null && (e = this._root.interfaceColors.get("background")), e instanceof ke && this.label.set("fill", ke.alternative(e, this._root.interfaceColors.get("alternativeText"), this._root.interfaceColors.get("text")))) } _setDataItem(e) { super._setDataItem(e), this.label._setDataItem(e) } _updateBackground() { super.updateBackground(); const e = this._root.container; if (e) { let t = .5, s = .5, r = this.get("centerX"); r instanceof Ie && (t = r.value); let o = this.get("centerY"); o instanceof Ie && (s = o.value); let u = e.width(), d = e.height(), f = this.parent, m = 0, p = 0; if (f) { m = f.x(), p = f.y(); const A = f.get("layerMargin"); A && (m += A.left || 0, p += A.top || 0, u += (A.left || 0) + (A.right || 0), d += (A.top || 0) + (A.bottom || 0)) } const g = this.get("bounds", { left: -m, top: -p, right: u - m, bottom: d - p }); this._updateBounds(); let y = this.width(), b = this.height(); y === 0 && (y = this._w), b === 0 && (b = this._h); let v = this.get("pointTo", { x: u / 2, y: d / 2 }), k = v.x, j = v.y, S = this.get("pointerOrientation"), w = this.get("background"), N = 0, T = 0, R = 0; w instanceof kr && (N = w.get("pointerLength", 0), T = w.get("strokeWidth", 0) / 2, R = T, w.set("width", y), w.set("height", b)); let P = 0, O = 0, z = g.right - g.left, F = g.bottom - g.top; S == "horizontal" || S == "left" || S == "right" ? (T = 0, S == "horizontal" ? k > g.left + z / 2 ? (k -= y * (1 - t) + N, R *= -1) : k += y * t + N : S == "left" ? k += y * (1 - t) + N : (k -= y * t + N, R *= -1)) : (R = 0, S == "vertical" ? j > g.top + b / 2 + N ? j -= b * (1 - s) + N : (j += b * s + N, T *= -1) : S == "down" ? j -= b * (1 - s) + N : (j += b * s + N, T *= -1)), k = Dt(k, g.left + y * t, g.left + z - y * (1 - t)) + R, j = Dt(j, g.top + b * s, g.top + F - b * (1 - s)) - T, P = v.x - k + y * t + R, O = v.y - j + b * s - T, this._fx = k, this._fy = j; const B = this.get("animationDuration", 0); if (B > 0 && this.get("visible") && this.get("opacity") > .1) { const A = this.get("animationEasing"); this.animate({ key: "x", to: k, duration: B, easing: A }), this.animate({ key: "y", to: j, duration: B, easing: A }) } else this.set("x", k), this.set("y", j); w instanceof kr && (w.set("pointerX", P), w.set("pointerY", O)), y > 0 && (this._w = y), b > 0 && (this._h = b) } } } Object.defineProperty(Os, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Tooltip" }); Object.defineProperty(Os, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: ze.classNames.concat([Os.className]) }); class wN extends Ut { _setDefaults() { this._setDefault("negativeBase", 0), this._setDefault("numberFormat", "#,###.#####"), this._setDefault("smallNumberThreshold", 1); const e = "_big_number_suffix_", t = "_small_number_suffix_", s = "_byte_suffix_"; this._setDefault("bigNumberPrefixes", [{ number: 1e3, suffix: this._t(e + "3") }, { number: 1e6, suffix: this._t(e + "6") }, { number: 1e9, suffix: this._t(e + "9") }, { number: 1e12, suffix: this._t(e + "12") }, { number: 1e15, suffix: this._t(e + "15") }, { number: 1e18, suffix: this._t(e + "18") }, { number: 1e21, suffix: this._t(e + "21") }, { number: 1e24, suffix: this._t(e + "24") }]), this._setDefault("smallNumberPrefixes", [{ number: 1e-24, suffix: this._t(t + "24") }, { number: 1e-21, suffix: this._t(t + "21") }, { number: 1e-18, suffix: this._t(t + "18") }, { number: 1e-15, suffix: this._t(t + "15") }, { number: 1e-12, suffix: this._t(t + "12") }, { number: 1e-9, suffix: this._t(t + "9") }, { number: 1e-6, suffix: this._t(t + "6") }, { number: .001, suffix: this._t(t + "3") }]), this._setDefault("bytePrefixes", [{ number: 1, suffix: this._t(s + "B") }, { number: 1024, suffix: this._t(s + "KB") }, { number: 1048576, suffix: this._t(s + "MB") }, { number: 1073741824, suffix: this._t(s + "GB") }, { number: 1099511627776, suffix: this._t(s + "TB") }, { number: 0x4000000000000, suffix: this._t(s + "PB") }]), super._setDefaults() } _beforeChanged() { super._beforeChanged() } format(e, t, s) { (t == null || xn(t) && t.toLowerCase() === "number") && (t = this.get("numberFormat", "")); let r, o = Number(e); if (yo(t)) try { return this.get("intlLocales") ? new Intl.NumberFormat(this.get("intlLocales"), t).format(o) : new Intl.NumberFormat(void 0, t).format(o) } catch { return "Invalid" } else { t = xm(t); let u = this.parseFormat(t, this._root.language), d; o > this.get("negativeBase") ? d = u.positive : o < this.get("negativeBase") ? d = u.negative : d = u.zero, s != null && !d.mod && (d = zl(d), d.decimals.active = o == 0 ? 0 : s), r = d.template.split(za).join(this.applyFormat(o, d)) } return this.get("forceLTR") === !0 && (r = "" + r), r } parseFormat(e, t) { const s = t.translateEmpty("_thousandSeparator"), r = t.translateEmpty("_decimalSeparator"); let o = { positive: { thousands: { active: -1, passive: -1, interval: -1, separator: s }, decimals: { active: -1, passive: -1, separator: r }, template: "", source: "", parsed: !1 }, negative: { thousands: { active: -1, passive: -1, interval: -1, separator: s }, decimals: { active: -1, passive: -1, separator: r }, template: "", source: "", parsed: !1 }, zero: { thousands: { active: -1, passive: -1, interval: -1, separator: s }, decimals: { active: -1, passive: -1, separator: r }, template: "", source: "", parsed: !1 } }; e = e.replace("||", vr); let u = e.split("|"); return o.positive.source = u[0], typeof u[2] > "u" ? o.zero = o.positive : o.zero.source = u[2], typeof u[1] > "u" ? o.negative = o.positive : o.negative.source = u[1], it(o, (d, f) => { if (f.parsed) return; let m = f.source; m.toLowerCase() === "number" && (m = this.get("numberFormat", "#,###.#####")); let p = xs.chunk(m, !0); for (let g = 0; g < p.length; g++) { let y = p[g]; if (y.text = y.text.replace(vr, "|"), y.type === "value") { let b = y.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP!]?/); if (b) if (b === null || b[0] === "") f.template += y.text; else { let v = b[0].match(/[abespABESP%!]{2}|[abespABESP%]{1}$/); v && (f.mod = v[0].toLowerCase(), f.modSpacing = !!b[0].match(/[ ]{1}[abespABESP%!]{1}$/)); let k = b[0].split("."); if (k[0] !== "") { f.thousands.active = (k[0].match(/0/g) || []).length, f.thousands.passive = (k[0].match(/\#/g) || []).length + f.thousands.active; let j = k[0].split(","); j.length === 1 || (f.thousands.interval = (j.pop() || "").length, f.thousands.interval === 0 && (f.thousands.interval = -1)) } typeof k[1] > "u" || (f.decimals.active = (k[1].match(/0/g) || []).length, f.decimals.passive = (k[1].match(/\#/g) || []).length + f.decimals.active), f.template += y.text.split(b[0]).join(za) } } else f.template += y.text } f.parsed = !0 }), o } applyFormat(e, t) { let s = e < 0; e = Math.abs(e); let r = "", o = "", u = t.mod ? t.mod.split("") : []; if (u.indexOf("b") !== -1) { let g = this.applyPrefix(e, this.get("bytePrefixes"), u.indexOf("!") !== -1); e = g[0], r = g[1], o = g[2], t.modSpacing && (o = " " + o) } else if (u.indexOf("a") !== -1) { let g = this.applyPrefix(e, e < this.get("smallNumberThreshold") ? this.get("smallNumberPrefixes") : this.get("bigNumberPrefixes"), u.indexOf("!") !== -1); e = g[0], r = g[1], o = g[2], t.modSpacing && (o = " " + o) } else if (u.indexOf("p") !== -1) { let g = Math.min(e.toString().length + 2, 21); e = parseFloat(e.toPrecision(g)), r = this._root.language.translate("_percentPrefix"), o = this._root.language.translate("_percentSuffix"), r == "" && o == "" && (o = "%") } else if (u.indexOf("%") !== -1) { let g = Math.min(e.toString().length + 2, 21); e *= 100, e = parseFloat(e.toPrecision(g)), o = "%" } else if (u.indexOf("") !== -1) { let g = Math.min(e.toString().length + 3, 21); e *= 1e3, e = parseFloat(e.toPrecision(g)), o = "" } if (u.indexOf("e") !== -1) { let g; t.decimals.passive >= 0 ? g = e.toExponential(t.decimals.passive).split("e") : g = e.toExponential().split("e"), e = Number(g[0]), o = "e" + g[1], t.modSpacing && (o = " " + o) } else if (t.decimals.passive === 0) e = Math.round(e); else if (t.decimals.passive > 0) { const g = a0(e); if (g > 0) { const y = Math.pow(10, t.decimals.passive); e = Math.round(parseFloat((e * y).toFixed(g))) / y } } let d = "", f = TS(e).split("."), m = f[0]; if (m.length < t.thousands.active && (m = Array(t.thousands.active - m.length + 1).join("0") + m), t.thousands.interval > 0) { let g = [], y = m.split("").reverse().join(""); for (let b = 0, v = m.length; b <= v; b += t.thousands.interval) { let k = y.substr(b, t.thousands.interval).split("").reverse().join(""); k !== "" && g.unshift(k) } m = g.join(t.thousands.separator) } d += m, f.length === 1 && f.push(""); let p = f[1]; return p.length < t.decimals.active && (p += Array(t.decimals.active - p.length + 1).join("0")), p !== "" && (d += t.decimals.separator + p), d === "" && (d = "0"), e !== 0 && s && u.indexOf("s") === -1 && (d = "-" + d), r && (d = r + d), o && (d += o), d } applyPrefix(e, t, s = !1) { let r = e, o = "", u = "", d = !1, f = 1; for (let m = 0, p = t.length; m < p; m++)t[m].number <= e && (t[m].number === 0 ? r = 0 : (r = e / t[m].number, f = t[m].number), o = t[m].prefix, u = t[m].suffix, d = !0); return !d && s && t.length && e != 0 && (r = e / t[0].number, o = t[0].prefix, u = t[0].suffix, d = !0), d && (r = parseFloat(r.toPrecision(Math.min(f.toString().length + Math.floor(r).toString().replace(/[^0-9]*/g, "").length, 21)))), [r, o, u] } escape(e) { return e.replace("||", vr) } unescape(e) { return e.replace(vr, "|") } } function f0(l, e) { let t = 0, s = 0, r = 1, o = 0, u = 0, d = 0, f = 0, m = 0; return l.formatToParts(e).forEach(p => { switch (p.type) { case "year": t = +p.value; break; case "month": s = +p.value - 1; break; case "day": r = +p.value; break; case "hour": o = +p.value; break; case "minute": u = +p.value; break; case "second": d = +p.value; break; case "fractionalSecond": f = +p.value; break; case "weekday": switch (p.value) { case "Sun": m = 0; break; case "Mon": m = 1; break; case "Tue": m = 2; break; case "Wed": m = 3; break; case "Thu": m = 4; break; case "Fri": m = 5; break; case "Sat": m = 6; break } } }), o === 24 && (o = 0), { year: t, month: s, day: r, hour: o, minute: u, second: d, millisecond: f, weekday: m } } function hy(l, e) { const { year: t, month: s, day: r, hour: o, minute: u, second: d, millisecond: f } = f0(l, e); return Date.UTC(t, s, r, o, u, d, f) } class kN { constructor(e, t) { if (Object.defineProperty(this, "_utc", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_dtf", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "name", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), !t) throw new Error("You cannot use `new Class()`, instead use `Class.new()`"); this.name = e, this._utc = new Intl.DateTimeFormat("en-US", { hour12: !1, timeZone: "UTC", year: "numeric", month: "2-digit", day: "2-digit", hour: "2-digit", minute: "2-digit", second: "2-digit", weekday: "short", fractionalSecondDigits: 3 }), this._dtf = new Intl.DateTimeFormat("en-US", { hour12: !1, timeZone: e, year: "numeric", month: "2-digit", day: "2-digit", hour: "2-digit", minute: "2-digit", second: "2-digit", weekday: "short", fractionalSecondDigits: 3 }) } static new(e) { return new this(e, !0) } convertLocal(e) { const t = this.offsetUTC(e), s = e.getTimezoneOffset(), r = new Date(e); r.setUTCMinutes(r.getUTCMinutes() - (t - s)); const o = r.getTimezoneOffset(); return s != o && r.setUTCMinutes(r.getUTCMinutes() + o - s), r } offsetUTC(e) { const t = hy(this._utc, e), s = hy(this._dtf, e); return (t - s) / 6e4 } parseDate(e) { return f0(this._dtf, e) } } class SN extends Ut { _setDefaults() { this._setDefault("capitalize", !0), this._setDefault("dateFormat", "yyyy-MM-dd"), super._setDefaults() } _beforeChanged() { super._beforeChanged() } format(e, t, s = !1) { (typeof t > "u" || t === "") && (t = this.get("dateFormat", "yyyy-MM-dd")); let r, o = e; if (yo(t)) try { const m = this.get("intlLocales"); return m ? new Intl.DateTimeFormat(m, t).format(o) : new Intl.DateTimeFormat(void 0, t).format(o) } catch { return "Invalid" } let u = this.parseFormat(t); const d = this._root.timezone; let f = o; return d && !this._root.utc && !s && (o = d.convertLocal(o)), le(o.getTime()) ? (r = this.applyFormat(o, u, s, f), this.get("capitalize") && (r = r.replace(/^.{1}/, r.substr(0, 1).toUpperCase())), r) : "Invalid date" } applyFormat(e, t, s = !1, r) { let o = t.template, u, d, f, m, p, g, y, b, v = e.getTime(); this._root.utc && !s ? (u = e.getUTCFullYear(), d = e.getUTCMonth(), f = e.getUTCDay(), m = e.getUTCDate(), p = e.getUTCHours(), g = e.getUTCMinutes(), y = e.getUTCSeconds(), b = e.getUTCMilliseconds()) : (u = e.getFullYear(), d = e.getMonth(), f = e.getDay(), m = e.getDate(), p = e.getHours(), g = e.getMinutes(), y = e.getSeconds(), b = e.getMilliseconds()); for (let k = 0, j = t.parts.length; k < j; k++) { let S = ""; switch (t.parts[k]) { case "G": S = this._t(u < 0 ? "_era_bc" : "_era_ad"); break; case "yyyy": S = Math.abs(u).toString(), u < 0 && (S += this._t("_era_bc")); break; case "yyy": case "yy": case "y": S = Math.abs(u).toString().substr(-t.parts[k].length), u < 0 && (S += this._t("_era_bc")); break; case "YYYY": case "YYY": case "YY": case "Y": let w = $S(e, this._root.utc); t.parts[k] == "YYYY" ? S = Math.abs(w).toString() : S = Math.abs(w).toString().substr(-t.parts[k].length), w < 0 && (S += this._t("_era_bc")); break; case "u": break; case "q": S = "" + Math.ceil((e.getMonth() + 1) / 3); break; case "MMMMM": S = this._t(this._getMonth(d)).substr(0, 1); break; case "MMMM": S = this._t(this._getMonth(d)); break; case "MMM": S = this._t(this._getShortMonth(d)); break; case "MM": S = Rt(d + 1, 2, "0"); break; case "M": S = (d + 1).toString(); break; case "ww": S = Rt(nu(e, this._root.utc), 2, "0"); break; case "w": S = nu(e, this._root.utc).toString(); break; case "W": S = KS(e, this._root.utc).toString(); break; case "dd": S = Rt(m, 2, "0"); break; case "d": S = m.toString(); break; case "DD": case "DDD": S = Rt(ry(e, this._root.utc).toString(), t.parts[k].length, "0"); break; case "D": S = ry(e, this._root.utc).toString(); break; case "F": break; case "g": break; case "t": S = this._root.language.translateFunc("_dateOrd").call(this, m); break; case "E": S = (f || 7).toString(); break; case "EE": S = Rt((f || 7).toString(), 2, "0"); break; case "EEE": case "eee": S = this._t(this._getShortWeekday(f)); break; case "EEEE": case "eeee": S = this._t(this._getWeekday(f)); break; case "EEEEE": case "eeeee": S = this._t(this._getShortWeekday(f)).substr(0, 1); break; case "e": case "ee": S = (f - (this._root.locale.firstDayOfWeek || 1) + 1).toString(), t.parts[k] == "ee" && (S = Rt(S, 2, "0")); break; case "a": p >= 12 ? S = this._t("PM") : S = this._t("AM"); break; case "aa": p >= 12 ? S = this._t("P.M.") : S = this._t("A.M."); break; case "aaa": p >= 12 ? S = this._t("P") : S = this._t("A"); break; case "h": S = Fc(p).toString(); break; case "hh": S = Rt(Fc(p), 2, "0"); break; case "H": S = p.toString(); break; case "HH": S = Rt(p, 2, "0"); break; case "K": S = Fc(p, 0).toString(); break; case "KK": S = Rt(Fc(p, 0), 2, "0"); break; case "k": S = (p + 1).toString(); break; case "kk": S = Rt(p + 1, 2, "0"); break; case "m": S = g.toString(); break; case "mm": S = Rt(g, 2, "0"); break; case "s": S = y.toString(); break; case "ss": S = Rt(y, 2, "0"); break; case "S": case "SS": case "SSS": S = Math.round(b / 1e3 * Math.pow(10, t.parts[k].length)).toString(); break; case "x": S = v.toString(); break; case "n": case "nn": case "nnn": S = Rt(b, t.parts[k].length, "0"); break; case "z": S = Hc(r || e, !1, !1, this._root.utc, this._root.timezone ? this._root.timezone.name : void 0).replace(/[+-]+[0-9]+$/, ""); break; case "zz": S = Hc(r || e, !0, !1, this._root.utc, this._root.timezone ? this._root.timezone.name : void 0); break; case "zzz": S = Hc(r || e, !1, !0, this._root.utc, this._root.timezone ? this._root.timezone.name : void 0).replace(/[+-]+[0-9]+$/, ""); break; case "zzzz": S = Hc(r || e, !0, !0, this._root.utc, this._root.timezone ? this._root.timezone.name : void 0); break; case "Z": case "ZZ": let N = this._root.utc ? "UTC" : this._root.timezone; N instanceof kN && (N = N.name); const T = N ? QS(N, r || e) : e.getTimezoneOffset(); let R = Math.abs(T) / 60, P = Math.floor(R), O = R * 60 - P * 60; this._root.utc && (P = 0, O = 0), t.parts[k] == "Z" ? (S = "GMT", S += T > 0 ? "-" : "+", S += Rt(P, 2) + ":" + Rt(O, 2)) : (S = T > 0 ? "-" : "+", S += Rt(P, 2) + Rt(O, 2)); break; case "i": S = e.toISOString(); break; case "I": S = e.toUTCString(); break }o = o.replace(za, S) } return o } parseFormat(e) { let t = { template: "", parts: [] }, s = xs.chunk(e, !0); for (let r = 0; r < s.length; r++) { let o = s[r]; if (o.type === "value") { if (o.text.match(/^date$/i)) { let d = this.get("dateFormat", "yyyy-MM-dd"); xn(d) || (d = "yyyy-MM-dd"), o.text = d } let u = o.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g); if (u) for (let d = 0; d < u.length; d++)t.parts.push(u[d]), o.text = o.text.replace(u[d], za) } t.template += o.text } return t } _months() { return ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"] } _getMonth(e) { return this._months()[e] } _shortMonths() { return ["Jan", "Feb", "Mar", "Apr", "May(short)", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"] } _getShortMonth(e) { return this._shortMonths()[e] } _weekdays() { return ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"] } _getWeekday(e) { return this._weekdays()[e] } _shortWeekdays() { return ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"] } _getShortWeekday(e) { return this._shortWeekdays()[e] } parse(e, t, s) { if (typeof s > "u" && (s = this._root.utc), e instanceof Date) return e; if (le(e)) return new Date(e); if (t == "x") return new Date(parseInt(e)); xn(e) || (e = e.toString()); let r, o = ""; t = xm(t), t = t.substr(0, e.length); let u = this.parseFormat(t), d = { year: -1, year3: -1, year2: -1, year1: -1, month: -1, monthShort: -1, monthLong: -1, weekdayShort: -1, weekdayLong: -1, day: -1, yearDay: -1, week: -1, hourBase0: -1, hour12Base0: -1, hourBase1: -1, hour12Base1: -1, minute: -1, second: -1, millisecond: -1, millisecondDigits: -1, am: -1, zone: -1, timestamp: -1, iso: -1 }, f = { year: 1970, month: 0, day: 1, hour: 0, minute: 0, second: 0, millisecond: 0, timestamp: null, offset: 0, utc: s }, m = 0, p = 0; for (let b = 0; b < u.parts.length; b++) { switch (p = b + m + 1, u.parts[b]) { case "yyyy": case "YYYY": o += "([0-9]{4})", d.year = p; break; case "yyy": case "YYY": o += "([0-9]{3})", d.year3 = p; break; case "yy": case "YY": o += "([0-9]{2})", d.year2 = p; break; case "y": case "Y": o += "([0-9]{1})", d.year1 = p; break; case "MMMM": o += "(" + this.getStringList(this._months()).join("|") + ")", d.monthLong = p; break; case "MMM": o += "(" + this.getStringList(this._shortMonths()).join("|") + ")", d.monthShort = p; break; case "MM": case "M": o += "([0-9]{2}|[0-9]{1})", d.month = p; break; case "ww": case "w": o += "([0-9]{2}|[0-9]{1})", d.week = p; break; case "dd": case "d": o += "([0-9]{2}|[0-9]{1})", d.day = p; break; case "DDD": case "DD": case "D": o += "([0-9]{3}|[0-9]{2}|[0-9]{1})", d.yearDay = p; break; case "dddd": o += "(" + this.getStringList(this._weekdays()).join("|") + ")", d.weekdayLong = p; break; case "ddd": o += "(" + this.getStringList(this._shortWeekdays()).join("|") + ")", d.weekdayShort = p; break; case "aaa": case "aa": case "a": o += "(" + this.getStringList(["AM", "PM", "A.M.", "P.M.", "A", "P"]).join("|") + ")", d.am = p; break; case "hh": case "h": o += "([0-9]{2}|[0-9]{1})", d.hour12Base1 = p; break; case "HH": case "H": o += "([0-9]{2}|[0-9]{1})", d.hourBase0 = p; break; case "KK": case "K": o += "([0-9]{2}|[0-9]{1})", d.hour12Base0 = p; break; case "kk": case "k": o += "([0-9]{2}|[0-9]{1})", d.hourBase1 = p; break; case "mm": case "m": o += "([0-9]{2}|[0-9]{1})", d.minute = p; break; case "ss": case "s": o += "([0-9]{2}|[0-9]{1})", d.second = p; break; case "SSS": case "SS": case "S": o += "([0-9]{3}|[0-9]{2}|[0-9]{1})", d.millisecond = p, d.millisecondDigits = u.parts[b].length; break; case "nnn": case "nn": case "n": o += "([0-9]{3}|[0-9]{2}|[0-9]{1})", d.millisecond = p; break; case "x": o += "([0-9]{1,})", d.timestamp = p; break; case "Z": o += "GMT([-+]+[0-9]{2}:[0-9]{2})", d.zone = p; break; case "ZZ": o += "([\\-+]+[0-9]{2}[0-9]{2})", d.zone = p; break; case "i": o += "([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)", d.iso = p, m += 7; break; case "G": case "YYYY": case "YYY": case "YY": case "Y": case "MMMMM": case "W": case "EEEEE": case "EEEE": case "EEE": case "EE": case "E": case "eeeee": case "eeee": case "eee": case "ee": case "e": case "zzzz": case "zzz": case "zz": case "z": case "t": m--; break }o += "[^0-9]*" } let g = new RegExp(o), y = e.match(g); if (y) { if (d.year > -1 && (f.year = parseInt(y[d.year])), d.year3 > -1) { let b = parseInt(y[d.year3]); b += 1e3, f.year = b } if (d.year2 > -1) { let b = parseInt(y[d.year2]); b > 50 ? b += 1e3 : b += 2e3, f.year = b } if (d.year1 > -1) { let b = parseInt(y[d.year1]); b = Math.floor(new Date().getFullYear() / 10) * 10 + b, f.year = b } if (d.monthLong > -1 && (f.month = this.resolveMonth(y[d.monthLong])), d.monthShort > -1 && (f.month = this.resolveShortMonth(y[d.monthShort])), d.month > -1 && (f.month = parseInt(y[d.month]) - 1), d.week > -1 && d.day === -1 && (f.month = 0, f.day = ZS(parseInt(y[d.week]), f.year, 1, s)), d.day > -1 && (f.day = parseInt(y[d.day])), d.yearDay > -1 && (f.month = 0, f.day = parseInt(y[d.yearDay])), d.hourBase0 > -1 && (f.hour = parseInt(y[d.hourBase0])), d.hourBase1 > -1 && (f.hour = parseInt(y[d.hourBase1]) - 1), d.hour12Base0 > -1) { let b = parseInt(y[d.hour12Base0]); b == 11 && (b = 0), d.am > -1 && !this.isAm(y[d.am]) && (b += 12), f.hour = b } if (d.hour12Base1 > -1) { let b = parseInt(y[d.hour12Base1]); b == 12 && (b = 0), d.am > -1 && !this.isAm(y[d.am]) && (b += 12), f.hour = b } if (d.minute > -1 && (f.minute = parseInt(y[d.minute])), d.second > -1 && (f.second = parseInt(y[d.second])), d.millisecond > -1) { let b = parseInt(y[d.millisecond]); d.millisecondDigits == 2 ? b *= 10 : d.millisecondDigits == 1 && (b *= 100), f.millisecond = b } if (d.timestamp > -1) { f.timestamp = parseInt(y[d.timestamp]); const b = new Date(f.timestamp); f.year = b.getUTCFullYear(), f.month = b.getUTCMonth(), f.day = b.getUTCDate(), f.hour = b.getUTCHours(), f.minute = b.getUTCMinutes(), f.second = b.getUTCSeconds(), f.millisecond = b.getUTCMilliseconds() } d.zone > -1 && (f.offset = this.resolveTimezoneOffset(new Date(f.year, f.month, f.day), y[d.zone])), d.iso > -1 && (f.year = Ui(y[d.iso + 0]), f.month = Ui(y[d.iso + 1]) - 1, f.day = Ui(y[d.iso + 2]), f.hour = Ui(y[d.iso + 3]), f.minute = Ui(y[d.iso + 4]), f.second = Ui(y[d.iso + 5]), f.millisecond = Ui(y[d.iso + 6]), y[d.iso + 7] == "Z" || y[d.iso + 7] == "z" ? f.utc = !0 : y[d.iso + 7] != "" && (f.offset = this.resolveTimezoneOffset(new Date(f.year, f.month, f.day), y[d.iso + 7]))), f.utc ? r = new Date(Date.UTC(f.year, f.month, f.day, f.hour, f.minute, f.second, f.millisecond)) : r = new Date(f.year, f.month, f.day, f.hour, f.minute + f.offset, f.second, f.millisecond) } else r = new Date(e); return r } resolveTimezoneOffset(e, t) { if (t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)) { let r = t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/), o = r[1], u = r[2], d = r[3], f = parseInt(u) * 60 + parseInt(d); o == "+" && (f *= -1); let m = (e || new Date).getTimezoneOffset(); return f - m } return 0 } resolveMonth(e) { let t = this._months().indexOf(e); return t > -1 || !this._root.language.isDefault() && (t = this._root.language.translateAll(this._months()).indexOf(e), t > -1) ? t : 0 } resolveShortMonth(e) { let t = this._shortMonths().indexOf(e); return t > -1 || (t = this._months().indexOf(e), t > -1) || this._root.language && !this._root.language.isDefault() && (t = this._root.language.translateAll(this._shortMonths()).indexOf(e), t > -1) ? t : 0 } isAm(e) { return this.getStringList(["AM", "A.M.", "A"]).indexOf(e.toUpperCase()) > -1 } getStringList(e) { let t = []; for (let s = 0; s < e.length; s++)this._root.language ? t.push(ny(this._t(e[s]))) : t.push(ny(e[s])); return t } } class NN extends Ut { constructor() { super(...arguments), Object.defineProperty(this, "_unitAliases", { enumerable: !0, configurable: !0, writable: !0, value: { Y: "y", D: "d", H: "h", K: "h", k: "h", n: "S" } }) } _setDefaults() { const e = "_duration_millisecond", t = "_duration_second", s = "_duration_minute", r = "_duration_hour", o = "_duration_day", u = "_duration_week", d = "_duration_month", f = "_duration_year", m = "_second", p = "_minute", g = "_hour", y = "_day", b = "_week", v = "_week", k = "_year"; this._setDefault("negativeBase", 0), this._setDefault("baseUnit", "second"), this._setDefault("durationFormats", { millisecond: { millisecond: this._t(e), second: this._t(e + m), minute: this._t(e + p), hour: this._t(e + g), day: this._t(e + y), week: this._t(e + b), month: this._t(e + v), year: this._t(e + k) }, second: { second: this._t(t), minute: this._t(t + p), hour: this._t(t + g), day: this._t(t + y), week: this._t(t + b), month: this._t(t + v), year: this._t(t + k) }, minute: { minute: this._t(s), hour: this._t(s + g), day: this._t(s + y), week: this._t(s + b), month: this._t(s + v), year: this._t(s + k) }, hour: { hour: this._t(r), day: this._t(r + y), week: this._t(r + b), month: this._t(r + v), year: this._t(r + k) }, day: { day: this._t(o), week: this._t(o + b), month: this._t(o + v), year: this._t(o + k) }, week: { week: this._t(u), month: this._t(u + v), year: this._t(u + k) }, month: { month: this._t(d), year: this._t(d + k) }, year: { year: this._t(f) } }), super._setDefaults() } _beforeChanged() { super._beforeChanged() } format(e, t, s) { let r = s || this.get("baseUnit"); (typeof t > "u" || t === "") && (this.get("durationFormat") != null ? t = this.get("durationFormat") : t = this.getFormat(Ui(e), void 0, r)), t = xm(t); let o = this.parseFormat(t, r), u = Number(e), d; u > this.get("negativeBase") ? d = o.positive : u < this.get("negativeBase") ? d = o.negative : d = o.zero; let f = this.applyFormat(u, d); return d.color !== "" && (f = "[" + d.color + "]" + f + "[/]"), f } parseFormat(e, t) { let s = t || this.get("baseUnit"), r = { positive: { color: "", template: "", parts: [], source: "", baseUnit: s, parsed: !1, absolute: !1 }, negative: { color: "", template: "", parts: [], source: "", baseUnit: s, parsed: !1, absolute: !1 }, zero: { color: "", template: "", parts: [], source: "", baseUnit: s, parsed: !1, absolute: !1 } }; e = e.replace("||", vr); let o = e.split("|"); return r.positive.source = o[0], typeof o[2] > "u" ? r.zero = r.positive : r.zero.source = o[2], typeof o[1] > "u" ? r.negative = r.positive : r.negative.source = o[1], it(r, (u, d) => { if (d.parsed) return; let f = d.source, m = []; m = d.source.match(/^\[([^\]]*)\]/), m && m.length && m[0] !== "" && (f = d.source.substr(m[0].length), d.color = m[1]); let p = xs.chunk(f, !0); for (let g = 0; g < p.length; g++) { let y = p[g]; if (y.text = y.text.replace(vr, "|"), y.type === "value") { y.text.match(/[yYMdDwhHKkmsSn]+a/) && (d.absolute = !0, y.text = y.text.replace(/([yYMdDwhHKkmsSn]+)a/, "$1")); let b = y.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g); if (b) for (let v = 0; v < b.length; v++)b[v] == null && (b[v] = this._unitAliases[b[v]]), d.parts.push(b[v]), y.text = y.text.replace(b[v], za) } d.template += y.text } d.parsed = !0 }), r } applyFormat(e, t) { let s = !t.absolute && e < this.get("negativeBase"); e = Math.abs(e); let r = this.toTimeStamp(e, t.baseUnit), o = t.template; const u = { millisecond: 0, second: 0, minute: 0, hour: 0, day: 0, week: 0, month: 0, year: 0 }; for (let d = 0, f = t.parts.length; d < f; d++) { let m = t.parts[d], p = this._toTimeUnit(m.substr(0, 1)), g; const y = this._getUnitValue(p); d < f - 1 ? g = Math.floor(r / y) : g = Math.round(r / y), u[p] += g, r -= g * y } it(u, (d, f) => { d == "millisecond" && f == 1e3 ? (u.second++, u.millisecond = 0) : d == "second" && f == 60 ? (u.minute++, u.second = 0) : d == "minute" && f == 60 ? (u.hour++, u.minute = 0) : d == "hour" && f == 24 ? (u.day++, u.hour = 0) : d == "day" && f == 7 && t.parts.indexOf("w") !== -1 ? (u.week++, u.day = 0) : d == "day" && f == 30 ? (u.month++, u.day = 0) : d == "month" && f == 12 && (u.year++, u.month = 0) }); for (let d = 0, f = t.parts.length; d < f; d++) { let m = t.parts[d], p = this._toTimeUnit(m.substr(0, 1)), g = m.length; o = o.replace(za, Rt(u[p], g, "0")) } return s && (o = "-" + o), o } toTimeStamp(e, t) { return e * this._getUnitValue(t) } _toTimeUnit(e) { switch (e) { case "S": return "millisecond"; case "s": return "second"; case "m": return "minute"; case "h": return "hour"; case "d": return "day"; case "w": return "week"; case "M": return "month"; case "y": return "year" } } getFormat(e, t, s) { if (this.get("durationFormat") != null) return this.get("durationFormat"); if (s || (s = this.get("baseUnit")), t != null && e != t) { e = Math.abs(e), t = Math.abs(t); let r = this.getValueUnit(Math.max(e, t), s); return this.get("durationFormats")[s][r] } else { let r = this.getValueUnit(e, s); return this.get("durationFormats")[s][r] } } getValueUnit(e, t) { t || (t = this.get("baseUnit")); let s, r = this.getMilliseconds(e, t); return BS(this._getUnitValues(), (o, u) => { if (o == t || s) { if (r / u <= 1) return s || (s = o), !1; s = o } return !0 }), s } getMilliseconds(e, t) { return t || (t = this.get("baseUnit")), e * this._getUnitValue(t) } _getUnitValue(e) { return this._getUnitValues()[e] } _getUnitValues() { return { millisecond: 1, second: 1e3, minute: 6e4, hour: 36e5, day: 864e5, week: 6048e5, month: 2592e6, year: 31536e6 } } } const m0 = { firstDayOfWeek: 1, _decimalSeparator: ".", _thousandSeparator: ",", _percentPrefix: null, _percentSuffix: "%", _big_number_suffix_3: "k", _big_number_suffix_6: "M", _big_number_suffix_9: "G", _big_number_suffix_12: "T", _big_number_suffix_15: "P", _big_number_suffix_18: "E", _big_number_suffix_21: "Z", _big_number_suffix_24: "Y", _small_number_suffix_3: "m", _small_number_suffix_6: "", _small_number_suffix_9: "n", _small_number_suffix_12: "p", _small_number_suffix_15: "f", _small_number_suffix_18: "a", _small_number_suffix_21: "z", _small_number_suffix_24: "y", _byte_suffix_B: "B", _byte_suffix_KB: "KB", _byte_suffix_MB: "MB", _byte_suffix_GB: "GB", _byte_suffix_TB: "TB", _byte_suffix_PB: "PB", _date: "yyyy-MM-dd", _date_millisecond: "mm:ss SSS", _date_millisecond_full: "HH:mm:ss SSS", _date_second: "HH:mm:ss", _date_second_full: "HH:mm:ss", _date_minute: "HH:mm", _date_minute_full: "HH:mm - MMM dd, yyyy", _date_hour: "HH:mm", _date_hour_short: "HH", _date_hour_full: "HH:mm - MMM dd, yyyy", _date_day: "MMM dd", _date_day_full: "MMM dd, yyyy", _date_week: "ww", _date_week_full: "MMM dd, yyyy", _date_month: "MMM", _date_month_full: "MMM, yyyy", _date_year: "yyyy", _duration_millisecond: "SSS", _duration_millisecond_second: "ss.SSS", _duration_millisecond_minute: "mm:ss SSS", _duration_millisecond_hour: "hh:mm:ss SSS", _duration_millisecond_day: "d'd' mm:ss SSS", _duration_millisecond_week: "d'd' mm:ss SSS", _duration_millisecond_month: "M'm' dd'd' mm:ss SSS", _duration_millisecond_year: "y'y' MM'm' dd'd' mm:ss SSS", _duration_second: "ss", _duration_second_minute: "mm:ss", _duration_second_hour: "hh:mm:ss", _duration_second_day: "d'd' hh:mm:ss", _duration_second_week: "d'd' hh:mm:ss", _duration_second_month: "M'm' dd'd' hh:mm:ss", _duration_second_year: "y'y' MM'm' dd'd' hh:mm:ss", _duration_minute: "mm", _duration_minute_hour: "hh:mm", _duration_minute_day: "d'd' hh:mm", _duration_minute_week: "d'd' hh:mm", _duration_minute_month: "M'm' dd'd' hh:mm", _duration_minute_year: "y'y' MM'm' dd'd' hh:mm", _duration_hour: "hh'h'", _duration_hour_day: "d'd' hh'h'", _duration_hour_week: "d'd' hh'h'", _duration_hour_month: "M'm' dd'd' hh'h'", _duration_hour_year: "y'y' MM'm' dd'd' hh'h'", _duration_day: "d'd'", _duration_day_week: "d'd'", _duration_day_month: "M'm' dd'd'", _duration_day_year: "y'y' MM'm' dd'd'", _duration_week: "w'w'", _duration_week_month: "w'w'", _duration_week_year: "w'w'", _duration_month: "M'm'", _duration_month_year: "y'y' MM'm'", _duration_year: "y'y'", _era_ad: "AD", _era_bc: "BC", A: "", P: "", AM: "", PM: "", "A.M.": "", "P.M.": "", January: "", February: "", March: "", April: "", May: "", June: "", July: "", August: "", September: "", October: "", November: "", December: "", Jan: "", Feb: "", Mar: "", Apr: "", "May(short)": "May", Jun: "", Jul: "", Aug: "", Sep: "", Oct: "", Nov: "", Dec: "", Sunday: "", Monday: "", Tuesday: "", Wednesday: "", Thursday: "", Friday: "", Saturday: "", Sun: "", Mon: "", Tue: "", Wed: "", Thu: "", Fri: "", Sat: "", _dateOrd: function (l) { let e = "th"; if (l < 11 || l > 13) switch (l % 10) { case 1: e = "st"; break; case 2: e = "nd"; break; case 3: e = "rd"; break }return e }, "Zoom Out": "", Play: "", Stop: "", Legend: "", "Press ENTER to toggle": "", Loading: "", Home: "", Chart: "", "Serial chart": "", "X/Y chart": "", "Pie chart": "", "Gauge chart": "", "Radar chart": "", "Sankey diagram": "", "Flow diagram": "", "Chord diagram": "", "TreeMap chart": "", "Force directed tree": "", "Sliced chart": "", Series: "", "Candlestick Series": "", "OHLC Series": "", "Column Series": "", "Line Series": "", "Pie Slice Series": "", "Funnel Series": "", "Pyramid Series": "", "X/Y Series": "", Map: "", "Press ENTER to zoom in": "", "Press ENTER to zoom out": "", "Use arrow keys to zoom in and out": "", "Use plus and minus keys on your keyboard to zoom in and out": "", Export: "", Image: "", Data: "", Print: "", "Press ENTER or use arrow keys to navigate": "", "Press ENTER to open": "", "Press ENTER to print.": "", "Press ENTER to export as %1.": "", "(Press ESC to close this message)": "", "Image Export Complete": "", "Export operation took longer than expected. Something might have gone wrong.": "", "Saved from": "", PNG: "", JPG: "", GIF: "", SVG: "", PDF: "", JSON: "", CSV: "", XLSX: "", HTML: "", "Use TAB to select grip buttons or left and right arrows to change selection": "", "Use left and right arrows to move selection": "", "Use left and right arrows to move left selection": "", "Use left and right arrows to move right selection": "", "Use TAB select grip buttons or up and down arrows to change selection": "", "Use up and down arrows to move selection": "", "Use up and down arrows to move lower selection": "", "Use up and down arrows to move upper selection": "", "From %1 to %2": "", "From %1": "", "To %1": "", "No parser available for file: %1": "", "Error parsing file: %1": "", "Unable to load file: %1": "", "Invalid date": "", Close: "", Minimize: "", Confirm: "" }; class CN extends Ut { _setDefaults() { this.setPrivate("defaultLocale", m0), super._setDefaults() } translate(e, t, ...s) { t || (t = this._root.locale || this.getPrivate("defaultLocale")); let r = e, o = t[e]; if (o === null) r = ""; else if (o != null) o && (r = o); else if (t !== this.getPrivate("defaultLocale")) return this.translate(e, this.getPrivate("defaultLocale"), ...s); if (s.length) for (let u = s.length, d = 0; d < u; ++d)r = r.split("%" + (d + 1)).join(s[d]); return r } translateAny(e, t, ...s) { return this.translate(e, t, ...s) } setTranslationAny(e, t, s) { const r = s || this._root.locale; r[e] = t } setTranslationsAny(e, t) { it(e, (s, r) => { this.setTranslationAny(s, r, t) }) } translateEmpty(e, t, ...s) { let r = this.translate(e, t, ...s); return r == e ? "" : r } translateFunc(e, t) { return this._root.locale[e] ? this._root.locale[e] : t !== this.getPrivate("defaultLocale") ? this.translateFunc(e, this.getPrivate("defaultLocale")) : () => "" } translateAll(e, t) { return this.isDefault() ? e : zf(e, s => this.translate(s, t)) } isDefault() { return this.getPrivate("defaultLocale") === this._root.locale } } class vo { constructor(e, t) { if (Object.defineProperty(this, "_root", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_rules", { enumerable: !0, configurable: !0, writable: !0, value: {} }), this._root = e, !t) throw new Error("You cannot use `new Class()`, instead use `Class.new()`") } static new(e) { const t = new this(e, !0); return t.setupDefaultRules(), t } setupDefaultRules() { } _lookupRules(e) { return this._rules[e] } ruleRaw(e, t = []) { let s = this._rules[e]; s || (s = this._rules[e] = []), t.sort(gn); const { index: r, found: o } = PS(s, u => { const d = gn(u.tags.length, t.length); return d === 0 ? d0(u.tags, t, gn) : d }); if (o) return s[r].template; { const u = at.new({}); return s.splice(r, 0, { tags: t, template: u }), u } } rule(e, t = []) { return this.ruleRaw(e, t) } } function De(l, e, t, s) { l.set(e, t.get(s)), t.on(s, r => { l.set(e, r) }) } class TN extends vo { setupDefaultRules() { super.setupDefaultRules(); const e = this._root.language, t = this._root.interfaceColors, s = this._root.horizontalLayout, r = this._root.verticalLayout, o = this.rule.bind(this); o("InterfaceColors").setAll({ stroke: ke.fromHex(15066597), fill: ke.fromHex(15987699), primaryButton: ke.fromHex(6788316), primaryButtonHover: ke.fromHex(6779356), primaryButtonDown: ke.fromHex(6872182), primaryButtonActive: ke.fromHex(6872182), primaryButtonDisabled: ke.fromHex(14342874), primaryButtonTextDisabled: ke.fromHex(16777215), primaryButtonText: ke.fromHex(16777215), primaryButtonStroke: ke.fromHex(16777215), secondaryButton: ke.fromHex(14277081), secondaryButtonHover: ke.fromHex(10724259), secondaryButtonDown: ke.fromHex(9276813), secondaryButtonActive: ke.fromHex(15132390), secondaryButtonText: ke.fromHex(0), secondaryButtonStroke: ke.fromHex(16777215), grid: ke.fromHex(0), background: ke.fromHex(16777215), alternativeBackground: ke.fromHex(0), text: ke.fromHex(0), alternativeText: ke.fromHex(16777215), disabled: ke.fromHex(11382189), positive: ke.fromHex(5288704), negative: ke.fromHex(11730944) }); { const u = o("ColorSet"); u.setAll({ passOptions: { hue: .05, saturation: 0, lightness: 0 }, colors: [ke.fromHex(6797276)], step: 1, reuse: !1, startIndex: 0 }), u.setPrivate("currentStep", 0), u.setPrivate("currentPass", 0) } o("Entity").setAll({ stateAnimationDuration: 0, stateAnimationEasing: un(Ea) }), o("Component").setAll({ interpolationDuration: 0, interpolationEasing: un(Ea) }), o("Sprite").setAll({ visible: !0, scale: 1, opacity: 1, rotation: 0, position: "relative", tooltipX: Oe, tooltipY: Oe, tooltipPosition: "fixed", isMeasured: !0 }), o("Sprite").states.create("default", { visible: !0, opacity: 1 }), o("Container").setAll({ interactiveChildren: !0, setStateOnChildren: !1 }), o("Graphics").setAll({ strokeWidth: 1 }), o("Chart").setAll({ width: Te, height: Te, interactiveChildren: !1 }), o("ZoomableContainer").setAll({ width: Te, height: Te, wheelable: !0, pinchZoom: !0, maxZoomLevel: 32, minZoomLevel: 1, zoomStep: 2, animationEasing: un(Ea), animationDuration: 600, maxPanOut: .4 }), o("Sprite", ["horizontal", "center"]).setAll({ centerX: Oe, x: Oe }), o("Sprite", ["vertical", "center"]).setAll({ centerY: Oe, y: Oe }), o("Container", ["horizontal", "layout"]).setAll({ layout: s }), o("Container", ["vertical", "layout"]).setAll({ layout: r }), o("Pattern").setAll({ repetition: "repeat", width: 50, height: 50, rotation: 0, fillOpacity: 1 }), o("LinePattern").setAll({ gap: 6, colorOpacity: 1, width: 49, height: 49 }), o("RectanglePattern").setAll({ gap: 6, checkered: !1, centered: !0, maxWidth: 5, maxHeight: 5, width: 48, height: 48, strokeWidth: 0 }), o("CirclePattern").setAll({ gap: 5, checkered: !1, centered: !1, radius: 3, strokeWidth: 0, width: 45, height: 45 }), o("GrainPattern").setAll({ width: 200, height: 200, colors: [ke.fromHex(0)], size: 1, horizontalGap: 0, verticalGap: 0, density: 1, minOpacity: 0, maxOpacity: .2 }); { const u = o("PatternSet"); u.setAll({ step: 1 }), De(u, "color", t, "stroke") } o("LinearGradient").setAll({ rotation: 90 }), o("Legend").setAll({ fillField: "fill", strokeField: "stroke", nameField: "name", layout: yn.new(this._root, {}), layer: 30, clickTarget: "itemContainer" }), o("Container", ["legend", "item", "itemcontainer"]).setAll({ paddingLeft: 5, paddingRight: 5, paddingBottom: 5, paddingTop: 5, layout: s, setStateOnChildren: !0, interactiveChildren: !1, ariaChecked: !0, focusable: !0, ariaLabel: e.translate("Press ENTER to toggle"), role: "checkbox" }); { const u = o("Rectangle", ["legend", "item", "background"]); u.setAll({ fillOpacity: 0 }), De(u, "fill", t, "background") } o("Container", ["legend", "marker"]).setAll({ setStateOnChildren: !0, centerY: Oe, paddingLeft: 0, paddingRight: 0, paddingBottom: 0, paddingTop: 0, width: 18, height: 18 }), o("RoundedRectangle", ["legend", "marker", "rectangle"]).setAll({ width: Te, height: Te, cornerRadiusBL: 3, cornerRadiusTL: 3, cornerRadiusBR: 3, cornerRadiusTR: 3 }); { const u = o("RoundedRectangle", ["legend", "marker", "rectangle"]).states.create("disabled", {}); De(u, "fill", t, "disabled"), De(u, "stroke", t, "disabled") } o("Label", ["legend", "label"]).setAll({ centerY: Oe, marginLeft: 5, paddingRight: 0, paddingLeft: 0, paddingTop: 0, paddingBottom: 0, populateText: !0 }); { const u = o("Label", ["legend", "label"]).states.create("disabled", {}); De(u, "fill", t, "disabled") } o("Label", ["legend", "value", "label"]).setAll({ centerY: Oe, marginLeft: 5, paddingRight: 0, paddingLeft: 0, paddingTop: 0, paddingBottom: 0, width: 50, centerX: Te, populateText: !0 }); { const u = o("Label", ["legend", "value", "label"]).states.create("disabled", {}); De(u, "fill", t, "disabled") } o("HeatLegend").setAll({ stepCount: 1 }), o("RoundedRectangle", ["heatlegend", "marker"]).setAll({ cornerRadiusTR: 0, cornerRadiusBR: 0, cornerRadiusTL: 0, cornerRadiusBL: 0 }), o("RoundedRectangle", ["vertical", "heatlegend", "marker"]).setAll({ height: Te, width: 15 }), o("RoundedRectangle", ["horizontal", "heatlegend", "marker"]).setAll({ width: Te, height: 15 }), o("HeatLegend", ["vertical"]).setAll({ height: Te }), o("HeatLegend", ["horizontal"]).setAll({ width: Te }), o("Label", ["heatlegend", "start"]).setAll({ paddingLeft: 5, paddingRight: 5, paddingTop: 5, paddingBottom: 5 }), o("Label", ["heatlegend", "end"]).setAll({ paddingLeft: 5, paddingRight: 5, paddingTop: 5, paddingBottom: 5 }); { const u = o("Label"); u.setAll({ paddingTop: 8, paddingBottom: 8, paddingLeft: 10, paddingRight: 10, fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"', fontSize: "1em", populateText: !1 }), De(u, "fill", t, "text") } o("RadialLabel").setAll({ textType: "regular", centerY: Oe, centerX: Oe, inside: !1, radius: 0, baseRadius: Te, orientation: "auto", textAlign: "center" }), o("EditableLabel").setAll({ editOn: "click", themeTags: ["editablelabel"], multiLine: !0 }), o("RoundedRectangle", ["editablelabel", "background"]).setAll({ fillOpacity: 0, fill: ke.fromHex(0), cornerRadiusBL: 3, cornerRadiusBR: 3, cornerRadiusTL: 3, cornerRadiusTR: 3, strokeOpacity: 0, stroke: ke.fromHex(0) }), o("RoundedRectangle", ["editablelabel", "background"]).states.create("active", { strokeOpacity: .2 }), o("RoundedRectangle").setAll({ cornerRadiusTL: 8, cornerRadiusBL: 8, cornerRadiusTR: 8, cornerRadiusBR: 8 }), o("PointedRectangle").setAll({ pointerBaseWidth: 15, pointerLength: 10, cornerRadius: 8 }), o("Slice").setAll({ shiftRadius: 0, dRadius: 0, dInnerRadius: 0 }); { const u = o("Tick"); u.setAll({ strokeOpacity: .15, isMeasured: !1, length: 4.5, position: "absolute", crisp: !0 }), De(u, "stroke", t, "grid") } o("Bullet").setAll({ locationX: .5, locationY: .5 }), o("Tooltip").setAll({ position: "absolute", getFillFromSprite: !0, getStrokeFromSprite: !1, autoTextColor: !0, paddingTop: 9, paddingBottom: 8, paddingLeft: 10, paddingRight: 10, marginBottom: 5, pointerOrientation: "vertical", centerX: Oe, centerY: Oe, animationEasing: un(Ea), exportable: !1 }), o("Tooltip", ["system"]).setAll({ pointerOrientation: "horizontal", paddingTop: 4, paddingRight: 7, paddingBottom: 4, paddingLeft: 7 }); { const u = o("PointedRectangle", ["tooltip", "system", "background"]); u.setAll({ strokeOpacity: .3 }), De(u, "fill", t, "background"), De(u, "stroke", t, "grid") } o("Label", ["tooltip", "system"]).setAll({ fontSize: 12, fill: t.get("background") }), o("Polygon").setAll({ animationEasing: un(Ea) }), o("Link").setAll({ cornerRadius: 8, setStateOnChildren: !0 }); { const u = o("OrthogonalLine", ["link", "line"]); u.setAll({ isMeasured: !1, crisp: !0 }); const d = u.states.create("active", { strokeWidth: 2 }); De(d, "stroke", t, "negative") } o("OrthogonalLine", ["link", "hit"]).setAll({ strokeWidth: 10, opacity: 0, strokeOpacity: 0 }); { const u = o("OrthogonalLine"); u.setAll({ strokeWidth: 1, strokeOpacity: 1, cornerRadius: 10 }), De(u, "stroke", t, "grid") } { const u = o("Triangle", ["link"]); u.setAll({ width: 14, height: 10, centerY: 0 }), De(u, "fill", t, "grid"), De(u, "stroke", t, "grid"), u.states.create("default", { stateAnimationDuration: 0 }); const d = u.states.create("active", { stateAnimationDuration: 0, stroke: Je(16777215), strokeWidth: 2 }); d.set("draw", f => { f.arc(0, 0, 11, 0, Math.PI * 2), f.moveTo(-4, -4), f.lineTo(4, 4), f.moveTo(4, -4), f.lineTo(-4, 4) }), De(d, "fill", t, "negative") } o("PointedRectangle", ["tooltip", "background"]).setAll({ strokeOpacity: .9, cornerRadius: 4, pointerLength: 4, pointerBaseWidth: 8, fillOpacity: .9, stroke: ke.fromHex(16777215) }); { const u = o("Label", ["tooltip"]); u.setAll({ role: "tooltip", populateText: !0, paddingRight: 0, paddingTop: 0, paddingLeft: 0, paddingBottom: 0 }), De(u, "fill", t, "alternativeText") } o("Button").setAll({ paddingTop: 8, paddingBottom: 8, paddingLeft: 10, paddingRight: 10, interactive: !0, layout: s, interactiveChildren: !1, setStateOnChildren: !0, focusable: !0 }), o("Button").states.create("hover", {}), o("Button").states.create("down", { stateAnimationDuration: 0 }), o("Button").states.create("active", {}), o("Button").states.create("disabled", { forceInactive: !0 }); { const u = o("RoundedRectangle", ["button", "background"]); De(u, "fill", t, "primaryButton"), De(u, "stroke", t, "primaryButtonStroke") } { const u = o("RoundedRectangle", ["button", "background"]).states.create("hover", {}); De(u, "fill", t, "primaryButtonHover") } { const u = o("RoundedRectangle", ["button", "background"]).states.create("down", { stateAnimationDuration: 0 }); De(u, "fill", t, "primaryButtonDown") } { const u = o("RoundedRectangle", ["button", "background"]).states.create("active", {}); De(u, "fill", t, "primaryButtonActive") } { const u = o("RoundedRectangle", ["button", "background"]).states.create("disabled", {}); De(u, "fill", t, "primaryButtonDisabled") } { const u = o("Graphics", ["button", "icon"]).states.create("disabled", {}); De(u, "fill", t, "primaryButtonTextDisabled") } { const u = o("Label", ["button"]).states.create("disabled", {}); De(u, "fill", t, "primaryButtonTextDisabled") } { const u = o("Graphics", ["button", "icon"]); u.setAll({ forceInactive: !0 }), De(u, "stroke", t, "primaryButtonText") } { const u = o("Label", ["button"]); De(u, "fill", t, "primaryButtonText") } o("ConfirmButton").setAll({ toggleKey: "active", setStateOnChildren: !0, label: Pi.new(this._root, { text: e.translate("Confirm"), forceHidden: !0 }) }); { const u = o("RoundedRectangle", ["button", "background", "confirm"]).states.create("active", {}); De(u, "fill", t, "negative") } o("Label", ["button", "confirm"]).setAll({ paddingTop: 0, paddingBottom: 0, paddingRight: 3, paddingLeft: 5 }), o("Label", ["button", "confirm"]).states.create("default", { stateAnimationDuration: 0 }), o("Label", ["button", "confirm"]).states.create("active", { forceHidden: !1, stateAnimationDuration: 0 }); { const u = o("Graphics", ["icon", "confirm", "button"]); u.setAll({ stateAnimationDuration: 0 }), u.states.create("default", { stateAnimationDuration: 0 }), De(u, "stroke", t, "primaryButtonText") } { const u = o("Graphics", ["icon", "confirm", "button"]).states.create("active", { svgPath: "M -5 1 L 0 6 L 8 -5", strokeWidth: 2 }); De(u, "stroke", t, "primaryButtonText") } { const u = o("Graphics", ["icon", "confirm", "button", "secondary"]).states.create("active", {}); De(u, "stroke", t, "primaryButtonText") } { const u = o("RoundedRectangle", ["button", "background", "confirm", "secondary"]).states.create("active", { fillOpacity: 1 }); De(u, "fill", t, "negative") } { const u = o("RoundedRectangle", ["button", "background", "confirm", "secondary"]).states.create("hoverActive", { fillOpacity: 1 }); De(u, "fill", t, "negative") } o("Button", ["button", "confirm"]).states.create("hoverActive", {}), o("Button", ["zoom"]).setAll({ paddingTop: 18, paddingBottom: 18, paddingLeft: 12, paddingRight: 12, centerX: 46, centerY: -10, y: 0, x: Te, role: "button", ariaLabel: e.translate("Zoom Out"), layer: 30 }); { const u = o("RoundedRectangle", ["background", "button", "zoom"]); u.setAll({ cornerRadiusBL: 40, cornerRadiusBR: 40, cornerRadiusTL: 40, cornerRadiusTR: 40 }), De(u, "fill", t, "primaryButton") } { const u = o("RoundedRectangle", ["background", "button", "zoom"]).states.create("hover", {}); De(u, "fill", t, "primaryButtonHover") } { const u = o("RoundedRectangle", ["background", "button", "zoom"]).states.create("down", { stateAnimationDuration: 0 }); De(u, "fill", t, "primaryButtonDown") } { const u = o("Graphics", ["icon", "button", "zoom"]); u.setAll({ crisp: !0, strokeOpacity: .7, draw: d => { d.moveTo(0, 0), d.lineTo(12, 0) } }), De(u, "stroke", t, "primaryButtonText") } o("Button", ["resize"]).setAll({ paddingTop: 9, paddingBottom: 9, paddingLeft: 13, paddingRight: 13, draggable: !0, centerX: Oe, centerY: Oe, position: "absolute", role: "slider", ariaValueMin: "0", ariaValueMax: "100", ariaLabel: e.translate("Use up and down arrows to move selection") }); { const u = o("RoundedRectangle", ["background", "resize", "button"]); u.setAll({ cornerRadiusBL: 40, cornerRadiusBR: 40, cornerRadiusTL: 40, cornerRadiusTR: 40 }), De(u, "fill", t, "secondaryButton"), De(u, "stroke", t, "secondaryButtonStroke") } { const u = o("RoundedRectangle", ["background", "resize", "button"]).states.create("hover", {}); De(u, "fill", t, "secondaryButtonHover") } { const u = o("RoundedRectangle", ["background", "resize", "button"]).states.create("down", { stateAnimationDuration: 0 }); De(u, "fill", t, "secondaryButtonDown") } { const u = o("Graphics", ["resize", "button", "icon"]); u.setAll({ interactive: !1, crisp: !0, strokeOpacity: .5, draw: d => { d.moveTo(0, .5), d.lineTo(0, 12.5), d.moveTo(4, .5), d.lineTo(4, 12.5) } }), De(u, "stroke", t, "secondaryButtonText") } o("Button", ["resize", "vertical"]).setAll({ rotation: 90, cursorOverStyle: "ns-resize" }), o("Button", ["resize", "horizontal"]).setAll({ cursorOverStyle: "ew-resize" }), o("Button", ["play"]).setAll({ paddingTop: 13, paddingBottom: 13, paddingLeft: 14, paddingRight: 14, ariaLabel: e.translate("Play"), toggleKey: "active" }); { const u = o("RoundedRectangle", ["play", "background"]); u.setAll({ strokeOpacity: .5, cornerRadiusBL: 100, cornerRadiusBR: 100, cornerRadiusTL: 100, cornerRadiusTR: 100 }), De(u, "fill", t, "primaryButton") } { const u = o("Graphics", ["play", "icon"]); u.setAll({ stateAnimationDuration: 0, dx: 1, draw: d => { d.moveTo(0, -5), d.lineTo(8, 0), d.lineTo(0, 5), d.lineTo(0, -5) } }), De(u, "fill", t, "primaryButtonText") } o("Graphics", ["play", "icon"]).states.create("default", { stateAnimationDuration: 0 }), o("Graphics", ["play", "icon"]).states.create("active", { stateAnimationDuration: 0, draw: u => { u.moveTo(-4, -5), u.lineTo(-1, -5), u.lineTo(-1, 5), u.lineTo(-4, 5), u.lineTo(-4, -5), u.moveTo(4, -5), u.lineTo(1, -5), u.lineTo(1, 5), u.lineTo(4, 5), u.lineTo(4, -5) } }), o("Button", ["switch"]).setAll({ paddingTop: 4, paddingBottom: 4, paddingLeft: 4, paddingRight: 4, ariaLabel: e.translate("Press ENTER to toggle"), toggleKey: "active", width: 40, height: 24, layout: null }); { const u = o("RoundedRectangle", ["switch", "background"]); u.setAll({ strokeOpacity: .5, cornerRadiusBL: 100, cornerRadiusBR: 100, cornerRadiusTL: 100, cornerRadiusTR: 100 }), De(u, "fill", t, "primaryButton") } { const u = o("Circle", ["switch", "icon"]); u.setAll({ radius: 8, centerY: 0, centerX: 0, dx: 0 }), De(u, "fill", t, "primaryButtonText") } o("Graphics", ["switch", "icon"]).states.create("active", { dx: 16 }), o("Scrollbar").setAll({ start: 0, end: 1, layer: 30, animationEasing: un(Ea) }), o("Scrollbar", ["vertical"]).setAll({ marginRight: 13, marginLeft: 13, minWidth: 12, height: Te }), o("Scrollbar", ["horizontal"]).setAll({ marginTop: 13, marginBottom: 13, minHeight: 12, width: Te }), this.rule("Button", ["scrollbar"]).setAll({ exportable: !1 }); { const u = o("RoundedRectangle", ["scrollbar", "main", "background"]); u.setAll({ cornerRadiusTL: 8, cornerRadiusBL: 8, cornerRadiusTR: 8, cornerRadiusBR: 8, fillOpacity: .8 }), De(u, "fill", t, "fill") } { const u = o("RoundedRectangle", ["scrollbar", "thumb"]); u.setAll({ role: "slider", ariaLive: "polite", position: "absolute", draggable: !0 }), De(u, "fill", t, "secondaryButton") } { const u = o("RoundedRectangle", ["scrollbar", "thumb"]).states.create("hover", {}); De(u, "fill", t, "secondaryButtonHover") } { const u = o("RoundedRectangle", ["scrollbar", "thumb"]).states.create("down", { stateAnimationDuration: 0 }); De(u, "fill", t, "secondaryButtonDown") } o("RoundedRectangle", ["scrollbar", "thumb", "vertical"]).setAll({ x: Oe, width: Te, centerX: Oe, ariaLabel: e.translate("Use up and down arrows to move selection") }), o("RoundedRectangle", ["scrollbar", "thumb", "horizontal"]).setAll({ y: Oe, centerY: Oe, height: Te, ariaLabel: e.translate("Use left and right arrows to move selection") }); { const u = o("PointedRectangle", ["axis", "tooltip", "background"]); u.setAll({ cornerRadius: 0 }), De(u, "fill", t, "alternativeBackground") } o("Label", ["axis", "tooltip"]).setAll({ role: void 0 }), o("Label", ["axis", "tooltip", "y"]).setAll({ textAlign: "right" }), o("Label", ["axis", "tooltip", "y", "opposite"]).setAll({ textAlign: "left" }), o("Label", ["axis", "tooltip", "x"]).setAll({ textAlign: "center" }), o("Tooltip", ["categoryaxis"]).setAll({ labelText: "{category}" }), o("Star").setAll({ spikes: 5, innerRadius: 5, radius: 10 }), o("Tooltip", ["stock"]).setAll({ paddingTop: 6, paddingBottom: 5, paddingLeft: 7, paddingRight: 7 }), o("Tooltip", ["indicator"]).setAll({ forceHidden: !0 }), o("PointedRectangle", ["tooltip", "stock", "axis"]).setAll({ pointerLength: 0, pointerBaseWidth: 0, cornerRadius: 3 }), o("Label", ["tooltip", "stock"]).setAll({ fontSize: "0.8em" }), o("SpriteResizer").setAll({ rotationStep: 10, isMeasured: !1 }), o("Container", ["resizer", "grip"]).states.create("hover", {}); { const u = o("RoundedRectangle", ["resizer", "grip"]); u.setAll({ strokeOpacity: .7, strokeWidth: 1, fillOpacity: 1, width: 12, height: 12 }), De(u, "fill", t, "background"), De(u, "stroke", t, "alternativeBackground") } { const u = o("RoundedRectangle", ["resizer", "grip", "outline"]); u.setAll({ strokeOpacity: 0, fillOpacity: 0, width: 20, height: 20 }), u.states.create("hover", { fillOpacity: .3 }), De(u, "fill", t, "alternativeBackground") } o("RoundedRectangle", ["resizer", "grip", "left"]).setAll({ cornerRadiusBL: 0, cornerRadiusBR: 0, cornerRadiusTL: 0, cornerRadiusTR: 0 }), o("RoundedRectangle", ["resizer", "grip", "right"]).setAll({ cornerRadiusBL: 0, cornerRadiusBR: 0, cornerRadiusTL: 0, cornerRadiusTR: 0 }); { const u = o("Rectangle", ["resizer", "rectangle"]); u.setAll({ strokeDasharray: [2, 2], strokeOpacity: .5, strokeWidth: 1 }), De(u, "stroke", t, "alternativeBackground") } o("Graphics", ["button", "plus", "icon"]).setAll({ x: Oe, y: Oe, draw: u => { u.moveTo(-4, 0), u.lineTo(4, 0), u.moveTo(0, -4), u.lineTo(0, 4) } }), o("Graphics", ["button", "minus", "icon"]).setAll({ x: Oe, y: Oe, draw: u => { u.moveTo(-4, 0), u.lineTo(4, 0) } }), o("Graphics", ["button", "home", "icon"]).setAll({ x: Oe, y: Oe, svgPath: "M 8 -1 L 6 -1 L 6 7 L 2 7 L 2 1 L -2 1 L -2 7 L -6 7 L -6 -1 L -8 -1 L 0 -9 L 8 -1 Z M 8 -1" }), o("Button", ["zoomtools"]).setAll({ marginTop: 1, marginBottom: 2 }), o("ZoomTools").setAll({ x: Te, centerX: Te, y: Te, centerY: Te, paddingRight: 10, paddingBottom: 10 }), o("ProgressPie").setAll({ radius: Te, width: 50, height: 50, centerX: Jt(-50), centerY: Jt(-50), innerRadius: Jt(85), numberFormat: "#." }); { const u = o("Label", ["progresspie"]); u.setAll({ centerX: Oe, centerY: Oe, fontSize: "0.75em" }), De(u, "fill", t, "primaryButton") } { const u = o("Circle", ["progresspie"]); u.setAll({ fillOpacity: .5 }), De(u, "fill", t, "background") } { const u = o("Slice", ["progresspie"]); u.setAll({ startAngle: -90 }), De(u, "fill", t, "primaryButton") } { const u = o("Slice", ["progresspie", "background"]); u.setAll({ fillOpacity: .2, arc: 360 }), De(u, "fill", t, "primaryButton") } o("EditableLabel", ["numericstepper"]).setAll({ y: Oe, centerY: Oe, multiLine: !1, marginRight: 2 }); { const u = o("Container", ["numericstepper", "buttons"]); u.setAll({ layout: this._root.verticalLayout, centerY: Oe, y: Oe, marginRight: 10, opacity: 0 }), u.states.create("active", { opacity: 1 }), u.states.create("default", { opacity: 0 }) } { const u = o("Triangle", ["numericstepper"]); u.setAll({ width: 17, height: 11, marginTop: 3, marginBottom: 3, strokeWidth: 5, strokeOpacity: 0, cursorOverStyle: "pointer" }), De(u, "fill", t, "secondaryButton") } o("Triangle", ["downbutton"]).setAll({ rotation: 180 }) } } class bf { constructor(e = 1, t = 0, s = 0, r = 1, o = 0, u = 0) { Object.defineProperty(this, "a", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "b", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "c", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "d", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "tx", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "ty", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this.a = e, this.b = t, this.c = s, this.d = r, this.tx = o, this.ty = u } setTransform(e, t, s, r, o, u = 1) { this.a = Math.cos(o) * u, this.b = Math.sin(o) * u, this.c = -Math.sin(o) * u, this.d = Math.cos(o) * u, this.tx = e - (s * this.a + r * this.c), this.ty = t - (s * this.b + r * this.d) } apply(e) { return { x: this.a * e.x + this.c * e.y + this.tx, y: this.b * e.x + this.d * e.y + this.ty } } applyInverse(e) { const t = 1 / (this.a * this.d + this.c * -this.b); return { x: this.d * t * e.x + -this.c * t * e.y + (this.ty * this.c - this.tx * this.d) * t, y: this.a * t * e.y + -this.b * t * e.x + (-this.ty * this.a + this.tx * this.b) * t } } append(e) { const t = this.a, s = this.b, r = this.c, o = this.d; this.a = e.a * t + e.b * r, this.b = e.a * s + e.b * o, this.c = e.c * t + e.d * r, this.d = e.c * s + e.d * o, this.tx = e.tx * t + e.ty * r + this.tx, this.ty = e.tx * s + e.ty * o + this.ty } prepend(e) { const t = this.tx; if (e.a !== 1 || e.b !== 0 || e.c !== 0 || e.d !== 1) { const s = this.a, r = this.c; this.a = s * e.a + this.b * e.c, this.b = s * e.b + this.b * e.d, this.c = r * e.a + this.d * e.c, this.d = r * e.b + this.d * e.d } this.tx = t * e.a + this.ty * e.c + e.tx, this.ty = t * e.b + this.ty * e.d + e.ty } copyFrom(e) { this.a = e.a, this.b = e.b, this.c = e.c, this.d = e.d, this.tx = e.tx, this.ty = e.ty } } var DN = (function () { function l(e, t) { var s = [], r = !0, o = !1, u = void 0; try { for (var d = e[Symbol.iterator](), f; !(r = (f = d.next()).done) && (s.push(f.value), !(t && s.length === t)); r = !0); } catch (m) { o = !0, u = m } finally { try { !r && d.return && d.return() } finally { if (o) throw u } } return s } return function (e, t) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return l(e, t); throw new TypeError("Invalid attempt to destructure non-iterable instance") } })(), Xl = Math.PI * 2, xf = function (e, t, s, r, o, u, d) { var f = e.x, m = e.y; f *= t, m *= s; var p = r * f - o * m, g = o * f + r * m; return { x: p + u, y: g + d } }, AN = function (e, t) { var s = t === 1.5707963267948966 ? .551915024494 : t === -1.5707963267948966 ? -.551915024494 : 1.3333333333333333 * Math.tan(t / 4), r = Math.cos(e), o = Math.sin(e), u = Math.cos(e + t), d = Math.sin(e + t); return [{ x: r - o * s, y: o + r * s }, { x: u + d * s, y: d - u * s }, { x: u, y: d }] }, fy = function (e, t, s, r) { var o = e * r - t * s < 0 ? -1 : 1, u = e * s + t * r; return u > 1 && (u = 1), u < -1 && (u = -1), o * Math.acos(u) }, MN = function (e, t, s, r, o, u, d, f, m, p, g, y) { var b = Math.pow(o, 2), v = Math.pow(u, 2), k = Math.pow(g, 2), j = Math.pow(y, 2), S = b * v - b * j - v * k; S < 0 && (S = 0), S /= b * j + v * k, S = Math.sqrt(S) * (d === f ? -1 : 1); var w = S * o / u * y, N = S * -u / o * g, T = p * w - m * N + (e + s) / 2, R = m * w + p * N + (t + r) / 2, P = (g - w) / o, O = (y - N) / u, z = (-g - w) / o, F = (-y - N) / u, B = fy(1, 0, P, O), A = fy(P, O, z, F); return f === 0 && A > 0 && (A -= Xl), f === 1 && A < 0 && (A += Xl), [T, R, B, A] }, PN = function (e) { var t = e.px, s = e.py, r = e.cx, o = e.cy, u = e.rx, d = e.ry, f = e.xAxisRotation, m = f === void 0 ? 0 : f, p = e.largeArcFlag, g = p === void 0 ? 0 : p, y = e.sweepFlag, b = y === void 0 ? 0 : y, v = []; if (u === 0 || d === 0) return []; var k = Math.sin(m * Xl / 360), j = Math.cos(m * Xl / 360), S = j * (t - r) / 2 + k * (s - o) / 2, w = -k * (t - r) / 2 + j * (s - o) / 2; if (S === 0 && w === 0) return []; u = Math.abs(u), d = Math.abs(d); var N = Math.pow(S, 2) / Math.pow(u, 2) + Math.pow(w, 2) / Math.pow(d, 2); N > 1 && (u *= Math.sqrt(N), d *= Math.sqrt(N)); var T = MN(t, s, r, o, u, d, g, b, k, j, S, w), R = DN(T, 4), P = R[0], O = R[1], z = R[2], F = R[3], B = Math.abs(F) / (Xl / 4); Math.abs(1 - B) < 1e-7 && (B = 1); var A = Math.max(Math.ceil(B), 1); F /= A; for (var L = 0; L < A; L++)v.push(AN(z, F)), z += F; return v.map(function (M) { var X = xf(M[0], u, d, j, k, P, O), U = X.x, I = X.y, H = xf(M[1], u, d, j, k, P, O), Y = H.x, ee = H.y, fe = xf(M[2], u, d, j, k, P, O), q = fe.x, Q = fe.y; return { x1: U, y1: I, x2: Y, y2: ee, x: q, y: Q } }) }; function ON(l, e, t) { if (e !== t) throw new Error("Required " + t + " arguments for " + l + " but got " + e) } function Hl(l, e, t) { if (e < t) throw new Error("Required at least " + t + " arguments for " + l + " but got " + e) } function Yi(l, e, t) { if (Hl(l, e, t), e % t !== 0) throw new Error("Arguments for " + l + " must be in pairs of " + t) } function EN(l) { for (let e = 0; e < l.length; e += 7) { let t = e + 3, s = l[t]; if (s.length > 1) { const r = /^([01])([01])(.*)$/.exec(s); r !== null && (l.splice(t, 0, r[1]), ++t, l.splice(t, 0, r[2]), ++t, r[3].length > 0 ? l[t] = r[3] : l.splice(t, 1)) } if (++t, s = l[t], s.length > 1) { const r = /^([01])(.+)$/.exec(s); r !== null && (l.splice(t, 0, r[1]), ++t, l[t] = r[2]) } } } function my(l) { if (l === 0 || l === 1) return l; throw new Error("Flag must be 0 or 1") } function BN(l) { const e = [0, 0, 0]; for (let t = 0; t < 24; t++)e[t % 3] <<= 1, e[t % 3] |= l & 1, l >>= 1; return (e[0] | 0) + (e[1] << 8) + (e[2] << 16) } function Xc(l, e) { for (; !(l.interactive && !e(l));)if (l._parent) l = l._parent; else break } function RN(l, e, t) { return jt(l, qf(e), s => { const r = i0(s); let o = s.touches; o ? (o.length == 0 && (o = s.changedTouches), t(Hf(o), r)) : t([s], r) }) } function py(l) { const e = document.createElement("canvas"); e.width = 1, e.height = 1; const t = e.getContext("2d", { willReadFrequently: !0 }); t.drawImage(l, 0, 0, 1, 1); try { return t.getImageData(0, 0, 1, 1), !1 } catch { return console.warn('Image "' + l.src + '" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'), !0 } } function Il(l) { l.width = 0, l.height = 0, l.style.width = "0px", l.style.height = "0px" } function gy(l) { return Math.floor(l) + .5 } class LN { constructor() { Object.defineProperty(this, "_x", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_y", { enumerable: !0, configurable: !0, writable: !0, value: 0 }) } get x() { return this._x } get y() { return this._y } set x(e) { this._x = e } set y(e) { this._y = e } } class Ou extends bm { constructor(e) { super(), Object.defineProperty(this, "_layer", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "mask", { enumerable: !0, configurable: !0, writable: !0, value: null }), Object.defineProperty(this, "visible", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "exportable", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "interactive", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "inactive", { enumerable: !0, configurable: !0, writable: !0, value: null }), Object.defineProperty(this, "wheelable", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "cancelTouch", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "isMeasured", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "buttonMode", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "alpha", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), Object.defineProperty(this, "compoundAlpha", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), Object.defineProperty(this, "angle", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "scale", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), Object.defineProperty(this, "x", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "y", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "crisp", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "pivot", { enumerable: !0, configurable: !0, writable: !0, value: new LN }), Object.defineProperty(this, "filter", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "cursorOverStyle", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_replacedCursorStyle", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_localMatrix", { enumerable: !0, configurable: !0, writable: !0, value: new bf }), Object.defineProperty(this, "_matrix", { enumerable: !0, configurable: !0, writable: !0, value: new bf }), Object.defineProperty(this, "_uMatrix", { enumerable: !0, configurable: !0, writable: !0, value: new bf }), Object.defineProperty(this, "_renderer", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_parent", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_localBounds", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_bounds", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_colorId", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this._renderer = e } subStatus(e) { return { inactive: this.inactive == null ? e.inactive : this.inactive, layer: this._layer || e.layer } } _dispose() { this._renderer._removeObject(this), this.getLayer().dirty = !0 } getCanvas() { return this.getLayer().view } getLayer() { let e = this; for (; ;) { if (e._layer) return e._layer; if (e._parent) e = e._parent; else return this._renderer.defaultLayer } } setLayer(e, t) { e == null ? this._layer = void 0 : (this._layer = this._renderer.getLayer(e, !0), this._layer.visible = !0, this._layer.margin = t, t && yr(this._layer.view, !1), this._renderer._ghostLayer.setMargin(this._renderer.layers), this._parent && this._parent.registerChildLayer(this._layer), this._layer.dirty = !0, this._renderer.resizeLayer(this._layer), this._renderer.resizeGhost()) } markDirtyLayer() { this.getLayer().dirty = !0 } clear() { this.invalidateBounds() } invalidateBounds() { this._localBounds = void 0 } _addBounds(e) { } _getColorId() { return this._colorId === void 0 && (this._colorId = this._renderer.paintId(this)), this._colorId } _isInteractive(e) { return !e.inactive && (this.interactive || this._renderer._forceInteractive > 0) } _isInteractiveMask(e) { return this._isInteractive(e) } contains(e) { for (; ;) { if (e === this) return !0; if (e._parent) e = e._parent; else return !1 } } toGlobal(e) { return this._matrix.apply(e) } toLocal(e) { return this._matrix.applyInverse(e) } getLocalMatrix() { return this._uMatrix.setTransform(0, 0, this.pivot.x, this.pivot.y, this.angle * Math.PI / 180, this.scale), this._uMatrix } getLocalBounds() { return this._localBounds || (this._localBounds = { left: 1e7, top: 1e7, right: -1e7, bottom: -1e7 }, this._addBounds(this._localBounds)), this._localBounds } getAdjustedBounds(e) { this._setMatrix(); const t = this.getLocalMatrix(), s = t.apply({ x: e.left, y: e.top }), r = t.apply({ x: e.right, y: e.top }), o = t.apply({ x: e.right, y: e.bottom }), u = t.apply({ x: e.left, y: e.bottom }); return { left: Math.min(s.x, r.x, o.x, u.x), top: Math.min(s.y, r.y, o.y, u.y), right: Math.max(s.x, r.x, o.x, u.x), bottom: Math.max(s.y, r.y, o.y, u.y) } } on(e, t, s) { return this.interactive ? this._renderer._addEvent(this, e, t, s) : new Gt(() => { }) } _setMatrix() { this._localMatrix.setTransform(this.x, this.y, this.pivot.x, this.pivot.y, this.angle * Math.PI / 180, this.scale), this._matrix.copyFrom(this._localMatrix), this._parent && this._matrix.prepend(this._parent._matrix) } _transform(e, t) { const s = this._matrix; let r = s.tx * t, o = s.ty * t; this.crisp && (r = gy(r), o = gy(o)), e.setTransform(s.a * t, s.b * t, s.c * t, s.d * t, r, o) } _transformMargin(e, t, s) { const r = this._matrix; e.setTransform(r.a * t, r.b * t, r.c * t, r.d * t, (r.tx + s.left) * t, (r.ty + s.top) * t) } _transformLayer(e, t, s) { s.margin ? this._transformMargin(e, s.scale || t, s.margin) : this._transform(e, s.scale || t) } render(e, t = 0) { if (this.visible && (this.exportable !== !1 || !this._renderer._omitTainted)) { this._setMatrix(); const s = this.subStatus(e), r = this._renderer.resolution, o = this._renderer.layers, u = this._renderer._ghostLayer, d = u.context, f = this.mask; f && f._setMatrix(), te(o, m => { if (m) { const p = m.context; p.save(), f && (f._transformLayer(p, r, m), f._runPath(p), p.clip()), p.globalAlpha = this.compoundAlpha * this.alpha, this._transformLayer(p, r, m), this.filter && (p.filter = this.filter) } }), d.save(), f && this._isInteractiveMask(s) && (f._transformMargin(d, r, u.margin), f._runPath(d), d.clip()), this._transformMargin(d, r, u.margin), s.layer.order > 0 && !t && Ff(this._renderer._deferredGhostLayers, s.layer.order), this._render(s, t), d.restore(), te(o, m => { m && m.context.restore() }) } } _render(e, t = 0) { this.exportable === !1 && (e.layer.tainted = !0) } _ghostOnly(e = 0) { return e > 0 } _drawGhost(e, t = 0) { const s = this._isInteractive(e), r = e.layer.order || 0; return !!(s && (r == 0 && !this._ghostOnly(t) || r == t)) } hovering() { return this._renderer._hovering.has(this) } dragging() { return this._renderer._dragging.some(e => e.value === this) } shouldCancelTouch() { const e = this._renderer; return e.tapToActivate && !e._touchActive ? !1 : this.cancelTouch ? !0 : this._parent ? this._parent.shouldCancelTouch() : !1 } } class zN extends Ou { constructor() { super(...arguments), Object.defineProperty(this, "interactiveChildren", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "_childLayers", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_children", { enumerable: !0, configurable: !0, writable: !0, value: [] }) } _isInteractiveMask(e) { return this.interactiveChildren || super._isInteractiveMask(e) } addChild(e) { e._parent = this, this._children.push(e), e._layer && this.registerChildLayer(e._layer) } addChildAt(e, t) { e._parent = this, this._children.splice(t, 0, e), e._layer && this.registerChildLayer(e._layer) } removeChild(e) { e._parent = void 0, ci(this._children, e) } _render(e, t) { super._render(e); const s = this._renderer; this.interactive && this.interactiveChildren && ++s._forceInteractive, te(this._children, r => { r.compoundAlpha = this.compoundAlpha * this.alpha, r.render(e, t) }), this.interactive && this.interactiveChildren && --s._forceInteractive } registerChildLayer(e) { this._childLayers || (this._childLayers = []), Wl(this._childLayers, e), this._parent && this._parent.registerChildLayer(e) } markDirtyLayer(e = !1) { super.markDirtyLayer(), e && this._childLayers && te(this._childLayers, t => t.dirty = !0) } _dispose() { super._dispose(), this._childLayers && te(this._childLayers, e => { e.dirty = !0 }) } } function Ht(l, e) { l.left = Math.min(l.left, e.x), l.top = Math.min(l.top, e.y), l.right = Math.max(l.right, e.x), l.bottom = Math.max(l.bottom, e.y) } class $t { colorize(e, t) { } colorizeGhost(e, t) { this.colorize(e, t) } path(e) { } pathGhost(e) { this.path(e) } addBounds(e) { } } class FN extends $t { colorize(e, t) { e.beginPath() } } class yf extends $t { constructor(e) { super(), Object.defineProperty(this, "color", { enumerable: !0, configurable: !0, writable: !0, value: e }) } colorize(e, t) { t !== void 0 ? e.fillStyle = t : e.fillStyle = this.color } } class HN extends $t { constructor(e) { super(), Object.defineProperty(this, "clearShadow", { enumerable: !0, configurable: !0, writable: !0, value: e }) } colorize(e, t) { e.fill(), this.clearShadow && (e.shadowColor = "", e.shadowBlur = 0, e.shadowOffsetX = 0, e.shadowOffsetY = 0) } } class IN extends $t { colorize(e, t) { e.stroke() } } class vf extends $t { constructor(e, t, s, r) { super(), Object.defineProperty(this, "width", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "color", { enumerable: !0, configurable: !0, writable: !0, value: t }), Object.defineProperty(this, "lineJoin", { enumerable: !0, configurable: !0, writable: !0, value: s }), Object.defineProperty(this, "lineCap", { enumerable: !0, configurable: !0, writable: !0, value: r }) } colorize(e, t) { t !== void 0 ? e.strokeStyle = t : e.strokeStyle = this.color, e.lineWidth = this.width, this.lineJoin && (e.lineJoin = this.lineJoin), this.lineCap && (e.lineCap = this.lineCap) } } class qN extends $t { constructor(e) { super(), Object.defineProperty(this, "dash", { enumerable: !0, configurable: !0, writable: !0, value: e }) } colorize(e, t) { e.setLineDash(this.dash) } } class YN extends $t { constructor(e) { super(), Object.defineProperty(this, "dashOffset", { enumerable: !0, configurable: !0, writable: !0, value: e }) } colorize(e, t) { e.lineDashOffset = this.dashOffset } } class XN extends $t { constructor(e, t, s, r) { super(), Object.defineProperty(this, "x", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "y", { enumerable: !0, configurable: !0, writable: !0, value: t }), Object.defineProperty(this, "width", { enumerable: !0, configurable: !0, writable: !0, value: s }), Object.defineProperty(this, "height", { enumerable: !0, configurable: !0, writable: !0, value: r }) } path(e) { e.rect(this.x, this.y, this.width, this.height) } addBounds(e) { const t = this.x, s = this.y, r = t + this.width, o = s + this.height; Ht(e, { x: t, y: s }), Ht(e, { x: r, y: s }), Ht(e, { x: t, y: o }), Ht(e, { x: r, y: o }) } } class UN extends $t { constructor(e, t, s) { super(), Object.defineProperty(this, "x", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "y", { enumerable: !0, configurable: !0, writable: !0, value: t }), Object.defineProperty(this, "radius", { enumerable: !0, configurable: !0, writable: !0, value: s }) } path(e) { e.moveTo(this.x + this.radius, this.y), e.arc(this.x, this.y, this.radius, 0, 2 * Math.PI) } addBounds(e) { Ht(e, { x: this.x - this.radius, y: this.y - this.radius }), Ht(e, { x: this.x + this.radius, y: this.y + this.radius }) } } class VN extends $t { constructor(e, t, s, r) { super(), Object.defineProperty(this, "x", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "y", { enumerable: !0, configurable: !0, writable: !0, value: t }), Object.defineProperty(this, "radiusX", { enumerable: !0, configurable: !0, writable: !0, value: s }), Object.defineProperty(this, "radiusY", { enumerable: !0, configurable: !0, writable: !0, value: r }) } path(e) { e.ellipse(0, 0, this.radiusX, this.radiusY, 0, 0, Math.PI * 2) } addBounds(e) { Ht(e, { x: this.x - this.radiusX, y: this.y - this.radiusY }), Ht(e, { x: this.x + this.radiusX, y: this.y + this.radiusY }) } } class WN extends $t { constructor(e, t, s, r, o, u) { super(), Object.defineProperty(this, "cx", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "cy", { enumerable: !0, configurable: !0, writable: !0, value: t }), Object.defineProperty(this, "radius", { enumerable: !0, configurable: !0, writable: !0, value: s }), Object.defineProperty(this, "startAngle", { enumerable: !0, configurable: !0, writable: !0, value: r }), Object.defineProperty(this, "endAngle", { enumerable: !0, configurable: !0, writable: !0, value: o }), Object.defineProperty(this, "anticlockwise", { enumerable: !0, configurable: !0, writable: !0, value: u }) } path(e) { this.radius > 0 && e.arc(this.cx, this.cy, this.radius, this.startAngle, this.endAngle, this.anticlockwise) } addBounds(e) { let t = Xf(this.cx, this.cy, this.startAngle * wr, this.endAngle * wr, this.radius); Ht(e, { x: t.left, y: t.top }), Ht(e, { x: t.right, y: t.bottom }) } } class GN extends $t { constructor(e, t, s, r, o) { super(), Object.defineProperty(this, "x1", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "y1", { enumerable: !0, configurable: !0, writable: !0, value: t }), Object.defineProperty(this, "x2", { enumerable: !0, configurable: !0, writable: !0, value: s }), Object.defineProperty(this, "y2", { enumerable: !0, configurable: !0, writable: !0, value: r }), Object.defineProperty(this, "radius", { enumerable: !0, configurable: !0, writable: !0, value: o }) } path(e) { this.radius > 0 && e.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius) } addBounds(e) { } } class $N extends $t { constructor(e, t) { super(), Object.defineProperty(this, "x", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "y", { enumerable: !0, configurable: !0, writable: !0, value: t }) } path(e) { e.lineTo(this.x, this.y) } addBounds(e) { Ht(e, { x: this.x, y: this.y }) } } class KN extends $t { constructor(e, t) { super(), Object.defineProperty(this, "x", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "y", { enumerable: !0, configurable: !0, writable: !0, value: t }) } path(e) { e.moveTo(this.x, this.y) } addBounds(e) { Ht(e, { x: this.x, y: this.y }) } } class ZN extends $t { path(e) { e.closePath() } } class QN extends $t { constructor(e, t, s, r, o, u) { super(), Object.defineProperty(this, "cpX", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "cpY", { enumerable: !0, configurable: !0, writable: !0, value: t }), Object.defineProperty(this, "cpX2", { enumerable: !0, configurable: !0, writable: !0, value: s }), Object.defineProperty(this, "cpY2", { enumerable: !0, configurable: !0, writable: !0, value: r }), Object.defineProperty(this, "toX", { enumerable: !0, configurable: !0, writable: !0, value: o }), Object.defineProperty(this, "toY", { enumerable: !0, configurable: !0, writable: !0, value: u }) } path(e) { e.bezierCurveTo(this.cpX, this.cpY, this.cpX2, this.cpY2, this.toX, this.toY) } addBounds(e) { Ht(e, { x: this.cpX, y: this.cpY }), Ht(e, { x: this.cpX2, y: this.cpY2 }), Ht(e, { x: this.toX, y: this.toY }) } } class JN extends $t { constructor(e, t, s, r) { super(), Object.defineProperty(this, "cpX", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "cpY", { enumerable: !0, configurable: !0, writable: !0, value: t }), Object.defineProperty(this, "toX", { enumerable: !0, configurable: !0, writable: !0, value: s }), Object.defineProperty(this, "toY", { enumerable: !0, configurable: !0, writable: !0, value: r }) } path(e) { e.quadraticCurveTo(this.cpX, this.cpY, this.toX, this.toY) } addBounds(e) { Ht(e, { x: this.cpX, y: this.cpY }), Ht(e, { x: this.toX, y: this.toY }) } } class eC extends $t { constructor(e, t, s, r, o) { super(), Object.defineProperty(this, "color", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "blur", { enumerable: !0, configurable: !0, writable: !0, value: t }), Object.defineProperty(this, "offsetX", { enumerable: !0, configurable: !0, writable: !0, value: s }), Object.defineProperty(this, "offsetY", { enumerable: !0, configurable: !0, writable: !0, value: r }), Object.defineProperty(this, "opacity", { enumerable: !0, configurable: !0, writable: !0, value: o }) } colorize(e, t) { this.opacity && (e.fillStyle = this.color), e.shadowColor = this.color, e.shadowBlur = this.blur, e.shadowOffsetX = this.offsetX, e.shadowOffsetY = this.offsetY } colorizeGhost(e, t) { } } class tC extends $t { constructor(e, t, s, r, o) { super(), Object.defineProperty(this, "image", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "width", { enumerable: !0, configurable: !0, writable: !0, value: t }), Object.defineProperty(this, "height", { enumerable: !0, configurable: !0, writable: !0, value: s }), Object.defineProperty(this, "x", { enumerable: !0, configurable: !0, writable: !0, value: r }), Object.defineProperty(this, "y", { enumerable: !0, configurable: !0, writable: !0, value: o }) } path(e) { e.drawImage(this.image, this.x, this.y, this.width, this.height) } addBounds(e) { Ht(e, { x: this.x, y: this.y }), Ht(e, { x: this.width, y: this.height }) } } class iC extends Ou {
    constructor() { super(...arguments), Object.defineProperty(this, "_operations", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "blendMode", { enumerable: !0, configurable: !0, writable: !0, value: lu.NORMAL }), Object.defineProperty(this, "_hasShadows", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_fillAlpha", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_strokeAlpha", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }) } clear() { super.clear(), this._operations.length = 0 } _pushOp(e) { this._operations.push(e) } beginFill(e, t = 1) { this._fillAlpha = t, e ? e instanceof ke ? this._pushOp(new yf(e.toCSS(t))) : (this.isMeasured = !0, this._pushOp(new yf(e))) : this._pushOp(new yf("rgba(0, 0, 0, " + t + ")")) } endFill() { this._pushOp(new HN(this._hasShadows)) } endStroke() { this._pushOp(new IN) } beginPath() { this._pushOp(new FN) } lineStyle(e = 0, t, s = 1, r, o) { this._strokeAlpha = s, t ? t instanceof ke ? this._pushOp(new vf(e, t.toCSS(s), r, o)) : this._pushOp(new vf(e, t, r, o)) : this._pushOp(new vf(e, "rgba(0, 0, 0, " + s + ")", r, o)) } setLineDash(e) { this._pushOp(new qN(e || [])) } setLineDashOffset(e = 0) { this._pushOp(new YN(e)) } drawRect(e, t, s, r) { this._pushOp(new XN(e, t, s, r)) } drawCircle(e, t, s) { this._pushOp(new UN(e, t, s)) } drawEllipse(e, t, s, r) { this._pushOp(new VN(e, t, s, r)) } arc(e, t, s, r, o, u = !1) { this._pushOp(new WN(e, t, s, r, o, u)) } arcTo(e, t, s, r, o) { this._pushOp(new GN(e, t, s, r, o)) } lineTo(e, t) { this._pushOp(new $N(e, t)) } moveTo(e, t) { this._pushOp(new KN(e, t)) } bezierCurveTo(e, t, s, r, o, u) { this._pushOp(new QN(e, t, s, r, o, u)) } quadraticCurveTo(e, t, s, r) { this._pushOp(new JN(e, t, s, r)) } closePath() { this._pushOp(new ZN) } shadow(e, t = 0, s = 0, r = 0, o) { this._hasShadows = !0, this._pushOp(new eC(o ? e.toCSS(o) : e.toCSS(this._fillAlpha || this._strokeAlpha), t, s, r)) } image(e, t, s, r, o) { this._pushOp(new tC(e, t, s, r, o)) } svgPath(e) {
        let t = 0, s = 0, r = null, o = null, u = null, d = null; const f = /([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g, m = /[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g, p = this._operations.length; try { let g; for (; (g = f.exec(e)) !== null;) { const y = g[1], b = g[2], v = []; for (; (g = m.exec(b)) !== null;)v.push(g[1]); switch (y !== "S" && y !== "s" && y !== "C" && y !== "c" && (r = null, o = null), y !== "Q" && y !== "q" && y !== "T" && y !== "t" && (u = null, d = null), y) { case "M": Yi(y, v.length, 2), t = +v[0], s = +v[1], this.moveTo(t, s); for (let j = 2; j < v.length; j += 2)t = +v[j], s = +v[j + 1], this.lineTo(t, s); break; case "m": Yi(y, v.length, 2), t += +v[0], s += +v[1], this.moveTo(t, s); for (let j = 2; j < v.length; j += 2)t += +v[j], s += +v[j + 1], this.lineTo(t, s); break; case "L": Yi(y, v.length, 2); for (let j = 0; j < v.length; j += 2)t = +v[j], s = +v[j + 1], this.lineTo(t, s); break; case "l": Yi(y, v.length, 2); for (let j = 0; j < v.length; j += 2)t += +v[j], s += +v[j + 1], this.lineTo(t, s); break; case "H": Hl(y, v.length, 1); for (let j = 0; j < v.length; ++j)t = +v[j], this.lineTo(t, s); break; case "h": Hl(y, v.length, 1); for (let j = 0; j < v.length; ++j)t += +v[j], this.lineTo(t, s); break; case "V": Hl(y, v.length, 1); for (let j = 0; j < v.length; ++j)s = +v[j], this.lineTo(t, s); break; case "v": Hl(y, v.length, 1); for (let j = 0; j < v.length; ++j)s += +v[j], this.lineTo(t, s); break; case "C": Yi(y, v.length, 6); for (let j = 0; j < v.length; j += 6) { const S = +v[j], w = +v[j + 1]; r = +v[j + 2], o = +v[j + 3], t = +v[j + 4], s = +v[j + 5], this.bezierCurveTo(S, w, r, o, t, s) } break; case "c": Yi(y, v.length, 6); for (let j = 0; j < v.length; j += 6) { const S = +v[j] + t, w = +v[j + 1] + s; r = +v[j + 2] + t, o = +v[j + 3] + s, t += +v[j + 4], s += +v[j + 5], this.bezierCurveTo(S, w, r, o, t, s) } break; case "S": Yi(y, v.length, 4), (r === null || o === null) && (r = t, o = s); for (let j = 0; j < v.length; j += 4) { const S = 2 * t - r, w = 2 * s - o; r = +v[j], o = +v[j + 1], t = +v[j + 2], s = +v[j + 3], this.bezierCurveTo(S, w, r, o, t, s) } break; case "s": Yi(y, v.length, 4), (r === null || o === null) && (r = t, o = s); for (let j = 0; j < v.length; j += 4) { const S = 2 * t - r, w = 2 * s - o; r = +v[j] + t, o = +v[j + 1] + s, t += +v[j + 2], s += +v[j + 3], this.bezierCurveTo(S, w, r, o, t, s) } break; case "Q": Yi(y, v.length, 4); for (let j = 0; j < v.length; j += 4)u = +v[j], d = +v[j + 1], t = +v[j + 2], s = +v[j + 3], this.quadraticCurveTo(u, d, t, s); break; case "q": Yi(y, v.length, 4); for (let j = 0; j < v.length; j += 4)u = +v[j] + t, d = +v[j + 1] + s, t += +v[j + 2], s += +v[j + 3], this.quadraticCurveTo(u, d, t, s); break; case "T": Yi(y, v.length, 2), (u === null || d === null) && (u = t, d = s); for (let j = 0; j < v.length; j += 2)u = 2 * t - u, d = 2 * s - d, t = +v[j], s = +v[j + 1], this.quadraticCurveTo(u, d, t, s); break; case "t": Yi(y, v.length, 2), (u === null || d === null) && (u = t, d = s); for (let j = 0; j < v.length; j += 2)u = 2 * t - u, d = 2 * s - d, t += +v[j], s += +v[j + 1], this.quadraticCurveTo(u, d, t, s); break; case "A": case "a": const k = y === "a"; EN(v), Yi(y, v.length, 7); for (let j = 0; j < v.length; j += 7) { let S = +v[j + 5], w = +v[j + 6]; k && (S += t, w += s); const N = PN({ px: t, py: s, rx: +v[j], ry: +v[j + 1], xAxisRotation: +v[j + 2], largeArcFlag: my(+v[j + 3]), sweepFlag: my(+v[j + 4]), cx: S, cy: w }); te(N, T => { this.bezierCurveTo(T.x1, T.y1, T.x2, T.y2, T.x, T.y), t = T.x, s = T.y }) } break; case "Z": case "z": ON(y, v.length, 0), this.closePath(); break } } } catch (g) {
            this._operations.length = p, console.warn(`Error when parsing svgPath:
  `+ g.message + `
`+ e)
        }
    } _runPath(e) { e.beginPath(), te(this._operations, t => { t.path(e) }) } _render(e, t = 0) { super._render(e); const s = e.layer.dirty, r = this._isInteractive(e), o = this._ghostOnly(t), u = this._drawGhost(e, t); if (s || r || o) { const d = e.layer.context, f = this._renderer._ghostLayer.context; s && !o && (d.globalCompositeOperation = this.blendMode, d.beginPath()); let m; u && (f.beginPath(), m = this._getColorId()), te(this._operations, p => { s && !o && (p.path(d), p.colorize(d, void 0)), u && (p.pathGhost(f), p.colorizeGhost(f, m)) }) } } renderDetached(e) { if (this.visible) { this._setMatrix(), e.save(); const t = this.mask; t && (t._setMatrix(), t._transform(e, 1), t._runPath(e), e.clip()), e.globalAlpha = this.compoundAlpha * this.alpha, this._transform(e, 1), this.filter && (e.filter = this.filter), e.globalCompositeOperation = this.blendMode, e.beginPath(), te(this._operations, s => { s.path(e), s.colorize(e, void 0) }), e.restore() } } _addBounds(e) { this.visible && this.isMeasured && te(this._operations, t => { t.addBounds(e) }) }
} class p0 extends Ou { constructor(e, t, s) { super(e), Object.defineProperty(this, "text", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "style", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "resolution", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), Object.defineProperty(this, "textVisible", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "truncated", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_textInfo", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_originalScale", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), this.text = t, this.style = s } invalidateBounds() { super.invalidateBounds(), this._textInfo = void 0 } invalidateVisibility() { this.textVisible = !0, this.scale = this._originalScale || 1 } _shared(e) { this.style.textAlign && (e.textAlign = this.style.textAlign), this.style.direction && (e.direction = this.style.direction), this.style.textBaseline && (e.textBaseline = this.style.textBaseline) } _prerender(e, t = !1, s = !1) { super._render(e); const r = e.layer.context, o = this._renderer._ghostLayer.context, u = this.style; let d = this._getFontStyle(void 0, s); r.font = d, this._isInteractive(e) && !t && (o.font = d), u.fill && (u.fill instanceof ke ? r.fillStyle = u.fill.toCSS(u.fillOpacity != null ? u.fillOpacity : 1) : r.fillStyle = u.fill), u.shadowColor && (e.layer.context.shadowColor = u.shadowColor.toCSS(u.shadowOpacity || 1)), u.shadowBlur && (e.layer.context.shadowBlur = u.shadowBlur), u.shadowOffsetX && (e.layer.context.shadowOffsetX = u.shadowOffsetX), u.shadowOffsetY && (e.layer.context.shadowOffsetY = u.shadowOffsetY), this._shared(r), this._isInteractive(e) && !t && (o.fillStyle = this._getColorId(), this._shared(o)) } _getFontStyle(e, t = !1) { const s = this.style; let r = []; return e && e.fontVariant ? r.push(e.fontVariant) : s.fontVariant && r.push(s.fontVariant), t || (e && e.fontWeight ? r.push(e.fontWeight) : s.fontWeight && r.push(s.fontWeight)), e && e.fontStyle ? r.push(e.fontStyle) : s.fontStyle && r.push(s.fontStyle), e && e.fontSize ? (le(e.fontSize) && (e.fontSize = e.fontSize + "px"), r.push(e.fontSize)) : s.fontSize && (le(s.fontSize) && (s.fontSize = s.fontSize + "px"), r.push(s.fontSize)), e && e.fontFamily ? r.push(e.fontFamily) : s.fontFamily ? r.push(s.fontFamily) : r.length && r.push("Arial"), r.join(" ") } _render(e, t = 0) { if (this._textInfo || this._measure(e), this.textVisible) { const s = this._isInteractive(e), r = e.layer.context, o = e.layer.dirty, u = this._renderer._ghostLayer.context, d = this._ghostOnly(t), f = this._drawGhost(e, t); r.save(), u.save(), this._prerender(e), te(this._textInfo, (m, p) => { te(m.textChunks, (g, y) => { if (g.style && (r.save(), u.save(), d || (r.font = g.style), this._isInteractive(e) && (u.font = g.style)), g.fill && (r.save(), d || (r.fillStyle = g.fill.toCSS())), o && !d && r.fillText(g.text, g.offsetX, m.offsetY + g.offsetY), g.textDecoration == "underline" || g.textDecoration == "line-through") { let b = 1, v = 1, k = g.height; const j = this.style.oversizedBehavior || ""; if (["truncate", "wrap", "wrap-no-break"].indexOf(j) > -1) { const N = this._measureText(g.text, r); g.width = N.actualBoundingBoxLeft + N.actualBoundingBoxRight } let S = g.offsetX; switch (this.style.textAlign) { case "right": case "end": S -= g.width; break; case "center": S -= g.width / 2; break }if (g.style) switch (xs.getTextStyle(g.style).fontWeight) { case "bolder": case "bold": case "700": case "800": case "900": b = 2; break }k && (v = k / 20); let w; g.textDecoration == "line-through" ? w = b + m.offsetY + g.offsetY - g.height / 2 : w = b + v * 1.5 + m.offsetY + g.offsetY, d || (r.save(), r.beginPath(), g.fill ? r.strokeStyle = g.fill.toCSS() : this.style.fill && this.style.fill instanceof ke && (r.strokeStyle = this.style.fill.toCSS()), r.lineWidth = b * v, r.moveTo(S, w), r.lineTo(S + g.width, w), r.stroke(), r.restore()) } s && this.interactive && f && u.fillText(g.text, g.offsetX, m.offsetY + g.offsetY), g.fill && r.restore(), g.style && (r.restore(), u.restore()) }) }), r.restore(), u.restore() } } _addBounds(e) { if (this.visible && this.isMeasured) { const t = this._measure({ inactive: this.inactive, layer: this.getLayer() }); Ht(e, { x: t.left, y: t.top }), Ht(e, { x: t.right, y: t.bottom }) } } _ignoreFontWeight() { return /apple/i.test(navigator.vendor) } _measure(e) { const t = e.layer.context, s = this._renderer._ghostLayer.context, r = this.style.direction == "rtl"; this._textInfo = []; const o = this.style.oversizedBehavior, u = this.style.maxWidth, d = le(u) && o == "truncate", f = le(u) && (o == "wrap" || o == "wrap-no-break"); t.save(), s.save(), this._prerender(e, !0, this._ignoreFontWeight()); const m = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ", p = this.text.toString().replace(/\r/g, "").split(/\n/); let g = !0, y = 0, b = 0, v = 0, k; te(p, (S, w) => { let N; for (S == "" ? N = [{ type: "value", text: "" }] : N = xs.chunk(S, !1, this.style.ignoreFormatting); N.length > 0;) { let T = { offsetY: v, ascent: 0, width: 0, height: 0, left: 0, right: 0, textChunks: [] }; const R = this._measureText(m, t), P = R.actualBoundingBoxAscent + R.actualBoundingBoxDescent; T.height = P, T.ascent = R.actualBoundingBoxAscent; let O, z = this.style.textDecoration, F, B, A = !1, L = !0, M = [], X; gm(N, (U, I) => { if (U.type == "format") if (U.text == "[/]") g || (t.restore(), s.restore(), g = !0), F = void 0, k = void 0, B = void 0, z = this.style.textDecoration, X = void 0, O = U.text; else { g || (t.restore(), s.restore()); let H = xs.getTextStyle(U.text); const Y = this._getFontStyle(H); t.save(), s.save(), t.font = Y, k = Y, O = U.text, H.textDecoration && (z = H.textDecoration), H.fill && (F = H.fill), H.width && (B = Ui(H.width)), H.verticalAlign && (X = H.verticalAlign), g = !1; const ee = this._measureText(m, t), fe = ee.actualBoundingBoxAscent + ee.actualBoundingBoxDescent; fe > T.height && (T.height = fe), ee.actualBoundingBoxAscent > T.ascent && (T.ascent = ee.actualBoundingBoxAscent) } else if (U.type == "value" && !A) { const H = this._measureText(U.text, t); let Y = H.actualBoundingBoxLeft + H.actualBoundingBoxRight; if (d) { this.truncated = void 0; let Q = L || this.style.breakWords || !1; const ce = this.style.ellipsis || "", W = this._measureText(ce, t), ae = W.actualBoundingBoxLeft + W.actualBoundingBoxRight; if (T.width + Y > u) { const J = u - T.width - ae; U.text = this._truncateText(t, U.text, J, Q), U.text += ce, A = !0, this.truncated = !0 } } else if (f && T.width + Y > u) { const Q = u - T.width, ce = this._truncateText(t, U.text, Q, !1, L && this.style.oversizedBehavior != "wrap-no-break"); if (ce == "") return this.textVisible = !0, !1; M = N.slice(I + 1), jr(ce) != jr(U.text) && (M.unshift({ type: "value", text: U.text.substr(ce.length) }), O && M.unshift({ type: "format", text: O })), U.text = jr(ce), N = [], A = !0 } let ee = 1, fe = 1; if (k && B && B > Y) { const Q = Y / B; switch (this.style.textAlign) { case "right": case "end": ee = Q; break; case "center": ee = Q, fe = Q; break; default: fe = Q }Y = B } const q = H.actualBoundingBoxAscent + H.actualBoundingBoxDescent; q > T.height && (T.height = q), H.actualBoundingBoxAscent > T.ascent && (T.ascent = H.actualBoundingBoxAscent), T.width += Y, T.left += H.actualBoundingBoxLeft / ee, T.right += H.actualBoundingBoxRight / fe, T.textChunks.push({ style: k, fill: F, text: U.text, width: Y, height: q, left: H.actualBoundingBoxLeft, right: H.actualBoundingBoxRight, ascent: H.actualBoundingBoxAscent, offsetX: 0, offsetY: 0, textDecoration: z, verticalAlign: X }), L = !1 } return !0 }), this.style.lineHeight instanceof Ie ? (T.height *= this.style.lineHeight.value, T.ascent *= this.style.lineHeight.value) : (T.height *= this.style.lineHeight || 1.2, T.ascent *= this.style.lineHeight || 1.2), y < T.left && (y = T.left), b < T.right && (b = T.right), this._textInfo.push(T), v += T.height, N = M || [] } }), g || (t.restore(), s.restore()), te(this._textInfo, (S, w) => { let N = 0; te(S.textChunks, T => { if (T.offsetX = N + T.left - S.left, T.offsetY += S.height - S.height * (this.style.baselineRatio || .19), N += T.width * (r ? -1 : 1), T.verticalAlign) switch (T.verticalAlign) { case "super": T.offsetY -= S.height / 2 - T.height / 2; break; case "sub": T.offsetY += T.height / 2; break } }) }); const j = { left: r ? -b : -y, top: 0, right: r ? y : b, bottom: v }; if (o !== "none") { const S = this._fitRatio(j); if (S < 1) if (o == "fit") le(this.style.minScale) && S < this.style.minScale ? (this.textVisible = !1, j.left = 0, j.top = 0, j.right = 0, j.bottom = 0) : (this._originalScale || (this._originalScale = this.scale), this.scale = S, this.textVisible = !0); else if (o == "hide") this.textVisible = !1, j.left = 0, j.top = 0, j.right = 0, j.bottom = 0; else { switch (this.style.textAlign) { case "right": case "end": j.left = r ? u : -u, j.right = 0; break; case "center": j.left = -u / 2, j.right = u / 2; break; default: j.left = 0, j.right = r ? -u : u }this.scale = this._originalScale || 1, this._originalScale = void 0, this.textVisible = !0 } else this.scale = this._originalScale || 1, this._originalScale = void 0, this.textVisible = !0 } return t.restore(), s.restore(), j } _fitRatio(e) { const t = this.style.maxWidth, s = this.style.maxHeight; if (!le(t) && !le(s)) return 1; const r = e.right - e.left, o = e.bottom - e.top; return Math.min(t / r || 1, s / o || 1) } _truncateText(e, t, s, r = !1, o = !0) { let u; do { if (r) t = t.slice(0, -1); else { let f = t.replace(/[^,;:!?\\\/\s]+[,;:!?\\\/\s]*$/g, ""); if ((f == "" || f === t) && o) r = !0; else { if (f == "") return t; t = f } } const d = this._measureText(t, e); u = d.actualBoundingBoxLeft + d.actualBoundingBoxRight } while (u > s && t != ""); return t } _measureText(e, t) { let s = t.measureText(e), r = {}; if (s.actualBoundingBoxAscent == null) { const u = document.createElement("div"); u.innerText = e, u.style.visibility = "hidden", u.style.position = "absolute", u.style.top = "-1000000px;", u.style.fontFamily = this.style.fontFamily || "", u.style.fontSize = this.style.fontSize + "", document.body.appendChild(u); const d = u.getBoundingClientRect(); document.body.removeChild(u); const f = d.height, m = s.width; r = { actualBoundingBoxAscent: f, actualBoundingBoxDescent: 0, actualBoundingBoxLeft: 0, actualBoundingBoxRight: m, fontBoundingBoxAscent: f, fontBoundingBoxDescent: 0, width: m } } else r = { actualBoundingBoxAscent: s.actualBoundingBoxAscent, actualBoundingBoxDescent: s.actualBoundingBoxDescent, actualBoundingBoxLeft: s.actualBoundingBoxLeft, actualBoundingBoxRight: s.actualBoundingBoxRight, fontBoundingBoxAscent: s.actualBoundingBoxAscent, fontBoundingBoxDescent: s.actualBoundingBoxDescent, width: s.width }; const o = s.width; switch (this.style.textAlign) { case "right": case "end": r.actualBoundingBoxLeft = o, r.actualBoundingBoxRight = 0; break; case "center": r.actualBoundingBoxLeft = o / 2, r.actualBoundingBoxRight = o / 2; break; default: r.actualBoundingBoxLeft = 0, r.actualBoundingBoxRight = o }return r } } class sC { constructor() { Object.defineProperty(this, "fill", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "fillOpacity", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "textAlign", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "fontFamily", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "fontSize", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "fontWeight", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "fontStyle", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "fontVariant", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "textDecoration", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "shadowColor", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "shadowBlur", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "shadowOffsetX", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "shadowOffsetY", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "shadowOpacity", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "lineHeight", { enumerable: !0, configurable: !0, writable: !0, value: Jt(120) }), Object.defineProperty(this, "baselineRatio", { enumerable: !0, configurable: !0, writable: !0, value: .19 }), Object.defineProperty(this, "direction", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "textBaseline", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "oversizedBehavior", { enumerable: !0, configurable: !0, writable: !0, value: "none" }), Object.defineProperty(this, "breakWords", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "ellipsis", { enumerable: !0, configurable: !0, writable: !0, value: "" }), Object.defineProperty(this, "maxWidth", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "maxHeight", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "minScale", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "ignoreFormatting", { enumerable: !0, configurable: !0, writable: !0, value: !1 }) } } class aC extends p0 { constructor() { super(...arguments), Object.defineProperty(this, "textType", { enumerable: !0, configurable: !0, writable: !0, value: "circular" }), Object.defineProperty(this, "radius", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "startAngle", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "inside", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "orientation", { enumerable: !0, configurable: !0, writable: !0, value: "auto" }), Object.defineProperty(this, "kerning", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_textReversed", { enumerable: !0, configurable: !0, writable: !0, value: !1 }) } _render(e, t = 0) { this.textType === "circular" ? this._renderCircular(e, t) : super._render(e, t) } _renderCircular(e, t = 0) { if (this.textVisible) { this._prerender(e); const s = this._isInteractive(e), r = e.layer.context, o = e.layer.dirty, u = this._renderer._ghostLayer.context; r.save(), s && u.save(), this._textInfo || this._measure(e); let d = this.radius || 0, f = this.startAngle || 0, m = 0, p = this.orientation, g = p == "auto" ? "auto" : p == "inward"; const y = this.inside, b = this.style.textAlign || "left", v = this.kerning || 0; let k = b == "left" ? 1 : -1; const j = !this._textReversed, S = this._ghostOnly(t), w = this._drawGhost(e, t); if (g == "auto") { let N = 0, T = 0; te(this._textInfo, (R, P) => { const O = f + R.width / (d - R.height) / 2 * -k; O > N && (N = O) }), b == "left" ? T = (N + m / 2) * wr : b == "right" ? T = (N - m / 2) * wr : T = f * wr, T = Au(T), g = T >= 270 || T <= 90 } g == !0 && j && (this._textInfo.reverse(), this._textReversed = !0), te(this._textInfo, (N, T) => { const R = N.height; y || (d += R), (k == -1 && g || k == 1 && !g) && j && N.textChunks.reverse(); let P = f; m = 0, b == "center" && (P += N.width / (d - R) / 2 * -k, m = P - f), P += Math.PI * (g ? 0 : 1), r.save(), s && u.save(), S || r.rotate(P), s && u.rotate(P); let O = 0; te(N.textChunks, (z, F) => { const B = z.text, A = z.width; O = A / 2 / (d - R) * k, S || r.rotate(O), s && u.rotate(O), z.style && (r.save(), u.save(), S || (r.font = z.style), s && (u.font = z.style)), z.fill && (r.save(), S || (r.fillStyle = z.fill.toCSS())), S || (r.textBaseline = "middle", r.textAlign = "center"), s && (u.textBaseline = "middle", u.textAlign = "center"), o && !S && r.fillText(B, 0, (g ? 1 : -1) * (0 - d + R / 2)), s && w && u.fillText(B, 0, (g ? 1 : -1) * (0 - d + R / 2)), z.fill && r.restore(), z.style && (r.restore(), u.restore()), O = (A / 2 + v) / (d - R) * k, S || r.rotate(O), s && u.rotate(O) }), r.restore(), s && u.restore(), y && (d -= R) }), r.restore(), s && u.restore() } } _measure(e) { return this.textType === "circular" ? this._measureCircular(e) : super._measure(e) } _measureCircular(e) { const t = e.layer.context, s = this._renderer._ghostLayer.context, r = this.style.direction == "rtl", o = this.style.oversizedBehavior, u = this.style.maxWidth, d = le(u) && o == "truncate", f = this.style.ellipsis || ""; let m; this.textVisible = !0, this._textInfo = [], this._textReversed = !1, t.save(), s.save(), this._prerender(e, !0); const p = this.text.toString().replace(/\r/g, "").split(/\n/); let g = !0, y = 0, b = 0; return te(p, (v, k) => { let j = xs.chunk(v, !1, this.style.ignoreFormatting), S = { offsetY: b, ascent: 0, width: 0, height: 0, left: 0, right: 0, textChunks: [] }, w, N, T; te(j, (R, P) => { if (R.type == "format") { if (R.text == "[/]") g || (t.restore(), s.restore(), g = !0), N = void 0, w = void 0, T = void 0; else { let O = xs.getTextStyle(R.text); const z = this._getFontStyle(O); t.save(), s.save(), t.font = z, w = z, O.fill && (N = O.fill), O.width && (T = Ui(O.width)), g = !1 } d && (m = this._measureText(f, t)) } else if (R.type == "value") { let O = R.text.match(/./ug) || []; r && (O = GS(R.text), O.reverse()); for (let z = 0; z < O.length; z++) { const F = O[z], B = this._measureText(F, t); let A = B.width; w && T && T > A && (A = T); const L = B.actualBoundingBoxAscent + B.actualBoundingBoxDescent; if (L > S.height && (S.height = L), B.actualBoundingBoxAscent > S.ascent && (S.ascent = B.actualBoundingBoxAscent), y += A, d) { m || (m = this._measureText(f, t)); const M = m.actualBoundingBoxLeft + m.actualBoundingBoxRight; if (y + M > u) { S.textChunks.length == 1 ? this.textVisible = !1 : (S.width += M, S.left += m.actualBoundingBoxLeft, S.right += m.actualBoundingBoxRight, S.textChunks.push({ style: w, fill: N, text: f, width: M, height: L + m.actualBoundingBoxDescent, left: m.actualBoundingBoxLeft, right: m.actualBoundingBoxRight, ascent: m.actualBoundingBoxAscent, offsetX: 0, offsetY: L, textDecoration: void 0 })); break } } S.width += A, S.left += B.actualBoundingBoxLeft, S.right += B.actualBoundingBoxRight, S.textChunks.push({ style: w, fill: N, text: F, width: A, height: L + B.actualBoundingBoxDescent, left: B.actualBoundingBoxLeft, right: B.actualBoundingBoxRight, ascent: B.actualBoundingBoxAscent, offsetX: 0, offsetY: L, textDecoration: void 0 }) } } }), this.style.lineHeight instanceof Ie ? S.height *= this.style.lineHeight.value : S.height *= this.style.lineHeight || 1.2, this._textInfo.push(S), b += S.height }), g || (t.restore(), s.restore()), o == "hide" && y > u && (this.textVisible = !1), te(this._textInfo, v => { te(v.textChunks, k => { k.offsetY += Math.round((v.height - k.height + (v.ascent - k.ascent)) / 2) }) }), t.restore(), s.restore(), { left: 0, top: 0, right: 0, bottom: 0 } } } class nC extends Ou { constructor(e, t) { super(e), Object.defineProperty(this, "width", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "height", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "image", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "tainted", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "shadowColor", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "shadowBlur", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "shadowOffsetX", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "shadowOffsetY", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "shadowOpacity", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_imageMask", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this.image = t } _dispose() { super._dispose(), this._imageMask && Il(this._imageMask) } getLocalBounds() { if (!this._localBounds) { let e = 0, t = 0; this.width && (e = this.width), this.height && (t = this.height), this._localBounds = { left: 0, top: 0, right: e, bottom: t }, this._addBounds(this._localBounds) } return this._localBounds } _render(e, t = 0) { if (super._render(e), this.image) { if (this.tainted === void 0 && (this.tainted = py(this.image), e.layer.tainted = !0), this.tainted && this._renderer._omitTainted) return; const s = this._ghostOnly(t), r = this._drawGhost(e, t); if (e.layer.dirty && !s) { this.shadowColor && (e.layer.context.shadowColor = this.shadowColor.toCSS(this.shadowOpacity || 1)), this.shadowBlur && (e.layer.context.shadowBlur = this.shadowBlur), this.shadowOffsetX && (e.layer.context.shadowOffsetX = this.shadowOffsetX), this.shadowOffsetY && (e.layer.context.shadowOffsetY = this.shadowOffsetY); const o = this.width || this.image.naturalWidth, u = this.height || this.image.naturalHeight; e.layer.context.drawImage(this.image, 0, 0, o, u) } if (this.interactive && this._isInteractive(e) && r) { const o = this._getMask(this.image); this._renderer._ghostLayer.context.drawImage(o, 0, 0) } } } clear() { super.clear(), this.image = void 0, this._imageMask = void 0 } _getMask(e) { if (this._imageMask === void 0) { const t = this.width || e.naturalWidth, s = this.height || e.naturalHeight, r = document.createElement("canvas"); r.width = t, r.height = s; const o = r.getContext("2d"); o.imageSmoothingEnabled = !1, o.fillStyle = this._getColorId(), o.fillRect(0, 0, t, s), py(e) || (o.globalCompositeOperation = "destination-in", o.drawImage(e, 0, 0, t, s)), this._imageMask = r } return this._imageMask } } class rC { constructor(e, t, s, r) { Object.defineProperty(this, "event", { enumerable: !0, configurable: !0, writable: !0, value: e }), Object.defineProperty(this, "originalPoint", { enumerable: !0, configurable: !0, writable: !0, value: t }), Object.defineProperty(this, "point", { enumerable: !0, configurable: !0, writable: !0, value: s }), Object.defineProperty(this, "bbox", { enumerable: !0, configurable: !0, writable: !0, value: r }), Object.defineProperty(this, "id", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "simulated", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "native", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), ta("touchevents") && e instanceof Touch ? this.id = e.identifier : this.id = null } } class lC extends LS { constructor(e) { if (super(), Object.defineProperty(this, "view", { enumerable: !0, configurable: !0, writable: !0, value: document.createElement("div") }), Object.defineProperty(this, "_layerDom", { enumerable: !0, configurable: !0, writable: !0, value: document.createElement("div") }), Object.defineProperty(this, "layers", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_dirtyLayers", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "defaultLayer", { enumerable: !0, configurable: !0, writable: !0, value: this.getLayer(0) }), Object.defineProperty(this, "_ghostLayer", { enumerable: !0, configurable: !0, writable: !0, value: new oC }), Object.defineProperty(this, "_deferredGhostLayers", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_patternCanvas", { enumerable: !0, configurable: !0, writable: !0, value: document.createElement("canvas") }), Object.defineProperty(this, "_patternContext", { enumerable: !0, configurable: !0, writable: !0, value: this._patternCanvas.getContext("2d") }), Object.defineProperty(this, "_realWidth", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_realHeight", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_calculatedWidth", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_calculatedHeight", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "resolution", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "interactionsEnabled", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "_listeners", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_events", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_colorId", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_colorMap", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_forceInteractive", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_omitTainted", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_hovering", { enumerable: !0, configurable: !0, writable: !0, value: new Set }), Object.defineProperty(this, "_dragging", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_mousedown", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_lastPointerMoveEvent", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "tapToActivate", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "tapToActivateTimeout", { enumerable: !0, configurable: !0, writable: !0, value: 3e3 }), Object.defineProperty(this, "_touchActive", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_touchActiveTimeout", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), e == null ? this.resolution = window.devicePixelRatio : this.resolution = e, this.view.style.position = "absolute", this.view.setAttribute("aria-hidden", "true"), this.view.appendChild(this._layerDom), this._disposers.push(new Gt(() => { it(this._events, (t, s) => { s.disposer.dispose() }), te(this.layers, t => { Il(t.view), t.exportableView && Il(t.exportableView) }), Il(this._ghostLayer.view), Il(this._patternCanvas) })), this._disposers.push(t0(() => { e == null && (this.resolution = window.devicePixelRatio) })), ta("touchevents")) { const t = s => { this._dragging.length !== 0 && gm(this._dragging, r => r.value.shouldCancelTouch() ? (s.preventDefault(), !1) : !0), this._touchActiveTimeout && this._delayTouchDeactivate() }; this._disposers.push(jt(window, "touchstart", t, { passive: !1 })), this._disposers.push(jt(this.view, "touchstart", t, { passive: !1 })), this._disposers.push(jt(this.view, "touchmove", () => { this._touchActiveTimeout && this._delayTouchDeactivate() }, { passive: !0 })), this._disposers.push(jt(window, "click", s => { this._touchActive = !1 }, { passive: !0 })), this._disposers.push(jt(this.view, "click", s => { window.setTimeout(() => { this._touchActive = !0, this._delayTouchDeactivate() }, 100) }, { passive: !0 })) } ta("wheelevents") && this._disposers.push(jt(this.view, "wheel", t => { let s = !1; this._hovering.forEach(r => { if (r.wheelable) return s = !0, !1 }), s && t.preventDefault() }, { passive: !1 })) } resetImageArray() { this._ghostLayer.imageArray = void 0 } _delayTouchDeactivate() { this._touchActiveTimeout && clearTimeout(this._touchActiveTimeout), this.tapToActivateTimeout > 0 && (this._touchActiveTimeout = window.setTimeout(() => { this._touchActive = !1 }, this.tapToActivateTimeout)) } get debugGhostView() { return !!this._ghostLayer.view.parentNode } set debugGhostView(e) { e ? this._ghostLayer.view.parentNode || this.view.appendChild(this._ghostLayer.view) : this._ghostLayer.view.parentNode && this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view) } createLinearGradient(e, t, s, r) { return this.defaultLayer.context.createLinearGradient(e, t, s, r) } createRadialGradient(e, t, s, r, o, u) { return this.defaultLayer.context.createRadialGradient(e, t, s, r, o, u) } createPattern(e, t, s, r, o) { return this._patternCanvas.width = r, this._patternCanvas.height = o, this._patternContext.clearRect(0, 0, r, o), t.renderDetached(this._patternContext), e.renderDetached(this._patternContext), this._patternContext.createPattern(this._patternCanvas, s) } makeContainer() { return new zN(this) } makeGraphics() { return new iC(this) } makeText(e, t) { return new p0(this, e, t) } makeTextStyle() { return new sC } makeRadialText(e, t) { return new aC(this, e, t) } makePicture(e) { return new nC(this, e) } resizeLayer(e) { e.resize(this._calculatedWidth, this._calculatedHeight, this._calculatedWidth, this._calculatedHeight, this.resolution) } resizeGhost() { this._ghostLayer.resize(this._calculatedWidth, this._calculatedHeight, this._calculatedWidth, this._calculatedHeight, this.resolution) } resize(e, t, s, r) { this._realWidth = e, this._realHeight = t, this._calculatedWidth = s, this._calculatedHeight = r, te(this.layers, o => { o && (o.dirty = !0, this.resizeLayer(o)) }), this.resizeGhost(), this.view.style.width = s + "px", this.view.style.height = r + "px" } createDetachedLayer(e = !1) { const t = document.createElement("canvas"), s = t.getContext("2d", { willReadFrequently: e }), r = new cC(t, s); return t.style.position = "absolute", t.style.top = "0px", t.style.left = "0px", r } getLayerByOrder(e) { const t = this.layers, s = t.length; for (let r = 0; r < s; r++) { const o = t[r]; if (o.order == e) return o } } getLayer(e, t = !0) { let s = this.getLayerByOrder(e); if (s) return s; const r = this.createDetachedLayer(e == 99); r.order = e, r.visible = t, r.view.className = "am5-layer-" + e, r.visible && this.resizeLayer(r); const o = this.layers; o.push(r), o.sort((m, p) => m.order > p.order ? 1 : m.order < p.order ? -1 : 0); const u = o.length, d = Vl(o, r); let f; for (let m = d + 1; m < u; m++)if (o[m].visible) { f = o[m]; break } return r.visible && (f === void 0 ? this._layerDom.appendChild(r.view) : this._layerDom.insertBefore(r.view, f.view)), r } render(e) { this._dirtyLayers.length = 0, this._deferredGhostLayers = [], te(this.layers, s => { s && s.dirty && s.visible && (this._dirtyLayers.push(s), s.clear()) }), this._ghostLayer.clear(), e.render({ inactive: null, layer: this.defaultLayer }); const t = this._deferredGhostLayers; if (t.length && (t.sort((s, r) => s - r), te(t, s => { e.render({ inactive: null, layer: this.defaultLayer }, s) })), this._ghostLayer.context.restore(), te(this.layers, s => { if (s) { const r = s.context; r.beginPath(), r.moveTo(0, 0), r.stroke() } }), te(this._dirtyLayers, s => { s.context.restore(), s.dirty = !1 }), this._hovering.size && this._lastPointerMoveEvent) { const { events: s, target: r, native: o } = this._lastPointerMoveEvent; te(s, u => { this._dispatchGlobalMousemove(u, r, o) }) } } paintId(e) { const t = BN(++this._colorId), s = ke.fromHex(t).toCSS(); return this._colorMap[s] = e, s } _removeObject(e) { e._colorId !== void 0 && delete this._colorMap[e._colorId] } _adjustBoundingBox(e) { const t = this._ghostLayer.margin; return new DOMRect(-t.left, -t.top, e.width + t.left + t.right, e.height + t.top + t.bottom) } getEvent(e, t = !0) { const s = this.view.getBoundingClientRect(), r = e.clientX || 0, o = e.clientY || 0, u = this._calculatedWidth / this._realWidth, d = this._calculatedHeight / this._realHeight, f = { x: r - s.left, y: o - s.top }, m = { x: (r - (t ? s.left : 0)) * u, y: (o - (t ? s.top : 0)) * d }; return new rC(e, f, m, this._adjustBoundingBox(s)) } _getHitTarget(e, t, s) { if (t.width === 0 || t.height === 0 || e.x < t.left || e.x > t.right || e.y < t.top || e.y > t.bottom || !s || !this._layerDom.contains(s)) return; const r = this._ghostLayer.getImageData(e, t); if (r.data[0] === 0 && r.data[1] === 0 && r.data[2] === 0) return !1; const o = ke.fromRGB(r.data[0], r.data[1], r.data[2]).toCSS(); return this._colorMap[o] } getObjectAtPoint(e) { const t = this._ghostLayer.getImageArray(e); if (t[0] === 0 && t[1] === 0 && t[2] === 0) return; const s = ke.fromRGB(t[0], t[1], t[2]).toCSS(); return this._colorMap[s] } _withEvents(e, t) { const s = this._events[e]; if (s !== void 0) { s.dispatching = !0; try { t(s) } finally { s.dispatching = !1, s.cleanup && (s.cleanup = !1, Du(s.callbacks, r => !r.disposed), s.callbacks.length === 0 && (s.disposer.dispose(), delete this._events[e])) } } } _dispatchEventAll(e, t) { this.interactionsEnabled && this._withEvents(e, s => { te(s.callbacks, r => { r.disposed || r.callback.call(r.context, t) }) }) } _dispatchEvent(e, t, s) { if (!this.interactionsEnabled) return !1; let r = !1; return this._withEvents(e, o => { te(o.callbacks, u => { !u.disposed && u.object === t && (u.callback.call(u.context, s), r = !0) }) }), r } _dispatchMousedown(e, t) { const s = e.button; if (s != 0 && s != 2 && s != 1 && s !== void 0) return; const r = this.getEvent(e), o = this._getHitTarget(r.originalPoint, r.bbox, t); if (o) { const u = r.id; let d = !1; Xc(o, f => { const m = { id: u, value: f }; return this._mousedown.push(m), !d && this._dispatchEvent("pointerdown", f, r) && (d = !0, this._dragging.some(g => g.value === f && g.id === u) || this._dragging.push(m)), !0 }) } } _dispatchGlobalMousemove(e, t, s) { const r = this.getEvent(e), o = this._getHitTarget(r.originalPoint, r.bbox, t); r.native = s, o ? (this._hovering.forEach(u => { u.contains(o) || (this._hovering.delete(u), u.cursorOverStyle && zc(document.body, "cursor", u._replacedCursorStyle), this._dispatchEvent("pointerout", u, r)) }), r.native && Xc(o, u => (this._hovering.has(u) || (this._hovering.add(u), u.cursorOverStyle && (u._replacedCursorStyle = IS(document.body, "cursor"), zc(document.body, "cursor", u.cursorOverStyle)), this._dispatchEvent("pointerover", u, r)), !0))) : (this._hovering.forEach(u => { u.cursorOverStyle && zc(document.body, "cursor", u._replacedCursorStyle), this._dispatchEvent("pointerout", u, r) }), this._hovering.clear()), this._dispatchEventAll("globalpointermove", r) } removeHovering(e) { this._hovering.delete(e), e.cursorOverStyle && zc(document.body, "cursor", e._replacedCursorStyle) } _dispatchGlobalMouseup(e, t) { const s = this.getEvent(e); s.native = t, this._dispatchEventAll("globalpointerup", s) } _dispatchDragMove(e) { if (this._dragging.length !== 0) { const t = this.getEvent(e), s = t.id; this._dragging.forEach(r => { r.id === s && this._dispatchEvent("pointermove", r.value, t) }) } } _dispatchDragEnd(e, t) { const s = e.button; let r; if (s == 0 || s === void 0) r = "click"; else if (s == 2) r = "rightclick"; else if (s == 1) r = "middleclick"; else return; const o = this.getEvent(e), u = o.id; if (this._mousedown.length !== 0) { const d = this._getHitTarget(o.originalPoint, o.bbox, t); d && this._mousedown.forEach(f => { f.id === u && f.value.contains(d) && this._dispatchEvent(r, f.value, o) }), this._mousedown.length = 0 } this._dragging.length !== 0 && (this._dragging.forEach(d => { d.id === u && this._dispatchEvent("pointerup", d.value, o) }), this._dragging.length = 0) } _dispatchDoubleClick(e, t) { const s = this.getEvent(e), r = this._getHitTarget(s.originalPoint, s.bbox, t); r && Xc(r, o => !this._dispatchEvent("dblclick", o, s)) } _dispatchWheel(e, t) { const s = this.getEvent(e), r = this._getHitTarget(s.originalPoint, s.bbox, t); r && Xc(r, o => !this._dispatchEvent("wheel", o, s)) } _makeSharedEvent(e, t) { if (this._listeners[e] === void 0) { const s = t(); this._listeners[e] = new e0(() => { delete this._listeners[e], s.dispose() }) } return this._listeners[e].increment() } _onPointerEvent(e, t) { let s = !1, r = null; function o() { r = null, s = !1 } return new Di([new Gt(() => { r !== null && clearTimeout(r), o() }), jt(this.view, qf(e), u => { s = !0, r !== null && clearTimeout(r), r = window.setTimeout(o, 0) }), RN(window, e, (u, d) => { r !== null && (clearTimeout(r), r = null), t(u, d, s), s = !1 })]) } _initEvent(e) { switch (e) { case "globalpointermove": case "pointerover": case "pointerout": return this._makeSharedEvent("pointermove", () => { const t = (s, r, o) => { this._lastPointerMoveEvent = { events: s, target: r, native: o }, te(s, u => { this._dispatchGlobalMousemove(u, r, o) }) }; return new Di([this._onPointerEvent("pointerdown", t), this._onPointerEvent("pointermove", t)]) }); case "globalpointerup": return this._makeSharedEvent("pointerup", () => { const t = this._onPointerEvent("pointerup", (r, o, u) => { te(r, d => { this._dispatchGlobalMouseup(d, u) }), this._lastPointerMoveEvent = { events: r, target: o, native: u } }), s = this._onPointerEvent("pointercancel", (r, o, u) => { te(r, d => { this._dispatchGlobalMouseup(d, u) }), this._lastPointerMoveEvent = { events: r, target: o, native: u } }); return new Gt(() => { t.dispose(), s.dispose() }) }); case "click": case "rightclick": case "middleclick": case "pointerdown": case "pointermove": case "pointerup": return this._makeSharedEvent("pointerdown", () => { const t = this._onPointerEvent("pointerdown", (u, d) => { te(u, f => { this._dispatchMousedown(f, d) }) }), s = this._onPointerEvent("pointermove", u => { te(u, d => { this._dispatchDragMove(d) }) }), r = this._onPointerEvent("pointerup", (u, d) => { te(u, f => { this._dispatchDragEnd(f, d) }) }), o = this._onPointerEvent("pointercancel", (u, d) => { te(u, f => { this._dispatchDragEnd(f, d) }) }); return new Gt(() => { t.dispose(), s.dispose(), r.dispose(), o.dispose() }) }); case "dblclick": return this._makeSharedEvent("dblclick", () => this._onPointerEvent("dblclick", (t, s) => { te(t, r => { this._dispatchDoubleClick(r, s) }) })); case "wheel": return this._makeSharedEvent("wheel", () => jt(this.view, qf("wheel"), t => { this._dispatchWheel(t, i0(t)) }, { passive: !1 })) } } _addEvent(e, t, s, r) { let o = this._events[t]; o === void 0 && (o = this._events[t] = { disposer: this._initEvent(t), callbacks: [], dispatching: !1, cleanup: !1 }); const u = { object: e, context: r, callback: s, disposed: !1 }; return o.callbacks.push(u), new Gt(() => { u.disposed = !0, o.dispatching ? o.cleanup = !0 : (ci(o.callbacks, u), o.callbacks.length === 0 && (o.disposer.dispose(), delete this._events[t])) }) } getCanvas(e, t) { this.render(e), t || (t = {}); let s = this.resolution, r = Math.floor(this._calculatedWidth * this.resolution), o = Math.floor(this._calculatedHeight * this.resolution); if (t.minWidth && t.minWidth > r) { let b = t.minWidth / r; b > s && (s = b * this.resolution) } if (t.minHeight && t.minHeight > o) { let b = t.minHeight / o; b > s && (s = b * this.resolution) } if (t.maxWidth && t.maxWidth < r) { let b = t.maxWidth / r; b < s && (s = b * this.resolution) } if (t.maxHeight && t.maxHeight > o) { let b = t.maxHeight / o; b < s && (s = b * this.resolution) } t.maintainPixelRatio && (s /= this.resolution); const u = []; let d = !1; const f = document.createElement("canvas"); s != this.resolution && (d = !0, r = r * s / this.resolution, o = o * s / this.resolution), f.width = r, f.height = o, f.style.position = "fixed", f.style.top = "-10000px", this.view.appendChild(f), u.push(f); const m = f.getContext("2d"); let p = 0, g = 0, y = !1; return te(this.layers, b => { if (b && b.visible && (b.tainted || d)) { y = !0, b.exportableView = b.view, b.exportableContext = b.context, b.view = document.createElement("canvas"), b.view.style.position = "fixed", b.view.style.top = "-10000px", this.view.appendChild(b.view), u.push(b.view); let v = 0, k = 0; b.margin && (v += b.margin.left || 0 + b.margin.right || 0, k += b.margin.top || 0 + b.margin.bottom || 0), b.view.width = r + v, b.view.height = o + k, b.context = b.view.getContext("2d"), b.dirty = !0, b.scale = s } }), y && (this._omitTainted = !0, this.render(e), this._omitTainted = !1), te(this.layers, b => { if (b && b.visible) { let v = 0, k = 0; b.margin && (v = -(b.margin.left || 0) * this.resolution, k = -(b.margin.top || 0) * this.resolution), m.drawImage(b.view, v, k), b.exportableView && (b.view = b.exportableView, b.exportableView = void 0), b.exportableContext && (b.context = b.exportableContext, b.exportableContext = void 0), p < b.view.clientWidth && (p = b.view.clientWidth), g < b.view.clientHeight && (g = b.view.clientHeight), b.scale = void 0 } }), f.style.width = p + "px", f.style.height = g + "px", te(u, b => { b.style.position = "", b.style.top = "", this.view.removeChild(b) }), f } } class oC { constructor() { Object.defineProperty(this, "view", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "context", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "margin", { enumerable: !0, configurable: !0, writable: !0, value: { left: 0, right: 0, top: 0, bottom: 0 } }), Object.defineProperty(this, "_resolution", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), Object.defineProperty(this, "_width", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_height", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "imageArray", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this.view = document.createElement("canvas"), this.context = this.view.getContext("2d", { alpha: !1, willReadFrequently: !0 }), this.context.imageSmoothingEnabled = !1, this.view.style.position = "absolute", this.view.style.top = "0px", this.view.style.left = "0px" } resize(e, t, s, r, o) { this._resolution = o, e += this.margin.left + this.margin.right, t += this.margin.top + this.margin.bottom, s += this.margin.left + this.margin.right, r += this.margin.top + this.margin.bottom, this.view.style.left = -this.margin.left + "px", this.view.style.top = -this.margin.top + "px", this._width = Math.floor(e * o), this._height = Math.floor(t * o), this.view.width = this._width, this.view.style.width = s + "px", this.view.height = this._height, this.view.style.height = r + "px" } getImageData(e, t) { return this.context.getImageData(Math.round((e.x - t.left) / t.width * this._width), Math.round((e.y - t.top) / t.height * this._height), 1, 1) } getImageArray(e) { this.imageArray || (this.imageArray = this.context.getImageData(0, 0, this._width, this._height).data); const t = this.imageArray, s = Math.round(e.x * this._resolution), o = (Math.round(e.y * this._resolution) * this._width + s) * 4; return [t[o], t[o + 1], t[o + 2], t[o + 3]] } setMargin(e) { this.margin.left = 0, this.margin.right = 0, this.margin.top = 0, this.margin.bottom = 0, te(e, t => { t.margin && (this.margin.left = Math.max(this.margin.left, t.margin.left), this.margin.right = Math.max(this.margin.right, t.margin.right), this.margin.top = Math.max(this.margin.top, t.margin.top), this.margin.bottom = Math.max(this.margin.bottom, t.margin.bottom)) }) } clear() { this.context.save(), this.context.fillStyle = "#000", this.context.fillRect(0, 0, this._width, this._height) } } class cC { constructor(e, t) { Object.defineProperty(this, "view", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "context", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "tainted", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "margin", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "order", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "visible", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "width", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "height", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "scale", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "dirty", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "exportableView", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "exportableContext", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_width", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_height", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), this.view = e, this.context = t } resize(e, t, s, r, o) { this.width != null && (e = this.width, s = this.width), this.height != null && (t = this.height, r = this.height), this.margin ? (e += this.margin.left + this.margin.right, t += this.margin.top + this.margin.bottom, s += this.margin.left + this.margin.right, r += this.margin.top + this.margin.bottom, this.view.style.left = -this.margin.left + "px", this.view.style.top = -this.margin.top + "px") : (this.view.style.left = "0px", this.view.style.top = "0px"), this._width = Math.floor(e * o), this._height = Math.floor(t * o), this.view.width = this._width, this.view.style.width = s + "px", this.view.height = this._height, this.view.style.height = r + "px" } clear() { this.context.save(), this.context.clearRect(0, 0, this._width, this._height) } } function by(l, e) { l == null ? requestAnimationFrame(e) : setTimeout(() => { requestAnimationFrame(e) }, 1e3 / l) } class _o { constructor(e, t = {}, s) { if (Object.defineProperty(this, "dom", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_inner", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_settings", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_isDirty", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_isDirtyParents", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_isDirtyAnimation", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_dirty", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_dirtyParents", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_dirtyBounds", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_dirtyPositions", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_ticker", { enumerable: !0, configurable: !0, writable: !0, value: null }), Object.defineProperty(this, "_tickers", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_updateTick", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "skipRenderFrame", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "events", { enumerable: !0, configurable: !0, writable: !0, value: new Fr }), Object.defineProperty(this, "animationTime", { enumerable: !0, configurable: !0, writable: !0, value: null }), Object.defineProperty(this, "_animations", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_renderer", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_rootContainer", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "container", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "tooltipContainer", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_tooltipContainerSettings", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_tooltip", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "language", { enumerable: !0, configurable: !0, writable: !0, value: CN.new(this, {}) }), Object.defineProperty(this, "locale", { enumerable: !0, configurable: !0, writable: !0, value: m0 }), Object.defineProperty(this, "utc", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "timezone", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "fps", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "numberFormatter", { enumerable: !0, configurable: !0, writable: !0, value: wN.new(this, {}) }), Object.defineProperty(this, "dateFormatter", { enumerable: !0, configurable: !0, writable: !0, value: SN.new(this, {}) }), Object.defineProperty(this, "durationFormatter", { enumerable: !0, configurable: !0, writable: !0, value: NN.new(this, {}) }), Object.defineProperty(this, "tabindex", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_tabindexes", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_a11yD", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_focusElementDirty", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_focusElementContainer", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_focusedSprite", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_isShift", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_keyboardDragPoint", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_tooltipElementContainer", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_readerAlertElement", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_skipNextGroupJump", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "_logo", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_tooltipDiv", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "nonce", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "interfaceColors", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "verticalLayout", { enumerable: !0, configurable: !0, writable: !0, value: Dr.new(this, {}) }), Object.defineProperty(this, "horizontalLayout", { enumerable: !0, configurable: !0, writable: !0, value: Tr.new(this, {}) }), Object.defineProperty(this, "gridLayout", { enumerable: !0, configurable: !0, writable: !0, value: yn.new(this, {}) }), Object.defineProperty(this, "_paused", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "autoResize", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "_fontHash", { enumerable: !0, configurable: !0, writable: !0, value: "" }), Object.defineProperty(this, "_isDisposed", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_disposers", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_resizeSensorDisposer", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_tooltips", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_htmlElementContainer", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_htmlEnabledContainers", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "entitiesById", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_systemTooltip", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), !s) throw new Error("You cannot use `new Class()`, instead use `Class.new()`"); this._settings = t, t.accessible == !1 && (this._a11yD = !0), t.useSafeResolution == null && (t.useSafeResolution = !0); let r; t.useSafeResolution && (r = XS()), this._renderer = new lC(r); let o; if (e instanceof HTMLElement ? o = e : o = document.getElementById(e), te(Js.rootElements, f => { if (f.dom === o) if (Js.autoDispose) f.dispose(); else throw new Error("You cannot have multiple Roots on the same DOM node") }), this.interfaceColors = ou.new(this, {}), o === null) throw new Error("Could not find HTML element with id `" + e + "`"); this.dom = o; let u = document.createElement("div"); u.style.position = "relative", u.style.width = "100%", u.style.height = "100%", o.appendChild(u); const d = t.tooltipContainerBounds; d && (this._tooltipContainerSettings = d), this._inner = u, this._updateComputedStyles(), Js.rootElements.push(this) } static new(e, t) { const s = new _o(e, t, !0); return s._init(), s } moveDOM(e) { let t; if (e instanceof HTMLElement ? t = e : t = document.getElementById(e), t) { for (; this.dom.childNodes.length > 0;)t.appendChild(this.dom.childNodes[0]); this.dom = t, this._initResizeSensor(), this.resize() } } _handleLogo() { if (this._logo) { const e = this.dom.offsetWidth, t = this.dom.offsetHeight; e <= 150 || t <= 60 ? this._logo.hide() : this._logo.show() } } _showBranding() { if (!this._logo) { const e = this.tooltipContainer.children.push(ze.new(this, { interactive: !0, interactiveChildren: !1, position: "absolute", setStateOnChildren: !0, paddingTop: 9, paddingRight: 9, paddingBottom: 9, paddingLeft: 9, scale: .6, y: Jt(100), centerY: Te, tooltipY: 10, tooltipText: "Created using amCharts 5", tooltipX: Te, cursorOverStyle: "pointer", background: Gi.new(this, { fill: Je(4671320), fillOpacity: 0, tooltipY: 5 }) })); e.set("tooltip", this.systemTooltip), e.events.on("click", () => { window.open("https://www.amcharts.com/", "_blank") }), e.states.create("hover", {}); const t = e.children.push(Qe.new(this, { stroke: Je(13421772), strokeWidth: 3, svgPath: "M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6", dx: -50, strokeOpacity: 0 })); t.states.create("hover", { stroke: Je(3976191) }); const s = e.children.push(Qe.new(this, { stroke: Je(8947848), strokeWidth: 3, svgPath: "M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0", dx: 50, strokeOpacity: 0 })), r = un(Ea), o = 1500; e.setTimeout(() => { s.animate({ key: "strokeOpacity", to: 1, duration: o, easing: r }), s.animate({ key: "dx", to: 0, duration: o, easing: r }), t.animate({ key: "dx", to: 0, duration: o, easing: r }), t.animate({ key: "strokeOpacity", to: 1, duration: o, easing: r }) }, 3e3), s.states.create("hover", { stroke: Je(4671320) }), this._logo = e, this._handleLogo() } } _getRealSize() { return this.dom.getBoundingClientRect() } _getCalculatedSize(e) { return this._settings.calculateSize ? this._settings.calculateSize(e) : { width: e.width, height: e.height } } _init() { const e = this._settings; e.accessible !== !1 && (e.focusable && (this._inner.setAttribute("focusable", "true"), this._inner.setAttribute("tabindex", this.tabindex + "")), e.ariaLabel && this._inner.setAttribute("aria-label", e.ariaLabel), e.role && this._inner.setAttribute("role", e.role)); const t = this._renderer, s = this._getRealSize(), r = this._getCalculatedSize(s), o = Math.floor(r.width), u = Math.floor(r.height), d = Math.floor(s.width), f = Math.floor(s.height), m = ze.new(this, { visible: !0, width: o, height: u }); this._rootContainer = m, this._rootContainer._defaultThemes.push(TN.new(this)); const p = m.children.push(ze.new(this, { visible: !0, width: Te, height: Te })); this.container = p, t.resize(d, f, o, u), this._inner.appendChild(t.view), this._initResizeSensor(); const g = document.createElement("div"); if (this._htmlElementContainer = g, g.className = "am5-html-container", g.style.position = "absolute", g.style.pointerEvents = "none", this._tooltipContainerSettings || (g.style.overflow = "hidden"), this._inner.appendChild(g), this._a11yD !== !0) { const y = document.createElement("div"); y.className = "am5-reader-container", y.setAttribute("role", "alert"), y.style.position = "absolute", y.style.width = "1px", y.style.height = "1px", y.style.overflow = "hidden", y.style.clip = "rect(1px, 1px, 1px, 1px)", this._readerAlertElement = y, this._inner.appendChild(this._readerAlertElement); const b = document.createElement("div"); b.className = "am5-focus-container", b.style.position = "absolute", b.style.pointerEvents = "none", b.style.top = "0px", b.style.left = "0px", b.style.overflow = "hidden", b.style.width = o + "px", b.style.height = u + "px", b.setAttribute("role", "graphics-document"), yr(b, !1), this._focusElementContainer = b, this._inner.appendChild(this._focusElementContainer); const v = document.createElement("div"); this._tooltipElementContainer = v, v.className = "am5-tooltip-container", this._inner.appendChild(v), ta("keyboardevents") && (this._disposers.push(jt(window, "keydown", k => { const j = Fl(k); j == "Shift" ? this._isShift = !0 : j == "Tab" && (this._isShift = k.shiftKey) })), this._disposers.push(jt(window, "keyup", k => { Fl(k) == "Shift" && (this._isShift = !1) })), this._disposers.push(jt(b, "click", () => { const k = this._focusedSprite; if (k) { const j = k.get("clickAnnounceText", ""); j !== "" && this.readerAlert(j); const S = t.getEvent(new MouseEvent("click")); k.events.dispatch("click", { type: "click", originalEvent: S.event, point: S.point, simulated: !0, target: k }) } })), this._disposers.push(jt(b, "keydown", k => { const j = this._focusedSprite; if (j) { k.key == "Escape" && (FS(), this._focusedSprite = void 0); let S = 0, w = 0; const N = Fl(k); switch (N) { case "Enter": case " ": const T = j.get("clickAnnounceText", ""); if (T !== "" && this.readerAlert(T), N == " " && j.get("role") != "checkbox") return; k.preventDefault(); const R = t.getEvent(new MouseEvent("mouse")); j.events.dispatch("click", { type: "click", originalEvent: R.event, point: R.point, simulated: !0, target: j }); return; case "ArrowLeft": S = -6; break; case "ArrowRight": S = 6; break; case "ArrowUp": w = -6; break; case "ArrowDown": w = 6; break; default: return }if (S != 0 || w != 0) { if (k.preventDefault(), !j.isDragging()) { this._keyboardDragPoint = { x: 0, y: 0 }; const P = t.getEvent(new MouseEvent("mousedown", { clientX: 0, clientY: 0 })); P.point = { x: 0, y: 0 }, j.events.isEnabled("pointerdown") && j.events.dispatch("pointerdown", { type: "pointerdown", originalEvent: P.event, point: P.point, simulated: !0, target: j }) } const T = this._keyboardDragPoint; T.x += S, T.y += w; const R = t.getEvent(new MouseEvent("mousemove", { clientX: T.x, clientY: T.y }), !1); j.events.isEnabled("globalpointermove") && j.events.dispatch("globalpointermove", { type: "globalpointermove", originalEvent: R.event, point: R.point, simulated: !0, target: j }) } } })), this._disposers.push(jt(b, "keyup", k => { if (this._focusedSprite) { const j = this._focusedSprite, S = Fl(k); switch (S) { case "ArrowLeft": case "ArrowRight": case "ArrowUp": case "ArrowDown": if (j.isDragging()) { const N = this._keyboardDragPoint, T = t.getEvent(new MouseEvent("mouseup", { clientX: N.x, clientY: N.y })); j.events.isEnabled("globalpointerup") && j.events.dispatch("globalpointerup", { type: "globalpointerup", originalEvent: T.event, point: T.point, simulated: !0, target: j }), this._keyboardDragPoint = void 0; return } else if (j.get("focusableGroup")) { const N = j.get("focusableGroup"), T = this._tabindexes.filter(O => !!(O.get("focusableGroup") == N && O.getPrivate("focusable") !== !1 && O.isVisibleDeep())); let R = T.indexOf(j); const P = T.length - 1; R += S == "ArrowRight" || S == "ArrowDown" ? 1 : -1, R < 0 ? R = P : R > P && (R = 0), HS(T[R].getPrivate("focusElement").dom) } break; case "Tab": const w = j.get("focusableGroup"); if (w && this._isShift) { this._skipNextGroupJump || (this._focusNext(j.getPrivate("focusElement").dom, -1, w), this._skipNextGroupJump = !0); return } break } } }))) } this._startTicker(), this.setThemes([]), this._addTooltip(), this._hasLicense() || this._showBranding() } get systemTooltip() { if (!this._systemTooltip) { const e = Os.new(this, { themeTags: ["system"] }); this._systemTooltip = e } return this._systemTooltip } _initResizeSensor() { this._resizeSensorDisposer && this._resizeSensorDisposer.dispose(), this._resizeSensorDisposer = new jN(this.dom, () => { this.autoResize && this.resize() }), this._disposers.push(this._resizeSensorDisposer) } resize() { const e = this._getRealSize(), t = this._getCalculatedSize(e), s = Math.floor(t.width), r = Math.floor(t.height); if (s > 0 && r > 0) { const o = Math.floor(e.width), u = Math.floor(e.height), d = this._htmlElementContainer; if (d.style.width = s + "px", d.style.height = r + "px", this._a11yD !== !0) { const m = this._focusElementContainer; m.style.width = s + "px", m.style.height = r + "px" } this._renderer.resize(o, u, s, r); const f = this._rootContainer; f.setPrivate("width", s), f.setPrivate("height", r), this._render(), this._handleLogo() } } _render() { if (this.skipRenderFrame) { this.skipRenderFrame = !1; return } this._renderer.render(this._rootContainer._display), this._focusElementDirty && (this._updateCurrentFocus(), this._focusElementDirty = !1) } _runTickers(e) { te(this._tickers, t => { t(e) }) } _runAnimations(e) { let t = 0; return Du(this._animations, s => { const r = s._runAnimation(e); return r === pn.Stopped ? !1 : (r === pn.Playing && ++t, !0) }), this._isDirtyAnimation = !1, t === 0 } _runDirties() { let e = {}; for (; this._isDirtyParents;)this._isDirtyParents = !1, As(this._dirtyParents).forEach(([u, d]) => { delete this._dirtyParents[u], d.isDisposed() || (e[d.uid] = d, d._prepareChildren()) }); As(e).forEach(([u, d]) => { d._updateChildren() }); const t = []; As(this._dirty).forEach(([u, d]) => { d.isDisposed() ? delete this._dirty[u] : (t.push(d), d._beforeChanged()) }), t.forEach(u => { u._changed(), delete this._dirty[u.uid], u._clearDirty() }), this._isDirty = !1; const s = {}, r = []; As(this._dirtyBounds).forEach(([u, d]) => { delete this._dirtyBounds[u], d.isDisposed() || (s[d.uid] = d.depth(), r.push(d)) }), this._positionHTMLElements(), r.sort((u, d) => gn(s[d.uid], s[u.uid])), r.forEach(u => { u._updateBounds() }); const o = this._dirtyPositions; As(o).forEach(([u, d]) => { delete o[u], d.isDisposed() || d._updatePosition() }), t.forEach(u => { u._afterChanged() }), As(e).forEach(([u, d]) => { d._childrenPrep = !1, d._childrenUpdt = !1 }) } _renderFrame(e) { if (this._updateTick) { this.events.isEnabled("framestarted") && this.events.dispatch("framestarted", { type: "framestarted", target: this, timestamp: e }), this._checkComputedStyles(), this._runTickers(e); const t = this._runAnimations(e); return this._runDirties(), this._render(), this._renderer.resetImageArray(), this._positionHTMLElements(), this.events.isEnabled("frameended") && this.events.dispatch("frameended", { type: "frameended", target: this, timestamp: e }), this._tickers.length === 0 && t && !this._isDirtyAnimation && !this._isDirty } else return !0 } _runTicker(e, t) { this.isDisposed() || (this.animationTime = e, this._renderFrame(e) ? (this._ticker = null, this.animationTime = null) : this._paused || (t ? this._ticker : by(this.fps, this._ticker))) } _runTickerNow(e = 1e4) { if (!this.isDisposed()) { const t = performance.now() + e; for (; ;) { const s = performance.now(); if (s >= t) { this.animationTime = null; break } if (this.animationTime = s, this._renderFrame(s)) { this.animationTime = null; break } } } } _startTicker() { this._ticker === null && (this.animationTime = null, this._ticker = e => { this._runTicker(e) }, by(this.fps, this._ticker)) } get updateTick() { return this._updateTick } set updateTick(e) { this._updateTick = e, e && this._startTicker() } _addDirtyEntity(e) { this._isDirty = !0, this._dirty[e.uid] === void 0 && (this._dirty[e.uid] = e), this._startTicker() } _addDirtyParent(e) { this._isDirty = !0, this._isDirtyParents = !0, this._dirtyParents[e.uid] === void 0 && (this._dirtyParents[e.uid] = e), this._startTicker() } _addDirtyBounds(e) { this._isDirty = !0, this._dirtyBounds[e.uid] === void 0 && (this._dirtyBounds[e.uid] = e), this._startTicker() } _addDirtyPosition(e) { this._isDirty = !0, this._dirtyPositions[e.uid] === void 0 && (this._dirtyPositions[e.uid] = e), this._startTicker() } _addAnimation(e) { this._isDirtyAnimation = !0, this._animations.indexOf(e) === -1 && this._animations.push(e), this._startTicker() } _markDirty() { this._isDirty = !0 } _markDirtyRedraw() { this.events.once("frameended", () => { this._isDirty = !0, this._startTicker() }) } eachFrame(e) { return this._tickers.push(e), this._startTicker(), new Gt(() => { ci(this._tickers, e) }) } markDirtyGlobal(e) { e || (e = this.container), e.walkChildren(t => { t instanceof ze && this.markDirtyGlobal(t), t.markDirty(), t.markDirtyBounds() }) } width() { return Math.floor(this._getCalculatedSize(this._getRealSize()).width) } height() { return Math.floor(this._getCalculatedSize(this._getRealSize()).height) } dispose() { this._isDisposed || (this._isDisposed = !0, this._rootContainer.dispose(), this._renderer.dispose(), this.horizontalLayout.dispose(), this.verticalLayout.dispose(), this.interfaceColors.dispose(), te(this._disposers, e => { e.dispose() }), this._inner && zS(this._inner), Vi(Js.rootElements, this)) } isDisposed() { return this._isDisposed } readerAlert(e) { if (this._a11yD !== !0) { const t = this._readerAlertElement; e = ay(e), t.innerHTML == e && (t.innerHTML = ""), t.innerHTML = e } } setThemes(e) { this._rootContainer.set("themes", e); const t = this.tooltipContainer; t && t._applyThemes(); const s = this.interfaceColors; s && s._applyThemes() } _addTooltip() { if (!this.tooltipContainer) { const e = this._tooltipContainerSettings, t = this._rootContainer.children.push(ze.new(this, { position: "absolute", isMeasured: !1, width: Te, height: Te, layer: e ? 35 : 30, layerMargin: e || void 0 })); this.tooltipContainer = t; const s = Os.new(this, {}); this.container.set("tooltip", s), s.hide(0), this._tooltip = s } } _registerTabindexOrder(e) { this._a11yD != !0 && (e.get("focusable") ? Wl(this._tabindexes, e) : Vi(this._tabindexes, e), this._invalidateTabindexes()) } _unregisterTabindexOrder(e) { this._a11yD != !0 && (Vi(this._tabindexes, e), this._invalidateTabindexes()) } _invalidateTabindexes() { if (this._a11yD == !0) return; this._tabindexes.sort((t, s) => { const r = t.get("tabindexOrder", 0), o = s.get("tabindexOrder", 0); return r == o ? 0 : r > o ? 1 : -1 }); const e = []; te(this._tabindexes, (t, s) => { t.getPrivate("focusElement") ? this._moveFocusElement(s, t) : this._makeFocusElement(s, t); const r = t.get("focusableGroup"); r && t.getPrivate("focusable") !== !1 && (e.indexOf(r) !== -1 ? t.getPrivate("focusElement").dom.setAttribute("tabindex", "-1") : e.push(r)) }) } _updateCurrentFocus() { this._a11yD != !0 && this._focusedSprite && (this._decorateFocusElement(this._focusedSprite), this._positionFocusElement(this._focusedSprite)) } _decorateFocusElement(e, t) { if (this._a11yD == !0 || (t || (t = e.getPrivate("focusElement").dom), !t)) return; const s = e.get("role"); s ? t.setAttribute("role", s) : t.removeAttribute("role"); const r = e.get("ariaLabel"); if (r) { const k = Ar(e, r); t.setAttribute("aria-label", k) } else t.removeAttribute("aria-label"); const o = e.get("ariaLive"); o ? t.setAttribute("aria-live", o) : t.removeAttribute("aria-live"); const u = e.get("ariaChecked"); u != null && s && ["checkbox", "option", "radio", "menuitemcheckbox", "menuitemradio", "treeitem"].indexOf(s) !== -1 ? t.setAttribute("aria-checked", u ? "true" : "false") : t.removeAttribute("aria-checked"); const d = e.get("ariaCurrent"); d != null ? t.setAttribute("aria-current", d) : t.removeAttribute("aria-current"); const f = e.get("ariaSelected"); f != null && s && ["gridcell", "option", "row", "tab", "columnheader", "rowheader", "treeitem"].indexOf(s) !== -1 ? t.setAttribute("aria-selected", f ? "true" : "false") : t.removeAttribute("aria-selected"), e.get("ariaHidden") ? t.setAttribute("aria-hidden", "true") : t.removeAttribute("aria-hidden"); const m = e.get("ariaOrientation"); m ? t.setAttribute("aria-orientation", m) : t.removeAttribute("aria-orientation"); const p = e.get("ariaValueNow"); p ? t.setAttribute("aria-valuenow", p) : t.removeAttribute("aria-valuenow"); const g = e.get("ariaValueMin"); g ? t.setAttribute("aria-valuemin", g) : t.removeAttribute("aria-valuemin"); const y = e.get("ariaValueMax"); y ? t.setAttribute("aria-valuemax", y) : t.removeAttribute("aria-valuemax"); const b = e.get("ariaValueText"); b ? t.setAttribute("aria-valuetext", b) : t.removeAttribute("aria-valuetext"); const v = e.get("ariaControls"); v ? t.setAttribute("aria-controls", v) : t.removeAttribute("aria-controls"), e.get("visible") && e.get("opacity") !== 0 && e.get("role") != "tooltip" && !e.isHidden() && e.getPrivate("focusable") !== !1 && (e.height() || e.width()) ? (t.getAttribute("tabindex") != "-1" && t.setAttribute("tabindex", "" + this.tabindex), t.removeAttribute("aria-hidden")) : (t.removeAttribute("tabindex"), t.setAttribute("aria-hidden", "true")) } _makeFocusElement(e, t) { if (t.getPrivate("focusElement") || this._a11yD == !0) return; const s = document.createElement("div"); t.get("role") != "tooltip" && (s.tabIndex = this.tabindex), s.style.position = "absolute", yr(s, !1); const r = []; t.setPrivate("focusElement", { dom: s, disposers: r }), this._decorateFocusElement(t), r.push(jt(s, "focus", o => { this._handleFocus(o) })), r.push(jt(s, "blur", o => { this._handleBlur(o) })), this._moveFocusElement(e, t) } _removeFocusElement(e) { if (this._a11yD == !0) return; Vi(this._tabindexes, e); const t = e.getPrivate("focusElement"); t && (this._focusElementContainer.removeChild(t.dom), te(t.disposers, r => { r.dispose() })) } _hideFocusElement(e) { if (this._a11yD == !0) return; const t = e.getPrivate("focusElement"); t.dom.style.display = "none" } _moveFocusElement(e, t) { if (this._a11yD == !0) return; const s = this._focusElementContainer, r = t.getPrivate("focusElement").dom; if (r === this._focusElementContainer.children[e]) return; const o = this._focusElementContainer.children[e + 1]; o ? s.insertBefore(r, o) : s.append(r) } _positionFocusElement(e) { if (this._a11yD == !0 || e == null) return; this._focusElementContainer.scrollTop = 0; const t = e.globalBounds(); let s = t.right == t.left ? e.width() : t.right - t.left, r = t.top == t.bottom ? e.height() : t.bottom - t.top; const o = this._settings.focusPadding !== void 0 ? this._settings.focusPadding : 2; let u = t.left - o, d = t.top - o; s < 0 && (u += s, s = Math.abs(s)), r < 0 && (d += r, r = Math.abs(r)); const f = e.getPrivate("focusElement").dom; f.style.top = d + "px", f.style.left = u + "px", f.style.width = s + o * 2 + "px", f.style.height = r + o * 2 + "px" } _getSpriteByFocusElement(e) { let t; return gm(this._tabindexes, (s, r) => s.getPrivate("focusElement").dom === e ? (t = s, !1) : !0), t } _handleFocus(e) { if (this._a11yD == !0) return; const t = this._getSpriteByFocusElement(e.target); if (t) { if (!t.isVisibleDeep()) { this._focusNext(e.target, this._isShift ? -1 : 1); return } this._positionFocusElement(t), this._focusedSprite = t, t.events.isEnabled("focus") && t.events.dispatch("focus", { type: "focus", originalEvent: e, target: t }), t.getPrivate("focusElement").dom.tabIndex == -1 && (this._skipNextGroupJump = !1) } } _focusNext(e, t, s) { if (this._a11yD == !0) return; const r = Array.from(document.querySelectorAll(["a[href]", "area[href]", "button:not([disabled])", "details", "input:not([disabled])", "iframe:not([disabled])", "select:not([disabled])", "textarea:not([disabled])", '[contentEditable=""]', '[contentEditable="true"]', '[contentEditable="TRUE"]', '[tabindex]:not([tabindex^="-"])'].join(","))); let o = r.indexOf(e) + t; o < 0 ? o = r.length - 1 : o >= r.length && (o = 0); const u = r[o]; if (s && t == -1) { const d = this._getSpriteByFocusElement(u); if (d && d.get("focusableGroup") == s) { this._focusNext(u, t); return } } u.focus() } _handleBlur(e) { if (this._a11yD == !0) return; const t = this._focusedSprite; t && !t.isDisposed() && t.events.isEnabled("blur") && t.events.dispatch("blur", { type: "blur", originalEvent: e, target: t }), this._focusedSprite = void 0 } updateTooltip(e) { if (this._a11yD == !0) return; const t = ay(e._getText()); let s = e.getPrivate("tooltipElement"); e.get("role") == "tooltip" && t != "" ? (s || (s = this._makeTooltipElement(e)), s.innerHTML != t && (s.innerHTML = t), s.setAttribute("aria-hidden", e.isVisibleDeep() ? "false" : "true")) : s && (s.remove(), e.removePrivate("tooltipElement")) } _makeTooltipElement(e) { const t = this._tooltipElementContainer, s = document.createElement("div"); return s.style.position = "absolute", s.style.width = "1px", s.style.height = "1px", s.style.overflow = "hidden", s.style.clip = "rect(1px, 1px, 1px, 1px)", yr(s, !1), this._decorateFocusElement(e, s), t.append(s), e.setPrivate("tooltipElement", s), s } _removeTooltipElement(e) { if (this._a11yD == !0) return; const t = e.getPrivate("tooltipElement"); if (t) { const s = t.parentElement; s && s.removeChild(t) } } _invalidateAccessibility(e) { if (this._a11yD == !0) return; this._focusElementDirty = !0; const t = e.getPrivate("focusElement"); e.get("focusable") ? t && (this._decorateFocusElement(e), this._positionFocusElement(e)) : t && this._removeFocusElement(e) } focused(e) { return this._focusedSprite === e } documentPointToRoot(e) { const t = this._getRealSize(), s = this._getCalculatedSize(t), r = s.width / t.width, o = s.height / t.height; return { x: (e.x - t.left) * r, y: (e.y - t.top) * o } } rootPointToDocument(e) { const t = this._getRealSize(), s = this._getCalculatedSize(t), r = s.width / t.width, o = s.height / t.height; return { x: e.x / r + t.left, y: e.y / o + t.top } } addDisposer(e) { return this._disposers.push(e), e } _updateComputedStyles() { const e = window.getComputedStyle(this.dom); let t = ""; it(e, (r, o) => { xn(r) && r.match(/^font/) && (t += o) }); const s = t != this._fontHash; return s && (this._fontHash = t), s } _checkComputedStyles() { this._updateComputedStyles() && this._invalidateLabelBounds(this.container) } _invalidateLabelBounds(e) { e instanceof ze ? e.children.each(t => { this._invalidateLabelBounds(t) }) : e instanceof vn && e.markDirtyBounds() } _hasLicense() { for (let e = 0; e < Js.licenses.length; e++)if (Js.licenses[e].match(/^AM5C.{5,}/i)) return !0; return !1 } _licenseApplied() { this._logo && this._logo.set("forceHidden", !0) } get debugGhostView() { return this._renderer.debugGhostView } set debugGhostView(e) { this._renderer.debugGhostView = e } set tapToActivate(e) { this._renderer.tapToActivate = e } get tapToActivate() { return this._renderer.tapToActivate } set tapToActivateTimeout(e) { this._renderer.tapToActivateTimeout = e } get tapToActivateTimeout() { return this._renderer.tapToActivateTimeout } _makeHTMLElement(e) { const t = this._htmlElementContainer, s = document.createElement("div"); e.setPrivate("htmlElement", s); let r = !1, o; e._walkParents(d => { if (d.get("verticalScrollbar")) return r = !0, o = d, !1 }); let u; return r && (u = document.createElement("div"), e.setPrivate("htmlElementWrapper", u), e.setPrivate("wrapperContainer", o), u.style.position = "absolute", u.style.overflow = "hidden", u.style.boxSizing = "border-box", u.style.top = "0px", u.style.left = "0px", u.style.width = "100%", u.style.height = "100%", o.events.on("boundschanged", () => { this._positionHTMLElement(e) })), s.style.position = "absolute", s.style.overflow = "auto", s.style.boxSizing = "border-box", yr(s, e.get("interactive", !1)), e.events.isEnabled("click") && (yr(s, !0), this._disposers.push(jt(s, "click", d => { const f = this._renderer.getEvent(d); e.events.dispatch("click", { type: "click", originalEvent: f.event, point: f.point, simulated: !1, target: e }) }))), this._positionHTMLElement(e), r ? (u.append(s), t.append(u)) : t.append(s), Wl(this._htmlEnabledContainers, e), s } _positionHTMLElements() { te(this._htmlEnabledContainers, e => { this._positionHTMLElement(e) }) } _positionHTMLElement(e) { const t = e.getPrivate("htmlElementWrapper"); if (t) { const r = e.getPrivate("wrapperContainer"); if (r) { const o = r.globalBounds(); t.style.clipPath = "rect(" + o.top + "px " + o.right + "px " + o.bottom + "px " + o.left + "px)" } } const s = e.getPrivate("htmlElement"); if (s) { te(["paddingTop", "paddingRight", "paddingBottom", "paddingLeft", "minWidth", "minHeight", "maxWidth", "maxHeight"], N => { const T = e.get(N); T ? s.style[N] = T + "px" : s.style[N] = "" }), te(["fontFamily", "fontSize", "fontStyle", "fontWeight", "fontStyle", "fontVariant", "textDecoration"], N => { const T = e.get(N); T ? N == "fontSize" && !xn(T) ? s.style[N] = T + "px" : s.style[N] = T + "" : s.style[N] = "" }); const u = e.compositeScale() || 1, d = e.compositeRotation() || 0; s.style.transform = "", s.style.transformOrigin = ""; const f = e.compositeOpacity(); setTimeout(() => { s.style.opacity = f + "" }, 10); const m = e.isVisibleDeep(); m && (s.style.display = "block"); let p = { x: e.x() + e.get("dx", 0), y: e.y() + e.get("dy", 0) }; e.parent && (p = e.parent.toGlobal(p)), s.style.top = p.y + "px", s.style.left = p.x + "px"; const g = e.get("width"), y = e.get("height"); let b = 0, v = 0; if (g && (b = e.width()), y && (v = e.height()), !g || !y) { s.style.position = "fixed", s.style.width = "", s.style.height = ""; const N = s.getBoundingClientRect(); s.style.position = "absolute", g || (b = N.width), y || (v = N.height); let T = b / u, R = v / u, P = e.get("centerX", 0), O = e.get("centerY", 0), z = 0, F = 0, B = 0, A = 0; P instanceof Ie ? (z = -P.value * T, F = (1 - P.value) * T) : (z = -P, F = T - P), O instanceof Ie ? (B = -O.value * R, A = (1 - O.value) * R) : (B = -O, A = R - O), e._localBounds = { left: z, right: F, top: B, bottom: A }; let L = e._adjustedLocalBounds, M = e._display.getAdjustedBounds(e._localBounds); e._adjustedLocalBounds = M, (L.left !== M.left || L.right !== M.right || L.top !== M.top || L.bottom !== M.bottom) && e.markDirtyBounds() } b > 0 && (s.style.minWidth = b + "px"), v > 0 && (s.style.minHeight = v + "px"), (!m || f == 0) && (s.style.display = "none"); const k = e.get("centerX", 0), j = iy(k) ? k.percent + "%" : k + "px", S = e.get("centerY", 0), w = iy(S) ? S.percent + "%" : S + "px"; (k || S) && (s.style.transform = "translate(-" + j + ", -" + w + ")" + s.style.transform), u != 1 && (s.style.transform += "scale(" + u + ")"), d != 0 && (s.style.transform += " rotate(" + d + "deg)"), s.style.transform != "" && (s.style.transformOrigin = j + " " + w) } } _setHTMLContent(e, t) { let s = e.getPrivate("htmlElement"); s || (s = this._makeHTMLElement(e), this.autoResize || this.resize()), s.innerHTML != t && (s.innerHTML = t) } _removeHTMLContent(e) { const t = e.getPrivate("htmlElementWrapper"), s = e.getPrivate("htmlElement"); t ? (this._htmlElementContainer.removeChild(t), e.removePrivate("htmlElement"), e.removePrivate("htmlElementWrapper"), e.removePrivate("wrapperContainer")) : s && (this._htmlElementContainer.removeChild(s), e.removePrivate("htmlElement"), e.removePrivate("wrapperContainer")), Vi(this._htmlEnabledContainers, e) } } class Kl extends Ut { constructor() { super(...arguments), Object.defineProperty(this, "_index", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "series", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }) } _afterNew() { super._afterNewApplyThemes() } _beforeChanged() { if (super._beforeChanged(), this.isDirty("sprite")) { const e = this.get("sprite"); e && (e.setAll({ position: "absolute", role: "figure" }), this._disposers.push(e)) } (this.isDirty("locationX") || this.isDirty("locationY")) && this.series && this.series._positionBullet(this) } } Object.defineProperty(Kl, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Bullet" }); Object.defineProperty(Kl, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Ut.classNames.concat([Kl.className]) }); class Fa extends Gi { _beforeChanged() { super._beforeChanged(), (this.isDirty("cornerRadiusTL") || this.isDirty("cornerRadiusTR") || this.isDirty("cornerRadiusBR") || this.isDirty("cornerRadiusBL")) && (this._clear = !0) } _draw() { let e = this.width(), t = this.height(), s = e / Math.abs(e), r = t / Math.abs(t), o = 0, u = 0; const d = this.get("strokeWidth", 0); this.get("containStroke", !1) && (e -= s * d, t -= r * d, o += s * d / 2, u += r * d / 2); let f = e, m = t; if (le(f) && le(m)) { let p = Math.min(f, m) / 2, g = mt(this.get("cornerRadiusTL", 8), p), y = mt(this.get("cornerRadiusTR", 8), p), b = mt(this.get("cornerRadiusBR", 8), p), v = mt(this.get("cornerRadiusBL", 8), p), k = Math.min(Math.abs(f / 2), Math.abs(m / 2)); g = Dt(g, 0, k), y = Dt(y, 0, k), b = Dt(b, 0, k), v = Dt(v, 0, k); const j = this._display; j.moveTo(o + g * s, u), j.lineTo(o + f - y * s, u), y > 0 && j.arcTo(o + f, u, o + f, u + y * r, y), j.lineTo(o + f, u + m - b * r), b > 0 && j.arcTo(o + f, u + m, o + f - b * s, u + m, b), j.lineTo(o + v * s, u + m), v > 0 && j.arcTo(o, u + m, o, u + m - v * r, v), j.lineTo(o, u + g * r), g > 0 && j.arcTo(o, u, o + g * s, u, g), j.closePath() } } } Object.defineProperty(Fa, "className", { enumerable: !0, configurable: !0, writable: !0, value: "RoundedRectangle" }); Object.defineProperty(Fa, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Gi.classNames.concat([Fa.className]) }); class cu extends ze { _afterNew() { this._settings.themeTags = Ve(this._settings.themeTags, ["button"]), super._afterNew(), this._settings.background || this.set("background", Fa.new(this._root, { themeTags: Ve(this._settings.themeTags, ["background"]) })), this.setPrivate("trustBounds", !0) } _prepareChildren() { if (super._prepareChildren(), this.isDirty("icon")) { const e = this._prevSettings.icon, t = this.get("icon"); t !== e && (this._disposeProperty("icon"), e && e.dispose(), t && this.children.push(t), this._prevSettings.icon = t) } if (this.isDirty("label")) { const e = this._prevSettings.label, t = this.get("label"); t !== e && (this._disposeProperty("label"), e && e.dispose(), t && this.children.push(t), this._prevSettings.label = t) } } } Object.defineProperty(cu, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Button" }); Object.defineProperty(cu, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: ze.classNames.concat([cu.className]) }); class Zl extends Qe { _afterNew() { super._afterNew(), this._display.isMeasured = !0, this.setPrivateRaw("trustBounds", !0) } _beforeChanged() { super._beforeChanged(), this.isDirty("radius") && (this._clear = !0) } _changed() { super._changed(), this._clear && this._display.drawCircle(0, 0, Math.abs(this.get("radius", 10))) } } Object.defineProperty(Zl, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Circle" }); Object.defineProperty(Zl, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Qe.classNames.concat([Zl.className]) }); class uC extends Hr { constructor() { super(...arguments), Object.defineProperty(this, "processor", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }) } incrementRef() { } decrementRef() { } _onPush(e) { this.processor && this.processor.processRow(e), super._onPush(e) } _onInsertIndex(e, t) { this.processor && this.processor.processRow(t), super._onInsertIndex(e, t) } _onSetIndex(e, t, s) { this.processor && this.processor.processRow(s), super._onSetIndex(e, t, s) } } class La extends h0 { constructor(e, t, s) { super(s), Object.defineProperty(this, "component", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "dataContext", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "bullets", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "open", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "close", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), this.dataContext = t, this.component = e, this._settings.visible = !0, this._checkDirty() } markDirty() { this.component.markDirtyValues(this) } _startAnimation() { this.component._root._addAnimation(this) } _animationTime() { return this.component._root.animationTime } _dispose() { this.component && this.component.disposeDataItem(this), super._dispose() } show(e) { this.setRaw("visible", !0), this.component && this.component.showDataItem(this, e) } hide(e) { this.setRaw("visible", !1), this.component && this.component.hideDataItem(this, e) } isHidden() { return !this.get("visible") } } class _n extends ze { constructor() { super(...arguments), Object.defineProperty(this, "_data", { enumerable: !0, configurable: !0, writable: !0, value: new uC }), Object.defineProperty(this, "_dataItems", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_mainDataItems", { enumerable: !0, configurable: !0, writable: !0, value: this._dataItems }), Object.defineProperty(this, "valueFields", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "fields", { enumerable: !0, configurable: !0, writable: !0, value: ["id"] }), Object.defineProperty(this, "_valueFields", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_valueFieldsF", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_fields", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_fieldsF", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_valuesDirty", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_dataChanged", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_dataGrouped", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "inited", { enumerable: !0, configurable: !0, writable: !0, value: !1 }) } set data(e) { e.incrementRef(), this._data.decrementRef(), this._data = e } get data() { return this._data } _dispose() { super._dispose(), this._data.decrementRef() } _onDataClear() { } _afterNew() { super._afterNew(), this._data.incrementRef(), this._updateFields(), this._disposers.push(this.data.events.onAll(e => { const t = this._mainDataItems; if (this.markDirtyValues(), this._markDirtyGroup(), this._dataChanged = !0, e.type === "clear") te(t, s => { s.dispose() }), t.length = 0, this._onDataClear(); else if (e.type === "push") { const s = new La(this, e.newValue, this._makeDataItem(e.newValue)); t.push(s), this.processDataItem(s) } else if (e.type === "setIndex") { const s = t[e.index], r = this._makeDataItem(e.newValue); s.bullets && s.bullets.length == 0 && (s.bullets = void 0), As(r).forEach(([o, u]) => { s.get(o) != u && s.animate({ key: o, to: u, duration: this.get("interpolationDuration", 0), easing: this.get("interpolationEasing") }) }), s.dataContext = e.newValue } else if (e.type === "insertIndex") { const s = new La(this, e.newValue, this._makeDataItem(e.newValue)); t.splice(e.index, 0, s), this.processDataItem(s) } else if (e.type === "removeIndex") t[e.index].dispose(), t.splice(e.index, 1); else if (e.type === "moveIndex") { const s = t[e.oldIndex]; t.splice(e.oldIndex, 1), t.splice(e.newIndex, 0, s) } else throw new Error("Unknown IStreamEvent type"); this._afterDataChange() })) } _postUpdateData() { } updateData(e) { let t = 0; te(e, (s, r) => { const o = this.dataItems[r]; if (!o) this.data.push(s); else { const u = o.dataContext; u && As(s).forEach(([f, m]) => { u[f] = m }); const d = this._makeDataItem(u); As(d).forEach(([f, m]) => { var p; if (o.get(f) != m) { o.set(f, m); const g = (p = this._valueFieldsF[f]) === null || p === void 0 ? void 0 : p.workingKey; g && o.set(g, m) } }) } t = r }); for (let s = this.dataItems.length - 1; s > t; s--) { const r = this.dataItems[s]; Vi(this.dataItems, r), r.dispose() } this._postUpdateData() } _updateFields() { this.valueFields && (this._valueFields = [], this._valueFieldsF = {}, te(this.valueFields, e => { this.get(e + "Field") && (this._valueFields.push(e), this._valueFieldsF[e] = { fieldKey: e + "Field", workingKey: e + "Working" }) })), this.fields && (this._fields = [], this._fieldsF = {}, te(this.fields, e => { this.get(e + "Field") && (this._fields.push(e), this._fieldsF[e] = e + "Field") })) } get dataItems() { return this._dataItems } processDataItem(e) { } _makeDataItem(e) { const t = {}; return this._valueFields && te(this._valueFields, s => { const r = this.get(this._valueFieldsF[s].fieldKey); t[s] = e[r], t[this._valueFieldsF[s].workingKey] = t[s] }), this._fields && te(this._fields, s => { const r = this.get(this._fieldsF[s]); t[s] = e[r] }), t } makeDataItem(e, t) { let s = new La(this, t, e); return this.processDataItem(s), s } pushDataItem(e, t) { const s = this.makeDataItem(e, t); return this._mainDataItems.push(s), s } disposeDataItem(e) { } showDataItem(e, t) { return Mt(this, void 0, void 0, function* () { e.set("visible", !0) }) } hideDataItem(e, t) { return Mt(this, void 0, void 0, function* () { e.set("visible", !1) }) } _clearDirty() { super._clearDirty(), this._valuesDirty = !1 } _afterDataChange() { } _afterChanged() { if (super._afterChanged(), this._dataChanged) { const e = "datavalidated"; this.events.isEnabled(e) && this.events.dispatch(e, { type: e, target: this }), this._dataChanged = !1 } if (this._valuesDirty) { const e = "valueschanged"; this.events.isEnabled(e) && this.events.dispatch(e, { type: e, target: this }) } this.inited = !0 } markDirtyValues(e) { this.markDirty(), this._valuesDirty = !0 } _markDirtyGroup() { this._dataGrouped = !1 } markDirtySize() { this._sizeDirty = !0, this.markDirty() } getDataItemById(e) { return Jv(this.dataItems, t => t.get("id") == e) } } Object.defineProperty(_n, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Component" }); Object.defineProperty(_n, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: ze.classNames.concat([_n.className]) }); class Ql extends Ut { _afterNew() { super._afterNewApplyThemes() } getFill(e) { return { addColorStop: (t, s) => { } } } _changed() { super._changed() } getBounds(e) { const t = this.get("target"); if (t) { let s = t.globalBounds(); const r = e.toLocal({ x: s.left, y: s.top }), o = e.toLocal({ x: s.right, y: s.top }), u = e.toLocal({ x: s.right, y: s.bottom }), d = e.toLocal({ x: s.left, y: s.bottom }); return { left: Math.min(r.x, o.x, u.x, d.x), top: Math.min(r.y, o.y, u.y, d.y), right: Math.max(r.x, o.x, u.x, d.x), bottom: Math.max(r.y, o.y, u.y, d.y) } } return e._display.getLocalBounds() } } Object.defineProperty(Ql, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Gradient" }); Object.defineProperty(Ql, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Ut.classNames.concat([Ql.className]) }); class uu extends Ql { getFill(e) { const t = this.get("rotation", 0); let s = this.getBounds(e), r = s.left || 0, o = s.right || 0, u = s.top || 0, d = s.bottom || 0, f = Wt(t), m = zt(t), p = f * (o - r), g = m * (d - u); p == 0 && (p = 1), g == 0 && (g = 1); let y = Math.max(p, g); const b = this._root._renderer.createLinearGradient(r, u, r + y * f, u + y * m), v = this.get("stops"); if (v) { let k = 0; te(v, j => { let S = j.offset; le(S) || (S = k / (v.length - 1)); let w = j.opacity; le(w) || (w = 1); let N = j.color; if (N) { const T = j.lighten; T && (N = ke.lighten(N, T)); const R = j.brighten; R && (N = ke.brighten(N, R)), b.addColorStop(S, "rgba(" + N.r + "," + N.g + "," + N.b + "," + w + ")") } k++ }) } return b } } Object.defineProperty(uu, "className", { enumerable: !0, configurable: !0, writable: !0, value: "LinearGradient" }); Object.defineProperty(uu, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Ql.classNames.concat([uu.className]) }); function dC(l) { return new Promise((e, t) => { setTimeout(e, l) }) } function hC(l, e, t, s, r, o, u) { if (!u || r) { let d = 0; switch (!r && e != "millisecond" && (d = l.getTimezoneOffset(), l.setUTCMinutes(l.getUTCMinutes() - d)), e) { case "day": let f = l.getUTCDate(); t > 1 || l.setUTCDate(f), l.setUTCHours(0, 0, 0, 0); break; case "second": let m = l.getUTCSeconds(); t > 1 && (m = Math.floor(m / t) * t), l.setUTCSeconds(m, 0); break; case "millisecond": if (t == 1) return l; let p = l.getUTCMilliseconds(); p = Math.floor(p / t) * t, l.setUTCMilliseconds(p); break; case "hour": let g = l.getUTCHours(); t > 1 && (g = Math.floor(g / t) * t), l.setUTCHours(g, 0, 0, 0); break; case "minute": let y = l.getUTCMinutes(); t > 1 && (y = Math.floor(y / t) * t), l.setUTCMinutes(y, 0, 0); break; case "month": let b = l.getUTCMonth(); t > 1 && (t == 2 || t == 3 || t == 4 || t == 6) && (b = Math.floor(b / t) * t), l.setUTCMonth(b, 1), l.setUTCHours(0, 0, 0, 0); break; case "year": let v = l.getUTCFullYear(); t > 1 && (v = Math.floor(v / t) * t), l.setUTCFullYear(v, 0, 1), l.setUTCHours(0, 0, 0, 0); break; case "week": let k = l.getUTCDate(), j = l.getUTCDay(); le(s) || (s = 1), j >= s ? k = k - j + s : k = k - (7 + j) + s, l.setUTCDate(k), l.setUTCHours(0, 0, 0, 0); break }if (!r && e != "millisecond" && (l.setUTCMinutes(l.getUTCMinutes() + d), e == "day" || e == "week" || e == "month" || e == "year")) { let f = l.getTimezoneOffset(); if (f != d) { let m = f - d; l.setUTCMinutes(l.getUTCMinutes() + m) } } return l } else { if (isNaN(l.getTime())) return l; let d = l.getTime(), f = u.offsetUTC(l), m = l.getTimezoneOffset(), p = u.parseDate(l), g = p.year, y = p.month, b = p.day, v = p.hour, k = p.minute, j = p.second, S = p.millisecond, w = p.weekday, N = f - m; switch (e) { case "day": v = 0, k = N, j = 0, S = 0; break; case "second": k += N, t > 1 && (j = Math.floor(j / t) * t), S = 0; break; case "millisecond": k += N, t > 1 && (S = Math.floor(S / t) * t); break; case "hour": t > 1 && (v = Math.floor(v / t) * t), k = N, j = 0, S = 0; break; case "minute": t > 1 && (k = Math.floor(k / t) * t), k += N, j = 0, S = 0; break; case "month": t > 1 && (y = Math.floor(y / t) * t), b = 1, v = 0, k = N, j = 0, S = 0; break; case "year": t > 1 && (g = Math.floor(g / t) * t), y = 0, b = 1, v = 0, k = N, j = 0, S = 0; break; case "week": le(s) || (s = 1), w >= s ? b = b - w + s : b = b - (7 + w) + s, v = 0, k = N, j = 0, S = 0; break }l = new Date(g, y, b, v, k, j, S); const T = l.getTime(); let R = 36e5; e == "hour" && (R = 36e5 * t), T + R <= d && (e == "hour" || e == "minute" || e == "second" || e == "millisecond") && (l = new Date(T + R)); let P = l.getTimezoneOffset(), z = u.offsetUTC(l) - P; return z != N && l.setTime(l.getTime() + (z - N) * 6e4), l } } class na extends _n { constructor() { super(...arguments), Object.defineProperty(this, "_aggregatesCalculated", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_selectionAggregatesCalculated", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_dataProcessed", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_psi", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_pei", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_baseSeriesDirty", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "chart", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "bullets", { enumerable: !0, configurable: !0, writable: !0, value: new Hr }), Object.defineProperty(this, "bulletsContainer", { enumerable: !0, configurable: !0, writable: !0, value: ze.new(this._root, { width: Te, height: Te, position: "absolute" }) }) } _afterNew() { this.valueFields.push("value", "customValue"), super._afterNew(), this.setPrivate("customData", {}), this._disposers.push(this.bullets.events.onAll(() => { this._handleBullets(this.dataItems) })) } _dispose() { this.bulletsContainer.dispose(), super._dispose() } startIndex() { let e = this.dataItems.length; return Math.min(this.getPrivate("startIndex", 0), e) } endIndex() { let e = this.dataItems.length; return Math.max(0, Math.min(this.getPrivate("endIndex", e), e)) } _handleBullets(e) { te(e, t => { const s = t.bullets; s && (te(s, r => { r.dispose() }), t.bullets = void 0) }), this.markDirtyValues() } _makeBullets(e) { this._shouldMakeBullet(e) && (e.bullets = [], this.bullets.each(t => { this._makeBullet(e, t) })) } _shouldMakeBullet(e) { return !0 } _makeBullet(e, t, s) { const r = t(this._root, this, e); return r && (r._index = s, this._makeBulletReal(e, r)), r } _makeBulletReal(e, t) { let s = t.get("sprite"); s && (s._setDataItem(e), s.setRaw("position", "absolute"), this.bulletsContainer.children.push(s)), t.series = this, e.bullets.push(t) } addBullet(e, t) { e.bullets || (e.bullets = []), t && this._makeBulletReal(e, t) } _clearDirty() { super._clearDirty(), this._aggregatesCalculated = !1, this._baseSeriesDirty = !1, this._selectionAggregatesCalculated = !1 } _prepareChildren() { super._prepareChildren(); const e = this.dataItems, t = e.length; let s = this.startIndex(), r = this.endIndex(); if (this.isDirty("name") && this.updateLegendValue(), this.isDirty("heatRules") && (this._valuesDirty = !0), this.isPrivateDirty("baseValueSeries")) { const u = this.getPrivate("baseValueSeries"); u && this._disposers.push(u.onPrivate("startIndex", () => { this._baseSeriesDirty = !0, this.markDirtyValues() })) } if (this.get("calculateAggregates") && (this._valuesDirty && !this._dataProcessed && (this._aggregatesCalculated || (this._calculateAggregates(0, t), this._aggregatesCalculated = !0, s != 0 && (this._psi = void 0))), (this._psi != s || this._pei != r || this.isPrivateDirty("adjustedStartIndex")) && !this._selectionAggregatesCalculated && (s === 0 && r === t && this._aggregatesCalculated || this._calculateAggregates(s, r), this._selectionAggregatesCalculated = !0)), this.isDirty("tooltip")) { let u = this.get("tooltip"); u && (u.hide(0), u.set("tooltipTarget", this)) } if (this.isDirty("fill") || this.isDirty("stroke")) { let u; const d = this.get("legendDataItem"); if (d && (u = d.get("markerRectangle"), u && this.isVisible())) { if (this.isDirty("stroke")) { let f = this.get("stroke"); u.set("stroke", f) } if (this.isDirty("fill")) { let f = this.get("fill"); u.set("fill", f) } } this.updateLegendMarker(void 0) } if (this.bullets.length > 0) { let u = this.startIndex(), d = this.endIndex(); d < t && d++; for (let f = u; f < d; f++) { let m = e[f]; m.bullets || this._makeBullets(m) } } } _handleRemoved() { } _adjustStartIndex(e) { return e } _calculateAggregates(e, t) { let s = this._valueFields; if (!s) throw new Error("No value fields are set for the series."); const r = this.get("excludeFromAggregate"); r && (s = s.filter(j => r.indexOf(j) == -1)); const o = {}, u = {}, d = {}, f = {}, m = {}, p = {}, g = {}, y = {}, b = {}; for (let j = 0, S = s.length; j < S; j++) { let w = s[j]; o[w] = 0, u[w] = 0, d[w] = 0 } const v = this.dataItems, k = v.length; for (let j = 0, S = s.length; j < S; j++) { let w = s[j], N = w + "Change", T = w + "ChangePercent", R = w + "ChangePrevious", P = w + "ChangePreviousPercent", O = w + "ChangeSelection", z = w + "ChangeSelectionPercent", F = "valueY"; (w === "valueX" || w.endsWith("ValueX")) && (F = "valueX"); const B = this.getPrivate("baseValueSeries"), A = this.getPrivate("adjustedStartIndex", e), L = (M, X, U) => { if (e === 0) { const Y = p[F], ee = X - Y; M.setRaw(N, ee), M.setRaw(T, ee / Y * 100) } const I = X - b[F], H = X - p[F]; M.setRaw(R, I), M.setRaw(P, I / b[F] * 100), M.setRaw(O, H), M.setRaw(z, H / p[F] * 100), b[U] = X }; for (let M = A; M < t; M++) { const X = v[M]; if (X) { let U = X.get(w); if (U != null) { f[w] == null && (f[w] = U), m[w] == null && (m[w] = U), p[w] == null && (p[w] = U, b[w] = U, B && (p[F] = B._getBase(F))); break } } } for (let M = A; M < t; M++) { const X = v[M]; if (X) { let U = X._settings[w]; U != null && (d[w]++, o[w] += U, u[w] += Math.abs(U), f[w] > U && (f[w] = U), m[w] < U && (m[w] = U), g[w] = U, L(X, U, w)) } } if (y[w] = o[w] / d[w], t < k) { const M = v[t]; if (M) { let X = M.get(w); X != null && L(M, X, w) } } if (t + 1 < k) { const M = v[t + 1]; if (M) { let X = M.get(w); X != null && L(M, X, w) } } e > 0 && e--, delete b[w]; for (let M = e; M < A; M++) { const X = v[M]; if (X) { let U = X.get(w); b[w] == null && (b[w] = U), U != null && L(X, U, w) } } } for (let j = 0, S = s.length; j < S; j++) { let w = s[j]; this.setPrivate(w + "AverageSelection", y[w]), this.setPrivate(w + "CountSelection", d[w]), this.setPrivate(w + "SumSelection", o[w]), this.setPrivate(w + "AbsoluteSumSelection", u[w]), this.setPrivate(w + "LowSelection", f[w]), this.setPrivate(w + "HighSelection", m[w]), this.setPrivate(w + "OpenSelection", p[w]), this.setPrivate(w + "CloseSelection", g[w]) } if (e === 0 && t === k) for (let j = 0, S = s.length; j < S; j++) { let w = s[j]; this.setPrivate(w + "Average", y[w]), this.setPrivate(w + "Count", d[w]), this.setPrivate(w + "Sum", o[w]), this.setPrivate(w + "AbsoluteSum", u[w]), this.setPrivate(w + "Low", f[w]), this.setPrivate(w + "High", m[w]), this.setPrivate(w + "Open", p[w]), this.setPrivate(w + "Close", g[w]) } } _updateChildren() { super._updateChildren(), this._psi = this.startIndex(), this._pei = this.endIndex(), this.isDirty("visible") && this.bulletsContainer.set("visible", this.get("visible")); const e = this.get("heatRules"); if (this._valuesDirty && e && e.length > 0 && te(e, t => { const s = t.minValue || this.getPrivate(t.dataField + "Low") || 0, r = t.maxValue || this.getPrivate(t.dataField + "High") || 0; te(t.target._entities, o => { const u = o.dataItem.get(t.dataField); if (!le(u)) { t.neutral && o.set(t.key, t.neutral); const d = o.states; if (d) { const f = d.lookup("default"); f && t.neutral && f.set(t.key, t.neutral) } if (!t.customFunction) return } if (t.customFunction) t.customFunction.call(this, o, s, r, u); else { let d; t.logarithmic ? d = (Math.log(u) * Math.LOG10E - Math.log(s) * Math.LOG10E) / (Math.log(r) * Math.LOG10E - Math.log(s) * Math.LOG10E) : d = (u - s) / (r - s), le(u) && (!le(d) || Math.abs(d) == 1 / 0) && (d = .5); let f; le(t.min) ? f = t.min + (t.max - t.min) * d : t.min instanceof ke ? f = ke.interpolate(d, t.min, t.max) : t.min instanceof Ie && (f = c0(d, t.min, t.max)), o.set(t.key, f); const m = o.states; if (m) { const p = m.lookup("default"); p && p.set(t.key, f) } } }) }), this.get("visible")) { const t = this.dataItems; let s = t.length, r = this.startIndex(), o = this.endIndex(); o < s && o++, r > 0 && r--; for (let u = 0; u < r; u++)this._hideBullets(t[u]); for (let u = r; u < o; u++)this._positionBullets(t[u]); for (let u = o; u < s; u++)this._hideBullets(t[u]) } } _positionBullets(e) { e.bullets && te(e.bullets, t => { this._positionBullet(t); const s = t.get("sprite"); t.get("dynamic") && (s && (s._markDirtyKey("fill"), s.markDirtySize()), s instanceof ze && s.walkChildren(r => { r._markDirtyKey("fill"), r.markDirtySize(), r instanceof Pi && r.text.markDirtyText() })), s instanceof Pi && s.get("populateText") && s.text.markDirtyText() }) } _hideBullets(e) { e.bullets && te(e.bullets, t => { let s = t.get("sprite"); s && s.setPrivate("visible", !1) }) } _positionBullet(e) { } _placeBulletsContainer(e) { e.bulletsContainer.children.moveValue(this.bulletsContainer) } _removeBulletsContainer() { const e = this.bulletsContainer; e.parent && e.parent.children.removeValue(e) } disposeDataItem(e) { const t = e.bullets; t && (te(t, s => { s.dispose() }), e.bullets = void 0) } _getItemReaderLabel() { return "" } showDataItem(e, t) { const s = Object.create(null, { showDataItem: { get: () => super.showDataItem } }); return Mt(this, void 0, void 0, function* () { const r = [s.showDataItem.call(this, e, t)], o = e.bullets; o && te(o, u => { const d = u.get("sprite"); d && r.push(d.show(t)) }), yield Promise.all(r) }) } hideDataItem(e, t) { const s = Object.create(null, { hideDataItem: { get: () => super.hideDataItem } }); return Mt(this, void 0, void 0, function* () { const r = [s.hideDataItem.call(this, e, t)], o = e.bullets; o && te(o, u => { const d = u.get("sprite"); d && r.push(d.hide(t)) }), yield Promise.all(r) }) } _sequencedShowHide(e, t) { return Mt(this, void 0, void 0, function* () { if (this.get("sequencedInterpolation")) if (le(t) || (t = this.get("interpolationDuration", 0)), t > 0) { const s = this.startIndex(), r = this.endIndex(); yield Promise.all(zf(this.dataItems, (o, u) => Mt(this, void 0, void 0, function* () { let d = t || 0; (u < s - 10 || u > r + 10) && (d = 0); let f = this.get("sequencedDelay", 0) + d / (r - s); yield dC(f * (u - s)), e ? yield this.showDataItem(o, d) : yield this.hideDataItem(o, d) }))) } else yield Promise.all(zf(this.dataItems, s => e ? this.showDataItem(s, 0) : this.hideDataItem(s, 0))) }) } updateLegendValue(e) { if (e) { const t = e.get("legendDataItem"); if (t) { const s = t.get("valueLabel"); if (s) { const o = s.text; let u = ""; s._setDataItem(e), u = this.get("legendValueText", o.get("text", "")), s.set("text", u), o.markDirtyText() } const r = t.get("label"); if (r) { const o = r.text; let u = ""; r._setDataItem(e), u = this.get("legendLabelText", o.get("text", "")), r.set("text", u), o.markDirtyText() } } } } updateLegendMarker(e) { } _onHide() { super._onHide(); const e = this.getTooltip(); e && e.hide() } hoverDataItem(e) { } unhoverDataItem(e) { } _getBase(e) { const t = this.dataItems[this.startIndex()]; return t ? t.get(e) : 0 } } Object.defineProperty(na, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Series" }); Object.defineProperty(na, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: _n.classNames.concat([na.className]) }); class Ha extends na { constructor() { super(...arguments), Object.defineProperty(this, "itemContainers", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(new At(at.new({}), () => ze._new(this._root, { themeTags: Ve(this.itemContainers.template.get("themeTags", []), ["legend", "item"]), themeTagsSelf: Ve(this.itemContainers.template.get("themeTagsSelf", []), ["itemcontainer"]), background: Fa.new(this._root, { themeTags: Ve(this.itemContainers.template.get("themeTags", []), ["legend", "item", "background"]), themeTagsSelf: Ve(this.itemContainers.template.get("themeTagsSelf", []), ["itemcontainer"]) }) }, [this.itemContainers.template]))) }), Object.defineProperty(this, "markers", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(new At(at.new({}), () => ze._new(this._root, { themeTags: Ve(this.markers.template.get("themeTags", []), ["legend", "marker"]) }, [this.markers.template]))) }), Object.defineProperty(this, "labels", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(new At(at.new({}), () => Pi._new(this._root, { themeTags: Ve(this.labels.template.get("themeTags", []), ["legend", "label"]) }, [this.labels.template]))) }), Object.defineProperty(this, "valueLabels", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(new At(at.new({}), () => Pi._new(this._root, { themeTags: Ve(this.valueLabels.template.get("themeTags", []), ["legend", "label", "value"]) }, [this.valueLabels.template]))) }), Object.defineProperty(this, "markerRectangles", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(new At(at.new({}), () => Fa._new(this._root, { themeTags: Ve(this.markerRectangles.template.get("themeTags", []), ["legend", "marker", "rectangle"]) }, [this.markerRectangles.template]))) }) } _afterNew() { this._settings.themeTags = Ve(this._settings.themeTags, ["legend"]), this.fields.push("name", "stroke", "fill"), super._afterNew() } makeItemContainer(e) { const t = this.children.push(this.itemContainers.make()); return t._setDataItem(e), this.itemContainers.push(t), t.states.create("disabled", {}), t } makeMarker() { const e = this.markers.make(); return this.markers.push(e), e.states.create("disabled", {}), e } makeLabel() { const e = this.labels.make(); return e.states.create("disabled", {}), e } makeValueLabel() { const e = this.valueLabels.make(); return e.states.create("disabled", {}), e } makeMarkerRectangle() { const e = this.markerRectangles.make(); return e.states.create("disabled", {}), e } processDataItem(e) { super.processDataItem(e); const t = this.makeItemContainer(e), s = this.get("nameField"), r = this.get("fillField"), o = this.get("strokeField"); if (t) { const u = this.get("clickTarget", "itemContainer"), d = e.dataContext; d && d.set && d.set("legendDataItem", e), t._setDataItem(e), e.set("itemContainer", t); const f = this.makeMarker(); if (f) { t.children.push(f), f._setDataItem(e), e.set("marker", f); const g = this.get("useDefaultMarker"), y = f.children.push(this.makeMarkerRectangle()); let b = e.get("fill"), v = e.get("stroke"); e.set("markerRectangle", y), d && d.get && (b = d.get(r, b), v = d.get(o, v)), v || (v = b), g ? d.on && (d.on(r, () => { y.set("fill", d.get(r)) }), d.on(o, () => { y.set("stroke", d.get(o)) })) : d && d.createLegendMarker && d.createLegendMarker(), y.setAll({ fill: b, stroke: v }); const k = d.component; k && k.updateLegendMarker && k.updateLegendMarker(d) } const m = this.makeLabel(); if (m) { t.children.push(m), m._setDataItem(e), e.set("label", m), m.text.on("text", () => { t.setRaw("ariaLabel", m.text._getText() + (this.get("clickTarget") !== "none" ? "; " + this._t("Press ENTER to toggle") : "")), t.markDirtyAccessibility() }), d && d.get && e.set("name", d.get(s)); let g = e.get("name"); g && m.set("text", g) } const p = this.makeValueLabel(); if (p && (t.children.push(p), p._setDataItem(e), e.set("valueLabel", p)), d && d.show && (d.on("visible", g => { t.set("disabled", !g) }), d.get("visible") || t.set("disabled", !0), u != "none")) { let g = t; u == "marker" && (g = f), this._addClickEvents(g, d, e) } this.children.values.sort((g, y) => { const b = g.dataItem.dataContext, v = y.dataItem.dataContext; if (b && v) { const k = this.data.indexOf(b), j = this.data.indexOf(v); if (k > j) return 1; if (k < j) return -1 } return 0 }), d && d.updateLegendValue && d.updateLegendValue() } } _addClickEvents(e, t, s) { e.set("cursorOverStyle", "pointer"), e.events.on("pointerover", () => { const r = t.component; r && r.hoverDataItem && r.hoverDataItem(t) }), e.events.on("pointerout", () => { const r = t.component; r && r.hoverDataItem && r.unhoverDataItem(t) }), e.events.on("click", () => { const r = s.get("label").text._getText(); t.show && t.isHidden && (t.isHidden() || t.get("visible") === !1) ? (t.show(), e.set("disabled", !1), this._root.readerAlert(this._t("%1 shown", this._root.locale, r))) : t.hide && (t.hide(), e.set("disabled", !0), this._root.readerAlert(this._t("%1 hidden", this._root.locale, r))) }) } disposeDataItem(e) { super.disposeDataItem(e); const t = e.dataContext; t && t.get && t.get("legendDataItem") == e && t.set("legendDataItem", void 0); let s = e.get("itemContainer"); s && (this.itemContainers.removeValue(s), s.dispose()); let r = e.get("marker"); r && (this.markers.removeValue(r), r.dispose()); let o = e.get("markerRectangle"); o && (this.markerRectangles.removeValue(o), o.dispose()); let u = e.get("label"); u && (this.labels.removeValue(u), u.dispose()); let d = e.get("valueLabel"); d && (this.valueLabels.removeValue(d), d.dispose()) } } Object.defineProperty(Ha, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Legend" }); Object.defineProperty(Ha, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: na.classNames.concat([Ha.className]) }); function xy(l, e) { for (let t = 0, s = e.length; t < s; t++) { const r = e[t]; if (r.length > 0) { let o = r[0]; if (o.length > 0) { let u = o[0]; l.moveTo(u.x, u.y); for (let d = 0, f = r.length; d < f; d++)fC(l, r[d]) } } } } function fC(l, e) { for (let t = 0, s = e.length; t < s; t++) { const r = e[t]; l.lineTo(r.x, r.y) } } class Jl extends Qe { _beforeChanged() { super._beforeChanged(), (this.isDirty("points") || this.isDirty("segments") || this._sizeDirty || this.isPrivateDirty("width") || this.isPrivateDirty("height")) && (this._clear = !0) } _changed() { if (super._changed(), this._clear) { const e = this.get("points"), t = this.get("segments"); if (e && e.length > 0) { let s = e[0]; this._display.moveTo(s.x, s.y), xy(this._display, [[e]]) } else if (t) xy(this._display, t); else if (!this.get("draw")) { let s = this.width(), r = this.height(); this._display.moveTo(0, 0), this._display.lineTo(s, r) } } } } Object.defineProperty(Jl, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Line" }); Object.defineProperty(Jl, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Qe.classNames.concat([Jl.className]) }); class du extends vn { constructor() { super(...arguments), Object.defineProperty(this, "_display", { enumerable: !0, configurable: !0, writable: !0, value: this._root._renderer.makeRadialText("", this.textStyle) }) } _afterNew() { super._afterNew() } _beforeChanged() { super._beforeChanged(), this._display.clear(), this.isDirty("textType") && (this._display.textType = this.get("textType"), this.markDirtyBounds()), this.isDirty("radius") && (this._display.radius = this.get("radius"), this.markDirtyBounds()), this.isDirty("startAngle") && (this._display.startAngle = (this.get("startAngle", 0) + 90) * Cr, this.markDirtyBounds()), this.isDirty("inside") && (this._display.inside = this.get("inside"), this.markDirtyBounds()), this.isDirty("orientation") && (this._display.orientation = this.get("orientation"), this.markDirtyBounds()), this.isDirty("kerning") && (this._display.kerning = this.get("kerning"), this.markDirtyBounds()) } } Object.defineProperty(du, "className", { enumerable: !0, configurable: !0, writable: !0, value: "RadialText" }); Object.defineProperty(du, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: vn.classNames.concat([du.className]) }); class hu extends Pi { constructor() { super(...arguments), Object.defineProperty(this, "_flipped", { enumerable: !0, configurable: !0, writable: !0, value: !1 }) } _afterNew() { this._textKeys.push("textType", "kerning"), super._afterNew() } _makeText() { this._text = this.children.push(du.new(this._root, {})) } baseRadius() { const e = this.getPrivate("radius", 0), t = this.getPrivate("innerRadius", 0), s = this.get("baseRadius", 0); return t + mt(s, e - t) } radius() { const e = this.get("inside", !1); return this.baseRadius() + this.get("radius", 0) * (e ? -1 : 1) } _updateChildren() { if (super._updateChildren(), this.isDirty("baseRadius") || this.isPrivateDirty("radius") || this.isPrivateDirty("innerRadius") || this.isDirty("labelAngle") || this.isDirty("radius") || this.isDirty("inside") || this.isDirty("orientation") || this.isDirty("textType")) { const e = this.get("textType", "adjusted"), t = this.get("inside", !1), s = this.get("orientation"); let r = Au(this.get("labelAngle", 0)); this._text.set("startAngle", this.get("labelAngle", 0)), this._text.set("inside", t); const o = zt(r), u = Wt(r); let d = this.baseRadius(), f = this.radius(); if (this._display.angle = 0, e == "circular") this.setAll({ paddingTop: 0, paddingBottom: 0, paddingLeft: 0, paddingRight: 0 }), this.setRaw("x", void 0), this.setRaw("y", void 0), this._text.set("orientation", s), this._text.set("radius", f); else { d == 0 && (r = 0, f = 0); let m = f * u, p = f * o; e == "radial" ? (this.setRaw("x", m), this.setRaw("y", p), r < 90 || r > 270 || s != "auto" ? (this._display.angle = r, this._flipped = !1) : (this._display.angle = r + 180, this._flipped = !0), this._dirty.rotation = !1) : e == "adjusted" ? (this.setRaw("centerX", Oe), this.setRaw("centerY", Oe), this.setRaw("x", m), this.setRaw("y", p)) : e == "regular" && (this.setRaw("x", m), this.setRaw("y", p)) } this.markDirtyPosition(), this.markDirtyBounds() } } _updatePosition() { const e = this.get("textType", "regular"), t = this.get("inside", !1); let s = 0, r = 0, o = this.get("labelAngle", 0), u = this.localBounds(), d = u.right - u.left, f = u.bottom - u.top; if (e == "radial") { if (this._flipped) { let m = this.get("centerX"); m instanceof Ie && (d = d * (1 - m.value * 2)), s = d * Wt(o), r = d * zt(o) } } else !t && e == "adjusted" && (s = d / 2 * Wt(o), r = f / 2 * zt(o)); this.setRaw("dx", s), this.setRaw("dy", r), super._updatePosition() } get text() { return this._text } } Object.defineProperty(hu, "className", { enumerable: !0, configurable: !0, writable: !0, value: "RadialLabel" }); Object.defineProperty(hu, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Pi.classNames.concat([hu.className]) }); function pt(l) { return function () { return l } } const yy = Math.abs, fi = Math.atan2, ln = Math.cos, mC = Math.max, _f = Math.min, Ds = Math.sin, _r = Math.sqrt, Ci = 1e-12, eo = Math.PI, fu = eo / 2, pC = 2 * eo; function gC(l) { return l > 1 ? 0 : l < -1 ? eo : Math.acos(l) } function vy(l) { return l >= 1 ? fu : l <= -1 ? -fu : Math.asin(l) } const Gf = Math.PI, $f = 2 * Gf, hn = 1e-6, bC = $f - hn; function g0(l) { this._ += l[0]; for (let e = 1, t = l.length; e < t; ++e)this._ += arguments[e] + l[e] } function xC(l) { let e = Math.floor(l); if (!(e >= 0)) throw new Error(`invalid digits: ${l}`); if (e > 15) return g0; const t = 10 ** e; return function (s) { this._ += s[0]; for (let r = 1, o = s.length; r < o; ++r)this._ += Math.round(arguments[r] * t) / t + s[r] } } class yC { constructor(e) { this._x0 = this._y0 = this._x1 = this._y1 = null, this._ = "", this._append = e == null ? g0 : xC(e) } moveTo(e, t) { this._append`M${this._x0 = this._x1 = +e},${this._y0 = this._y1 = +t}` } closePath() { this._x1 !== null && (this._x1 = this._x0, this._y1 = this._y0, this._append`Z`) } lineTo(e, t) { this._append`L${this._x1 = +e},${this._y1 = +t}` } quadraticCurveTo(e, t, s, r) { this._append`Q${+e},${+t},${this._x1 = +s},${this._y1 = +r}` } bezierCurveTo(e, t, s, r, o, u) { this._append`C${+e},${+t},${+s},${+r},${this._x1 = +o},${this._y1 = +u}` } arcTo(e, t, s, r, o) { if (e = +e, t = +t, s = +s, r = +r, o = +o, o < 0) throw new Error(`negative radius: ${o}`); let u = this._x1, d = this._y1, f = s - e, m = r - t, p = u - e, g = d - t, y = p * p + g * g; if (this._x1 === null) this._append`M${this._x1 = e},${this._y1 = t}`; else if (y > hn) if (!(Math.abs(g * f - m * p) > hn) || !o) this._append`L${this._x1 = e},${this._y1 = t}`; else { let b = s - u, v = r - d, k = f * f + m * m, j = b * b + v * v, S = Math.sqrt(k), w = Math.sqrt(y), N = o * Math.tan((Gf - Math.acos((k + y - j) / (2 * S * w))) / 2), T = N / w, R = N / S; Math.abs(T - 1) > hn && this._append`L${e + T * p},${t + T * g}`, this._append`A${o},${o},0,0,${+(g * b > p * v)},${this._x1 = e + R * f},${this._y1 = t + R * m}` } } arc(e, t, s, r, o, u) { if (e = +e, t = +t, s = +s, u = !!u, s < 0) throw new Error(`negative radius: ${s}`); let d = s * Math.cos(r), f = s * Math.sin(r), m = e + d, p = t + f, g = 1 ^ u, y = u ? r - o : o - r; this._x1 === null ? this._append`M${m},${p}` : (Math.abs(this._x1 - m) > hn || Math.abs(this._y1 - p) > hn) && this._append`L${m},${p}`, s && (y < 0 && (y = y % $f + $f), y > bC ? this._append`A${s},${s},0,1,${g},${e - d},${t - f}A${s},${s},0,1,${g},${this._x1 = m},${this._y1 = p}` : y > hn && this._append`A${s},${s},0,${+(y >= Gf)},${g},${this._x1 = e + s * Math.cos(o)},${this._y1 = t + s * Math.sin(o)}`) } rect(e, t, s, r) { this._append`M${this._x0 = this._x1 = +e},${this._y0 = this._y1 = +t}h${s = +s}v${+r}h${-s}Z` } toString() { return this._ } } function ym(l) { let e = 3; return l.digits = function (t) { if (!arguments.length) return e; if (t == null) e = null; else { const s = Math.floor(t); if (!(s >= 0)) throw new RangeError(`invalid digits: ${t}`); e = s } return l }, () => new yC(e) } function vC(l) { return l.innerRadius } function _C(l) { return l.outerRadius } function jC(l) { return l.startAngle } function wC(l) { return l.endAngle } function kC(l) { return l && l.padAngle } function SC(l, e, t, s, r, o, u, d) { var f = t - l, m = s - e, p = u - r, g = d - o, y = g * f - p * m; if (!(y * y < Ci)) return y = (p * (e - o) - g * (l - r)) / y, [l + y * f, e + y * m] } function Uc(l, e, t, s, r, o, u) { var d = l - t, f = e - s, m = (u ? o : -o) / _r(d * d + f * f), p = m * f, g = -m * d, y = l + p, b = e + g, v = t + p, k = s + g, j = (y + v) / 2, S = (b + k) / 2, w = v - y, N = k - b, T = w * w + N * N, R = r - o, P = y * k - v * b, O = (N < 0 ? -1 : 1) * _r(mC(0, R * R * T - P * P)), z = (P * N - w * O) / T, F = (-P * w - N * O) / T, B = (P * N + w * O) / T, A = (-P * w + N * O) / T, L = z - j, M = F - S, X = B - j, U = A - S; return L * L + M * M > X * X + U * U && (z = B, F = A), { cx: z, cy: F, x01: -p, y01: -g, x11: z * (r / R - 1), y11: F * (r / R - 1) } } function NC() { var l = vC, e = _C, t = pt(0), s = null, r = jC, o = wC, u = kC, d = null, f = ym(m); function m() { var p, g, y = +l.apply(this, arguments), b = +e.apply(this, arguments), v = r.apply(this, arguments) - fu, k = o.apply(this, arguments) - fu, j = yy(k - v), S = k > v; if (d || (d = p = f()), b < y && (g = b, b = y, y = g), !(b > Ci)) d.moveTo(0, 0); else if (j > pC - Ci) d.moveTo(b * ln(v), b * Ds(v)), d.arc(0, 0, b, v, k, !S), y > Ci && (d.moveTo(y * ln(k), y * Ds(k)), d.arc(0, 0, y, k, v, S)); else { var w = v, N = k, T = v, R = k, P = j, O = j, z = u.apply(this, arguments) / 2, F = z > Ci && (s ? +s.apply(this, arguments) : _r(y * y + b * b)), B = _f(yy(b - y) / 2, +t.apply(this, arguments)), A = B, L = B, M, X; if (F > Ci) { var U = vy(F / y * Ds(z)), I = vy(F / b * Ds(z)); (P -= U * 2) > Ci ? (U *= S ? 1 : -1, T += U, R -= U) : (P = 0, T = R = (v + k) / 2), (O -= I * 2) > Ci ? (I *= S ? 1 : -1, w += I, N -= I) : (O = 0, w = N = (v + k) / 2) } var H = b * ln(w), Y = b * Ds(w), ee = y * ln(R), fe = y * Ds(R); if (B > Ci) { var q = b * ln(N), Q = b * Ds(N), ce = y * ln(T), W = y * Ds(T), ae; if (j < eo) if (ae = SC(H, Y, ce, W, q, Q, ee, fe)) { var J = H - ae[0], G = Y - ae[1], ge = q - ae[0], de = Q - ae[1], Se = 1 / Ds(gC((J * ge + G * de) / (_r(J * J + G * G) * _r(ge * ge + de * de))) / 2), Ee = _r(ae[0] * ae[0] + ae[1] * ae[1]); A = _f(B, (y - Ee) / (Se - 1)), L = _f(B, (b - Ee) / (Se + 1)) } else A = L = 0 } O > Ci ? L > Ci ? (M = Uc(ce, W, H, Y, b, L, S), X = Uc(q, Q, ee, fe, b, L, S), d.moveTo(M.cx + M.x01, M.cy + M.y01), L < B ? d.arc(M.cx, M.cy, L, fi(M.y01, M.x01), fi(X.y01, X.x01), !S) : (d.arc(M.cx, M.cy, L, fi(M.y01, M.x01), fi(M.y11, M.x11), !S), d.arc(0, 0, b, fi(M.cy + M.y11, M.cx + M.x11), fi(X.cy + X.y11, X.cx + X.x11), !S), d.arc(X.cx, X.cy, L, fi(X.y11, X.x11), fi(X.y01, X.x01), !S))) : (d.moveTo(H, Y), d.arc(0, 0, b, w, N, !S)) : d.moveTo(H, Y), !(y > Ci) || !(P > Ci) ? d.lineTo(ee, fe) : A > Ci ? (M = Uc(ee, fe, q, Q, y, -A, S), X = Uc(H, Y, ce, W, y, -A, S), d.lineTo(M.cx + M.x01, M.cy + M.y01), A < B ? d.arc(M.cx, M.cy, A, fi(M.y01, M.x01), fi(X.y01, X.x01), !S) : (d.arc(M.cx, M.cy, A, fi(M.y01, M.x01), fi(M.y11, M.x11), !S), d.arc(0, 0, y, fi(M.cy + M.y11, M.cx + M.x11), fi(X.cy + X.y11, X.cx + X.x11), S), d.arc(X.cx, X.cy, A, fi(X.y11, X.x11), fi(X.y01, X.x01), !S))) : d.arc(0, 0, y, R, T, S) } if (d.closePath(), p) return d = null, p + "" || null } return m.centroid = function () { var p = (+l.apply(this, arguments) + +e.apply(this, arguments)) / 2, g = (+r.apply(this, arguments) + +o.apply(this, arguments)) / 2 - eo / 2; return [ln(g) * p, Ds(g) * p] }, m.innerRadius = function (p) { return arguments.length ? (l = typeof p == "function" ? p : pt(+p), m) : l }, m.outerRadius = function (p) { return arguments.length ? (e = typeof p == "function" ? p : pt(+p), m) : e }, m.cornerRadius = function (p) { return arguments.length ? (t = typeof p == "function" ? p : pt(+p), m) : t }, m.padRadius = function (p) { return arguments.length ? (s = p == null ? null : typeof p == "function" ? p : pt(+p), m) : s }, m.startAngle = function (p) { return arguments.length ? (r = typeof p == "function" ? p : pt(+p), m) : r }, m.endAngle = function (p) { return arguments.length ? (o = typeof p == "function" ? p : pt(+p), m) : o }, m.padAngle = function (p) { return arguments.length ? (u = typeof p == "function" ? p : pt(+p), m) : u }, m.context = function (p) { return arguments.length ? (d = p ?? null, m) : d }, m } function b0(l) { return typeof l == "object" && "length" in l ? l : Array.from(l) } function x0(l) { this._context = l } x0.prototype = { areaStart: function () { this._line = 0 }, areaEnd: function () { this._line = NaN }, lineStart: function () { this._point = 0 }, lineEnd: function () { (this._line || this._line !== 0 && this._point === 1) && this._context.closePath(), this._line = 1 - this._line }, point: function (l, e) { switch (l = +l, e = +e, this._point) { case 0: this._point = 1, this._line ? this._context.lineTo(l, e) : this._context.moveTo(l, e); break; case 1: this._point = 2; default: this._context.lineTo(l, e); break } } }; function y0(l) { return new x0(l) } function v0(l) { return l[0] } function _0(l) { return l[1] } function j0(l, e) { var t = pt(!0), s = null, r = y0, o = null, u = ym(d); l = typeof l == "function" ? l : l === void 0 ? v0 : pt(l), e = typeof e == "function" ? e : e === void 0 ? _0 : pt(e); function d(f) { var m, p = (f = b0(f)).length, g, y = !1, b; for (s == null && (o = r(b = u())), m = 0; m <= p; ++m)!(m < p && t(g = f[m], m, f)) === y && ((y = !y) ? o.lineStart() : o.lineEnd()), y && o.point(+l(g, m, f), +e(g, m, f)); if (b) return o = null, b + "" || null } return d.x = function (f) { return arguments.length ? (l = typeof f == "function" ? f : pt(+f), d) : l }, d.y = function (f) { return arguments.length ? (e = typeof f == "function" ? f : pt(+f), d) : e }, d.defined = function (f) { return arguments.length ? (t = typeof f == "function" ? f : pt(!!f), d) : t }, d.curve = function (f) { return arguments.length ? (r = f, s != null && (o = r(s)), d) : r }, d.context = function (f) { return arguments.length ? (f == null ? s = o = null : o = r(s = f), d) : s }, d } function CC(l, e, t) { var s = null, r = pt(!0), o = null, u = y0, d = null, f = ym(m); l = typeof l == "function" ? l : l === void 0 ? v0 : pt(+l), e = typeof e == "function" ? e : pt(e === void 0 ? 0 : +e), t = typeof t == "function" ? t : t === void 0 ? _0 : pt(+t); function m(g) { var y, b, v, k = (g = b0(g)).length, j, S = !1, w, N = new Array(k), T = new Array(k); for (o == null && (d = u(w = f())), y = 0; y <= k; ++y) { if (!(y < k && r(j = g[y], y, g)) === S) if (S = !S) b = y, d.areaStart(), d.lineStart(); else { for (d.lineEnd(), d.lineStart(), v = y - 1; v >= b; --v)d.point(N[v], T[v]); d.lineEnd(), d.areaEnd() } S && (N[y] = +l(j, y, g), T[y] = +e(j, y, g), d.point(s ? +s(j, y, g) : N[y], t ? +t(j, y, g) : T[y])) } if (w) return d = null, w + "" || null } function p() { return j0().defined(r).curve(u).context(o) } return m.x = function (g) { return arguments.length ? (l = typeof g == "function" ? g : pt(+g), s = null, m) : l }, m.x0 = function (g) { return arguments.length ? (l = typeof g == "function" ? g : pt(+g), m) : l }, m.x1 = function (g) { return arguments.length ? (s = g == null ? null : typeof g == "function" ? g : pt(+g), m) : s }, m.y = function (g) { return arguments.length ? (e = typeof g == "function" ? g : pt(+g), t = null, m) : e }, m.y0 = function (g) { return arguments.length ? (e = typeof g == "function" ? g : pt(+g), m) : e }, m.y1 = function (g) { return arguments.length ? (t = g == null ? null : typeof g == "function" ? g : pt(+g), m) : t }, m.lineX0 = m.lineY0 = function () { return p().x(l).y(e) }, m.lineY1 = function () { return p().x(l).y(t) }, m.lineX1 = function () { return p().x(s).y(e) }, m.defined = function (g) { return arguments.length ? (r = typeof g == "function" ? g : pt(!!g), m) : r }, m.curve = function (g) { return arguments.length ? (u = g, o != null && (d = u(o)), m) : u }, m.context = function (g) { return arguments.length ? (g == null ? o = d = null : d = u(o = g), m) : o }, m } class mu extends Qe { constructor() { super(...arguments), Object.defineProperty(this, "ix", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "iy", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_generator", { enumerable: !0, configurable: !0, writable: !0, value: NC() }) } _getTooltipPoint() { let e = this.get("tooltipX"), t = this.get("tooltipY"), s = 0, r = 0; le(e) && (s = e), le(t) && (r = t); let o = this.get("radius", 0), u = this.get("innerRadius", 0), d = this.get("dRadius", 0), f = this.get("dInnerRadius", 0); return o += d, u += f, u < 0 && (u = o + u), e instanceof Ie && (s = this.ix * (u + (o - u) * e.value)), t instanceof Ie && (r = this.iy * (u + (o - u) * t.value)), this.get("arc") >= 360 && u == 0 && (s = 0, r = 0), { x: s, y: r } } _beforeChanged() { super._beforeChanged(), (this.isDirty("radius") || this.isDirty("arc") || this.isDirty("innerRadius") || this.isDirty("startAngle") || this.isDirty("dRadius") || this.isDirty("dInnerRadius") || this.isDirty("cornerRadius") || this.isDirty("shiftRadius")) && (this._clear = !0) } _changed() { if (super._changed(), this._clear) { let e = this.get("startAngle", 0), t = this.get("arc", 0); const s = this._generator; t < 0 && (e = e + t, t = t * -1), t > .1 && s.cornerRadius(this.get("cornerRadius", 0)), s.context(this._display); let r = this.get("radius", 0), o = this.get("innerRadius", 0), u = this.get("dRadius", 0), d = this.get("dInnerRadius", 0); r += u, o += d, o < 0 && (o = r + o), s({ innerRadius: o, outerRadius: r, startAngle: (e + 90) * Cr, endAngle: (e + t + 90) * Cr }); let f = e + t / 2; this.ix = Wt(f), this.iy = zt(f); const m = this.get("shiftRadius", 0); this.setRaw("dx", this.ix * m), this.setRaw("dy", this.iy * m), this.markDirtyPosition() } } } Object.defineProperty(mu, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Slice" }); Object.defineProperty(mu, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Qe.classNames.concat([mu.className]) }); class to extends ze { constructor() { super(...arguments), Object.defineProperty(this, "chartContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.children.push(ze.new(this._root, { width: Te, height: Te, interactiveChildren: !1 })) }), Object.defineProperty(this, "bulletsContainer", { enumerable: !0, configurable: !0, writable: !0, value: ze.new(this._root, { interactiveChildren: !1, isMeasured: !1, position: "absolute", width: Te, height: Te }) }) } } Object.defineProperty(to, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Chart" }); Object.defineProperty(to, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: ze.classNames.concat([to.className]) }); class jn extends to { constructor() { super(...arguments), Object.defineProperty(this, "seriesContainer", { enumerable: !0, configurable: !0, writable: !0, value: ze.new(this._root, { width: Te, height: Te, isMeasured: !1 }) }), Object.defineProperty(this, "series", { enumerable: !0, configurable: !0, writable: !0, value: new ru }) } _afterNew() { super._afterNew(), this._disposers.push(this.series); const e = this.seriesContainer.children; this._disposers.push(this.series.events.onAll(t => { if (t.type === "clear") { te(t.oldValues, o => { this._removeSeries(o) }); const s = this.get("colors"); s && s.reset(); const r = this.get("patterns"); r && r.reset() } else if (t.type === "push") e.moveValue(t.newValue), this._processSeries(t.newValue); else if (t.type === "setIndex") e.setIndex(t.index, t.newValue), this._processSeries(t.newValue); else if (t.type === "insertIndex") e.insertIndex(t.index, t.newValue), this._processSeries(t.newValue); else if (t.type === "removeIndex") this._removeSeries(t.oldValue); else if (t.type === "moveIndex") e.moveValue(t.value, t.newIndex), this._processSeries(t.value); else if (t.type === "swap") { const s = t.a, r = t.b, o = this.series.indexOf(s), u = this.series.indexOf(r); e.moveValue(s, u), e.moveValue(r, o), this.series.each(d => { this._processSeries(d), d.markDirtyValues() }) } else throw new Error("Unknown IListEvent type") })) } _processSeries(e) { e.chart = this, e._placeBulletsContainer(this) } _removeSeries(e) { e._handleRemoved(), e.isDisposed() || (this.seriesContainer.children.removeValue(e), e._removeBulletsContainer()) } } Object.defineProperty(jn, "className", { enumerable: !0, configurable: !0, writable: !0, value: "SerialChart" }); Object.defineProperty(jn, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: to.classNames.concat([jn.className]) }); class wn extends Jl { } Object.defineProperty(wn, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Tick" }); Object.defineProperty(wn, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Jl.classNames.concat([wn.className]) }); class Mr extends Ut { _afterNew() { super._afterNewApplyThemes(), this._dirty.colors = !1 } _beforeChanged() { this.isDirty("colors") && this.reset() } generateColors() { this.setPrivate("currentPass", this.getPrivate("currentPass", 0) + 1); const e = this.getPrivate("currentPass"), t = this.get("colors", [this.get("baseColor", ke.fromHex(16711680))]); this.getPrivate("numColors") || this.setPrivate("numColors", t.length); const s = this.getPrivate("numColors"), r = 0, o = this.get("passOptions"), u = this.get("reuse"); for (let d = r; d < s; d++)if (u) t.push(t[d]); else { const f = t[d].toHSL(); let m = f.h + (o.hue || 0) * e; for (; m > 1;)m -= 1; let p = f.s + (o.saturation || 0) * e; p > 1 && (p = 1), p < 0 && (p = 0); let g = f.l + (o.lightness || 0) * e; for (; g > 1;)g -= 1; t.push(ke.fromHSL(m, p, g)) } } getIndex(e) { const t = this.get("colors", []), s = this.get("saturation"); return e >= t.length ? (this.generateColors(), this.getIndex(e)) : s != null ? ke.saturate(t[e], s) : t[e] } next() { let e = this.getPrivate("currentStep", this.get("startIndex", 0)); return this.setPrivate("currentStep", e + this.get("step", 1)), this.getIndex(e) } reset() { this.setPrivate("currentStep", this.get("startIndex", 0)), this.setPrivate("currentPass", 0) } } Object.defineProperty(Mr, "className", { enumerable: !0, configurable: !0, writable: !0, value: "ColorSet" }); Object.defineProperty(Mr, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Ut.classNames.concat([Mr.className]) }); class TC extends vo { setupDefaultRules() { super.setupDefaultRules(); const e = this._root.interfaceColors, t = this._root.language, s = this.rule.bind(this); s("XYChart").setAll({ colors: Mr.new(this._root, {}), paddingLeft: 20, paddingRight: 20, paddingTop: 16, paddingBottom: 16, panX: !1, panY: !1, wheelStep: .25, arrangeTooltips: !0, pinchZoomX: !1, pinchZoomY: !1 }), s("XYSeries").setAll({ legendLabelText: "{name}" }), s("Rectangle", ["plotbackground", "xy", "background"]).setAll({ fill: ke.fromHex(0), fillOpacity: 0 }), s("XYChart", ["scrollbar", "chart"]).setAll({ paddingBottom: 0, paddingLeft: 0, paddingTop: 0, paddingRight: 0, colors: Mr.new(this._root, { saturation: 0 }) }); { const f = s("Graphics", ["scrollbar", "overlay"]); f.setAll({ fillOpacity: .5 }), De(f, "fill", e, "background") } s("RoundedRectangle", ["xy", "scrollbar", "thumb"]).setAll({ cornerRadiusTR: 0, cornerRadiusTL: 0, cornerRadiusBR: 0, cornerRadiusBL: 0, fillOpacity: 0, focusable: !0 }), s("RoundedRectangle", ["xy", "scrollbar", "thumb"]).states.create("hover", { fillOpacity: .4 }), s("RoundedRectangle", ["xy", "scrollbar", "chart", "background"]).setAll({ cornerRadiusTL: 0, cornerRadiusBL: 0, cornerRadiusTR: 0, cornerRadiusBR: 0 }), s("RoundedRectangle", ["xy", "scrollbar", "chart", "background", "resize", "button"]).setAll({ cornerRadiusBL: 40, cornerRadiusBR: 40, cornerRadiusTL: 40, cornerRadiusTR: 40 }), s("AxisRendererX", ["xy", "chart", "scrollbar"]).setAll({ strokeOpacity: 0, inside: !0 }), s("AxisRendererY", ["xy", "chart", "scrollbar"]).setAll({ strokeOpacity: 0, inside: !0, minGridDistance: 5 }), s("AxisLabel", ["xy", "scrollbar", "x"]).setAll({ opacity: .5, centerY: Te, minPosition: .01, maxPosition: .99, fontSize: "0.8em" }), s("AxisLabel", ["category"]).setAll({ text: "{category}", populateText: !0 }), s("AxisLabel", ["x"]).setAll({ centerY: 0 }), s("AxisLabel", ["x", "inside"]).setAll({ centerY: Te }), s("AxisLabel", ["x", "inside", "opposite"]).setAll({ centerY: 0 }), s("AxisLabel", ["x", "opposite"]).setAll({ centerY: Te }), s("AxisLabel", ["y"]).setAll({ centerX: Te }), s("AxisLabel", ["y", "inside"]).setAll({ centerX: 0 }), s("AxisLabel", ["y", "inside", "opposite"]).setAll({ centerX: Te }), s("AxisLabel", ["y", "opposite"]).setAll({ centerX: 0 }), s("AxisLabel", ["minor"]).setAll({ fontSize: "0.6em" }), s("AxisLabel", ["xy", "scrollbar", "y"]).setAll({ visible: !1 }), s("Grid", ["xy", "scrollbar", "y"]).setAll({ visible: !1 }), s("Grid", ["xy", "scrollbar", "x"]).setAll({ opacity: .5 }), s("XYCursor").setAll({ behavior: "none", layer: 30, exportable: !1, snapToSeriesBy: "xy", moveThreshold: 1 }); { const f = s("Grid", ["cursor", "x"]); f.setAll({ forceInactive: !0, strokeOpacity: .8, strokeDasharray: [2, 2], role: "slider", ariaLabel: t.translate("Use left and right arrows to move selection") }), De(f, "stroke", e, "alternativeBackground") } { const f = s("Grid", ["cursor", "y"]); f.setAll({ forceInactive: !0, strokeOpacity: .8, strokeDasharray: [2, 2], role: "slider", ariaLabel: t.translate("Use up and down arrows to move selection") }), De(f, "stroke", e, "alternativeBackground") } { const f = s("Graphics", ["cursor", "selection"]); f.setAll({ fillOpacity: .15 }), De(f, "fill", e, "alternativeBackground") } s("Axis").setAll({ zoomOut: !0, start: 0, end: 1, minZoomCount: 1, maxZoomCount: 1 / 0, maxZoomFactor: 1e3, maxDeviation: .1, snapTooltip: !0, tooltipLocation: .5, panX: !0, panY: !0, zoomX: !0, zoomY: !0, fixAxisSize: !0 }), s("AxisLabel").setAll({ location: .5, multiLocation: 0, centerX: Oe, centerY: Oe, paddingTop: 3, paddingBottom: 3, paddingLeft: 5, paddingRight: 5 }), s("Container", ["axis", "header"]).setAll({ layer: 30 }), s("Rectangle", ["axis", "header", "background"]).setAll({ crisp: !0 }); { const f = s("AxisRenderer"); f.setAll({ crisp: !0, strokeOpacity: 0 }), De(f, "stroke", e, "grid") } s("AxisRendererX").setAll({ minGridDistance: 120, opposite: !1, inversed: !1, cellStartLocation: 0, cellEndLocation: 1, width: Te }), s("AxisRendererY").setAll({ minGridDistance: 40, opposite: !1, inversed: !1, cellStartLocation: 0, cellEndLocation: 1, height: Te }); { const f = s("Rectangle", ["axis", "thumb", "zoomgrip"]); f.setAll({ fillOpacity: 0 }), De(f, "fill", e, "alternativeBackground"), f.states.create("hover", { fillOpacity: .1 }) } s("Rectangle", ["axis", "thumb", "x", "zoomgrip"]).setAll({ cursorOverStyle: "ew-resize" }), s("Rectangle", ["axis", "thumb", "y", "zoomgrip"]).setAll({ cursorOverStyle: "ns-resize" }); { const f = s("Grid"); f.setAll({ location: 0, strokeOpacity: .15, crisp: !0 }), De(f, "stroke", e, "grid") } { const f = s("Grid", ["minor"]); f.setAll({ location: 0, strokeOpacity: .07, crisp: !0 }), De(f, "stroke", e, "grid") } s("Grid", ["base"]).setAll({ strokeOpacity: .3 }); { const f = s("Graphics", ["axis", "fill"]); f.setAll({ visible: !1, isMeasured: !1, position: "absolute", fillOpacity: .05 }), De(f, "fill", e, "alternativeBackground") } s("Graphics", ["axis", "fill", "range"]).setAll({ isMeasured: !0 }), s("Graphics", ["series", "fill", "range"]).setAll({ visible: !1, isMeasured: !0 }), s("Grid", ["series", "range"]).setAll({ visible: !1 }), s("AxisTick", ["series", "range"]).setAll({ visible: !1 }), s("AxisLabel", ["series", "range"]).setAll({ visible: !1 }); { const f = s("AxisTick"); f.setAll({ location: .5, multiLocation: 0, strokeOpacity: 1, isMeasured: !1, position: "absolute", visible: !1 }), De(f, "stroke", e, "grid") } s("CategoryAxis").setAll({ startLocation: 0, endLocation: 1, fillRule: (f, m) => { const p = f.get("axisFill"); p && (!le(m) || m % 2 == 0 ? p.setPrivate("visible", !0) : p.setPrivate("visible", !1)) } }); const r = [{ timeUnit: "millisecond", count: 1 }, { timeUnit: "millisecond", count: 5 }, { timeUnit: "millisecond", count: 10 }, { timeUnit: "millisecond", count: 50 }, { timeUnit: "millisecond", count: 100 }, { timeUnit: "millisecond", count: 500 }, { timeUnit: "second", count: 1 }, { timeUnit: "second", count: 5 }, { timeUnit: "second", count: 10 }, { timeUnit: "second", count: 30 }, { timeUnit: "minute", count: 1 }, { timeUnit: "minute", count: 5 }, { timeUnit: "minute", count: 10 }, { timeUnit: "minute", count: 15 }, { timeUnit: "minute", count: 30 }, { timeUnit: "hour", count: 1 }, { timeUnit: "hour", count: 3 }, { timeUnit: "hour", count: 6 }, { timeUnit: "hour", count: 12 }, { timeUnit: "day", count: 1 }, { timeUnit: "day", count: 2 }, { timeUnit: "day", count: 3 }, { timeUnit: "day", count: 4 }, { timeUnit: "day", count: 5 }, { timeUnit: "week", count: 1 }, { timeUnit: "month", count: 1 }, { timeUnit: "month", count: 2 }, { timeUnit: "month", count: 3 }, { timeUnit: "month", count: 6 }, { timeUnit: "year", count: 1 }, { timeUnit: "year", count: 2 }, { timeUnit: "year", count: 5 }, { timeUnit: "year", count: 10 }, { timeUnit: "year", count: 50 }, { timeUnit: "year", count: 100 }, { timeUnit: "year", count: 200 }, { timeUnit: "year", count: 500 }, { timeUnit: "year", count: 1e3 }, { timeUnit: "year", count: 2e3 }, { timeUnit: "year", count: 5e3 }, { timeUnit: "year", count: 1e4 }, { timeUnit: "year", count: 1e5 }], o = { millisecond: t.translate("_date_millisecond"), second: t.translate("_date_second"), minute: t.translate("_date_minute"), hour: t.translate("_date_hour"), day: t.translate("_date_day"), week: t.translate("_date_day"), month: t.translate("_date_month"), year: t.translate("_date_year") }, u = { millisecond: t.translate("_date_millisecond"), second: t.translate("_date_second"), minute: t.translate("_date_minute"), hour: t.translate("_date_day"), day: t.translate("_date_day"), week: t.translate("_date_day"), month: t.translate("_date_month") + " " + t.translate("_date_year"), year: t.translate("_date_year") }, d = { millisecond: t.translate("_date_millisecond_full"), second: t.translate("_date_second_full"), minute: t.translate("_date_minute_full"), hour: t.translate("_date_hour_full"), day: t.translate("_date_day_full"), week: t.translate("_date_week_full"), month: t.translate("_date_month_full"), year: t.translate("_date_year") }; s("CategoryDateAxis").setAll({ markUnitChange: !0, gridIntervals: Hf(r), dateFormats: zl(o), periodChangeDateFormats: zl(u) }), s("DateAxis").setAll({ maxZoomFactor: null, strictMinMax: !0, startLocation: 0, endLocation: 1, markUnitChange: !0, groupData: !1, groupCount: 500, skipFirstMinor: !0, weekLabelLocation: 0, gridIntervals: Hf(r), dateFormats: zl(o), periodChangeDateFormats: zl(u), tooltipDateFormats: d, groupIntervals: [{ timeUnit: "millisecond", count: 1 }, { timeUnit: "millisecond", count: 10 }, { timeUnit: "millisecond", count: 100 }, { timeUnit: "second", count: 1 }, { timeUnit: "second", count: 10 }, { timeUnit: "minute", count: 1 }, { timeUnit: "minute", count: 10 }, { timeUnit: "hour", count: 1 }, { timeUnit: "day", count: 1 }, { timeUnit: "week", count: 1 }, { timeUnit: "month", count: 1 }, { timeUnit: "year", count: 1 }], fillRule: f => { const m = f.get("axisFill"); if (m) { const p = f.component, g = f.get("value"), y = f.get("endValue"), b = p.intervalDuration(), v = p.getPrivate("baseInterval"), k = p.getPrivate("gridInterval", v); let j = p.getPrivate("min", 0); if (j = hC(new Date(j), k.timeUnit, k.count, this._root.locale.firstDayOfWeek, this._root.utc, void 0, this._root.timezone).getTime(), g != null && y != null) { const S = Math.round(Math.round((g - j) / b)) / 2; S == Math.round(S) ? m.setPrivate("visible", !0) : m.setPrivate("visible", !1) } } } }), s("GaplessDateAxis").setAll({ fillRule: f => { const m = f.get("axisFill"); if (m) { const p = f.get("index"); let g = !1; (!le(p) || p % 2 == 0) && (g = !0), m.setPrivate("visible", g) } } }), s("ValueAxis").setAll({ baseValue: 0, logarithmic: !1, strictMinMax: !1, autoZoom: !0, fillRule: f => { const m = f.get("axisFill"); if (m) { const p = f.component, g = f.get("value"), y = p.getPrivate("step"); le(g) && le(y) && (Lt(g / y / 2, 5) == Math.round(g / y / 2) ? m.setPrivate("visible", !1) : m.setPrivate("visible", !0)) } } }), s("DurationAxis").setAll({ baseUnit: "second" }), s("XYSeries").setAll({ maskBullets: !0, stackToNegative: !0, locationX: .5, locationY: .5, snapTooltip: !1, openValueXGrouped: "open", openValueYGrouped: "open", valueXGrouped: "close", valueYGrouped: "close", seriesTooltipTarget: "series" }), s("BaseColumnSeries").setAll({ adjustBulletPosition: !0 }), s("ColumnSeries").setAll({ clustered: !0 }), s("RoundedRectangle", ["series", "column"]).setAll({ position: "absolute", isMeasured: !1, width: Jt(70), height: Jt(70), strokeWidth: 1, strokeOpacity: 1, cornerRadiusBL: 0, cornerRadiusTL: 0, cornerRadiusBR: 0, cornerRadiusTR: 0, fillOpacity: 1, role: "figure" }), s("LineSeries").setAll({ connect: !0, autoGapCount: 1.1, stackToNegative: !1 }), s("Graphics", ["series", "stroke"]).setAll({ position: "absolute", strokeWidth: 1, strokeOpacity: 1, isMeasured: !1 }), s("Graphics", ["series", "fill"]).setAll({ visible: !1, fillOpacity: 0, position: "absolute", strokeWidth: 0, strokeOpacity: 0, isMeasured: !1 }), s("Graphics", ["line", "series", "legend", "marker", "stroke"]).setAll({ draw: (f, m) => { const p = m.parent; if (p) { const g = p.height(), y = p.width(); f.moveTo(0, g / 2), f.lineTo(y, g / 2) } } }); { const f = s("Graphics", ["line", "series", "legend", "marker", "stroke"]).states.create("disabled", {}); De(f, "stroke", e, "disabled") } s("Graphics", ["line", "series", "legend", "marker", "fill"]).setAll({ draw: (f, m) => { const p = m.parent; if (p) { const g = p.height(), y = p.width(); f.moveTo(0, 0), f.lineTo(y, 0), f.lineTo(y, g), f.lineTo(0, g), f.lineTo(0, 0) } } }); { const f = s("Graphics", ["line", "series", "legend", "marker", "fill"]).states.create("disabled", {}); De(f, "stroke", e, "disabled") } s("SmoothedXYLineSeries").setAll({ tension: .5 }), s("SmoothedXLineSeries").setAll({ tension: .5 }), s("SmoothedYLineSeries").setAll({ tension: .5 }), s("Candlestick").setAll({ position: "absolute", isMeasured: !1, width: Jt(50), height: Jt(50), strokeWidth: 1, strokeOpacity: 1, cornerRadiusBL: 0, cornerRadiusTL: 0, cornerRadiusBR: 0, cornerRadiusTR: 0, fillOpacity: 1, role: "figure" }), s("OHLC").setAll({ width: Jt(80), height: Jt(80) }), s("CandlestickSeries").setAll({ lowValueXGrouped: "low", lowValueYGrouped: "low", highValueXGrouped: "high", highValueYGrouped: "high", openValueXGrouped: "open", openValueYGrouped: "open", valueXGrouped: "close", valueYGrouped: "close" }); { const f = s("Rectangle", ["column", "autocolor"]).states.create("riseFromOpen", {}); De(f, "fill", e, "positive"), De(f, "stroke", e, "positive") } { const f = s("Rectangle", ["column", "autocolor"]).states.create("dropFromOpen", {}); De(f, "fill", e, "negative"), De(f, "stroke", e, "negative") } s("Rectangle", ["column", "autocolor", "pro"]).states.create("riseFromOpen", { fillOpacity: 0 }), s("Rectangle", ["column", "autocolor", "pro"]).states.create("dropFromOpen", { fillOpacity: 1 }); { const f = s("Rectangle", ["column", "autocolor", "pro"]).states.create("riseFromPrevious", {}); De(f, "fill", e, "positive"), De(f, "stroke", e, "positive") } { const f = s("Rectangle", ["column", "autocolor", "pro"]).states.create("dropFromPrevious", {}); De(f, "fill", e, "negative"), De(f, "stroke", e, "negative") } s("RoundedRectangle", ["rangegrip"]).setAll({ strokeOpacity: 0, fillOpacity: 0, strokeWidth: 1, width: 12, height: 12 }); { const f = s("Graphics", ["rangegrip", "button", "icon"]); f.setAll({ interactive: !1, crisp: !0, strokeOpacity: .5, draw: m => { m.moveTo(0, .5), m.lineTo(0, 12.5), m.moveTo(2, .5), m.lineTo(2, 12.5), m.moveTo(4, .5), m.lineTo(4, 12.5) } }), De(f, "stroke", e, "secondaryButtonText") } s("Button", ["rangegrip"]).setAll({ draggable: !0, paddingTop: 0, paddingBottom: 0 }), s("Button", ["rangegrip", "vertical"]).setAll({ rotation: 90, cursorOverStyle: "ns-resize", centerX: Oe }), s("Button", ["rangegrip", "horizontal"]).setAll({ cursorOverStyle: "ew-resize", centerX: Oe }), s("Button", ["rangegrip", "vertical", "left"]).setAll({ centerY: Te }), s("Button", ["rangegrip", "vertical", "right"]).setAll({ centerY: 0 }), s("Button", ["rangegrip", "horizontal", "top"]).setAll({ centerY: 0 }), s("Button", ["rangegrip", "horizontal", "bottom"]).setAll({ centerY: Te }) } } class Pr extends jn { constructor() { super(...arguments), Object.defineProperty(this, "xAxes", { enumerable: !0, configurable: !0, writable: !0, value: new ru }), Object.defineProperty(this, "yAxes", { enumerable: !0, configurable: !0, writable: !0, value: new ru }), Object.defineProperty(this, "topAxesContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.chartContainer.children.push(ze.new(this._root, { width: Te, layout: this._root.verticalLayout })) }), Object.defineProperty(this, "yAxesAndPlotContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.chartContainer.children.push(ze.new(this._root, { width: Te, height: Te, layout: this._root.horizontalLayout })) }), Object.defineProperty(this, "bottomAxesContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.chartContainer.children.push(ze.new(this._root, { width: Te, layout: this._root.verticalLayout })) }), Object.defineProperty(this, "leftAxesContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.yAxesAndPlotContainer.children.push(ze.new(this._root, { height: Te, layout: this._root.horizontalLayout })) }), Object.defineProperty(this, "plotsContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.yAxesAndPlotContainer.children.push(ze.new(this._root, { width: Te, height: Te, maskContent: !1 })) }), Object.defineProperty(this, "plotContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.plotsContainer.children.push(ze.new(this._root, { width: Te, height: Te })) }), Object.defineProperty(this, "topPlotContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.plotsContainer.children.push(ze.new(this._root, { width: Te, height: Te })) }), Object.defineProperty(this, "gridContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.plotContainer.children.push(ze.new(this._root, { width: Te, height: Te, isMeasured: !1 })) }), Object.defineProperty(this, "topGridContainer", { enumerable: !0, configurable: !0, writable: !0, value: ze.new(this._root, { width: Te, height: Te, isMeasured: !1 }) }), Object.defineProperty(this, "rightAxesContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.yAxesAndPlotContainer.children.push(ze.new(this._root, { height: Te, layout: this._root.horizontalLayout })) }), Object.defineProperty(this, "axisHeadersContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.plotContainer.children.push(ze.new(this._root, {})) }), Object.defineProperty(this, "zoomOutButton", { enumerable: !0, configurable: !0, writable: !0, value: this.topPlotContainer.children.push(cu.new(this._root, { themeTags: ["zoom"], icon: Qe.new(this._root, { themeTags: ["button", "icon"] }) })) }), Object.defineProperty(this, "_movePoint", { enumerable: !0, configurable: !0, writable: !0, value: { x: 0, y: 0 } }), Object.defineProperty(this, "_wheelDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_otherCharts", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_movePoints", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_downStartX", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_downEndX", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_downStartY", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_downEndY", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }) } _afterNew() { this._defaultThemes.push(TC.new(this._root)), super._afterNew(), this._disposers.push(this.xAxes), this._disposers.push(this.yAxes); const e = this._root; let t = this._root.verticalLayout; const s = this.zoomOutButton; s.events.on("click", () => { this.zoomOut() }), s.hide(0), s.states.lookup("default").set("opacity", 1), this.chartContainer.set("layout", t); const r = this.plotContainer; r.children.push(this.seriesContainer), this._disposers.push(this._processAxis(this.xAxes, this.bottomAxesContainer)), this._disposers.push(this._processAxis(this.yAxes, this.leftAxesContainer)), r.children.push(this.topGridContainer), r.children.push(this.bulletsContainer), r.set("interactive", !0), r.set("interactiveChildren", !1), r.set("background", Gi.new(e, { themeTags: ["plotbackground", "xy", "background"] })), this._disposers.push(r.events.on("pointerdown", o => { this._handlePlotDown(o) })), this._disposers.push(r.events.on("globalpointerup", o => { this._handlePlotUp(o) })), this._disposers.push(r.events.on("globalpointermove", o => { this._handlePlotMove(o) })), this._maskGrid(), this._setUpTouch() } _beforeChanged() { super._beforeChanged(), (this.isDirty("pinchZoomX") || this.isDirty("pinchZoomY") || this.get("panX") || this.get("panY")) && this._setUpTouch() } _setUpTouch() { this.plotContainer._display.cancelTouch || (this.plotContainer._display.cancelTouch = !!(this.get("pinchZoomX") || this.get("pinchZoomY") || this.get("panX") || this.get("panY"))) } _maskGrid() { this.gridContainer.set("maskContent", !0), this.topGridContainer.set("maskContent", !0) } _removeSeries(e) { e._unstack(), e._posXDp && e._posXDp.dispose(), e._posYDp && e._posYDp.dispose(), e.set("baseAxis", void 0); const t = e.get("xAxis"); t && (Vi(t.series, e), t.markDirtyExtremes()); const s = e.get("yAxis"); s && (Vi(s.series, e), s.markDirtyExtremes()); const r = this.get("cursor"); if (r) { const o = r.get("snapToSeries"); o && Vi(o, e) } super._removeSeries(e) } _applyThemes(e = !1) { const t = this.get("colors"); return t && t.reset(), super._applyThemes(e) } handleWheel(e) { const t = this.get("wheelX"), s = this.get("wheelY"), r = this.plotContainer, o = e.originalEvent; let u = !1; if (s0(o, this)) u = !0; else return; const d = r.toLocal(e.point), f = this.get("wheelStep", .2), m = o.deltaY / 100, p = o.deltaX / 100, g = this.get("wheelZoomPositionX"), y = this.get("wheelZoomPositionY"); (t === "zoomX" || t === "zoomXY") && p != 0 && this.xAxes.each(b => { if (b.get("zoomX")) { let v = b.get("start"), k = b.get("end"), j = b.fixPosition(d.x / r.width()); g != null && (j = g); let S = b.get("maxDeviation", 0), w = Math.min(1 + S, Math.max(-S, v - f * (k - v) * p * j)), N = Math.max(-S, Math.min(1 + S, k + f * (k - v) * p * (1 - j))); w == v && N == k && (u = !1), 1 / (N - w) < b.getPrivate("maxZoomFactor", 1 / 0) / b.get("minZoomCount", 1) ? this._handleWheelAnimation(b.zoom(w, N)) : u = !1 } }), (s === "zoomX" || s === "zoomXY") && m != 0 && this.xAxes.each(b => { if (b.get("zoomX")) { let v = b.get("start"), k = b.get("end"), j = b.fixPosition(d.x / r.width()); g != null && (j = g); let S = b.get("maxDeviation", 0), w = Math.min(1 + S, Math.max(-S, v - f * (k - v) * m * j)), N = Math.max(-S, Math.min(1 + S, k + f * (k - v) * m * (1 - j))); w == v && N == k && (u = !1), 1 / (N - w) < b.getPrivate("maxZoomFactor", 1 / 0) / b.get("minZoomCount", 1) ? this._handleWheelAnimation(b.zoom(w, N)) : u = !1 } }), (t === "zoomY" || t === "zoomXY") && p != 0 && this.yAxes.each(b => { if (b.get("zoomY")) { let v = b.get("start"), k = b.get("end"), j = b.fixPosition(d.y / r.height()); y != null && (j = y); let S = b.get("maxDeviation", 0), w = Math.min(1 + S, Math.max(-S, v - f * (k - v) * p * j)), N = Math.max(-S, Math.min(1 + S, k + f * (k - v) * p * (1 - j))); w == v && N == k && (u = !1), 1 / (N - w) < b.getPrivate("maxZoomFactor", 1 / 0) / b.get("minZoomCount", 1) ? this._handleWheelAnimation(b.zoom(w, N)) : u = !1 } }), (s === "zoomY" || s === "zoomXY") && m != 0 && this.yAxes.each(b => { if (b.get("zoomY")) { let v = b.get("start"), k = b.get("end"), j = b.fixPosition(d.y / r.height()); y != null && (j = y); let S = b.get("maxDeviation", 0), w = Math.min(1 + S, Math.max(-S, v - f * (k - v) * m * j)), N = Math.max(-S, Math.min(1 + S, k + f * (k - v) * m * (1 - j))); w == v && N == k && (u = !1), 1 / (N - w) < b.getPrivate("maxZoomFactor", 1 / 0) / b.get("minZoomCount", 1) ? this._handleWheelAnimation(b.zoom(w, N)) : u = !1 } }), (t === "panX" || t === "panXY") && p != 0 && this.xAxes.each(b => { if (b.get("panX")) { let v = b.get("start"), k = b.get("end"), j = this._getWheelSign(b) * f * (k - v) * p, S = v + j, w = k + j, N = this._fixWheel(S, w); S = N[0], w = N[1], S == v && w == k && (u = !1), this._handleWheelAnimation(b.zoom(S, w)) } }), (s === "panX" || s === "panXY") && m != 0 && this.xAxes.each(b => { if (b.get("panX")) { let v = b.get("start"), k = b.get("end"), j = this._getWheelSign(b) * f * (k - v) * m, S = v + j, w = k + j, N = this._fixWheel(S, w); S = N[0], w = N[1], S == v && w == k && (u = !1), this._handleWheelAnimation(b.zoom(S, w)) } }), (t === "panY" || t === "panXY") && p != 0 && this.yAxes.each(b => { if (b.get("panY")) { let v = b.get("start"), k = b.get("end"), j = this._getWheelSign(b) * f * (k - v) * p, S = v + j, w = k + j, N = this._fixWheel(S, w); S = N[0], w = N[1], S == v && w == k && (u = !1), this._handleWheelAnimation(b.zoom(S, w)) } }), (s === "panY" || s === "panXY") && m != 0 && this.yAxes.each(b => { if (b.get("panY")) { let v = b.get("start"), k = b.get("end"), j = this._getWheelSign(b) * f * (k - v) * m, S = v - j, w = k - j, N = this._fixWheel(S, w); S = N[0], w = N[1], S == v && w == k && (u = !1), this._handleWheelAnimation(b.zoom(S, w)) } }), u && o.preventDefault() } _handleSetWheel() { const e = this.get("wheelX"), t = this.get("wheelY"), s = this.plotContainer; e !== "none" || t !== "none" ? (this._wheelDp = s.events.on("wheel", r => { const o = r.originalEvent; (e !== "none" && Math.abs(o.deltaX) != 0 || t !== "none" && Math.abs(o.deltaY) != 0) && this.handleWheel(r) }), this._disposers.push(this._wheelDp)) : this._wheelDp && this._wheelDp.dispose() } _getWheelSign(e) { let t = 1; return e.get("renderer").get("inversed") && (t = -1), t } _fixWheel(e, t) { const s = t - e; return e < 0 && (e = 0, t = e + s), t > 1 && (t = 1, e = t - s), [e, t] } _handlePlotDown(e) { const t = e.originalEvent; if (t.button == 2) return; const s = this.plotContainer; let r = s.toLocal(e.point); if ((this.get("pinchZoomX") || this.get("pinchZoomY")) && t.pointerId && Wi(s._downPoints).length > 0) { const u = this.xAxes.getIndex(0), d = this.yAxes.getIndex(0); u && (this._downStartX = u.get("start", 0), this._downEndX = u.get("end", 1)), d && (this._downStartY = d.get("start", 0), this._downEndY = d.get("end", 1)) } if ((this.get("panX") || this.get("panY")) && r.x >= 0 && r.y >= 0 && r.x <= s.width() && r.y <= this.height()) { this._downPoint = { x: t.clientX, y: t.clientY }; const o = this.get("panX"), u = this.get("panY"); o && this.xAxes.each(f => { f._panStart = f.get("start"), f._panEnd = f.get("end") }), u && this.yAxes.each(f => { f._panStart = f.get("start"), f._panEnd = f.get("end") }); const d = "panstarted"; this.events.isEnabled(d) && this.events.dispatch(d, { type: d, target: this, originalEvent: e.originalEvent }) } } _handleWheelAnimation(e) { e ? e.events.on("stopped", () => { this._dispatchWheelAnimation() }) : this._dispatchWheelAnimation() } _dispatchWheelAnimation() { const e = "wheelended"; this.events.isEnabled(e) && this.events.dispatch(e, { type: e, target: this }) } _handlePlotUp(e) { const t = this._downPoint; if (t && (this.get("panX") || this.get("panY"))) { if (e.originalEvent.clientX == t.x && e.originalEvent.clientY == t.y) { const r = "pancancelled"; this.events.isEnabled(r) && this.events.dispatch(r, { type: r, target: this, originalEvent: e.originalEvent }) } const s = "panended"; this.events.isEnabled(s) && this.events.dispatch(s, { type: s, target: this, originalEvent: e.originalEvent }) } this._downPoint = void 0, this.xAxes.each(s => { s._isPanning = !1 }), this.yAxes.each(s => { s._isPanning = !1 }) } _handlePlotMove(e) { const t = this.plotContainer; if (this.get("pinchZoomX") || this.get("pinchZoomY")) { const o = e.originalEvent.pointerId; if (o && (this._movePoints[o] = e.point, Wi(t._downPoints).length > 1)) { this._handlePinch(); return } } let s = this._downPoint; if (s) { s = t.toLocal(this._root.documentPointToRoot(s)); let r = t.toLocal(e.point); const o = this.get("panX"), u = this.get("panY"); if (o) { let d = this.get("scrollbarX"); d && d.events.disableType("rangechanged"), this.xAxes.each(f => { if (f.get("panX")) { f._isPanning = !0; let m = f._panStart, p = f._panEnd, y = (p - m) * (s.x - r.x) / t.width(); f.get("renderer").get("inversed") && (y *= -1); let b = m + y, v = p + y; v - b < 1 + f.get("maxDeviation", 1) * 2 && (f.set("start", b), f.set("end", v)) } }), d && d.events.enableType("rangechanged") } if (u) { let d = this.get("scrollbarY"); d && d.events.disableType("rangechanged"), this.yAxes.each(f => { if (f.get("panY")) { f._isPanning = !0; let m = f._panStart, p = f._panEnd, y = (p - m) * (s.y - r.y) / t.height(); f.get("renderer").get("inversed") && (y *= -1); let b = m - y, v = p - y; v - b < 1 + f.get("maxDeviation", 1) * 2 && (f.set("start", b), f.set("end", v)) } }), d && d.events.enableType("rangechanged") } } } _handlePinch() { const e = this.plotContainer; let t = 0, s = [], r = []; if (it(e._downPoints, (o, u) => { s[t] = u; let d = this._movePoints[o]; d && (r[t] = d), t++ }), s.length > 1 && r.length > 1) { const o = e.width(), u = e.height(); let d = s[0], f = s[1], m = r[0], p = r[1]; if (d && f && m && p) { if (m = e.toLocal(m), p = e.toLocal(p), d = e.toLocal(d), f = e.toLocal(f), this.get("pinchZoomX")) { const g = this._downStartX, y = this._downEndX; if (g != null && y != null) { d.x > f.x && ([d, f] = [f, d], [m, p] = [p, m]); let b = g + d.x / o * (y - g), v = g + f.x / o * (y - g), k = g + m.x / o * (y - g), j = g + p.x / o * (y - g), S = Math.max(.001, v - b), w = Math.max(.001, j - k), N = S / w, T = g * N + b - k * N, R = y * N + v - j * N; this.xAxes.each(P => { let O = P.fixPosition(T), z = P.fixPosition(R); P.zoom(O, z, 0) }) } } if (this.get("pinchZoomY")) { const g = this._downStartY, y = this._downEndY; if (g != null && y != null) { d.y < f.y && ([d, f] = [f, d], [m, p] = [p, m]); let b = g + (1 - d.y / u) * (y - g), v = g + (1 - f.y / u) * (y - g), k = g + (1 - m.y / u) * (y - g), j = g + (1 - p.y / u) * (y - g), S = Math.max(.001, v - b), w = Math.max(.001, j - k), N = S / w, T = g * N + b - k * N, R = y * N + v - j * N; this.yAxes.each(P => { let O = P.fixPosition(T), z = P.fixPosition(R); P.zoom(O, z, 0) }) } } } } } _handleCursorPosition() { const e = this.get("cursor"); if (e) { const t = e.getPrivate("point"); let s = e.get("snapToSeries"); if (e._downPoint && (s = void 0), s && t) { const r = e.get("snapToSeriesBy"), o = []; te(s, f => { if (!f.isHidden() && !f.isHiding()) if (r != "x!" && r != "y!") { const m = f.startIndex(), p = f.endIndex(); for (let g = m; g < p; g++) { const y = f.dataItems[g]; y && !y.isHidden() && o.push(y) } } else { const m = f.get("tooltipDataItem"); m && o.push(m) } }); let u = 1 / 0, d; if (te(o, f => { const m = f.get("point"); if (m) { let p = 0; r == "x" || r == "x!" ? p = Math.abs(t.x - m.x) : r == "y" || r == "y!" ? p = Math.abs(t.y - m.y) : p = Math.hypot(t.x - m.x, t.y - m.y), p < u && (u = p, d = f) } }), te(s, f => { const m = f.get("tooltip"); m && m._setDataItem(void 0) }), d) { let f = d.component; f.showDataItemTooltip(d), f.setRaw("tooltipDataItem", d); const m = d.get("point"); m && e.handleMove(f.toGlobal({ x: m.x - f.x(), y: m.y - f.y() }), !0) } } } } _updateCursor() { let e = this.get("cursor"); e && e.updateCursor() } _addCursor(e) { this.plotContainer.children.push(e) } _prepareChildren() { if (super._prepareChildren(), this.series.each(e => { this._colorize(e) }), (this.isDirty("wheelX") || this.isDirty("wheelY")) && this._handleSetWheel(), this.isDirty("cursor")) { const e = this._prevSettings.cursor, t = this.get("cursor"); t !== e && (this._disposeProperty("cursor"), e && e.dispose(), t && (t._setChart(this), this._addCursor(t), this._pushPropertyDisposer("cursor", t.events.on("selectended", () => { this._handleCursorSelectEnd() }))), this._prevSettings.cursor = t) } if (this.isDirty("scrollbarX")) { const e = this._prevSettings.scrollbarX, t = this.get("scrollbarX"); t !== e && (this._disposeProperty("scrollbarX"), e && e.dispose(), t && (t.parent || this.topAxesContainer.children.push(t), this._pushPropertyDisposer("scrollbarX", t.events.on("rangechanged", s => { this._handleScrollbar(this.xAxes, s.start, s.end, s.grip) })), this._pushPropertyDisposer("scrollbarX", t.events.on("released", () => { this.xAxes.each(s => { s.get("zoomable") && this._handleAxisSelection(s) }) })), t.setPrivate("positionTextFunction", s => { const r = this.xAxes.getIndex(0); return r && r.getTooltipText(s, !1) || "" })), this._prevSettings.scrollbarX = t) } if (this.isDirty("scrollbarY")) { const e = this._prevSettings.scrollbarY, t = this.get("scrollbarY"); t !== e && (this._disposeProperty("scrollbarY"), e && e.dispose(), t && (t.parent || this.rightAxesContainer.children.push(t), this._pushPropertyDisposer("scrollbarY", t.events.on("rangechanged", s => { this._handleScrollbar(this.yAxes, s.start, s.end, s.grip) })), this._pushPropertyDisposer("scrollbarY", t.events.on("released", () => { this.yAxes.each(s => { s.get("zoomable") && this._handleAxisSelection(s) }) })), t.setPrivate("positionTextFunction", s => { const r = this.yAxes.getIndex(0); return r && r.getTooltipText(s, !1) || "" })), this._prevSettings.scrollbarY = t) } this._handleZoomOut() } _processSeries(e) { super._processSeries(e); const t = e.get("xAxis"), s = e.get("yAxis"); Ff(t.series, e), Ff(s.series, e), e._posXDp = e.addDisposer(t.events.on("positionchanged", () => { e._fixPosition() })), e._posXDp = e.addDisposer(s.events.on("positionchanged", () => { e._fixPosition() })), e.get("baseAxis") || (s.isType("CategoryAxis") || s.isType("DateAxis") ? e.set("baseAxis", s) : e.set("baseAxis", t)), e.get("stacked") && (e._markDirtyKey("stacked"), te(e.dataItems, r => { r.set("stackToItemY", void 0), r.set("stackToItemX", void 0) })), e._markDirtyAxes(), s.markDirtyExtremes(), t.markDirtyExtremes(), t._seriesAdded = !0, s._seriesAdded = !0, this._colorize(e) } _colorize(e) { const t = this.get("colors"); if (t && e.get("fill") == null) { const r = t.next(); e._setSoft("stroke", r), e._setSoft("fill", r) } const s = this.get("patterns"); if (s && e.get("fillPattern") == null) { const r = s.next(); e._setSoft("fillPattern", r) } } _handleCursorSelectEnd() { const e = this.get("cursor"), t = e.get("behavior"), s = e.getPrivate("downPositionX", 0), r = e.getPrivate("downPositionY", 0), o = Math.min(1, Math.max(0, e.getPrivate("positionX", .5))), u = Math.min(1, Math.max(0, e.getPrivate("positionY", .5))); this.xAxes.each(d => { if (t === "zoomX" || t === "zoomXY") { let f = d.toAxisPosition(s), m = d.toAxisPosition(o); d.zoom(f, m) } d.setPrivate("updateScrollbar", !0) }), this.yAxes.each(d => { if (t === "zoomY" || t === "zoomXY") { let f = d.toAxisPosition(r), m = d.toAxisPosition(u); d.zoom(f, m) } d.setPrivate("updateScrollbar", !0) }) } _handleScrollbar(e, t, s, r) { e.each(o => { let u = o.fixPosition(t), d = o.fixPosition(s), f = o.zoom(u, d, void 0, r); const m = "updateScrollbar"; o.setPrivateRaw(m, !1), f ? f.events.on("stopped", () => { o.setPrivateRaw(m, !0) }) : o.setPrivateRaw(m, !0) }) } _processAxis(e, t) { return e.events.onAll(s => { if (s.type === "clear") te(s.oldValues, r => { this._removeAxis(r) }); else if (s.type === "push") t.children.push(s.newValue), s.newValue.processChart(this); else if (s.type === "setIndex") t.children.setIndex(s.index, s.newValue), s.newValue.processChart(this); else if (s.type === "insertIndex") t.children.insertIndex(s.index, s.newValue), s.newValue.processChart(this); else if (s.type === "removeIndex") this._removeAxis(s.oldValue); else if (s.type === "moveIndex") t.children.moveValue(s.value, s.newIndex), s.value.processChart(this); else throw new Error("Unknown IListEvent type") }) } _removeAxis(e) { if (!e.isDisposed()) { const t = e.parent; t && t.children.removeValue(e); const s = e.gridContainer, r = s.parent; r && r.children.removeValue(s); const o = e.topGridContainer, u = o.parent; u && u.children.removeValue(o) } } _updateChartLayout() { const e = this.leftAxesContainer.width(), t = this.rightAxesContainer.width(), s = this.bottomAxesContainer; s.set("paddingLeft", e), s.set("paddingRight", t); const r = this.topAxesContainer; r.set("paddingLeft", e), r.set("paddingRight", t) } processAxis(e) { var t = this.get("cursor"); t && (this.addDisposer(e.on("start", () => { this._updateCursor() })), this.addDisposer(e.on("end", () => { this._updateCursor() }))) } _handleAxisSelection(e, t) { let s = e.fixPosition(e.get("start", 0)), r = e.fixPosition(e.get("end", 1)); if (s > r && ([s, r] = [r, s]), this.xAxes.indexOf(e) != -1) { if (t || e.getPrivate("updateScrollbar")) { let o = this.get("scrollbarX"); o && (!o.getPrivate("isBusy") || t) && (o.setRaw("start", s), o.setRaw("end", r), o.updateGrips()) } } else if (this.yAxes.indexOf(e) != -1 && (t || e.getPrivate("updateScrollbar"))) { let o = this.get("scrollbarY"); o && (!o.getPrivate("isBusy") || t) && (o.setRaw("start", s), o.setRaw("end", r), o.updateGrips()) } this._handleZoomOut() } _handleZoomOut() { let e = this.zoomOutButton; if (e && e.parent) { let t = !1; this.xAxes.each(s => { s.get("zoomOut", !0) && (Lt(s.get("start", 0), 5) != 0 || Lt(s.get("end", 1), 5) != 1) && (t = !0) }), this.yAxes.each(s => { s.get("zoomOut", !0) && (Lt(s.get("start", 0), 5) != 0 || Lt(s.get("end", 1), 5) != 1) && (t = !0) }), t ? e.isHidden() && e.show() : e.hide() } } inPlot(e) { const t = this.plotContainer, s = this.getPrivate("otherCharts", this._otherCharts), r = t.toGlobal(e); if (e.x >= -.5 && e.y >= -.5 && e.x <= t.width() + .5 && e.y <= t.height() + .5) return !0; if (s) for (let o = s.length - 1; o >= 0; o--) { const u = s[o]; if (u != this) { const d = u.plotContainer, f = this._root.rootPointToDocument(r), m = u._root.documentPointToRoot(f), p = d.toLocal(m); if (p.x >= -.1 && p.y >= -.1 && p.x <= d.width() + .1 && p.y <= d.height() + .1) return !0 } } return !1 } arrangeTooltips() { const e = this.plotContainer, t = e.width(), s = e.height(); let r = this.height(); const o = this._root.tooltipContainer.get("layerMargin"); o && o.bottom > r && (r = o.bottom); let u = e._display.toGlobal({ x: 0, y: 0 }), d = e._display.toGlobal({ x: t, y: s }); const f = []; let m = 0, p = 1 / 0, g = this._movePoint, y = this.get("maxTooltipDistance"), b = this.get("maxTooltipDistanceBy", "xy"), v, k; le(y) && this.series.each(S => { if (!S.isHidden()) { const w = S.get("tooltip"); if (w) { let N = w.get("pointTo"); if (N) { let T = Math.hypot(g.x - N.x, g.y - N.y); b == "x" ? T = Math.abs(g.x - N.x) : b == "y" && (T = Math.abs(g.y - N.y)), T < p && (p = T, v = S, k = N) } } } }); const j = []; if (this.series.each(S => { const w = S.get("tooltip"); if (w && !w.get("forceHidden")) { let N = !1, T = w.get("pointTo"); if (T) { if (y >= 0) { let R = w.get("pointTo"); if (R && k && S != v) { let P = Math.hypot(k.x - R.x, k.y - R.y); b == "x" ? P = Math.abs(k.x - R.x) : b == "y" && (P = Math.abs(k.y - R.y)), P > y && (N = !0) } } else y == -1 && S != v && (N = !0); !this.inPlot(this._tooltipToLocal(T)) || !w.dataItem ? N = !0 : N || (m += T.y), N || S.isHidden() || S.isHiding() ? w.hide(0) : (w.show(), f.push(w), j.push(S)) } } }), this.setPrivate("tooltipSeries", j), this.get("arrangeTooltips")) { let S = 0, w = 0; const N = this._root.tooltipContainer, T = f.length; if (m / T > s / 2 + u.y) { f.sort((O, z) => dy(z.get("pointTo").y, O.get("pointTo").y)); let P = d.y; if (te(f, O => { let z = O.height(); w++, S += z; let F = O.get("centerY"); F instanceof Ie && (z *= F.value), z += O.get("marginBottom", 0), O.set("bounds", { left: u.x, top: u.y, right: d.x, bottom: P }), O.setPrivate("customData", { left: u.x, top: u.y, right: d.x, bottom: P }), P = Math.min(P - z, O._fy - z), O.parent == N && N.children.moveValue(O, 0) }), P < 0) { f.reverse(); let O = P; te(f, z => { w++; let F = z.get("bounds"); if (F) { let B = F.top - P, A = F.bottom - P; B < O && (B = O, A = B + z.height()), z.set("bounds", { left: F.left, top: B, right: F.right, bottom: A }), O = F.bottom - P + z.get("marginBottom", 0) } }) } } else { f.reverse(), f.sort((O, z) => dy(O.get("pointTo").y, z.get("pointTo").y)); let P = 0; if (te(f, O => { w++; let z = O.height(); S += z; let F = O.get("centerY"); F instanceof Ie && (z *= F.value), z += O.get("marginBottom", 0), O.set("bounds", { left: u.x, top: P, right: d.x, bottom: Math.max(u.y + r, P + z) }), O.parent == N && N.children.moveValue(O, 0), P = Math.max(P + z, O._fy + z) }), P > r) { f.reverse(); let O = r; te(f, z => { w++; let F = z.get("bounds"); if (F) { let B = F.top - (r - P), A = F.bottom - (r - P); A > O && (A = O, B = A - z.height()), z.set("bounds", { left: F.left, top: B, right: F.right, bottom: A }), O = A - z.height() - z.get("marginBottom", 0) } }) } } S == 0 && w > 0 && this._disposers.push(this.root.events.once("frameended", () => { this.arrangeTooltips() })) } } _tooltipToLocal(e) { return this.plotContainer.toLocal(e) } zoomOut() { this.xAxes.each(e => { e.get("zoomOut", !0) && (e.setPrivate("updateScrollbar", !0), e.zoom(0, 1)) }), this.yAxes.each(e => { e.get("zoomOut", !0) && (e.setPrivate("updateScrollbar", !0), e.zoom(0, 1)) }) } _dispose() { super._dispose(); const e = this.get("cursor"); e && e.dispose() } } Object.defineProperty(Pr, "className", { enumerable: !0, configurable: !0, writable: !0, value: "XYChart" }); Object.defineProperty(Pr, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: jn.classNames.concat([Pr.className]) }); class Or extends Qe { _beforeChanged() { super._beforeChanged(), (this.isPrivateDirty("width") || this.isPrivateDirty("height")) && (this._clear = !0) } } Object.defineProperty(Or, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Grid" }); Object.defineProperty(Or, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Qe.classNames.concat([Or.className]) }); class Er extends ze { constructor() { super(...arguments), Object.defineProperty(this, "_alwaysShow", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "lineX", { enumerable: !0, configurable: !0, writable: !0, value: this.children.push(Or.new(this._root, { themeTags: ["x"] })) }), Object.defineProperty(this, "lineY", { enumerable: !0, configurable: !0, writable: !0, value: this.children.push(Or.new(this._root, { themeTags: ["y"] })) }), Object.defineProperty(this, "selection", { enumerable: !0, configurable: !0, writable: !0, value: this.children.push(Qe.new(this._root, { themeTags: ["selection", "cursor"], layer: 30 })) }), Object.defineProperty(this, "_movePoint", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_lastPoint", { enumerable: !0, configurable: !0, writable: !0, value: { x: 0, y: 0 } }), Object.defineProperty(this, "_lastPoint2", { enumerable: !0, configurable: !0, writable: !0, value: { x: 0, y: 0 } }), Object.defineProperty(this, "_tooltipX", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_tooltipY", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "chart", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_toX", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_toY", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }) } _afterNew() { this._settings.themeTags = Ve(this._settings.themeTags, ["xy", "cursor"]), super._afterNew(), this.setAll({ width: Te, height: Te, isMeasured: !0, position: "absolute" }), this.states.create("hidden", { visible: !0, opacity: 0 }), this._drawLines(), this.setPrivateRaw("visible", !1), this._disposers.push(this.setTimeout(() => { this.setPrivate("visible", !0) }, 500)), this._disposers.push(this.lineX.events.on("positionchanged", () => { this._handleXLine() })), this._disposers.push(this.lineY.events.on("positionchanged", () => { this._handleYLine() })), this._disposers.push(this.lineX.events.on("focus", () => this._handleLineFocus())), this._disposers.push(this.lineX.events.on("blur", () => this._handleLineBlur())), this._disposers.push(this.lineY.events.on("focus", () => this._handleLineFocus())), this._disposers.push(this.lineY.events.on("blur", () => this._handleLineBlur())), ta("keyboardevents") && this._disposers.push(jt(document, "keydown", e => { this._handleLineMove(Fl(e), e.ctrlKey) })) } _setUpTouch() { const e = this.chart; e && (e.plotContainer._display.cancelTouch = this.get("behavior") != "none") } _handleXLine() { let e = this.lineX.x(), t = !0; (e < 0 || e > this.width()) && (t = !1), this.lineX.setPrivate("visible", t) } _handleYLine() { let e = this.lineY.y(), t = !0; (e < 0 || e > this.height()) && (t = !1), this.lineY.setPrivate("visible", t) } _handleLineMove(e, t) { let s = ""; const r = this.chart; let o; if (r && r.xAxes.length) { this._root.focused(this.lineX) ? (s = "positionX", o = r.xAxes.getIndex(0)) : this._root.focused(this.lineY) && (o = r.yAxes.getIndex(0), s = "positionY"); let u = 1; if (t && (u = 5), o) { let d = o.get("renderer").get("inversed", !1), f; e == "ArrowRight" || e == "ArrowDown" ? f = 1 : e == "ArrowLeft" || e == "ArrowUp" ? f = -1 : e == "Tab" && (f = 0), f != null && (d && (f *= -1), this.set(s, o.nextPosition(f * u))) } } } _handleLineFocus() { this._alwaysShow = this.get("alwaysShow", !1), this.setAll({ positionX: this.getPrivate("positionX", 0), positionY: this.getPrivate("positionY", 0), alwaysShow: !0 }), this._handleLineMove("Tab") } _handleLineBlur() { (this.lineX.isFocus() || this.lineY.isFocus()) && this.setAll({ positionX: void 0, positionY: void 0, alwaysShow: this._alwaysShow }) } _prepareChildren() { if (super._prepareChildren(), this.isDirty("xAxis")) { this._tooltipX = !1; const e = this.get("xAxis"); if (e) { const t = e.get("tooltip"); t && (this._tooltipX = !0, this._disposers.push(t.on("pointTo", () => { this._updateXLine(t) }))) } } if (this.isDirty("yAxis")) { this._tooltipY = !1; const e = this.get("yAxis"); if (e) { const t = e.get("tooltip"); t && (this._tooltipY = !0, this._disposers.push(t.on("pointTo", () => { this._updateYLine(t) }))) } } } _handleSyncWith() { const e = this.chart; if (e) { const t = this.get("syncWith"), s = []; t && te(t, r => { const o = r.chart; o && s.push(o) }), e._otherCharts = s } } _updateChildren() { if (super._updateChildren(), this._handleSyncWith(), this.isDirty("positionX") || this.isDirty("positionY")) { const e = this.get("positionX"), t = this.get("positionY"); e == null && t == null ? this.hide(0) : (this._movePoint = this.toGlobal(this._getPoint(this.get("positionX", 0), this.get("positionY", 0))), this.handleMove()) } } _updateXLine(e) { let t = Lt(this._display.toLocal(e.get("pointTo", { x: 0, y: 0 })).x, 3); this._toX != t && (this.lineX.animate({ key: "x", to: t, duration: e.get("animationDuration", 0), easing: e.get("animationEasing") }), this._toX = t) } _updateYLine(e) { let t = Lt(this._display.toLocal(e.get("pointTo", { x: 0, y: 0 })).y, 3); this._toY != t && (this.lineY.animate({ key: "y", to: t, duration: e.get("animationDuration", 0), easing: e.get("animationEasing") }), this._toY = t) } _drawLines() { this.lineX.set("draw", e => { e.moveTo(0, 0), e.lineTo(0, this.height()) }), this.lineY.set("draw", e => { e.moveTo(0, 0), e.lineTo(this.width(), 0) }) } updateCursor() { this.get("alwaysShow") && (this._movePoint = this.toGlobal(this._getPoint(this.get("positionX", 0), this.get("positionY", 0)))), this.handleMove() } _setChart(e) { this.chart = e, this._handleSyncWith(); const t = e.plotContainer; this.events.on("boundschanged", () => { this._disposers.push(this.setTimeout(() => { this.updateCursor() }, 50)) }), ta("touchevents") && (this._disposers.push(t.events.on("click", r => { Yf(r.originalEvent) && this._handleMove(r) })), this._setUpTouch()), this._disposers.push(t.events.on("pointerdown", r => { this._handleCursorDown(r) })), this._disposers.push(t.events.on("globalpointerup", r => { this._handleCursorUp(r), !r.native && !this.isHidden() && this._handleMove(r) })), this._disposers.push(t.events.on("globalpointermove", r => { !this.get("syncWith") && Wi(t._downPoints).length == 0 && !r.native && this.isHidden() || (this._handleMove(r), Math.hypot(this._lastPoint2.x - r.point.x, this._lastPoint2.y - r.point.y) > 1 && (this._handleLineBlur(), this._lastPoint2 = r.point)) })); const s = this.parent; s && s.children.moveValue(this.selection) } _inPlot(e) { const t = this.chart; return t ? t.inPlot(e) : !1 } _handleCursorDown(e) { if (e.originalEvent.button == 2) return; const t = e.point; let s = this._display.toLocal(t); const r = this.chart; if (this.selection.set("draw", () => { }), r && this._inPlot(s)) { if (this._downPoint = s, this.get("behavior") != "none") { this.selection.show(); const d = "selectstarted"; this.events.isEnabled(d) && this.events.dispatch(d, { type: d, target: this, originalEvent: e.originalEvent }) } let o = this._getPosition(s).x, u = this._getPosition(s).y; this.setPrivate("downPositionX", o), this.setPrivate("downPositionY", u) } } _handleCursorUp(e) { if (this._downPoint) { const t = this.get("behavior", "none"); if (t != "none") { t.charAt(0) === "z" && this.selection.hide(); const s = e.point; let r = this._display.toLocal(s); const o = this._downPoint, u = this.get("moveThreshold", 1); if (r && o) { let d = !1; if ((t === "zoomX" || t === "zoomXY" || t === "selectX" || t === "selectXY") && Math.abs(r.x - o.x) > u && (d = !0), (t === "zoomY" || t === "zoomXY" || t === "selectY" || t === "selectXY") && Math.abs(r.y - o.y) > u && (d = !0), d) { const f = "selectended"; this.events.isEnabled(f) && this.events.dispatch(f, { type: f, target: this, originalEvent: e.originalEvent }) } else { const f = "selectcancelled"; this.events.isEnabled(f) && this.events.dispatch(f, { type: f, target: this, originalEvent: e.originalEvent }) } } } } this._downPoint = void 0 } _handleMove(e) { if (this.getPrivate("visible")) { const t = this.chart; if (t && Wi(t.plotContainer._downPoints).length > 1) { this.set("forceHidden", !0); return } else this.set("forceHidden", !1); const s = e.point, r = this._lastPoint; if (Math.round(r.x) === Math.round(s.x) && Math.round(r.y) === Math.round(s.y)) return; this._lastPoint = s, this.setPrivate("lastPoint", s), this.handleMove({ x: s.x, y: s.y }, !1, e.originalEvent) } } _getPosition(e) { return { x: e.x / this.width(), y: e.y / this.height() } } handleMove(e, t, s) { e || (e = this._movePoint); const r = this.get("alwaysShow"); if (!e) { this.hide(0); return } this._movePoint = e; let o = this._display.toLocal(e), u = this.chart; if (u && (this._inPlot(o) || this._downPoint)) { u._movePoint = e, this.isHidden() && (this.show(), this.get("behavior", "").charAt(0) == "z" && this.selection.set("draw", () => { })); let d = o.x, f = o.y, m = this._getPosition(o); this.setPrivate("point", o); let p = this.get("snapToSeries"); this._downPoint && (p = void 0); let g = this.get("positionX"), y = m.x; le(g) && (y = g); let b = this.get("positionY"), v = m.y; le(b) && (v = b), this.setPrivate("positionX", y), this.setPrivate("positionY", v); const k = this._getPoint(y, v); if (d = k.x, f = k.y, u.xAxes.each(j => { j._handleCursorPosition(y, p), r && j.handleCursorShow() }), u.yAxes.each(j => { j._handleCursorPosition(v, p), r && j.handleCursorShow() }), !t) { u._handleCursorPosition(); const j = "cursormoved"; this.events.isEnabled(j) && this.events.dispatch(j, { type: j, target: this, point: e, originalEvent: s }) } this._updateLines(d, f), u.arrangeTooltips() } else if (!this._downPoint && !r) { this.hide(0); const d = "cursorhidden"; this.events.isEnabled(d) && this.events.dispatch(d, { type: d, target: this }) } this._downPoint && this.get("behavior") != "none" && this._updateSelection(o) } _getPoint(e, t) { return { x: this.width() * e, y: this.height() * t } } _updateLines(e, t) { this._tooltipX || this.lineX.set("x", e), this._tooltipY || this.lineY.set("y", t), this._drawLines() } _updateSelection(e) { const t = this.selection, s = this.get("behavior"), r = this.width(), o = this.height(); e.x < 0 && (e.x = 0), e.x > r && (e.x = r), e.y < 0 && (e.y = 0), e.y > o && (e.y = o), t.set("draw", u => { const d = this._downPoint; d && (s === "zoomXY" || s === "selectXY" ? (u.moveTo(d.x, d.y), u.lineTo(d.x, e.y), u.lineTo(e.x, e.y), u.lineTo(e.x, d.y), u.lineTo(d.x, d.y)) : s === "zoomX" || s === "selectX" ? (u.moveTo(d.x, 0), u.lineTo(d.x, o), u.lineTo(e.x, o), u.lineTo(e.x, 0), u.lineTo(d.x, 0)) : (s === "zoomY" || s === "selectY") && (u.moveTo(0, d.y), u.lineTo(r, d.y), u.lineTo(r, e.y), u.lineTo(0, e.y), u.lineTo(0, d.y))) }) } _onHide() { if (this.isHidden()) { let e = this.chart; e && (e.xAxes.each(t => { t.handleCursorHide() }), e.yAxes.each(t => { t.handleCursorHide() }), e.series.each(t => { t.handleCursorHide() })) } super._onHide() } _onShow() { if (!this.isHidden()) { let e = this.chart; e && (e.xAxes.each(t => { t.handleCursorShow() }), e.yAxes.each(t => { t.handleCursorShow() })) } super._onShow() } _dispose() { super._dispose(), this.selection.dispose() } } Object.defineProperty(Er, "className", { enumerable: !0, configurable: !0, writable: !0, value: "XYCursor" }); Object.defineProperty(Er, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: ze.classNames.concat([Er.className]) }); function DC(l, e) { return l == null ? e : e == null ? l : e < l ? e : l } function AC(l, e) { return l == null ? e : e == null || l > e ? l : e } class kn extends na { constructor() { super(...arguments), Object.defineProperty(this, "_xField", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_yField", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_xOpenField", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_yOpenField", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_xLowField", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_xHighField", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_yLowField", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_yHighField", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_axesDirty", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_stackDirty", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_selectionProcessed", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_dataSets", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_mainContainerMask", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_x", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_y", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_xRenderer", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_yRenderer", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_bullets", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "mainContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.children.push(ze.new(this._root, {})) }), Object.defineProperty(this, "axisRanges", { enumerable: !0, configurable: !0, writable: !0, value: new Hr }), Object.defineProperty(this, "_skipped", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_couldStackTo", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_reallyStackedTo", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_stackedSeries", { enumerable: !0, configurable: !0, writable: !0, value: {} }), Object.defineProperty(this, "_aLocationX0", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_aLocationX1", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), Object.defineProperty(this, "_aLocationY0", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_aLocationY1", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), Object.defineProperty(this, "_showBullets", { enumerable: !0, configurable: !0, writable: !0, value: !0 }), Object.defineProperty(this, "valueXFields", { enumerable: !0, configurable: !0, writable: !0, value: ["valueX", "openValueX", "lowValueX", "highValueX"] }), Object.defineProperty(this, "valueYFields", { enumerable: !0, configurable: !0, writable: !0, value: ["valueY", "openValueY", "lowValueY", "highValueY"] }), Object.defineProperty(this, "_valueXFields", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_valueYFields", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_valueXShowFields", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_valueYShowFields", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "__valueXShowFields", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "__valueYShowFields", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_emptyDataItem", { enumerable: !0, configurable: !0, writable: !0, value: new La(this, void 0, {}) }), Object.defineProperty(this, "_dataSetId", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_tooltipFieldX", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_tooltipFieldY", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_posXDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_posYDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }) } _afterNew() { this.fields.push("categoryX", "categoryY", "openCategoryX", "openCategoryY"), this.valueFields.push("valueX", "valueY", "openValueX", "openValueY", "lowValueX", "lowValueY", "highValueX", "highValueY"), this._setRawDefault("vcx", 1), this._setRawDefault("vcy", 1), this._setRawDefault("valueXShow", "valueXWorking"), this._setRawDefault("valueYShow", "valueYWorking"), this._setRawDefault("openValueXShow", "openValueXWorking"), this._setRawDefault("openValueYShow", "openValueYWorking"), this._setRawDefault("lowValueXShow", "lowValueXWorking"), this._setRawDefault("lowValueYShow", "lowValueYWorking"), this._setRawDefault("highValueXShow", "highValueXWorking"), this._setRawDefault("highValueYShow", "highValueYWorking"), this._setRawDefault("lowValueXGrouped", "low"), this._setRawDefault("lowValueYGrouped", "low"), this._setRawDefault("highValueXGrouped", "high"), this._setRawDefault("highValueYGrouped", "high"); const e = this.get("xAxis"); e && (this._xRenderer = e.get("renderer")); const t = this.get("yAxis"); t && (this._yRenderer = t.get("renderer")), super._afterNew(), this.set("maskContent", !0), this._disposers.push(this.axisRanges.events.onAll(s => { if (s.type === "clear") te(s.oldValues, r => { this._removeAxisRange(r) }); else if (s.type === "push") this._processAxisRange(s.newValue); else if (s.type === "setIndex") this._processAxisRange(s.newValue); else if (s.type === "insertIndex") this._processAxisRange(s.newValue); else if (s.type === "removeIndex") this._removeAxisRange(s.oldValue); else if (s.type === "moveIndex") this._processAxisRange(s.value); else throw new Error("Unknown IStreamEvent type") })), this.states.create("hidden", { opacity: 1, visible: !1 }), this.onPrivate("startIndex", () => { this.root.events.once("frameended", () => { this.updateLegendValue() }) }), this.onPrivate("endIndex", () => { this.root.events.once("frameended", () => { this.updateLegendValue() }) }), this._makeFieldNames() } _processAxisRange(e) { const t = ze.new(this._root, {}); e.container = t, this.children.push(t), e.series = this; const s = e.axisDataItem; s.setRaw("isRange", !0); const r = s.component; if (r) { r._processAxisRange(s, ["range", "series"]); const o = s.get("bullet"); if (o) { const d = o.get("sprite"); d && d.setPrivate("visible", !1) } const u = s.get("axisFill"); u && t.set("mask", u), r._seriesAxisRanges.push(s) } } _onDataClear() { super._onDataClear(), it(this._dataSets, (e, t) => { te(t, s => { s.dispose() }), t.length = 0 }) } _removeAxisRange(e) { const t = e.axisDataItem, s = t.component; t.dispose(), Vi(s._seriesAxisRanges, t); const r = e.container; r && r.dispose() } _updateFields() { super._updateFields(), this._valueXFields = [], this._valueYFields = [], this._valueXShowFields = [], this._valueYShowFields = [], this.__valueXShowFields = [], this.__valueYShowFields = [], this.valueXFields && te(this.valueXFields, e => { if (this.get(e + "Field")) { this._valueXFields.push(e); let s = this.get(e + "Show"); this.__valueXShowFields.push(s), s.indexOf("Working") != -1 ? this._valueXShowFields.push(s.split("Working")[0]) : this._valueXShowFields.push(s) } }), this.valueYFields && te(this.valueYFields, e => { if (this.get(e + "Field")) { this._valueYFields.push(e); let s = this.get(e + "Show"); this.__valueYShowFields.push(s), s.indexOf("Working") != -1 ? this._valueYShowFields.push(s.split("Working")[0]) : this._valueYShowFields.push(s) } }) } _dispose() { super._dispose(), this._bullets = {}; const e = this.chart; e && e.series.removeValue(this), ci(this.get("xAxis").series, this), ci(this.get("yAxis").series, this) } _min(e, t) { let s = DC(this.getPrivate(e), t); this.setPrivate(e, s) } _max(e, t) { let s = AC(this.getPrivate(e), t); this.setPrivate(e, s) } _shouldMakeBullet(e) { const t = this.get("xAxis"), s = this.get("yAxis"), r = this.get("baseAxis"); if (!t.inited || !s.inited) return !1; const o = this.get("minBulletDistance", 0); if (o > 0) { let u = this.startIndex(), f = this.endIndex() - u; if (t == r) { if (this._xRenderer.axisLength() / f < o / 5) return !1 } else if (s == r && this._yRenderer.axisLength() / f < o / 5) return !1 } return e.get(this._xField) != null && e.get(this._yField) != null } _makeFieldNames() { const e = this.get("xAxis"), t = this.get("yAxis"), s = e.getPrivate("name"), r = ly(s), o = t.getPrivate("name"), u = ly(o), d = e.get("renderer").getPrivate("letter"), f = t.get("renderer").getPrivate("letter"), m = "open", p = "low", g = "high", y = "Show"; e.className === "ValueAxis" ? (this._xField = this.get(s + d + y), this._xOpenField = this.get(m + r + d + y), this._xLowField = this.get(p + r + d + y), this._xHighField = this.get(g + r + d + y)) : (this._xField = s + d, this._xOpenField = m + r + d, this._xLowField = p + r + d, this._xHighField = g + r + d), t.className === "ValueAxis" ? (this._yField = this.get(o + f + y), this._yOpenField = this.get(m + u + f + y), this._yLowField = this.get(p + u + f + y), this._yHighField = this.get(g + u + f + y)) : (this._yField = o + f, this._yOpenField = m + u + f, this._yLowField = p + u + f, this._yHighField = g + u + f) } _fixVC() { const e = this.get("xAxis"), t = this.get("yAxis"), s = this.get("baseAxis"), r = this.states.lookup("hidden"), o = this.get("sequencedInterpolation"); if (r) { let u = 0; o && (u = .999999999999), e === s ? r.set("vcy", u) : (t === s || r.set("vcy", u), r.set("vcx", u)) } } _handleMaskBullets() { this.isDirty("maskBullets") && this.bulletsContainer.set("maskContent", this.get("maskBullets")) } _fixPosition() { const e = this.get("xAxis"), t = this.get("yAxis"); this.set("x", e.x() - mt(e.get("centerX", 0), e.width()) - e.parent.get("paddingLeft", 0)), this.set("y", t.y() - mt(t.get("centerY", 0), t.height()) - t.parent.get("paddingTop", 0)), this.bulletsContainer.set("y", this.y()), this.bulletsContainer.set("x", this.x()) } _prepareChildren() { super._prepareChildren(), this._xRenderer = this.get("xAxis").get("renderer"), this._yRenderer = this.get("yAxis").get("renderer"), this._bullets = {}, (this.isDirty("valueYShow") || this.isDirty("valueXShow") || this.isDirty("openValueYShow") || this.isDirty("openValueXShow") || this.isDirty("lowValueYShow") || this.isDirty("lowValueXShow") || this.isDirty("highValueYShow") || this.isDirty("highValueXShow")) && (this._updateFields(), this._makeFieldNames(), this._valuesDirty = !0), (this.isDirty("xAxis") || this.isDirty("yAxis")) && (this._valuesDirty = !0), this.set("width", this.get("xAxis").width()), this.set("height", this.get("yAxis").height()), this._handleMaskBullets(); const e = this.get("xAxis"), t = this.get("yAxis"), s = this.get("baseAxis"), r = this.get("tooltipPositionX"); let o; switch (r) { case "open": o = this._xOpenField; break; case "low": o = this._xLowField; break; case "high": o = this._xHighField; break; default: o = this._xField }this._tooltipFieldX = o; const u = this.get("tooltipPositionY"); let d; switch (u) { case "open": d = this._yOpenField; break; case "low": d = this._yLowField; break; case "high": d = this._yHighField; break; default: d = this._yField }this._tooltipFieldY = d, this.isDirty("baseAxis") && this._fixVC(), this._fixPosition(); const f = this.get("stacked"); if (this.isDirty("stacked") && (f ? this._valuesDirty && !this._dataProcessed || this._stack() : this._unstack()), this._valuesDirty && !this._dataProcessed && (this._dataProcessed = !0, f && this._stack(), te(this.dataItems, m => { te(this._valueXShowFields, p => { let g = m.get(p); g != null && (f && (g += this.getStackedXValue(m, p)), this._min("minX", g), this._max("maxX", g)) }), te(this._valueYShowFields, p => { let g = m.get(p); g != null && (f && (g += this.getStackedYValue(m, p)), this._min("minY", g), this._max("maxY", g)) }), e.processSeriesDataItem(m, this._valueXFields), t.processSeriesDataItem(m, this._valueYFields) }), e._seriesValuesDirty = !0, t._seriesValuesDirty = !0, this.get("ignoreMinMax") || ((this.isPrivateDirty("minX") || this.isPrivateDirty("maxX")) && e.markDirtyExtremes(), (this.isPrivateDirty("minY") || this.isPrivateDirty("maxY")) && t.markDirtyExtremes()), this._markStakedDirtyStack(), this.get("tooltipDataItem") || this.updateLegendValue(void 0)), (this.isDirty("vcx") || this.isDirty("vcy")) && this._markStakedDirtyStack(), this._dataGrouped || (e._groupSeriesData(this), t._groupSeriesData(this), this._dataGrouped = !0), this._valuesDirty || this.isPrivateDirty("startIndex") || this.isPrivateDirty("adjustedStartIndex") || this.isPrivateDirty("endIndex") || this.isDirty("vcx") || this.isDirty("vcy") || this._stackDirty || this._sizeDirty) { let m = this.startIndex(), p = this.endIndex(), g = this.get("minBulletDistance", 0); if (g > 0 && s && (s.get("renderer").axisLength() / (p - m) > g ? this._showBullets = !0 : this._showBullets = !1), (this._psi != m || this._pei != p || this.isDirty("vcx") || this.isDirty("vcy") || this.isPrivateDirty("adjustedStartIndex") || this._stackDirty || this._valuesDirty) && !this._selectionProcessed) { this._selectionProcessed = !0; const y = this.get("vcx", 1), b = this.get("vcy", 1), v = this.get("stacked", !1), k = this.getPrivate("outOfSelection"); if (s === e || !s) if (t._calculateTotals(), this.setPrivateRaw("selectionMinY", void 0), this.setPrivateRaw("selectionMaxY", void 0), k) t.markDirtySelectionExtremes(); else for (let j = m; j < p; j++)this.processYSelectionDataItem(this.dataItems[j], b, v); if (s === t || !s) if (e._calculateTotals(), this.setPrivateRaw("selectionMinX", void 0), this.setPrivateRaw("selectionMaxX", void 0), k) t.markDirtySelectionExtremes(); else for (let j = m; j < p; j++)this.processXSelectionDataItem(this.dataItems[j], y, v); if ((s === e || !s) && (this.get("valueYShow") !== "valueYWorking" || this.get("useSelectionExtremes"))) { const j = this.getPrivate("selectionMinY"); j != null && (this.setPrivateRaw("minY", j), t.markDirtyExtremes()); const S = this.getPrivate("selectionMaxY"); S != null && (this.setPrivateRaw("maxY", S), t.markDirtyExtremes()) } if ((s === t || !s) && (this.get("valueXShow") !== "valueXWorking" || this.get("useSelectionExtremes"))) { const j = this.getPrivate("selectionMinX"); j != null && (this.setPrivateRaw("minX", j), t.markDirtyExtremes()); const S = this.getPrivate("selectionMaxX"); S != null && (this.setPrivateRaw("maxX", S), e.markDirtyExtremes()) } (this.isPrivateDirty("selectionMinX") || this.isPrivateDirty("selectionMaxX")) && e.markDirtySelectionExtremes(), (this.isPrivateDirty("selectionMinY") || this.isPrivateDirty("selectionMaxY")) && t.markDirtySelectionExtremes() } } } _postUpdateData() { const e = this.get("xAxis"), t = this.get("yAxis"); e._seriesValuesDirty = !0, t._seriesValuesDirty = !0, te(this.dataItems, s => { s.open = void 0, s.close = void 0, e.processSeriesDataItem(s, this._valueXFields), t.processSeriesDataItem(s, this._valueYFields) }) } _makeRangeMask() { if (this.axisRanges.length > 0) { let e = this._mainContainerMask; e == null && (e = this.children.push(Qe.new(this._root, {})), this._mainContainerMask = e, e.set("draw", (t, s) => { const r = this.parent; if (r) { const o = this._root.container.width(), u = this._root.container.height(); t.moveTo(-o, -u), t.lineTo(-o, u * 2), t.lineTo(o * 2, u * 2), t.lineTo(o * 2, -u), t.lineTo(-o, -u), this.axisRanges.each(d => { const f = d.axisDataItem.get("axisFill"); if (r && f) { let m = f.get("draw"); m && m(t, s) } }) } this.mainContainer._display.mask = e._display })), e.markDirty(), e._markDirtyKey("fill") } else this.mainContainer._display.mask = null } _updateChildren() { super._updateChildren(), this._x = this.x(), this._y = this.y(), this._makeRangeMask() } _stack() { const e = this.chart; if (e) { const t = e.series.indexOf(this); if (this._couldStackTo = [], t > 0) { let s; for (let r = t - 1; r >= 0 && (s = e.series.getIndex(r), !(s.get("xAxis") === this.get("xAxis") && s.get("yAxis") === this.get("yAxis") && s.className === this.className && (this._couldStackTo.push(s), !s.get("stacked")))); r--); } this._stackDataItems() } } _unstack() { it(this._reallyStackedTo, (e, t) => { delete t._stackedSeries[this.uid] }), this._reallyStackedTo = {}, te(this.dataItems, e => { e.setRaw("stackToItemY", void 0), e.setRaw("stackToItemX", void 0) }) } _handleRemoved() { const e = this.get("xAxis"); e && e._handleSeriesRemoved(); const t = this.get("yAxis"); t && t._handleSeriesRemoved() } _stackDataItems() { const e = this.get("baseAxis"), t = this.get("xAxis"), s = this.get("yAxis"); let r, o; e === t ? (r = "valueY", o = "stackToItemY") : e === s && (r = "valueX", o = "stackToItemX"); let u = this._couldStackTo.length, d = 0; const f = this.get("stackToNegative"); this._reallyStackedTo = {}, te(this.dataItems, m => { for (let p = 0; p < u; p++) { let g = this._couldStackTo[p], y = g.dataItems[d], b = m.get(r); if (y) { let v = y.get(r); if (f) if (le(b)) { if (le(v)) { if (p == u - 1 && m.setRaw(o, void 0), b >= 0 && v >= 0) { m.setRaw(o, y), this._reallyStackedTo[g.uid] = g, g._stackedSeries[this.uid] = this; break } if (b < 0 && v < 0) { m.setRaw(o, y), this._reallyStackedTo[g.uid] = g, g._stackedSeries[this.uid] = this; break } } } else break; else if (le(b) && le(v)) { m.setRaw(o, y), this._reallyStackedTo[g.uid] = g, g._stackedSeries[this.uid] = this; break } } } d++ }) } processXSelectionDataItem(e, t, s) { te(this.__valueXShowFields, r => { let o = e.get(r); o != null && (s && (o += this.getStackedXValueWorking(e, r)), this._min("selectionMinX", o), this._max("selectionMaxX", o * t)) }) } processYSelectionDataItem(e, t, s) { te(this.__valueYShowFields, r => { let o = e.get(r); o != null && (s && (o += this.getStackedYValueWorking(e, r)), this._min("selectionMinY", o), this._max("selectionMaxY", o * t)) }) } getStackedYValueWorking(e, t) { const s = e.get("stackToItemY"); if (s) { const r = s.component; return s.get(t, 0) * r.get("vcy", 1) + this.getStackedYValueWorking(s, t) } return 0 } getStackedXValueWorking(e, t) { const s = e.get("stackToItemX"); if (s) { const r = s.component; return s.get(t, 0) * r.get("vcx", 1) + this.getStackedXValueWorking(s, t) } return 0 } getStackedYValue(e, t) { const s = e.get("stackToItemY"); return s ? s.get(t, 0) + this.getStackedYValue(s, t) : 0 } getStackedXValue(e, t) { const s = e.get("stackToItemX"); return s ? s.get(t, 0) + this.getStackedXValue(s, t) : 0 } createLegendMarker(e) { this.updateLegendMarker() } _markDirtyAxes() { this._axesDirty = !0, this.markDirty() } _markDataSetDirty() { this._afterDataChange(), this._valuesDirty = !0, this._dataProcessed = !1, this._aggregatesCalculated = !1, this.markDirty() } _clearDirty() { super._clearDirty(), this._axesDirty = !1, this._selectionProcessed = !1, this._stackDirty = !1, this._dataProcessed = !1 } _positionBullet(e) { let t = e.get("sprite"); if (t) { let s = t.dataItem, r = e.get("locationX", s.get("locationX", .5)), o = e.get("locationY", s.get("locationY", .5)), u = this.get("xAxis"), d = this.get("yAxis"), f = this.get("exactLocationX", !1), m = this.get("exactLocationY", !1), p = u.getDataItemPositionX(s, this._xField, r, this.get("vcx", 1), f), g = d.getDataItemPositionY(s, this._yField, o, this.get("vcy", 1), m), y = this.getPoint(p, g), b = s.get("left", y.x), v = s.get("right", y.x), k = s.get("top", y.y), j = s.get("bottom", y.y), S = 0, w = 0, N = v - b, T = j - k; if (this._shouldShowBullet(p, g)) { t.setPrivate("visible", !e.getPrivate("hidden")); let R = e.get("field"); const P = this.get("baseAxis"), O = this.get("xAxis"), z = this.get("yAxis"); if (R != null) { let B; P == O ? (R == "value" ? B = this._yField : R == "open" ? B = this._yOpenField : R == "high" ? B = this._yHighField : R == "low" && (B = this._yLowField), B && (g = z.getDataItemPositionY(s, B, 0, this.get("vcy", 1), m), y = this._yRenderer.positionToPoint(g), w = y.y, S = b + N * r)) : (R == "value" ? B = this._xField : R == "open" ? B = this._xOpenField : R == "high" ? B = this._xHighField : R == "low" && (B = this._xLowField), B && (p = O.getDataItemPositionX(s, B, 0, this.get("vcx", 1), f), y = this._xRenderer.positionToPoint(p), S = y.x, w = j - T * o)) } else S = b + N * r, w = j - T * o; const F = e.get("stacked"); if (F) { const B = this.chart; if (P == O) { let A = this._bullets[p + "_" + g]; if (A) { let L = A.bounds(), M = t.localBounds(), X = w; w = L.top, F == "down" ? w = L.bottom - M.top : F == "auto" ? B && (X < B.plotContainer.height() / 2 ? w = L.bottom - M.top : w += M.bottom) : w += M.bottom } this._bullets[p + "_" + g] = t } else { let A = this._bullets[p + "_" + g]; if (A) { let L = A.bounds(), M = t.localBounds(), X = S; S = L.right, F == "down" ? S = L.left - M.right : F == "auto" ? B && (X < B.plotContainer.width() / 2 ? S = L.left - M.right : S -= M.left) : S -= M.left } this._bullets[p + "_" + g] = t } } t.isType("Label") && (t.setPrivate("maxWidth", Math.abs(N)), t.setPrivate("maxHeight", Math.abs(T))), t.setAll({ x: S, y: w }) } else t.setPrivate("visible", !1) } } _shouldShowBullet(e, t) { return this._showBullets } setDataSet(e) { if (this._dataSets[e]) { this._handleDataSetChange(), this._dataItems = this._dataSets[e], this._markDataSetDirty(), this._dataSetId = e; const t = "datasetchanged"; this.events.isEnabled(t) && this.events.dispatch(t, { type: t, target: this, id: e }) } } resetGrouping() { it(this._dataSets, (e, t) => { t != this._mainDataItems && te(t, s => { s.dispose() }) }), this._dataSets = {}, this._dataItems = this.mainDataItems } _handleDataSetChange() { te(this._dataItems, e => { let t = e.bullets; t && te(t, s => { if (s) { let r = s.get("sprite"); r && r.setPrivate("visible", !1) } }) }), this._selectionProcessed = !1 } show(e) { const t = Object.create(null, { show: { get: () => super.show } }); return Mt(this, void 0, void 0, function* () { this._fixVC(); let s = []; s.push(t.show.call(this, e).then(() => { this._isShowing = !1; let r = this.get("xAxis"), o = this.get("yAxis"), u = this.get("baseAxis"); o !== u && o.markDirtySelectionExtremes(), r !== u && r.markDirtySelectionExtremes() })), s.push(this.bulletsContainer.show(e)), s.push(this._sequencedShowHide(!0, e)), yield Promise.all(s) }) } hide(e) { const t = Object.create(null, { hide: { get: () => super.hide } }); return Mt(this, void 0, void 0, function* () { this._fixVC(); let s = []; s.push(t.hide.call(this, e).then(() => { this._isHiding = !1 })), s.push(this.bulletsContainer.hide(e)), s.push(this._sequencedShowHide(!1, e)), yield Promise.all(s) }) } showDataItem(e, t) { const s = Object.create(null, { showDataItem: { get: () => super.showDataItem } }); return Mt(this, void 0, void 0, function* () { const r = [s.showDataItem.call(this, e, t)]; le(t) || (t = this.get("stateAnimationDuration", 0)); const o = this.get("stateAnimationEasing"); te(this._valueFields, u => { r.push(e.animate({ key: u + "Working", to: e.get(u), duration: t, easing: o }).waitForStop()) }), yield Promise.all(r) }) } hideDataItem(e, t) { const s = Object.create(null, { hideDataItem: { get: () => super.hideDataItem } }); return Mt(this, void 0, void 0, function* () { const r = [s.hideDataItem.call(this, e, t)]; let o = this.states.lookup("hidden"); o || (o = this.states.create("hidden", {})), le(t) || (t = o.get("stateAnimationDuration", this.get("stateAnimationDuration", 0))); const u = o.get("stateAnimationEasing", this.get("stateAnimationEasing")), d = this.get("xAxis"), f = this.get("yAxis"), m = this.get("baseAxis"), p = this.get("stacked"); if ((m === d || !m) && te(this._valueYFields, g => { let y = f.getPrivate("min"), b = f.baseValue(); le(y) && y > b && (b = y), p && (b = 0), e.get(g) != null && r.push(e.animate({ key: g + "Working", to: b, duration: t, easing: u }).waitForStop()) }), m === f || !m) { let g = d.getPrivate("min"), y = d.baseValue(); le(g) && g > y && (y = g), p && (y = 0), te(this._valueXFields, b => { e.get(b) != null && r.push(e.animate({ key: b + "Working", to: y, duration: t, easing: u }).waitForStop()) }) } yield Promise.all(r) }) } _markDirtyStack() { this._stackDirty = !0, this.markDirty(), this._markStakedDirtyStack() } _markStakedDirtyStack() { const e = this._stackedSeries; e && it(e, (t, s) => { s._stackDirty || s._markDirtyStack() }) } _afterChanged() { super._afterChanged(), this._skipped && (this._markDirtyAxes(), this._skipped = !1) } showDataItemTooltip(e) { this.getPrivate("doNotUpdateLegend") || (this.updateLegendMarker(e), this.updateLegendValue(e)); const t = this.get("tooltip"), s = this.get("exactLocationX", !1), r = this.get("exactLocationY", !1); if (t) if (!this.isHidden() && this.get("visible")) { if (t._setDataItem(e), e) { let o = this.get("locationX", 0), u = this.get("locationY", 1), d = e.get("locationX", o), f = e.get("locationY", u); const m = this.get("xAxis"), p = this.get("yAxis"), g = this.get("vcx", 1), y = this.get("vcy", 1), b = m.getDataItemPositionX(e, this._tooltipFieldX, this._aLocationX0 + (this._aLocationX1 - this._aLocationX0) * d, g, s), v = p.getDataItemPositionY(e, this._tooltipFieldY, this._aLocationY0 + (this._aLocationY1 - this._aLocationY0) * f, y, r), k = this.getPoint(b, v); let j = !0; if (te(this._valueFields, S => { e.get(S) == null && (j = !1) }), j) { const S = this.chart; S && S.inPlot(k) ? (t.label.text.markDirtyText(), t.set("tooltipTarget", this._getTooltipTarget(e)), t.set("pointTo", this._display.toGlobal({ x: k.x, y: k.y }))) : t._setDataItem(void 0) } else t._setDataItem(void 0) } } else this.hideTooltip() } hideTooltip() { const e = this.get("tooltip"); return e && e.set("tooltipTarget", this), super.hideTooltip() } _getTooltipTarget(e) { if (this.get("seriesTooltipTarget") == "bullet") { const t = e.bullets; if (t && t.length > 0) { const r = t[0].get("sprite"); if (r) return r } } return this } updateLegendValue(e) { const t = this.get("legendDataItem"); if (t) { const s = t.get("label"); if (s) { let o = ""; e ? (s._setDataItem(e), o = this.get("legendLabelText", s.get("text", this.get("name", "")))) : (s._setDataItem(this._emptyDataItem), o = this.get("legendRangeLabelText", this.get("legendLabelText", s.get("text", this.get("name", ""))))), s.set("text", o) } const r = t.get("valueLabel"); if (r) { let o = ""; e ? (r._setDataItem(e), o = this.get("legendValueText", r.get("text", ""))) : (r._setDataItem(this._emptyDataItem), o = this.get("legendRangeValueText", r.get("text", ""))), r.set("text", o) } } } _getItemReaderLabel() { let e = "X: {" + this._xField; return this.get("xAxis").isType("DateAxis") && (e += ".formatDate()"), e += "}; Y: {" + this._yField, this.get("yAxis").isType("DateAxis") && (e += ".formatDate()"), e += "}", e } getPoint(e, t) { let s = this._xRenderer.positionToCoordinate(e), r = this._yRenderer.positionToCoordinate(t), o = 999999999; return r < -o ? r = -o : r > o && (r = o), s < -o ? s = -o : s > o && (s = o), { x: s, y: r } } _shouldInclude(e) { return !0 } handleCursorHide() { this.hideTooltip(), this.updateLegendValue(void 0), this.updateLegendMarker(void 0) } _afterDataChange() { super._afterDataChange(), this.get("xAxis")._markDirtyKey("start"), this.get("yAxis")._markDirtyKey("start"), this.resetExtremes() } resetExtremes() { this.setPrivate("selectionMinX", void 0), this.setPrivate("selectionMaxX", void 0), this.setPrivate("selectionMinY", void 0), this.setPrivate("selectionMaxY", void 0), this.setPrivate("minX", void 0), this.setPrivate("minY", void 0), this.setPrivate("maxX", void 0), this.setPrivate("maxY", void 0) } createAxisRange(e) { return this.axisRanges.push({ axisDataItem: e }) } get mainDataItems() { return this._mainDataItems } _adjustStartIndex(e) { const t = this.get("xAxis"); if (this.get("baseAxis") == t && t.isType("DateAxis")) { const r = t.baseDuration(), o = t.getPrivate("selectionMin", t.getPrivate("min", 0)), u = r * this.get("locationX", .5); let d = -1 / 0; for (; d < o;) { const f = this.dataItems[e]; if (f) { const m = f.open; if (m ? d = m.valueX : d = f.get("valueX", 0), d += u, d < o) e++; else break } else break } } return e } } Object.defineProperty(kn, "className", { enumerable: !0, configurable: !0, writable: !0, value: "XYSeries" }); Object.defineProperty(kn, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: na.classNames.concat([kn.className]) }); class Sn extends kn { constructor() { super(...arguments), Object.defineProperty(this, "_ph", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_pw", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_columnsUpdated", { enumerable: !0, configurable: !0, writable: !0, value: !1 }) } _makeGraphics(e, t) { return this.makeColumn(t, e) } _makeFieldNames() { super._makeFieldNames(); const e = this.get("xAxis"), t = this.get("yAxis"), s = "CategoryAxis", r = "ValueAxis"; e.isType(s) && (this.get("openCategoryXField") || (this._xOpenField = this._xField)), e.isType(r) && (this.get("openValueXField") || (this._xOpenField = this._xField)), t.isType(s) && (this.get("openCategoryYField") || (this._yOpenField = this._yField)), t.isType(r) && (this.get("openValueYField") || (this._yOpenField = this._yField)) } _prepareChildren() { super._prepareChildren(); const e = this.get("xAxis"), t = this.get("yAxis"), s = this.dataItems.length, r = Math.max(0, this.startIndex() - 2), o = Math.min(this.endIndex() + 2, s - 1); if (e.inited && t.inited) for (let u = r; u <= o; u++) { let d = this.dataItems[u]; this._createGraphics(d) } } _updateChildren() { const e = this.chart; e && (this._ph = e.plotContainer.height(), this._pw = e.plotContainer.width()); const t = this.get("xAxis"), s = this.get("yAxis"), r = this.get("baseAxis"), o = this.columns.template; this.isDirty("fill") && o.get("fill") == null && o.set("fill", this.get("fill")), this.isDirty("fillPattern") && o.get("fillPattern") == null && o.set("fillPattern", this.get("fillPattern")), this.isDirty("stroke") && o.get("stroke") == null && o.set("stroke", this.get("stroke")); let u = 0, d = 0, f = 0; r && te(r.series, k => { if (k instanceof Sn) { const j = k.get("stacked"); j && f == 0 && d++, !j && k.get("clustered") && d++ } k === this && (u = d - 1), f++ }), this.get("clustered") || (u = 0, d = 1), d === 0 && (d = 1, u = 0); const m = "cellStartLocation", p = "cellEndLocation", g = this._xRenderer.get(m, 0), y = this._xRenderer.get(p, 1), b = this._yRenderer.get(m, 0), v = this._yRenderer.get(p, 1); if (this._aLocationX0 = g + u / d * (y - g), this._aLocationX1 = g + (u + 1) / d * (y - g), this._aLocationY0 = b + u / d * (v - b), this._aLocationY1 = b + (u + 1) / d * (v - b), t.inited && s.inited) { if (this._axesDirty || this._valuesDirty || this._stackDirty || this.isDirty("vcx") || this.isDirty("vcy") || this._sizeDirty) { const k = this.dataItems.length; let j = Math.max(0, this.startIndex() - 2), S = Math.min(this.endIndex() + 2, k - 1); for (let T = 0; T < j; T++)this._toggleColumn(this.dataItems[T], !1); let w = this.dataItems[j]; for (let T = j; T <= S; T++) { let R = this.dataItems[T]; if (R.get("valueX") != null && R.get("valueY") != null) { if (w = R, T > 0 && j > 0) for (let P = T - 1; P >= 0; P--) { let O = this.dataItems[P]; if (O.get("valueX") != null && O.get("valueY") != null) { w = O; break } } break } else this._toggleColumn(R, !1) } this._beforeColumnsDraw(); let N = 0; s.isType("CategoryAxis") && t.isType("CategoryAxis") ? N = 2 : t === r ? N = 0 : s === r && (N = 1); for (let T = j; T <= S; T++) { let R = this.dataItems[T]; this._updateGraphics(R, w, N), R.get("valueX") != null && R.get("valueY") != null && (w = R) } this._afterColumnsDraw(); for (let T = S + 1; T < k; T++)this._toggleColumn(this.dataItems[T], !1); this._columnsUpdated = !0 } } else this._skipped = !0; this.getPrivate("doNotUpdateLegend") || this.updateLegendMarker(this.get("tooltipDataItem")), super._updateChildren() } _afterChanged() { super._afterChanged(), this._columnsUpdated = !1 } _beforeColumnsDraw() { } _afterColumnsDraw() { } _createGraphics(e) { let t = e.get("graphics"); if (!t) { t = this._makeGraphics(this.columns, e), e.set("graphics", t), t._setDataItem(e); const s = e.get("legendDataItem"); if (s) { const o = s.get("markerRectangle"); if (o) { const u = o.states.lookup("default"); te(Vf, d => { const f = t.get(d, this.get(d)); o.set(d, f), u.set(d, f) }) } } let r = e.get("rangeGraphics"); r && te(r, o => { o.dispose() }), r = [], e.setRaw("rangeGraphics", r), this.axisRanges.each(o => { const u = o.container, d = this._makeGraphics(o.columns, e); r && r.push(d), d.setPrivate("list", o.columns), u.children.push(d) }) } } createAxisRange(e) { return te(this.dataItems, t => { const s = t.get("graphics"); s && (s.dispose(), t.set("graphics", void 0)) }), super.createAxisRange(e) } _updateGraphics(e, t, s) { let r = e.get("graphics"); const o = this._xField, u = this._yField, d = e.get(o), f = e.get(u), m = this.get("exactLocationX", !1); if (d != null && f != null) { const p = this._xOpenField, g = this._yOpenField, y = this.get("locationX", e.get("locationX", .5)), b = this.get("locationY", e.get("locationY", .5)), v = this.get("openLocationX", e.get("openLocationX", y)), k = this.get("openLocationY", e.get("openLocationY", b)), j = r.get("width"), S = r.get("height"), w = this.get("stacked"), N = this.get("xAxis"), T = this.get("yAxis"), R = N.get("start"), P = N.get("end"), O = T.get("start"), z = T.get("end"); let F, B, A, L, M = this.get("vcy", 1), X = this.get("vcx", 1), U = !1, I = !1; if (s == 0) { let Y = this._aLocationX0 + v - .5, ee = this._aLocationX1 + y - .5; if (j instanceof Ie) { let fe = (ee - Y) * (1 - j.value) / 2; Y += fe, ee -= fe } if (F = N.getDataItemPositionX(e, p, Y, X, m), B = N.getDataItemPositionX(e, o, ee, X, m), A = T.getDataItemPositionY(e, u, b, M), this._yOpenField !== this._yField) L = T.getDataItemPositionY(e, g, k, M); else if (w) { let fe = e.get("stackToItemY"); fe ? L = T.getDataItemPositionY(fe, u, k, fe.component.get("vcy")) : L = T.basePosition() } else L = T.basePosition(); e.setRaw("point", { x: F + (B - F) / 2, y: A }), I = !0 } else if (s == 1) { let Y = this._aLocationY0 + k - .5, ee = this._aLocationY1 + b - .5; if (S instanceof Ie) { let fe = (ee - Y) * (1 - S.value) / 2; Y += fe, ee -= fe } if (A = T.getDataItemPositionY(e, g, Y, M), L = T.getDataItemPositionY(e, u, ee, M), B = N.getDataItemPositionX(e, o, y, X, m), this._xOpenField !== this._xField) F = N.getDataItemPositionX(e, p, v, X, m); else if (w) { let fe = e.get("stackToItemX"); fe ? F = N.getDataItemPositionX(fe, o, v, fe.component.get("vcx"), m) : F = N.basePosition() } else F = N.basePosition(); U = !0, e.setRaw("point", { x: B, y: A + (L - A) / 2 }) } else if (s == 2) { let Y = this._aLocationX0 + v - .5, ee = this._aLocationX1 + y - .5; if (j instanceof Ie) { let fe = (ee - Y) * (1 - j.value) / 2; Y += fe, ee -= fe } if (F = N.getDataItemPositionX(e, p, Y, X), B = N.getDataItemPositionX(e, o, ee, X), Y = this._aLocationY0 + k - .5, ee = this._aLocationY1 + b - .5, S instanceof Ie) { let fe = (ee - Y) * (1 - S.value) / 2; Y += fe, ee -= fe } A = T.getDataItemPositionY(e, g, Y, M), L = T.getDataItemPositionY(e, u, ee, M), e.setRaw("point", { x: F + (B - F) / 2, y: A + (L - A) / 2 }) } this._applyGraphicsStates(e, t), this._updateSeriesGraphics(e, r, F, B, A, L, U, I), F < R && B < R || F > P && B > P || A < O && L <= O || A >= z && L > z || Ps(F) || Ps(A) ? this._toggleColumn(e, !1) : this._toggleColumn(e, !0); let H = e.get("rangeGraphics"); H && te(H, Y => { this._updateSeriesGraphics(e, Y, F, B, A, L, U, I) }) } else this._toggleColumn(e, !1) } _updateSeriesGraphics(e, t, s, r, o, u, d, f) { const m = t.get("width"), p = t.get("height"), g = t.get("maxWidth"), y = t.get("maxHeight"), b = this.getPoint(s, o), v = this.getPoint(r, u), k = e.get("point"); if (k) { const j = this.getPoint(k.x, k.y); k.x = j.x + this._x, k.y = j.y + this._y } if (s = b.x, r = v.x, o = b.y, u = v.y, le(m)) { const j = (r - s - m) / 2; s += j, r -= j } if (le(g) && g < Math.abs(r - s)) { const j = (r - s - g) / 2; s += j, r -= j } if (le(p)) { const j = (u - o - p) / 2; o += j, u -= j } if (le(y) && y < Math.abs(u - o)) { const j = (u - o - y) / 2; o += j, u -= j } this.get("adjustBulletPosition") && (d && (r = Math.min(Math.max(0, r), this._pw), s = Math.min(Math.max(0, s), this._pw)), f && (o = Math.min(Math.max(0, o), this._ph), u = Math.min(Math.max(0, u), this._ph))), e.setRaw("left", s), e.setRaw("right", r), e.setRaw("top", o), e.setRaw("bottom", u), t.setPrivate("width", r - s), t.setPrivate("height", u - o), t.set("x", s), t.set("y", u - (u - o)) } _handleDataSetChange() { super._handleDataSetChange(), te(this._dataItems, e => { this._toggleColumn(e, !1) }) } _applyGraphicsStates(e, t) { const s = e.get("graphics"), r = s.states.lookup("dropFromOpen"), o = s.states.lookup("riseFromOpen"), u = s.states.lookup("dropFromPrevious"), d = s.states.lookup("riseFromPrevious"); if (r || u || o || d) { const f = this.get("xAxis"), m = this.get("yAxis"), p = this.get("baseAxis"); let g, y, b; p === f && m.isType("ValueAxis") ? (g = e.get(this._yOpenField), y = e.get(this._yField), b = t.get(this._yField)) : p === m && f.isType("ValueAxis") && (g = e.get(this._xOpenField), y = e.get(this._xField), b = t.get(this._xField)), le(g) && le(y) && (y < g ? r && r.apply() : o && o.apply(), le(b) && (y < b ? u && u.apply() : d && d.apply())) } } disposeDataItem(e) { super.disposeDataItem(e); const t = e.get("graphics"); t && (this.columns.removeValue(t), t.dispose()); const s = e.get("rangeGraphics"); s && te(s, r => { const o = r.getPrivate("list"); o && o.removeValue(r), r.dispose() }) } hideDataItem(e, t) { const s = Object.create(null, { hideDataItem: { get: () => super.hideDataItem } }); return Mt(this, void 0, void 0, function* () { const r = [s.hideDataItem.call(this, e, t)], o = e.get("graphics"); o && r.push(o.hide(t)); const u = e.get("rangeGraphics"); u && te(u, d => { r.push(d.hide(t)) }), yield Promise.all(r) }) } _toggleColumn(e, t) { const s = e.get("graphics"); s && s.setPrivate("visible", t); const r = e.get("rangeGraphics"); r && te(r, u => { u.setPrivate("visible", t) }); const o = e.bullets; o && te(o, u => { u.setPrivate("hidden", !t) }) } showDataItem(e, t) { const s = Object.create(null, { showDataItem: { get: () => super.showDataItem } }); return Mt(this, void 0, void 0, function* () { const r = [s.showDataItem.call(this, e, t)], o = e.get("graphics"); o && r.push(o.show(t)); const u = e.get("rangeGraphics"); u && te(u, d => { r.push(d.show(t)) }), yield Promise.all(r) }) } updateLegendMarker(e) { let t = this.get("legendDataItem"); if (this.get("useLastColorForLegendMarker") && !e) { const s = this.dataItems[this.endIndex() - 1]; s && (e = s) } if (t) { let s = this.columns.template; if (e) { let o = e.get("graphics"); o && (s = o) } const r = t.get("markerRectangle"); if (r && !t.get("itemContainer").get("disabled")) { const o = r.states.lookup("default"); te(Vf, u => { const d = s.get(u, this.get(u)); r.set(u, d), o.set(u, d) }) } } } _getTooltipTarget(e) { if (this.get("seriesTooltipTarget") == "bullet") return super._getTooltipTarget(e); let t = e.get("graphics"); return t || this } } Object.defineProperty(Sn, "className", { enumerable: !0, configurable: !0, writable: !0, value: "BaseColumnSeries" }); Object.defineProperty(Sn, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: kn.classNames.concat([Sn.className]) }); class Nn extends _n { constructor() { super(...arguments), Object.defineProperty(this, "_series", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_isPanning", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "minorDataItems", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "labelsContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.children.push(ze.new(this._root, {})) }), Object.defineProperty(this, "gridContainer", { enumerable: !0, configurable: !0, writable: !0, value: ze.new(this._root, { width: Te, height: Te }) }), Object.defineProperty(this, "topGridContainer", { enumerable: !0, configurable: !0, writable: !0, value: ze.new(this._root, { width: Te, height: Te }) }), Object.defineProperty(this, "bulletsContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.children.push(ze.new(this._root, { isMeasured: !1, width: Te, height: Te, position: "absolute" })) }), Object.defineProperty(this, "chart", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_rangesDirty", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_panStart", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_panEnd", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), Object.defineProperty(this, "_sAnimation", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_eAnimation", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_skipSync", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "axisRanges", { enumerable: !0, configurable: !0, writable: !0, value: new Hr }), Object.defineProperty(this, "_seriesAxisRanges", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "ghostLabel", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_cursorPosition", { enumerable: !0, configurable: !0, writable: !0, value: -1 }), Object.defineProperty(this, "_snapToSeries", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_seriesValuesDirty", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_seriesAdded", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "axisHeader", { enumerable: !0, configurable: !0, writable: !0, value: this.children.push(ze.new(this._root, { themeTags: ["axis", "header"], position: "absolute", background: Gi.new(this._root, { themeTags: ["header", "background"], fill: this._root.interfaceColors.get("background") }) })) }), Object.defineProperty(this, "_bullets", { enumerable: !0, configurable: !0, writable: !0, value: {} }) } _dispose() { this.gridContainer.dispose(), this.topGridContainer.dispose(), this.bulletsContainer.dispose(), this.labelsContainer.dispose(), this.axisHeader.dispose(), super._dispose() } _afterNew() { super._afterNew(), this.setPrivate("updateScrollbar", !0), this._disposers.push(this.axisRanges.events.onAll(t => { if (t.type === "clear") te(t.oldValues, s => { s.dispose() }); else if (t.type === "push") this._processAxisRange(t.newValue, ["range"]); else if (t.type === "setIndex") this._processAxisRange(t.newValue, ["range"]); else if (t.type === "insertIndex") this._processAxisRange(t.newValue, ["range"]); else if (t.type === "removeIndex") this.disposeDataItem(t.oldValue); else if (t.type === "moveIndex") this._processAxisRange(t.value, ["range"]); else throw new Error("Unknown IStreamEvent type") })); const e = this.get("renderer"); e && (e.axis = this, e.processAxis()), this.children.push(e), this._createGhostLabel() } _createGhostLabel() { const t = this.get("renderer").makeLabel(new La(this, void 0, {}), []); t.adapters.disable("text"), t.setAll({ opacity: 0, tooltipText: void 0, tooltipHTML: void 0, interactive: !1 }), t.events.disable(), this.ghostLabel = t } _updateFinals(e, t) { } zoom(e, t, s, r) { if (this.get("zoomable", !0)) if (this._updateFinals(e, t), this.get("start") !== e || this.get("end") != t) { let o = this._sAnimation, u = this._eAnimation; e > t && ([e, t] = [t, e]); let d = this.get("maxDeviation", .5) * Math.min(1, t - e); e < -d && (e = -d), t > 1 + d && (t = 1 + d); let f = this.getPrivate("maxZoomFactor", this.get("maxZoomFactor", 100)), m = f; le(s) || (s = this.get("interpolationDuration", 0)), r || (r = "end"), t === 1 && e !== 0 && (e < this.get("start", 0) ? r = "start" : r = "end"), e === 0 && t !== 1 && (t > this.get("end", 1) ? r = "end" : r = "start"); let p = this.get("minZoomCount", 0); const g = this.dataItems; g && g.length < p && (p = g.length); let y = this.get("maxZoomCount", 1 / 0); le(p) && (f = m / p); let b = 1; if (le(y) && (b = m / y), e > t && ([e, t] = [t, e]), r === "start" ? (y > 0 && 1 / (t - e) < b && (t = e + 1 / b), 1 / (t - e) > f && (t = e + 1 / f), t > 1 && t - e < 1 / f && (e = t - 1 / f)) : (y > 0 && 1 / (t - e) < b && (e = t - 1 / b), 1 / (t - e) > f && (e = t - 1 / f), e < 0 && t - e < 1 / f && (t = e + 1 / f)), 1 / (t - e) > f && (t = e + 1 / f), 1 / (t - e) > f && (e = t - 1 / f), y != null && p != null && e == this.get("start") && t == this.get("end")) { const v = this.chart; v && v._handleAxisSelection(this, !0) } if ((o && o.playing && o.to == e || this.get("start") == e) && (u && u.playing && u.to == t || this.get("end") == t)) return; if (s > 0) { let v = this.get("interpolationEasing"), k, j; if (this.get("start") != e && (k = this.animate({ key: "start", to: e, duration: s, easing: v })), this.get("end") != t && (j = this.animate({ key: "end", to: t, duration: s, easing: v })), this._sAnimation = k, this._eAnimation = j, k) return k; if (j) return j } else this.set("start", e), this.set("end", t), this.root.events.once("frameended", () => { this.markDirtyKey("start") }) } else this._sAnimation && this._sAnimation.stop(), this._eAnimation && this._eAnimation.stop() } get series() { return this._series } _processAxisRange(e, t) { e.setRaw("isRange", !0), this._createAssets(e, t), this._rangesDirty = !0, this._prepareDataItem(e); const s = e.get("above"), r = this.topGridContainer, o = e.get("grid"); s && o && r.children.moveValue(o); const u = e.get("axisFill"); s && u && r.children.moveValue(u) } _prepareDataItem(e, t) { } markDirtyExtremes() { } markDirtySelectionExtremes() { } _calculateTotals() { } _updateAxisRanges() { this._bullets = {}, this.axisRanges.each(e => { this._prepareDataItem(e) }), te(this._seriesAxisRanges, e => { this._prepareDataItem(e) }) } _prepareChildren() { super._prepareChildren(); const e = this.ghostLabel; if (e && (this.get("fixAxisSize") ? e.set("visible", !0) : e.set("visible", !1)), this.isDirty("start") || this.isDirty("end")) { const s = this.chart; s && s._updateCursor(); let r = this.get("start", 0), o = this.get("end", 1), u = this.get("maxDeviation", .5) * Math.min(1, o - r); if (r < -u) { let d = r + u; r = -u, this.setRaw("start", r), this.isDirty("end") && this.setRaw("end", o - d) } if (o > 1 + u) { let d = o - 1 - u; o = 1 + u, this.setRaw("end", o), this.isDirty("start") && this.setRaw("start", r - d) } } const t = this.get("renderer"); if (t._start = this.get("start"), t._end = this.get("end"), t._inversed = t.get("inversed", !1), t._axisLength = t.axisLength() / (t._end - t._start), t._updateLC(), this.isDirty("tooltip")) { const s = this.get("tooltip"); if (s) { const r = t.get("themeTags"); s.addTag("axis"), s.addTag(this.className.toLowerCase()), s._applyThemes(), r && (s.set("themeTags", Ve(s.get("themeTags"), r)), s.label._applyThemes()) } } } _updateTooltipBounds() { const e = this.get("tooltip"); e && this.get("renderer").updateTooltipBounds(e) } _updateBounds() { super._updateBounds(), this._updateTooltipBounds() } processChart(e) { this.chart = e; const t = this.get("renderer"); t.chart = e, e.gridContainer.children.push(this.gridContainer), e.topGridContainer.children.push(this.topGridContainer), e.axisHeadersContainer.children.push(this.axisHeader), this.on("start", () => { e._handleAxisSelection(this) }), this.on("end", () => { e._handleAxisSelection(this) }), e.plotContainer.onPrivate("width", () => { this.markDirtySize() }), e.plotContainer.onPrivate("height", () => { this.markDirtySize() }), e.processAxis(this) } hideDataItem(e) { return this._toggleFHDataItem(e, !0), super.hideDataItem(e) } showDataItem(e) { return this._toggleFHDataItem(e, !1), super.showDataItem(e) } _toggleFHDataItem(e, t) { const s = "forceHidden", r = e.get("label"); r && r.set(s, t); const o = e.get("grid"); o && o.set(s, t); const u = e.get("tick"); u && u.set(s, t); const d = e.get("axisFill"); d && d.set(s, t); const f = e.get("bullet"); if (f) { const m = f.get("sprite"); m && m.set(s, t) } } _toggleDataItem(e, t) { const s = e.get("label"), r = "visible"; s && s.setPrivate(r, t); const o = e.get("grid"); o && o.setPrivate(r, t); const u = e.get("tick"); u && u.setPrivate(r, t); const d = e.get("axisFill"); d && d.setPrivate(r, t); const f = e.get("bullet"); if (f) { const m = f.get("sprite"); m && m.setPrivate(r, t) } } _createAssets(e, t, s) { var r, o, u; const d = this.get("renderer"); let f = "minor"; const m = e.get("label"); if (!m) d.makeLabel(e, t); else { let y = m.get("themeTags"), b = !1; s ? y?.indexOf(f) == -1 && (b = !0) : y?.indexOf(f) != -1 && (b = !0), b && ((r = m.parent) === null || r === void 0 || r.children.removeValue(m), d.makeLabel(e, t), m.dispose(), d.labels.removeValue(m)) } const p = e.get("grid"); if (!p) d.makeGrid(e, t); else { let y = p.get("themeTags"), b = !1; s ? y?.indexOf(f) == -1 && (b = !0) : y?.indexOf(f) != -1 && (b = !0), b && ((o = p.parent) === null || o === void 0 || o.children.removeValue(p), d.makeGrid(e, t), p.dispose(), d.grid.removeValue(p)) } const g = e.get("tick"); if (!g) d.makeTick(e, t); else { let y = !1, b = g.get("themeTags"); s ? b?.indexOf(f) == -1 && (y = !0) : b?.indexOf(f) != -1 && (y = !0), y && ((u = g.parent) === null || u === void 0 || u.children.removeValue(g), d.makeTick(e, t), g.dispose(), d.ticks.removeValue(g)) } (!s && !e.get("axisFill") || s && !e.get("axisFill") && this.get("minorAxisFillsEnabled")) && d.makeAxisFill(e, t), this._processBullet(e) } _processBullet(e) { let t = e.get("bullet"), s = this.get("bullet"); if (!t && s && !e.get("isRange") && (t = s(this._root, this, e)), t) { t.axis = this; const r = t.get("sprite"); r && (r._setDataItem(e), e.setRaw("bullet", t), r.parent || this.bulletsContainer.children.push(r)) } } _afterChanged() { super._afterChanged(); const e = this.chart; e && (e._updateChartLayout(), e.axisHeadersContainer.markDirtySize()), this.get("renderer")._updatePositions(), this._seriesAdded = !1 } disposeDataItem(e) { super.disposeDataItem(e); const t = this.get("renderer"), s = e.get("label"); s && (t.labels.removeValue(s), s.dispose()); const r = e.get("tick"); r && (t.ticks.removeValue(r), r.dispose()); const o = e.get("grid"); o && (t.grid.removeValue(o), o.dispose()); const u = e.get("axisFill"); u && (t.axisFills.removeValue(u), u.dispose()); const d = e.get("bullet"); d && d.dispose() } _updateGhost() { this.setPrivate("cellWidth", this.getCellWidthPosition() * this.get("renderer").axisLength()); const e = this.ghostLabel; if (e) { if (!e.isHidden()) { const r = e.localBounds(), o = Math.ceil(r.right - r.left); let u = e.get("text"); te(this.dataItems, d => { const f = d.get("label"); if (f && !f.isHidden()) { const m = f.localBounds(); Math.ceil(m.right - m.left) > o && (u = f.text._getText()) } }), e.set("text", u) } let t = this.get("start", 0), s = this.get("end", 1); this.get("renderer").updateLabel(e, t + (s - t) * .5) } } _handleCursorPosition(e, t) { e = this.get("renderer").toAxisPosition(e), this._cursorPosition = e, this._snapToSeries = t, this.updateTooltip() } updateTooltip() { const e = this._snapToSeries; let t = this._cursorPosition; const s = this.get("tooltip"), r = this.get("renderer"); le(t) && (te(this.series, o => { if (o.get("baseAxis") === this) { const u = this.getSeriesItem(o, t, this.get("tooltipLocation")); e && e.indexOf(o) != -1 ? (o.updateLegendMarker(u), o.updateLegendValue(u), o._settings.tooltipDataItem = u) : (o.showDataItemTooltip(u), o.setRaw("tooltipDataItem", u)) } }), this.get("snapTooltip") && (t = this.roundAxisPosition(t, this.get("tooltipLocation", .5))), this.setPrivateRaw("tooltipPosition", t), s && (r.updateTooltipBounds(s), Ps(t) ? s.hide(0) : (this._updateTooltipText(s, t), r.positionTooltip(s, t), t < this.get("start", 0) || t > this.get("end", 1) ? s.hide(0) : s.show(0)))) } _updateTooltipText(e, t) { e.label.set("text", this.getTooltipText(t)) } roundAxisPosition(e, t) { return e } _handleSeriesRemoved() { } handleCursorShow() { let e = this.get("tooltip"); e && e.show() } handleCursorHide() { let e = this.get("tooltip"); e && e.hide() } processSeriesDataItem(e, t) { } _clearDirty() { super._clearDirty(), this._sizeDirty = !1, this._rangesDirty = !1 } coordinateToPosition(e) { const t = this.get("renderer"); return t.toAxisPosition(e / t.axisLength()) } toAxisPosition(e) { return this.get("renderer").toAxisPosition(e) } toGlobalPosition(e) { return this.get("renderer").toGlobalPosition(e) } fixPosition(e) { return this.get("renderer").fixPosition(e) } shouldGap(e, t, s, r) { return !1 } createAxisRange(e) { return this.axisRanges.push(e) } _groupSeriesData(e) { } getCellWidthPosition() { return .05 } } Object.defineProperty(Nn, "className", { enumerable: !0, configurable: !0, writable: !0, value: "Axis" }); Object.defineProperty(Nn, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: _n.classNames.concat([Nn.className]) }); class ra extends Nn { constructor() { super(...arguments), Object.defineProperty(this, "_dirtyExtremes", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_dirtySelectionExtremes", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_dseHandled", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_deltaMinMax", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), Object.defineProperty(this, "_minReal", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_maxReal", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_minRealLog", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_baseValue", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_syncDp", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_minLogAdjusted", { enumerable: !0, configurable: !0, writable: !0, value: 1 }) } markDirtyExtremes() { this._dirtyExtremes = !0, this.markDirty() } markDirtySelectionExtremes() { this._dirtySelectionExtremes = !0, this.markDirty() } _afterNew() { this._settings.themeTags = Ve(this._settings.themeTags, ["axis"]), this.setPrivateRaw("name", "value"), this.addTag("value"), super._afterNew() } _prepareChildren() { var e; if (super._prepareChildren(), this.isDirty("syncWithAxis")) { this._prevSettings.syncWithAxis && this._syncDp && this._syncDp.dispose(); let r = this.get("syncWithAxis"); r && (this._syncDp = new Di([r.onPrivate("selectionMinFinal", () => { this._dirtySelectionExtremes = !0 }), r.onPrivate("selectionMaxFinal", () => { this._dirtySelectionExtremes = !0 })])) } let t = !1; if ((this.isDirty("min") || this.isDirty("max") || this.isDirty("maxPrecision") || this.isDirty("numberFormat")) && (t = !0, (e = this.ghostLabel) === null || e === void 0 || e.set("text", "")), (this._sizeDirty || this._dirtyExtremes || this._valuesDirty || t || this.isPrivateDirty("width") || this.isPrivateDirty("height") || this.isDirty("extraMin") || this.isDirty("extraMax") || this.isDirty("logarithmic") || this.isDirty("treatZeroAs") || this.isDirty("baseValue") || this.isDirty("strictMinMax") || this.isDirty("strictMinMaxSelection")) && (this._getMinMax(), this._dirtyExtremes = !1), this._handleSizeDirty(), this._dirtySelectionExtremes && !this._isPanning && this.get("autoZoom", !0)) { const s = this.chart; let r = !1; if (s) { const o = this.get("renderer").getPrivate("letter"); o == "Y" ? s.xAxes.each(u => { u.className != "ValueAxis" && (r = !0) }) : o == "X" && s.yAxes.each(u => { u.className != "ValueAxis" && (r = !0) }) } r && this._getSelectionMinMax(), this._dirtySelectionExtremes = !1 } this._groupData(), (this._sizeDirty || this._valuesDirty || this.isDirty("start") || this.isDirty("end") || this.isPrivateDirty("min") || this.isPrivateDirty("selectionMax") || this.isPrivateDirty("selectionMin") || this.isPrivateDirty("max") || this.isPrivateDirty("step") || this.isPrivateDirty("width") || this.isPrivateDirty("height") || this.isDirty("logarithmic")) && (this._handleRangeChange(), this._prepareAxisItems(), this._updateAxisRanges()), this._baseValue = this.baseValue() } _handleSizeDirty() { this._sizeDirty && !this._dseHandled && (this._dirtySelectionExtremes = !0, this._dseHandled = !0, (this.getPrivate("selectionMinFinal") != this.getPrivate("selectionMin") || this.getPrivate("selectionMaxFinal") != this.getPrivate("selectionMax")) && (this._dirtySelectionExtremes = !1)) } _clearDirty() { super._clearDirty(), this._dseHandled = !1 } _groupData() { } _formatText(e) { const t = this.get("numberFormat"), s = this.getNumberFormatter(); let r = ""; return t ? r = s.format(e, t) : r = s.format(e, void 0, this.getPrivate("stepDecimalPlaces")), r } _prepareAxisItems() { const e = this.getPrivate("min"), t = this.getPrivate("max"); if (le(e) && le(t)) { const s = this.get("logarithmic"), r = this.getPrivate("step"), o = this.getPrivate("selectionMin"), u = this.getPrivate("selectionMax") + r; let d = o - r, f = 1, m = e; if (s) { if (d = this._minLogAdjusted, d < o) for (; d < o;)d += r; if (m = d, m <= 0) { let T = this._minRealLog; le(T) || (T = 1), m = Math.pow(10, Math.log(T) * Math.LOG10E), r < 1 && (le(this._minRealLog) ? m = this._minRealLog : m = Math.pow(10, -50)) } f = Math.log(u - r) * Math.LOG10E - Math.log(m) * Math.LOG10E, f > 2 && (d = Math.pow(10, Math.log(m) * Math.LOG10E - 50)) } const p = this.get("renderer"), g = p.get("minorLabelsEnabled"), y = p.get("minorGridEnabled", g); let b = Math.pow(10, Math.floor(Math.log(Math.abs(r)) * Math.LOG10E)); const v = Math.round(r / b); let k = 2; Lt(v / 5, 10) % 1 == 0 && (k = 5), Lt(v / 10, 10) % 1 == 0 && (k = 10); let j = r / k, S = 0, w = 0, N = -1 / 0; for (; d < u;) { let T; this.dataItems.length < S + 1 ? (T = new La(this, void 0, {}), this._dataItems.push(T), this.processDataItem(T)) : T = this.dataItems[S], this._createAssets(T, []), this._toggleDataItem(T, !0), T.setRaw("value", d); const R = T.get("label"); R && R.set("text", this._formatText(d)), this._prepareDataItem(T); let P = d; if (s && f > 2 ? P = Math.pow(10, Math.log(m) * Math.LOG10E + S - 50) : P += r, y) { let z = d + j; for (s && (f > 2 && (j = this._adjustMinMax(d, P, 10).step), z = d + j); z < P - r * 1e-11;) { let F; this.minorDataItems.length < w + 1 ? (F = new La(this, void 0, {}), this.minorDataItems.push(F), this.processDataItem(F)) : F = this.minorDataItems[w], this._createAssets(F, ["minor"], !0), this._toggleDataItem(F, !0), F.setRaw("value", z); const B = F.get("label"); B && (g ? B.set("text", this._formatText(z)) : B.setPrivate("visible", !1)), this._prepareDataItem(F), z += j, w++ } } if (d = P, N == d) break; let O = Math.pow(10, Math.floor(Math.log(Math.abs(r)) * Math.LOG10E)); if (O < 1 && !s) { let z = Math.round(Math.abs(Math.log(Math.abs(O)) * Math.LOG10E)) + 2; d = Lt(d, z) } S++, s && f <= 2 && d - r < r && (d = r), N = d } for (let T = S; T < this.dataItems.length; T++)this._toggleDataItem(this.dataItems[T], !1); for (let T = w; T < this.minorDataItems.length; T++)this._toggleDataItem(this.minorDataItems[T], !1); te(this.series, T => { T.inited && T._markDirtyAxes() }), this._updateGhost() } } _prepareDataItem(e, t) { let s = this.get("renderer"), r = e.get("value"), o = e.get("endValue"), u = this.valueToPosition(r), d = u, f = this.valueToPosition(r + this.getPrivate("step")); le(o) && (d = this.valueToPosition(o), f = d), e.get("isRange") && o == null && (f = u); let m = d, p = e.get("labelEndValue"); p != null && (m = this.valueToPosition(p)), s.updateLabel(e.get("label"), u, m, t); const g = e.get("grid"); if (s.updateGrid(g, u, d), g && (r == this.get("baseValue", 0) ? (g.addTag("base"), g._applyThemes()) : g.hasTag("base") && (g.removeTag("base"), g._applyThemes())), s.updateTick(e.get("tick"), u, m, t), s.updateFill(e.get("axisFill"), u, f), this._processBullet(e), s.updateBullet(e.get("bullet"), u, d), !e.get("isRange")) { const y = this.get("fillRule"); y && y(e) } } _handleRangeChange() { let e = this.positionToValue(this.get("start", 0)), t = this.positionToValue(this.get("end", 1)); const s = this.get("renderer").gridCount(); let r = this._adjustMinMax(e, t, s, !0), o = a0(r.step); this.setPrivateRaw("stepDecimalPlaces", o), e = Lt(e, o), t = Lt(t, o), r = this._adjustMinMax(e, t, s, !0); let u = r.step; e = r.min, t = r.max, (this.getPrivate("selectionMin") !== e || this.getPrivate("selectionMax") !== t || this.getPrivate("step") !== u) && (this.setPrivateRaw("selectionMin", e), this.setPrivateRaw("selectionMax", t), this.setPrivateRaw("step", u)) } positionToValue(e) { const t = this.getPrivate("min"), s = this.getPrivate("max"); return this.get("logarithmic") ? Math.pow(Math.E, (e * (Math.log(s) * Math.LOG10E - Math.log(t) * Math.LOG10E) + Math.log(t) * Math.LOG10E) / Math.LOG10E) : e * (s - t) + t } valueToPosition(e) { const t = this.getPrivate("min"), s = this.getPrivate("max"); if (this.get("logarithmic")) { if (e <= 0) { let r = this.get("treatZeroAs"); le(r) && (e = r) } return (Math.log(e) * Math.LOG10E - Math.log(t) * Math.LOG10E) / (Math.log(s) * Math.LOG10E - Math.log(t) * Math.LOG10E) } else return (e - t) / (s - t) } valueToFinalPosition(e) { const t = this.getPrivate("minFinal"), s = this.getPrivate("maxFinal"); if (this.get("logarithmic")) { if (e <= 0) { let r = this.get("treatZeroAs"); le(r) && (e = r) } return (Math.log(e) * Math.LOG10E - Math.log(t) * Math.LOG10E) / (Math.log(s) * Math.LOG10E - Math.log(t) * Math.LOG10E) } else return (e - t) / (s - t) } getX(e, t, s) { e = s + (e - s) * t; const r = this.valueToPosition(e); return this._settings.renderer.positionToCoordinate(r) } getY(e, t, s) { e = s + (e - s) * t; const r = this.valueToPosition(e); return this._settings.renderer.positionToCoordinate(r) } getDataItemCoordinateX(e, t, s, r) { return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e, t, s, r)) } getDataItemPositionX(e, t, s, r) { let o = e.get(t); if (e.get("stackToItemX")) { const d = e.component; o = o * r + d.getStackedXValueWorking(e, t) } else o = this._baseValue + (o - this._baseValue) * r; return this.valueToPosition(o) } getDataItemCoordinateY(e, t, s, r) { return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e, t, s, r)) } getDataItemPositionY(e, t, s, r) { let o = e.get(t); if (e.get("stackToItemY")) { const d = e.component; o = o * r + d.getStackedYValueWorking(e, t) } else o = this._baseValue + (o - this._baseValue) * r; return this.valueToPosition(o) } basePosition() { return this.valueToPosition(this.baseValue()) } baseValue() { const e = Math.min(this.getPrivate("minFinal", -1 / 0), this.getPrivate("selectionMin", -1 / 0)), t = Math.max(this.getPrivate("maxFinal", 1 / 0), this.getPrivate("selectionMax", 1 / 0)); let s = this.get("baseValue", 0); return s < e && (s = e), s > t && (s = t), s } cellEndValue(e) { return e } fixSmallStep(e) { return 1 + e === 1 ? (e *= 2, this.fixSmallStep(e)) : e } _fixMin(e) { return e } _fixMax(e) { return e } _calculateTotals() { if (this.get("calculateTotals")) { let e = this.series[0]; if (e) { let t = e.startIndex(); if (e.dataItems.length > 0) { t > 0 && t--; let s = e.endIndex(); s < e.dataItems.length && s++; let r, o; e.get("yAxis") == this ? (r = "valueY", o = "vcy") : e.get("xAxis") == this && (r = "valueX", o = "vcx"); let u = r + "Working"; if (r) for (let d = t; d < s; d++) { let f = 0, m = 0; te(this.series, p => { if (!p.get("excludeFromTotal")) { let g = p.dataItems[d]; if (g) { let y = g.get(u) * p.get(o); Ps(y) || (f += y, m += Math.abs(y)) } } }), te(this.series, p => { if (!p.get("excludeFromTotal")) { let g = p.dataItems[d]; if (g) { let y = g.get(u) * p.get(o); if (!Ps(y)) { g.set(r + "Total", m), g.set(r + "Sum", f); let b = y / m * 100; m == 0 && (b = 0), g.set(r + "TotalPercent", b) } } } }) } } } } } _getSelectionMinMax() { const e = this.getPrivate("minFinal"), t = this.getPrivate("maxFinal"), s = this.get("min"), r = this.get("max"); let o = this.get("extraMin", 0), u = this.get("extraMax", 0); this.get("logarithmic") && (this.get("extraMin") == null && (o = .1), this.get("extraMax") == null && (u = .2)); const d = this.get("renderer").gridCount(), f = this.get("strictMinMaxSelection"); let m = this.get("strictMinMax"); if (le(e) && le(t)) { let p = t, g = e; if (te(this.series, T => { if (!T.get("ignoreMinMax")) { let R, P; const O = T.getPrivate("outOfSelection"); if (T.get("xAxis") === this) { if (!O) { let z = T.getPrivate("minX"), F = T.getPrivate("maxX"); (T.startIndex() != 0 || T.endIndex() != T.dataItems.length) && (z = void 0, F = void 0), R = T.getPrivate("selectionMinX", z), P = T.getPrivate("selectionMaxX", F) } } else if (T.get("yAxis") === this && !O) { let z = T.getPrivate("minY"), F = T.getPrivate("maxY"); (T.startIndex() != 0 || T.endIndex() != T.dataItems.length) && (z = void 0, F = void 0), R = T.getPrivate("selectionMinY", z), P = T.getPrivate("selectionMaxY", F) } !T.isHidden() && !T.isShowing() && (le(R) && (p = Math.min(p, R)), le(P) && (g = Math.max(g, P))) } }), this.axisRanges.each(T => { if (T.get("affectsMinMax")) { let R = T.get("value"); R != null && (p = Math.min(p, R), g = Math.max(g, R)), R = T.get("endValue"), R != null && (p = Math.min(p, R), g = Math.max(g, R)) } }), p > g && ([p, g] = [g, p]), le(s) ? m ? p = s : p = e : m && le(this._minReal) && (p = this._minReal), le(r) ? m ? g = r : g = t : m && le(this._maxReal) && (g = this._maxReal), p === g) { let T = p; if (p -= this._deltaMinMax, g += this._deltaMinMax, p < e) { let P = T - e; P == 0 && (P = this._deltaMinMax), p = T - P, g = T + P, m = !0 } let R = this._adjustMinMax(p, g, d, m); p = R.min, g = R.max } let y = p, b = g, v = g - p; p -= v * o, g += v * u; let k = this._adjustMinMax(p, g, d); p = k.min, g = k.max, p = Dt(p, e, t), g = Dt(g, e, t), k = this._adjustMinMax(p, g, d, !0), m || (p = k.min, g = k.max); const j = this.get("syncWithAxis"); if (j && (k = this._syncAxes(p, g, k.step, j.getPrivate("selectionMinFinal", j.getPrivate("minFinal", 0)), j.getPrivate("selectionMaxFinal", j.getPrivate("maxFinal", 1)), j.getPrivate("selectionStepFinal", j.getPrivate("step", 1))), k.min < e && (k.min = e), k.max > t && (k.max = t), p = k.min, g = k.max), m && (le(s) && (p = Math.max(p, s)), le(r) && (g = Math.min(g, r))), f && (p = y - (b - y) * o, g = b + (b - y) * u), m) { le(s) ? p = s : p = y, le(r) ? g = r : g = b, g - p <= 1e-8 && (p -= this._deltaMinMax, g += this._deltaMinMax); let T = g - p; p -= T * o, g += T * u } this.get("logarithmic") && (p <= 0 && (p = y * (1 - Math.min(o, .99))), p < e && (p = e), g > t && (g = t)); let S = Math.min(20, Math.ceil(Math.log(this.getPrivate("maxZoomFactor", 100) + 1) / Math.LN10) + 2), w = Lt(this.valueToFinalPosition(p), S), N = Lt(this.valueToFinalPosition(g), S); this.setPrivateRaw("selectionMinFinal", p), this.setPrivateRaw("selectionMaxFinal", g), this.setPrivateRaw("selectionStepFinal", k.step), this.zoom(w, N) } } _getMinMax() { let e = this.get("min"), t = this.get("max"), s = 1 / 0, r = -1 / 0, o = this.get("extraMin", 0), u = this.get("extraMax", 0); this.get("logarithmic") && (this.get("strictMinMax") || (this.get("extraMin") == null && (o = .1), this.get("extraMax") == null && (u = .2))); let d = 1 / 0; if (te(this.series, N => { if (!N.get("ignoreMinMax")) { let T, R; if (N.get("xAxis") === this ? (T = N.getPrivate("minX"), R = N.getPrivate("maxX")) : N.get("yAxis") === this && (T = N.getPrivate("minY"), R = N.getPrivate("maxY")), le(T) && le(R)) { s = Math.min(s, T), r = Math.max(r, R); let P = R - T; P <= 0 && (P = Math.abs(R / 100)), P < d && (d = P) } } }), this.axisRanges.each(N => { if (N.get("affectsMinMax")) { let T = N.get("value"); T != null && (s = Math.min(s, T), r = Math.max(r, T)), T = N.get("endValue"), T != null && (s = Math.min(s, T), r = Math.max(r, T)) } }), this.get("logarithmic")) { let N = this.get("treatZeroAs"); le(N) && s <= 0 && (s = N) } if (s === 0 && r === 0 && (r = .9, s = -.9), le(e) && (s = e), le(t) && (r = t), s === 1 / 0 || r === -1 / 0) { this.setPrivate("minFinal", void 0), this.setPrivate("maxFinal", void 0); return } s > r && ([s, r] = [r, s]); const f = s, m = r; let p = this.adapters.fold("min", s), g = this.adapters.fold("max", r); this._minRealLog = s, le(p) && (s = p), le(g) && (r = g), s = this._fixMin(s), r = this._fixMax(r), r - s <= 1 / Math.pow(10, 15) && (r - s !== 0 ? this._deltaMinMax = (r - s) / 2 : this._getDelta(r), s -= this._deltaMinMax, r += this._deltaMinMax), s -= (r - s) * o, r += (r - s) * u, this.get("logarithmic") && (s < 0 && f >= 0 && (s = 0), r > 0 && m <= 0 && (r = 0)), this._minReal = s, this._maxReal = r; let y = this.get("strictMinMax"), b = this.get("strictMinMaxSelection", !1); b && (y = b); let v = y; le(t) && (v = !0); let k = this.get("renderer").gridCount(), j = this._adjustMinMax(s, r, k, v); if (s = j.min, r = j.max, j = this._adjustMinMax(s, r, k, !0), s = j.min, r = j.max, y) { le(e) ? s = e : s = this._minReal, le(t) ? r = t : r = this._maxReal, r - s <= 1e-8 && (s -= this._deltaMinMax, r += this._deltaMinMax); let N = r - s; s -= N * o, r += N * u } p = this.adapters.fold("min", s), g = this.adapters.fold("max", r), le(p) && (s = p), le(g) && (r = g), d == 1 / 0 && (d = r - s); let S = Math.round(Math.abs(Math.log(Math.abs(r - s)) * Math.LOG10E)) + 5; s = Lt(s, S), r = Lt(r, S); const w = this.get("syncWithAxis"); if (w && (j = this._syncAxes(s, r, j.step, w.getPrivate("minFinal", w.getPrivate("min", 0)), w.getPrivate("maxFinal", w.getPrivate("max", 1)), w.getPrivate("step", 1)), s = j.min, r = j.max), this.setPrivateRaw("maxZoomFactor", Math.max(1, Math.ceil((r - s) / d * this.get("maxZoomFactor", 100)))), this._fixZoomFactor(), this.get("logarithmic") && (this._minLogAdjusted = s, s = this._minReal, r = this._maxReal, s <= 0 && (s = f * (1 - Math.min(o, .99)))), le(s) && le(r) && (this.getPrivate("minFinal") !== s || this.getPrivate("maxFinal") !== r)) { this.setPrivate("minFinal", s), this.setPrivate("maxFinal", r), this._saveMinMax(s, r); const N = this.get("interpolationDuration", 0), T = this.get("interpolationEasing"); this.animatePrivate({ key: "min", to: s, duration: N, easing: T }), this.animatePrivate({ key: "max", to: r, duration: N, easing: T }) } } _fixZoomFactor() { } _getDelta(e) { let t = Math.log(Math.abs(e)) * Math.LOG10E, s = Math.pow(10, Math.floor(t)); s = s / 10, this._deltaMinMax = s } _saveMinMax(e, t) { } _adjustMinMax(e, t, s, r) { s <= 1 && (s = 1), s = Math.round(s); let o = e, u = t, d = t - e; d === 0 && (d = Math.abs(t)); let f = Math.log(Math.abs(d)) * Math.LOG10E, m = Math.pow(10, Math.floor(f)); m = m / 10; let p = m; r && (p = 0), r ? (e = Math.floor(e / m) * m, t = Math.ceil(t / m) * m) : (e = Math.ceil(e / m) * m - p, t = Math.floor(t / m) * m + p), e < 0 && o >= 0 && (e = 0), t > 0 && u <= 0 && (t = 0), f = Math.log(Math.abs(d)) * Math.LOG10E, m = Math.pow(10, Math.floor(f)), m = m / 100; let g = Math.ceil(d / s / m) * m, y = Math.pow(10, Math.floor(Math.log(Math.abs(g)) * Math.LOG10E)), b = Math.ceil(g / y); b > 5 ? b = 10 : b <= 5 && b > 2 && (b = 5), g = Math.ceil(g / (y * b)) * y * b; let v = this.get("maxPrecision"); if (le(v)) { let w = oN(g, v); v < Number.MAX_VALUE && g !== w && (g = w, g == 0 && (g = 1)) } let k = 0; y < 1 && (k = Math.round(Math.abs(Math.log(Math.abs(y)) * Math.LOG10E)) + 1, g = Lt(g, k)); let j = Math.floor(e / g); e = Lt(g * j, k); let S; return r ? S = Math.floor(t / g) : S = Math.ceil(t / g), S === j && S++, t = Lt(g * S, k), t < u && (t = t + g), e > o && (e = e - g), g = this.fixSmallStep(g), { min: e, max: t, step: g } } getTooltipText(e, t) { const s = this.get("tooltipNumberFormat", this.get("numberFormat")), r = this.getNumberFormatter(), o = this.get("extraTooltipPrecision", 0), u = this.getPrivate("stepDecimalPlaces", 0) + o, d = Lt(this.positionToValue(e), u); return s ? r.format(d, s) : r.format(d, void 0, u) } getSeriesItem(e, t) { let s = this.getPrivate("name") + this.get("renderer").getPrivate("letter"), r = this.positionToValue(t), o, u; if (te(e.dataItems, (d, f) => { const m = Math.abs(d.get(s) - r); (o === void 0 || m < u) && (o = f, u = m) }), o != null) return e.dataItems[o] } zoomToValues(e, t, s) { const r = this.getPrivate("minFinal", this.getPrivate("min", 0)), o = this.getPrivate("maxFinal", this.getPrivate("max", 1)); this.getPrivate("min") != null && this.getPrivate("max") != null && this.zoom((e - r) / (o - r), (t - r) / (o - r), s) } _syncAxes(e, t, s, r, o, u) { if (this.get("syncWithAxis")) { let f = Math.round(o - r) / u, m = Math.round((t - e) / s), p = this.get("renderer").gridCount(); if (le(f) && le(m)) { let g = !1, y = 0, b = (t - e) * .01, v = e, k = t, j = s; for (; g != !0;)if (g = this._checkSync(v, k, j, f), y++, y > 500 && (g = !0), g) e = v, t = k, s = j; else { y / 3 == Math.round(y / 3) ? (v = e - b * y, e >= 0 && v < 0 && (v = 0)) : (k = t + b * y, k <= 0 && k > 0 && (k = 0)); let S = this._adjustMinMax(v, k, p, !0); v = S.min, k = S.max, j = S.step } } } return { min: e, max: t, step: s } } _checkSync(e, t, s, r) { let o = (t - e) / s; for (let u = 1; u < r; u++)if (Lt(o / u, 1) == r || o * u == r) return !0; return !1 } getCellWidthPosition() { let e = this.getPrivate("selectionMax", this.getPrivate("max")), t = this.getPrivate("selectionMin", this.getPrivate("min")); return le(e) && le(t) ? this.getPrivate("step", 1) / (e - t) : .05 } nextPosition(e) { e == null && (e = 1), this.get("renderer").getPrivate("letter") == "Y" && (e *= -1); let t = this.positionToValue(this.getPrivate("tooltipPosition", 0)); return t += this.getPrivate("step", 1) * e, t = Dt(t, this.getPrivate("selectionMin", 0), this.getPrivate("selectionMax", 1)), this.toGlobalPosition(this.valueToPosition(t)) } } Object.defineProperty(ra, "className", { enumerable: !0, configurable: !0, writable: !0, value: "ValueAxis" }); Object.defineProperty(ra, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Nn.classNames.concat([ra.className]) }); class Es extends Nn { constructor() { super(...arguments), Object.defineProperty(this, "_frequency", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), Object.defineProperty(this, "_itemMap", { enumerable: !0, configurable: !0, writable: !0, value: {} }) } _afterNew() { this._settings.themeTags = Ve(this._settings.themeTags, ["axis"]), this.fields.push("category", "id", "cellSize"), this.setPrivateRaw("name", "category"), this.addTag("category"), super._afterNew() } _afterDataChange() { super._afterDataChange(); const e = this.dataItems.length; e > 0 && this.setPrivateRaw("maxZoomFactor", e), this.setPrivateRaw("startIndex", Math.min(this.getPrivate("startIndex", 0), e)), this.setPrivateRaw("endIndex", Math.min(this.getPrivate("endIndex", e), 1)) } _prepareChildren() { super._prepareChildren(); const e = this.dataItems.length; let t = 0; this._valuesDirty && (this._itemMap = {}, te(this.dataItems, u => { u.setRaw("index", t), this._itemMap[u.get("category")] = u, t++ }), this.setPrivateRaw("maxZoomFactor", e)); let s = this.get("start", 0), r = this.get("end", 1), o = this._getIndices(s, r); this.setPrivateRaw("startIndex", o.startIndex), this.setPrivateRaw("endIndex", o.endIndex), (this._sizeDirty || this._valuesDirty || this.isDirty("start") || this.isDirty("end") || this.isPrivateDirty("endIndex") || this.isPrivateDirty("startIndex") || this.isPrivateDirty("width") || this.isPrivateDirty("height")) && this.dataItems.length > 0 && (this._handleRangeChange(), this._prepareAxisItems(), this._updateAxisRanges()) } adjustZoom() { const e = this.dataItems.length; if (e > 1) { let t = this.get("maxZoomCount", this.dataItems.length), s = this.get("minZoomCount", 1), r = 0, o = this.getPrivate("startIndex", 0), u = this.getPrivate("endIndex", 0); const d = this._sAnimation, f = this._eAnimation; let m = this.get("start", 0), p = !1; d && !d.stopped && (m = Number(d.to), p = !0); let g = this.get("end", 1); if (f && !f.stopped && (g = Number(f.to), p = !0), p) { const y = this._getIndices(m, g); o = y.startIndex, u = y.endIndex } for (let y = o; y < u; y++) { const b = this.dataItems[y]; r += b.get("finalCellSize", 1) } if (r <= s) { let y = 0; for (let b = o; b < e; b++) { const v = this.dataItems[b]; if (y += v.get("finalCellSize", 1), u = b + 1, y >= s) break } if (y < s) for (let b = o - 1; b >= 0; b--) { const v = this.dataItems[b]; if (y += v.get("finalCellSize", 1), o = b, y >= s) break } this.zoomToIndexes(o, u) } else if (r >= t) { let y = r; for (let b = u - 1; b >= o; b--) { const v = this.dataItems[b]; if (y -= v.get("finalCellSize", 1), y <= t) { u = b + 1; break } } this.zoomToIndexes(o, u) } } } _handleRangeChange() { te(this.series, e => { let t = this.dataItems[this.startIndex()].get("category"), s = this.dataItems[this.endIndex() - 1].get("category"), r = e.get("baseAxis"), o = e.get("xAxis"), u = e.get("yAxis"); if (o instanceof Es && u instanceof Es) e._markDirtyAxes(); else if (r === this) { let f, m, p = u; if (o === r ? (e.get("categoryXField") && (f = "categoryX"), e.get("openCategoryXField") && (m = "openCategoryX")) : u === r && (e.get("categoryYField") && (f = "categoryY"), e.get("openCategoryYField") && (m = "openCategoryY"), p = o), p instanceof ra && (f || m)) { let b = function (S, w, N, T, R, P) { let O, z = w.categoryToIndex(R); for (; !O && z >= 0 && z < w.dataItems.length;) { let F = w.dataItems[z].get("category"); if (P == "previous") for (let B = S.dataItems.length - 1; B >= 0; B--) { let A = S.dataItems[B]; if (N && A.get(N) === F) { O = A; break } if (T && A.get(T) === F) { O = A; break } } else for (let B = 0, A = S.dataItems.length; B < A; B++) { let L = S.dataItems[B]; if (N && L.get(N) === F) { O = L; break } if (T && L.get(T) === F) { O = L; break } } O || (z += P === "previous" ? -1 : 1) } return O }; var d = b; let g, y; g = b(e, this, f, m, t, "next"), y = b(e, this, f, m, s, "previous"); let v = 0, k = e.dataItems.length; g && (v = e.dataItems.indexOf(g)), y && (k = e.dataItems.indexOf(y) + 1), e.setPrivate("startIndex", v), e.setPrivate("endIndex", k); let j = !1; for (let S = v; S < k; S++) { const w = e.dataItems[S]; if (te(e.__valueXShowFields, N => { w.get(N) != null && (j = !0) }), te(e.__valueYShowFields, N => { w.get(N) != null && (j = !0) }), j) break } e.setPrivate("outOfSelection", !j) } e._markDirtyAxes() } }) } _prepareAxisItems() { var e; const t = this.get("renderer"), s = this.dataItems.length; let r = this.startIndex(); r > 0 && r--; let o = this.endIndex(); o < s && o++; const u = t.get("minorLabelsEnabled"), d = t.get("minorGridEnabled", u); let f = t.axisLength() / Math.max(t.get("minGridDistance"), 1), m = Math.max(1, Math.min(s, Math.ceil((o - r) / f))); r = Math.floor(r / m) * m, this._frequency = m; for (let g = 0; g < s; g++)this._toggleDataItem(this.dataItems[g], !1); let p = this.dataItems[r].get("index", 0); for (let g = r; g < o; g = g + m) { let y = this.dataItems[g]; this._createAssets(y, []), this._toggleDataItem(y, !0); let b = m; d && (b = 1), this._prepareDataItem(y, p, b), p++ } if (t.get("minorGridEnabled")) for (let g = r; g < o; g++) { let y = this.dataItems[g]; g % m != 0 && (this._createAssets(y, ["minor"], !0), this._toggleDataItem(y, !0), this._prepareDataItem(y, 0, 1), u || (e = y.get("label")) === null || e === void 0 || e.setPrivate("visible", !1)) } this._updateGhost() } _prepareDataItem(e, t, s) { let r = this.get("renderer"), o = e.get("categoryLocation", 0), u = e.get("endCategoryLocation", 1), d = e.get("index"); le(d) || (d = this.categoryToIndex(e.get("category"))); let f = this.indexToPosition(d, o), m = e.get("endCategory"), p; m ? (p = this.categoryToIndex(m), le(p) || (p = d)) : p = d; let g = this.indexToPosition(p, u), y, b; if (e.get("isRange")) { if (y = p, !le(d)) { this._toggleDataItem(e, !1); return } } else y = d + this._frequency - 1; b = this.indexToPosition(y, u), r.updateLabel(e.get("label"), f, g, s), r.updateGrid(e.get("grid"), f, g), r.updateTick(e.get("tick"), f, g, s), r.updateFill(e.get("axisFill"), f, b), this._processBullet(e), r.updateBullet(e.get("bullet"), f, g); const v = this.get("fillRule"); v && v(e, t) } startIndex() { let e = this.dataItems.length; return Math.min(Math.max(this.getPrivate("startIndex", 0), 0), e - 1) } endIndex() { let e = this.dataItems.length; return Math.max(1, Math.min(this.getPrivate("endIndex", e), e)) } baseValue() { } basePosition() { return 0 } getX(e) { let t = this._itemMap[e]; return t ? this._settings.renderer.positionToCoordinate(this.indexToPosition(t.get("index", 0))) : NaN } getY(e) { let t = this._itemMap[e]; return t ? this._settings.renderer.positionToCoordinate(this.indexToPosition(t.get("index", 0))) : NaN } getDataItemPositionX(e, t, s, r) { const o = e.get(t), u = this._itemMap[o]; return u ? this.indexToPosition(u.get("index", 0), s) : NaN } getDataItemCoordinateX(e, t, s, r) { return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e, t, s, r)) } getDataItemPositionY(e, t, s, r) { const o = e.get(t), u = this._itemMap[o]; return u ? this.indexToPosition(u.get("index", 0), s) : NaN } getDataItemCoordinateY(e, t, s, r) { return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e, t, s, r)) } indexToPosition(e, t, s) { let r = this.dataItems.length, o = 0; if (r == 0 || (e >= r && (e = r - 1, t = 1), le(t) || (t = .5), !le(e))) return 0; let u = this.get("startLocation", 0), d = this.get("endLocation", 1); if (!this.get("cellSizeField")) r -= u, r -= 1 - d, o = (e + t - u) / r; else { let f = s ? "finalCellSize" : "cellSize"; const m = this.dataItems; let p = 0; te(this.dataItems, b => { p += b.get(f, 1) }), p -= u * m[0].get(f, 1), p -= (1 - d) * m[m.length - 1].get(f, 1); let g = 0; for (let b = 0; b < e; b++)g += m[b].get(f, 1); let y = m[e].get(f, 1); o = (g + t * y - u * m[0].get(f, 1)) / p } if (!s) { let f = this.dataItems[e]; f && (o += f.get("deltaPosition", 0)) } return o } categoryToPosition(e) { let t = this._itemMap[e]; return t ? this.indexToPosition(t.get("index")) : NaN } categoryToIndex(e) { let t = this._itemMap[e]; return t ? t.get("index") : NaN } dataItemToPosition(e) { return this.indexToPosition(e.get("index")) } roundAxisPosition(e, t) { return e += (.5 - t) / this.dataItems.length, this.indexToPosition(this.axisPositionToIndex(e), t) } axisPositionToIndex(e) { let t = this.dataItems.length; if (t === 0) return 0; if (this.get("cellSizeField")) { let s = 0, r = []; te(this.dataItems, m => { const p = m.get("cellSize", 1); r.push(p), s += p }); let o = this.get("startLocation", 0), u = this.get("endLocation", 1); s -= o, s -= 1 - u; let d = e * s + o, f = 0; for (let m = 0; m < t; m++) { const p = r[m]; if (d < f + p) return m; f += p } return t - 1 } else return Dt(Math.floor(e * t), 0, t - 1) } getTooltipText(e, t) { const s = this.dataItems[this.axisPositionToIndex(e)]; if (s) { const r = s.get("label"); if (r) return Ar(r, this.get("tooltipText", "")) } } _updateTooltipText(e, t) { e._setDataItem(this.dataItems[this.axisPositionToIndex(t)]), e.label.text.markDirtyText() } getSeriesItem(e, t) { if (this.dataItems.length > 0) { let s = this.getPrivate("name") + this.get("renderer").getPrivate("letter"), r = this.axisPositionToIndex(t), o = e.dataItems[r], u = this.dataItems[r], d = u.get("category"); if (o && u && o.get(s) === d) return o; for (let f = 0, m = e.dataItems.length; f < m; f++) { let p = e.dataItems[f]; if (p.get(s) === d) return p } } } _getIndices(e, t) { let s = this.dataItems.length, r = 0, o = s, u = "cellSize"; if (this.get("cellSizeField")) { let d = 0; const f = this.dataItems; if (f.length == 0) return { startIndex: 0, endIndex: 0 }; te(f, p => { d += p.get(u, 1) }), d -= this.get("startLocation", 0) * f[0].get(u, 1), d -= (1 - this.get("endLocation", 1)) * f[f.length - 1].get(u, 1); let m = 0; for (let p = 0; p < s; p++)if (m += this.dataItems[p].get(u, 1), Math.round(m) > Math.round(e * d)) { r = p; break } for (let p = r + 1; p < s; p++)if (m += this.dataItems[p].get(u, 1), Math.round(m) >= Math.round(t * d)) { o = p + 1; break } r = Math.max(r, 0), o = Math.min(o, s) } else r = Math.max(Math.round(this.get("start", 0) * s), 0), o = Math.min(Math.round(this.get("end", 1) * s), s); return { startIndex: r, endIndex: o } } zoomToIndexes(e, t, s) { let r = this.dataItems.length; this.get("cellSizeField") ? (e = Math.min(Math.max(e, 0), r), t = Math.max(Math.min(t, r), 1), this.setPrivateRaw("startIndex", e), this.setPrivateRaw("endIndex", t), this.zoom(this.indexToPosition(e, 0, !0), this.indexToPosition(t, 0, !0), s)) : this.zoom(e / r, t / r, s) } zoomToCategories(e, t, s) { this.zoomToIndexes(this.categoryToIndex(e), this.categoryToIndex(t) + 1, s) } getCellWidthPosition() { return this._frequency / this.dataItems.length / (this.get("end", 1) - this.get("start", 0)) } nextPosition(e) { e == null && (e = 1), this.get("renderer").getPrivate("letter") == "Y" && (e *= -1); const t = this.getPrivate("tooltipPosition", 0), s = Dt(this.axisPositionToIndex(t) + e, 0, this.dataItems.length - 1); return this.toGlobalPosition(this.indexToPosition(s)) } } Object.defineProperty(Es, "className", { enumerable: !0, configurable: !0, writable: !0, value: "CategoryAxis" }); Object.defineProperty(Es, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Nn.classNames.concat([Es.className]) }); class pu extends Pi { constructor() { super(...arguments), Object.defineProperty(this, "_tickPoints", { enumerable: !0, configurable: !0, writable: !0, value: [] }) } } Object.defineProperty(pu, "className", { enumerable: !0, configurable: !0, writable: !0, value: "AxisLabel" }); Object.defineProperty(pu, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Pi.classNames.concat([pu.className]) }); class gu extends wn { constructor() { super(...arguments), Object.defineProperty(this, "_tickPoints", { enumerable: !0, configurable: !0, writable: !0, value: [] }) } } Object.defineProperty(gu, "className", { enumerable: !0, configurable: !0, writable: !0, value: "AxisTick" }); Object.defineProperty(gu, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: wn.classNames.concat([gu.className]) }); class Cn extends Qe { constructor() { super(...arguments), Object.defineProperty(this, "_axisLength", { enumerable: !0, configurable: !0, writable: !0, value: 100 }), Object.defineProperty(this, "_start", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_end", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), Object.defineProperty(this, "_inversed", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_minSize", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "chart", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_lc", { enumerable: !0, configurable: !0, writable: !0, value: 1 }), Object.defineProperty(this, "_ls", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_thumbDownPoint", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_downStart", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_downEnd", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "ticks", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(new At(at.new({}), () => gu._new(this._root, { themeTags: Ve(this.ticks.template.get("themeTags", []), this.get("themeTags", [])) }, [this.ticks.template]))) }), Object.defineProperty(this, "grid", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(new At(at.new({}), () => Or._new(this._root, { themeTags: Ve(this.grid.template.get("themeTags", []), this.get("themeTags", [])) }, [this.grid.template]))) }), Object.defineProperty(this, "axisFills", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(new At(at.new({}), () => Qe._new(this._root, { themeTags: Ve(this.axisFills.template.get("themeTags", ["axis", "fill"]), this.get("themeTags", [])) }, [this.axisFills.template]))) }), Object.defineProperty(this, "labels", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(new At(at.new({}), () => pu._new(this._root, { themeTags: Ve(this.labels.template.get("themeTags", []), this.get("themeTags", [])) }, [this.labels.template]))) }), Object.defineProperty(this, "axis", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "thumb", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }) } makeTick(e, t) { const s = this.ticks.make(); return s._setDataItem(e), e.setRaw("tick", s), s.set("themeTags", Ve(s.get("themeTags"), t)), this.axis.labelsContainer.children.push(s), this.ticks.push(s), s } makeGrid(e, t) { const s = this.grid.make(); return s._setDataItem(e), e.setRaw("grid", s), s.set("themeTags", Ve(s.get("themeTags"), t)), this.axis.gridContainer.children.push(s), this.grid.push(s), s } makeAxisFill(e, t) { const s = this.axisFills.make(); return s._setDataItem(e), s.set("themeTags", Ve(s.get("themeTags"), t)), this.axis.gridContainer.children.push(s), e.setRaw("axisFill", s), this.axisFills.push(s), s } makeLabel(e, t) { const s = this.labels.make(); return s.set("themeTags", Ve(s.get("themeTags"), t)), e.get("isRange") ? this.axis.labelsContainer.children.push(s) : this.axis.labelsContainer.children.moveValue(s, 0), s._setDataItem(e), e.setRaw("label", s), this.labels.push(s), s } axisLength() { return 0 } gridCount() { return this.axisLength() / this.get("minGridDistance", 50) } _updatePositions() { } _afterNew() { super._afterNew(), this.set("isMeasured", !1); const e = this.thumb; e && (this._disposers.push(e.events.on("pointerdown", t => { this._handleThumbDown(t) })), this._disposers.push(e.events.on("globalpointerup", t => { this._handleThumbUp(t) })), this._disposers.push(e.events.on("globalpointermove", t => { this._handleThumbMove(t) }))) } _beforeChanged() { super._beforeChanged(), this.isDirty("minGridDistance") && this.root.events.once("frameended", () => { this.axis.markDirtySize() }) } _changed() { if (super._changed(), this.isDirty("pan")) { const e = this.thumb; if (e) { const t = this.axis.labelsContainer, s = this.get("pan"); s == "zoom" ? t.children.push(e) : s == "none" && t.children.removeValue(e) } } } _handleThumbDown(e) { this._thumbDownPoint = this.toLocal(e.point); const t = this.axis; this._downStart = t.get("start"), this._downEnd = t.get("end") } _handleThumbUp(e) { this._thumbDownPoint = void 0 } _handleThumbMove(e) { const t = this._thumbDownPoint; if (t) { const s = this.toLocal(e.point), r = this._downStart, o = this._downEnd, u = this._getPan(s, t) * Math.min(1, o - r) / 2 * this.get("panSensitivity", 1); this.axis.zoom(r - u, o + u, 0) } } _getPan(e, t) { return 0 } positionToCoordinate(e) { return this._inversed ? (this._end - e) * this._axisLength : (e - this._start) * this._axisLength } updateTooltipBounds(e) { } _updateSize() { this.markDirty(), this._clear = !0 } toAxisPosition(e) { const t = this._start || 0, s = this._end || 1; return e = e * (s - t), this.get("inversed") ? e = s - e : e = t + e, e } toGlobalPosition(e) { const t = this._start || 0, s = this._end || 1; return this.get("inversed") ? e = s - e : e = e - t, e = e / (s - t), e } fixPosition(e) { return this.get("inversed") ? 1 - e : e } _updateLC() { } toggleVisibility(e, t, s, r) { let o = this.axis; const u = o.get("start", 0), d = o.get("end", 1); let f = u + (d - u) * (s - 1e-4), m = u + (d - u) * (r + 1e-4); t < f || t > m ? e.setPrivate("visible", !1) : e.setPrivate("visible", !0) } _positionTooltip(e, t) { const s = this.chart; s && (e.set("pointTo", this._display.toGlobal(t)), s.inPlot(t) || e.hide()) } processAxis() { } } Object.defineProperty(Cn, "className", { enumerable: !0, configurable: !0, writable: !0, value: "AxisRenderer" }); Object.defineProperty(Cn, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Qe.classNames.concat([Cn.className]) }); class Tn extends Cn { constructor() { super(...arguments), Object.defineProperty(this, "thumb", { enumerable: !0, configurable: !0, writable: !0, value: Gi.new(this._root, { width: Te, isMeasured: !1, themeTags: ["axis", "x", "thumb", "zoomgrip"] }) }) } _afterNew() { this._settings.themeTags = Ve(this._settings.themeTags, ["renderer", "x"]), super._afterNew(), this.setPrivateRaw("letter", "X"); const e = this.grid.template; e.set("height", Te), e.set("width", 0), e.set("draw", (t, s) => { t.moveTo(0, 0), t.lineTo(0, s.height()) }), this.set("draw", (t, s) => { t.moveTo(0, 0), t.lineTo(s.width(), 0) }) } _changed() { var e; super._changed(); const t = this.axis, s = t.ghostLabel; s && (s.setPrivate("visible", !this.get("inside")), s.set("x", -1e3)); const r = "opposite", o = "inside"; if (this.isDirty(r) || this.isDirty(o)) { const u = this.chart, d = t.children; if (this.get(o) ? t.addTag(o) : t.removeTag(o), u) { if (this.get(r)) { const f = u.topAxesContainer.children; f.indexOf(t) == -1 && f.insertIndex(0, t), t.addTag(r), d.moveValue(this) } else { const f = u.bottomAxesContainer.children; f.indexOf(t) == -1 && f.moveValue(t), t.removeTag(r), d.moveValue(this, 0) } (e = t.ghostLabel) === null || e === void 0 || e._applyThemes(), this.labels.each(f => { f._applyThemes() }), this.root._markDirtyRedraw() } t.markDirtySize() } this.thumb.setPrivate("height", t.labelsContainer.height()) } _getPan(e, t) { return (t.x - e.x) / this.width() } toAxisPosition(e) { const t = this._start || 0, s = this._end || 1; return e -= this._ls, e = e * (s - t) / this._lc, this.get("inversed") ? e = s - e : e = t + e, e } toGlobalPosition(e) { const t = this._start || 0, s = this._end || 1; return this.get("inversed") ? e = s - e : e = e - t, e = e / (s - t) * this._lc, e += this._ls, e } _updateLC() { const e = this.axis, t = e.parent; if (t) { const s = t.innerWidth(); this._lc = this.axisLength() / s, this._ls = (e.x() - t.get("paddingLeft", 0)) / s } } _updatePositions() { const e = this.axis, t = e.x() - mt(e.get("centerX", 0), e.width()) - e.parent.get("paddingLeft", 0); e.gridContainer.set("x", t), e.topGridContainer.set("x", t), e.bulletsContainer.set("y", this.y()); const s = e.chart; if (s) { const r = s.plotContainer, o = e.axisHeader; let u = e.get("marginLeft", 0), d = e.x() - u; const f = e.parent; f && (d -= f.get("paddingLeft", 0)), o.children.length > 0 ? (u = e.axisHeader.width(), e.set("marginLeft", u + 1)) : o.set("width", u), o.setAll({ x: d, y: -1, height: r.height() + 2 }) } } processAxis() { super.processAxis(); const e = this.axis; e.get("width") == null && e.set("width", Te); const t = this._root.verticalLayout; e.set("layout", t), e.labelsContainer.set("width", Te), e.axisHeader.setAll({ layout: t }) } axisLength() { return this.axis.width() } positionToPoint(e) { return { x: this.positionToCoordinate(e), y: 0 } } updateTick(e, t, s, r) { if (e) { le(t) || (t = 0); let o = .5; le(r) && r > 1 ? o = e.get("multiLocation", o) : o = e.get("location", o), le(s) && s != t && (t = t + (s - t) * o), e.set("x", this.positionToCoordinate(t)); let u = e.get("length", 0); const d = e.get("inside", this.get("inside", !1)); this.get("opposite") ? (e.set("y", Te), d || (u *= -1)) : (e.set("y", 0), d && (u *= -1)), e.set("draw", f => { f.moveTo(0, 0), f.lineTo(0, u) }), this.toggleVisibility(e, t, e.get("minPosition", 0), e.get("maxPosition", 1)) } } updateLabel(e, t, s, r) { if (e) { let o = .5; le(r) && r > 1 ? o = e.get("multiLocation", o) : o = e.get("location", o), le(t) || (t = 0); const u = e.get("inside", this.get("inside", !1)); this.get("opposite") ? u ? (e.set("position", "absolute"), e.set("y", 0)) : (e.set("position", "relative"), e.set("y", Te)) : u ? (e.set("y", 0), e.set("position", "absolute")) : (e.set("y", void 0), e.set("position", "relative")), le(s) && s != t && (t = t + (s - t) * o), e.set("x", this.positionToCoordinate(t)), this.toggleVisibility(e, t, e.get("minPosition", 0), e.get("maxPosition", 1)) } } updateGrid(e, t, s) { if (e) { le(t) || (t = 0); let r = e.get("location", .5); le(s) && s != t && (t = t + (s - t) * r), e.set("x", this.positionToCoordinate(t)), this.toggleVisibility(e, t, 0, 1) } } updateBullet(e, t, s) { if (e) { const r = e.get("sprite"); if (r) { le(t) || (t = 0); let o = e.get("location", .5); le(s) && s != t && (t = t + (s - t) * o); let u = this.axis.roundAxisPosition(t, o), d = this.axis._bullets[u], f = -1; if (this.get("opposite") && (f = 1), e.get("stacked")) if (d) { let m = d.get("sprite"); m && r.set("y", m.y() + m.height() * f) } else r.set("y", 0); this.axis._bullets[u] = e, r.set("x", this.positionToCoordinate(t)), this.toggleVisibility(r, t, 0, 1) } } } updateFill(e, t, s) { if (e) { le(t) || (t = 0), le(s) || (s = 1); let r = this.positionToCoordinate(t), o = this.positionToCoordinate(s); this.fillDrawMethod(e, r, o) } } fillDrawMethod(e, t, s) { e.set("draw", r => { const o = this.axis.gridContainer.height(), u = this.width(); s < t && ([s, t] = [t, s]), !(t > u || s < 0) && (r.moveTo(t, 0), r.lineTo(s, 0), r.lineTo(s, o), r.lineTo(t, o), r.lineTo(t, 0)) }) } positionTooltip(e, t) { this._positionTooltip(e, { x: this.positionToCoordinate(t), y: 0 }) } updateTooltipBounds(e) { const t = this.get("inside"), s = 1e5; let r = this._display.toGlobal({ x: 0, y: 0 }), o = r.x, u = 0, d = this.axisLength(), f = s, m = "up"; this.get("opposite") ? t ? (m = "up", u = r.y, f = s) : (m = "down", u = r.y - s, f = s) : t ? (m = "down", u = r.y - s, f = s) : (m = "up", u = r.y, f = s); const p = { left: o, right: o + d, top: u, bottom: u + f }, g = e.get("bounds"); l0(p, g) || (e.set("bounds", p), e.set("pointerOrientation", m)) } } Object.defineProperty(Tn, "className", { enumerable: !0, configurable: !0, writable: !0, value: "AxisRendererX" }); Object.defineProperty(Tn, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Cn.classNames.concat([Tn.className]) }); class Ia extends Cn { constructor() { super(...arguments), Object.defineProperty(this, "_downY", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "thumb", { enumerable: !0, configurable: !0, writable: !0, value: Gi.new(this._root, { height: Te, isMeasured: !1, themeTags: ["axis", "y", "thumb", "zoomgrip"] }) }) } _afterNew() { this._settings.themeTags = Ve(this._settings.themeTags, ["renderer", "y"]), this._settings.opposite && this._settings.themeTags.push("opposite"), super._afterNew(), this.setPrivateRaw("letter", "Y"); const e = this.grid.template; e.set("width", Te), e.set("height", 0), e.set("draw", (t, s) => { t.moveTo(0, 0), t.lineTo(s.width(), 0) }), this.set("draw", (t, s) => { t.moveTo(0, 0), t.lineTo(0, s.height()) }) } _getPan(e, t) { return (e.y - t.y) / this.height() } _changed() { var e; super._changed(); const t = this.axis, s = t.ghostLabel; s && (s.setPrivate("visible", !this.get("inside")), s.set("y", -1e3)); const r = this.thumb, o = "opposite", u = "inside", d = this.chart; if (this.isDirty(o) || this.isDirty(u)) { const m = t.children; if (this.get(u) ? t.addTag(u) : t.removeTag(u), d) { if (this.get(o)) { const p = d.rightAxesContainer.children; p.indexOf(t) == -1 && p.moveValue(t, 0), t.addTag(o), m.moveValue(this, 0) } else { const p = d.leftAxesContainer.children; p.indexOf(t) == -1 && p.moveValue(t), t.removeTag(o), m.moveValue(this) } (e = t.ghostLabel) === null || e === void 0 || e._applyThemes(), this.labels.each(p => { p._applyThemes() }), this.root._markDirtyRedraw() } t.markDirtySize() } const f = t.labelsContainer.width(); d && (this.get(o) ? r.set("centerX", 0) : r.set("centerX", f)), r.setPrivate("width", f) } processAxis() { super.processAxis(); const e = this.axis; e.get("height") == null && e.set("height", Te); const t = this._root.horizontalLayout; e.set("layout", t), e.labelsContainer.set("height", Te), e.axisHeader.set("layout", t) } _updatePositions() { const e = this.axis, t = e.y() - mt(e.get("centerY", 0), e.height()); e.gridContainer.set("y", t), e.topGridContainer.set("y", t), e.bulletsContainer.set("x", this.x()); const s = e.chart; if (s) { const r = s.plotContainer, o = e.axisHeader; let u = e.get("marginTop", 0); o.children.length > 0 ? (u = e.axisHeader.height(), e.set("marginTop", u + 1)) : o.set("height", u), o.setAll({ y: e.y() - u, x: -1, width: r.width() + 2 }) } } axisLength() { return this.axis.innerHeight() } positionToPoint(e) { return { x: 0, y: this.positionToCoordinate(e) } } updateLabel(e, t, s, r) { if (e) { le(t) || (t = 0); let o = .5; le(r) && r > 1 ? o = e.get("multiLocation", o) : o = e.get("location", o); const u = this.get("opposite"), d = e.get("inside", this.get("inside", !1)); u ? (e.set("x", 0), d ? e.set("position", "absolute") : e.set("position", "relative")) : d ? (e.set("x", 0), e.set("position", "absolute")) : (e.set("x", void 0), e.set("position", "relative")), le(s) && s != t && (t = t + (s - t) * o), e.set("y", this.positionToCoordinate(t)), this.toggleVisibility(e, t, e.get("minPosition", 0), e.get("maxPosition", 1)) } } updateGrid(e, t, s) { if (e) { le(t) || (t = 0); let r = e.get("location", .5); le(s) && s != t && (t = t + (s - t) * r), e.set("y", this.positionToCoordinate(t)), this.toggleVisibility(e, t, 0, 1) } } updateTick(e, t, s, r) { if (e) { le(t) || (t = 0); let o = .5; le(r) && r > 1 ? o = e.get("multiLocation", o) : o = e.get("location", o), le(s) && s != t && (t = t + (s - t) * o), e.set("y", this.positionToCoordinate(t)); let u = e.get("length", 0); const d = e.get("inside", this.get("inside", !1)); this.get("opposite") ? (e.set("x", 0), d && (u *= -1)) : d || (u *= -1), e.set("draw", f => { f.moveTo(0, 0), f.lineTo(u, 0) }), this.toggleVisibility(e, t, e.get("minPosition", 0), e.get("maxPosition", 1)) } } updateBullet(e, t, s) { if (e) { const r = e.get("sprite"); if (r) { le(t) || (t = 0); let o = e.get("location", .5); le(s) && s != t && (t = t + (s - t) * o); let u = this.axis.roundAxisPosition(t, o), d = this.axis._bullets[u], f = 1; if (this.get("opposite") && (f = -1), e.get("stacked")) if (d) { let m = d.get("sprite"); m && r.set("x", m.x() + m.width() * f) } else r.set("x", 0); this.axis._bullets[u] = e, r.set("y", this.positionToCoordinate(t)), this.toggleVisibility(r, t, 0, 1) } } } updateFill(e, t, s) { if (e) { le(t) || (t = 0), le(s) || (s = 1); let r = this.positionToCoordinate(t), o = this.positionToCoordinate(s); this.fillDrawMethod(e, r, o) } } fillDrawMethod(e, t, s) { e.set("draw", r => { const o = this.axis.gridContainer.width(), u = this.height(); s < t && ([s, t] = [t, s]), !(t > u || s < 0) && (r.moveTo(0, t), r.lineTo(o, t), r.lineTo(o, s), r.lineTo(0, s), r.lineTo(0, t)) }) } positionToCoordinate(e) { return this._inversed ? (e - this._start) * this._axisLength : (this._end - e) * this._axisLength } positionTooltip(e, t) { this._positionTooltip(e, { x: 0, y: this.positionToCoordinate(t) }) } updateTooltipBounds(e) { const t = this.get("inside"), s = 1e5; let r = this._display.toGlobal({ x: 0, y: 0 }), o = r.y, u = 0, d = this.axisLength(), f = s, m = "right"; this.get("opposite") ? t ? (m = "right", u = r.x - s, f = s) : (m = "left", u = r.x, f = s) : t ? (m = "left", u = r.x, f = s) : (m = "right", u = r.x - s, f = s); const p = { left: u, right: u + f, top: o, bottom: o + d }, g = e.get("bounds"); l0(p, g) || (e.set("bounds", p), e.set("pointerOrientation", m)) } _updateLC() { const e = this.axis, t = e.parent; if (t) { const s = t.innerHeight(); this._lc = this.axisLength() / s, this._ls = e.y() / s } } toAxisPosition(e) { const t = this._start || 0, s = this._end || 1; return e -= this._ls, e = e * (s - t) / this._lc, this.get("inversed") ? e = t + e : e = s - e, e } toGlobalPosition(e) { const t = this._start || 0, s = this._end || 1; return this.get("inversed") ? e = e - t : e = s - e, e = e / (s - t) * this._lc, e += this._ls, e } fixPosition(e) { return this.get("inversed") ? e : 1 - e } } Object.defineProperty(Ia, "className", { enumerable: !0, configurable: !0, writable: !0, value: "AxisRendererY" }); Object.defineProperty(Ia, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Cn.classNames.concat([Ia.className]) }); class io extends Sn { constructor() { super(...arguments), Object.defineProperty(this, "allColumns", { enumerable: !0, configurable: !0, writable: !0, value: this.children.push(Qe.new(this._root, {})) }), Object.defineProperty(this, "allColumnsData", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "columns", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(new At(at.new({}), () => Fa._new(this._root, { position: "absolute", themeTags: Ve(this.columns.template.get("themeTags", []), ["series", "column"]) }, [this.columns.template]))) }) } makeColumn(e, t) { const s = t.make(); return this.get("turboMode") ? s.virtualParent = this.chart : this.mainContainer.children.push(s), s._setDataItem(e), t.push(s), s } _processAxisRange(e) { super._processAxisRange(e), e.columns = new At(at.new({}), () => Fa._new(this._root, { position: "absolute", themeTags: Ve(e.columns.template.get("themeTags", []), ["series", "column"]) }, [this.columns.template, e.columns.template])) } _beforeColumnsDraw() { this.allColumnsData = [] } _afterColumnsDraw() { this.get("turboMode") && this.allColumns.set("draw", e => { e.clear(), te(this.allColumnsData, t => { const s = t.width, r = t.height, o = t.x, u = t.y, d = t.stroke, f = t.fill, m = t.strokeWidth, p = t.strokeOpacity, g = t.fillOpacity; e.beginFill(f, g), e.beginPath(), e.lineStyle(m, d, p), e.drawRect(o, u, s, r), e.endStroke(), e.endFill() }) }) } _updateChildren() { this.isDirty("turboMode") && (this.markDirtyValues(), this.get("turboMode") || this.allColumns.set("draw", void 0)), super._updateChildren() } _updateSeriesGraphics(e, t, s, r, o, u, d, f) { if (this.get("turboMode")) { t.virtualParent = this.chart, t.parent && (this.mainContainer.children.removeValue(t), t._parent = void 0); const m = t.get("stroke"), p = t.get("fillOpacity", 1), g = t.get("strokeOpacity", 1), y = t.get("strokeWidth", 1), b = t.get("fill"), v = this.getPoint(s, o), k = this.getPoint(r, u), j = e.get("point"); if (j) { const S = this.getPoint(j.x, j.y); j.x = S.x + this._x, j.y = S.y + this._y } s = v.x, r = k.x, o = v.y, u = k.y, e.setRaw("left", s), e.setRaw("right", r), e.setRaw("top", o), e.setRaw("bottom", u), this.allColumnsData.push({ width: r - s, height: u - o, x: s, y: o, stroke: m, fill: b, strokeWidth: y, strokeOpacity: g, fillOpacity: p }) } else t.parent || this.mainContainer.children.push(t), super._updateSeriesGraphics(e, t, s, r, o, u, d, f) } } Object.defineProperty(io, "className", { enumerable: !0, configurable: !0, writable: !0, value: "ColumnSeries" }); Object.defineProperty(io, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Sn.classNames.concat([io.className]) }); class so extends kn { constructor() { super(...arguments), Object.defineProperty(this, "_endIndex", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_strokeGenerator", { enumerable: !0, configurable: !0, writable: !0, value: j0() }), Object.defineProperty(this, "_fillGenerator", { enumerable: !0, configurable: !0, writable: !0, value: CC() }), Object.defineProperty(this, "_legendStroke", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_legendFill", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "strokes", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(new At(at.new({}), () => Qe._new(this._root, { themeTags: Ve(this.strokes.template.get("themeTags", []), ["line", "series", "stroke"]) }, [this.strokes.template]))) }), Object.defineProperty(this, "fills", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(new At(at.new({}), () => Qe._new(this._root, { themeTags: Ve(this.strokes.template.get("themeTags", []), ["line", "series", "fill"]) }, [this.fills.template]))) }), Object.defineProperty(this, "_fillTemplate", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_strokeTemplate", { enumerable: !0, configurable: !0, writable: !0, value: void 0 }), Object.defineProperty(this, "_previousPoint", { enumerable: !0, configurable: !0, writable: !0, value: [0, 0, 0, 0] }), Object.defineProperty(this, "_dindex", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_sindex", { enumerable: !0, configurable: !0, writable: !0, value: 0 }) } _afterNew() { this._fillGenerator.y0(function (e) { return e[3] }), this._fillGenerator.x0(function (e) { return e[2] }), this._fillGenerator.y1(function (e) { return e[1] }), this._fillGenerator.x1(function (e) { return e[0] }), super._afterNew() } makeStroke(e) { const t = this.mainContainer.children.push(e.make()); return e.push(t), t } makeFill(e) { const t = this.mainContainer.children.push(e.make()); return e.push(t), t } _updateChildren() { this._strokeTemplate = void 0, this._fillTemplate = void 0; let e = this.get("xAxis"), t = this.get("yAxis"); if (this.isDirty("stroke")) { const s = this.get("stroke"); this.strokes.template.set("stroke", s); const r = this._legendStroke; r && r.states.lookup("default").set("stroke", s) } if (this.isDirty("fill")) { const s = this.get("fill"); this.fills.template.set("fill", s); const r = this._legendFill; r && r.states.lookup("default").set("fill", s) } if (this.isDirty("fillPattern")) { const s = this.get("fillPattern"); this.fills.template.set("fillPattern", s); const r = this._legendFill; r && r.states.lookup("default").set("fillPattern", s) } if (this.isDirty("curveFactory")) { const s = this.get("curveFactory"); s && (this._strokeGenerator.curve(s), this._fillGenerator.curve(s)) } if (e.inited && t.inited) { if (this._axesDirty || this._valuesDirty || this._stackDirty || this.isDirty("vcx") || this.isDirty("vcy") || this._sizeDirty || this.isDirty("connect") || this.isDirty("curveFactory")) { const s = this.dataItems; this.fills.each(g => { g.setPrivate("visible", !1) }), this.strokes.each(g => { g.setPrivate("visible", !1) }), this.axisRanges.each(g => { let y = g.fills; y && y.each(v => { v.setPrivate("visible", !1) }); let b = g.strokes; b && b.each(v => { v.setPrivate("visible", !1) }) }); let r = this.startIndex(), o = this.strokes.template.get("templateField"), u = this.fills.template.get("templateField"), d = !0, f = !0; o && (d = !1), u && (f = !1); for (let g = r - 1; g >= 0; g--) { let y = s[g], b = !0, v = y.dataContext; if (o && v[o] && (d = !0), u && v[u] && (f = !0), te(this._valueFields, k => { le(y.get(k)) || (b = !1) }), b && d && f) { r = g; break } } let m = s.length, p = this.endIndex(); if (p < m) { p++; for (let g = p; g < m; g++) { let y = s[g], b = !0; if (te(this._valueFields, v => { le(y.get(v)) || (b = !1) }), b) { p = g + 1; break } } } if (r > 0 && r--, this._endIndex = p, this._clearGraphics(), this._sindex = 0, this._dindex = r, m == 1) this._startSegment(0); else for (; this._dindex < p - 1;)this._startSegment(this._dindex), this._sindex++ } } else this._skipped = !0; super._updateChildren() } _clearGraphics() { this.strokes.clear(), this.fills.clear(), this.axisRanges.each(e => { e.fills.clear(), e.strokes.clear() }) } _startSegment(e) { const t = this.dataItems; let s = this._endIndex, r = s; const o = this.get("autoGapCount"), u = this.get("connect"), d = this.makeFill(this.fills), f = this._fillTemplate, m = this.fills.template; f && f != m && (d.template = f), d.setPrivate("visible", !0); const p = this.makeStroke(this.strokes), g = this._strokeTemplate; g && g != this.strokes.template && (p.template = g), p.setPrivate("visible", !0); let y = this.get("xAxis"), b = this.get("yAxis"), v = this.get("baseAxis"), k = this.get("vcx", 1), j = this.get("vcy", 1), S = this._xField, w = this._yField, N = this._xOpenField, T = this._yOpenField; const R = this.get("openValueXField"), P = this.get("openValueYField"); R || (N = this._xField), P || (T = this._yField); const O = this.get("stacked"), z = y.basePosition(), F = b.basePosition(); let B; v === b ? B = this._yField : B = this._xField; const A = []; let L = []; A.push(L); const M = this.strokes.template.get("templateField"), X = this.fills.template.get("templateField"); let U = this.get("locationX", .5), I = this.get("locationY", .5), H = this.get("openLocationX", U), Y = this.get("openLocationY", I); const ee = this.get("minDistance", 0); let fe, q = this.fills.template.get("visible"); this.axisRanges.length > 0 && (q = !0); let Q = !1; (O || R || P) && (Q = !0); const ce = { points: L, segments: A, stacked: O, getOpen: Q, basePosX: z, basePosY: F, fillVisible: q, xField: S, yField: w, xOpenField: N, yOpenField: T, vcx: k, vcy: j, baseAxis: v, xAxis: y, yAxis: b, locationX: U, locationY: I, openLocationX: H, openLocationY: Y, minDistance: ee }; let W = this._strokeTemplate, ae = this._fillTemplate; for (fe = e; fe < r; fe++) { this._dindex = fe; const J = t[fe]; let G = J.get(S), ge = J.get(w); if (G == null || ge == null ? u || (L = [], A.push(L), ce.points = L) : this._getPoints(J, ce), M) { let de = J.dataContext[M]; if (de) if (de instanceof at || (de = at.new(de)), this._strokeTemplate = de, fe > e) { r = fe; break } else W = de, p.template = de } if (X) { let de = J.dataContext[X]; if (de) if (de instanceof at || (de = at.new(de)), this._fillTemplate = de, fe > e) { r = fe; break } else ae = de, d.template = de } if (!u) { let de = t[fe + 1]; de && v.shouldGap(J, de, o, B) && (L = [], A.push(L), ce.points = L) } } d.setRaw("userData", [e, fe]), p.setRaw("userData", [e, fe]), fe === s && this._endLine(L, A[0][0]), p && this._drawStroke(p, A), d && this._drawFill(d, A), this.axisRanges.each(J => { const G = J.container, ge = J.fills, de = this.makeFill(ge); G && G.children.push(de), de.setPrivate("visible", !0), this._drawFill(de, A); const Se = J.strokes, Ee = this.makeStroke(Se); G && G.children.push(Ee), W && W != this.strokes.template && (Ee.template = W), ae && ae != this.fills.template && (de.template = ae), Ee.setPrivate("visible", !0), this._drawStroke(Ee, A), de.setRaw("userData", [e, fe]), Ee.setRaw("userData", [e, fe]) }) } _getPoints(e, t) { let s = t.points, r = e.get("locationX", t.locationX), o = e.get("locationY", t.locationY); const u = this.get("exactLocationX", !1), d = this.get("exactLocationY", !1); let f = t.xAxis.getDataItemPositionX(e, t.xField, r, t.vcx, u), m = t.yAxis.getDataItemPositionY(e, t.yField, o, t.vcy, d); if (this._shouldInclude(f)) { const p = this.getPoint(f, m), g = [p.x, p.y]; if (p.x += this._x, p.y += this._y, e.set("point", p), t.fillVisible) { let y = f, b = m; if (t.baseAxis === t.xAxis ? b = t.basePosY : t.baseAxis === t.yAxis && (y = t.basePosX), t.getOpen) { let k = e.get(t.xOpenField), j = e.get(t.yOpenField); if (k != null && j != null) { let S = e.get("openLocationX", t.openLocationX), w = e.get("openLocationY", t.openLocationY); if (t.stacked) { let N = e.get("stackToItemX"), T = e.get("stackToItemY"); N ? (y = t.xAxis.getDataItemPositionX(N, t.xField, S, N.component.get("vcx"), u), Ps(y) && (y = t.basePosX)) : t.yAxis === t.baseAxis ? y = t.basePosX : y = t.xAxis.getDataItemPositionX(e, t.xOpenField, S, t.vcx, u), T ? (b = t.yAxis.getDataItemPositionY(T, t.yField, w, T.component.get("vcy"), d), Ps(b) && (b = t.basePosY)) : t.xAxis === t.baseAxis ? b = t.basePosY : b = t.yAxis.getDataItemPositionY(e, t.yOpenField, w, t.vcy, d) } else y = t.xAxis.getDataItemPositionX(e, t.xOpenField, S, t.vcx, u), b = t.yAxis.getDataItemPositionY(e, t.yOpenField, w, t.vcy, d) } } let v = this.getPoint(y, b); g[2] = v.x, g[3] = v.y } if (t.minDistance > 0) { const y = g[0], b = g[1], v = g[2], k = g[3], j = this._previousPoint, S = j[0], w = j[1], N = j[2], T = j[3]; (Math.hypot(y - S, b - w) > t.minDistance || v && k && Math.hypot(v - N, k - T) > t.minDistance) && (s.push(g), this._previousPoint = g) } else s.push(g) } } _endLine(e, t) { } _drawStroke(e, t) { e.get("visible") && !e.get("forceHidden") && e.set("draw", s => { te(t, r => { this._strokeGenerator.context(s), this._strokeGenerator(r) }) }) } _drawFill(e, t) { e.get("visible") && !e.get("forceHidden") && e.set("draw", s => { te(t, r => { this._fillGenerator.context(s), this._fillGenerator(r) }) }) } _processAxisRange(e) { super._processAxisRange(e), e.fills = new At(at.new({}), () => Qe._new(this._root, { themeTags: Ve(e.fills.template.get("themeTags", []), ["line", "series", "fill"]) }, [this.fills.template, e.fills.template])), e.strokes = new At(at.new({}), () => Qe._new(this._root, { themeTags: Ve(e.strokes.template.get("themeTags", []), ["line", "series", "stroke"]) }, [this.strokes.template, e.strokes.template])) } createLegendMarker(e) { const t = this.get("legendDataItem"); if (t) { const s = t.get("marker"), r = t.get("markerRectangle"); r && r.setPrivate("visible", !1), s.set("background", Gi.new(s._root, { fillOpacity: 0, fill: Je(0) })); const o = s.children.push(Qe._new(s._root, { themeTags: ["line", "series", "legend", "marker", "stroke"], interactive: !1 }, [this.strokes.template])); this._legendStroke = o; const u = s.children.push(Qe._new(s._root, { themeTags: ["line", "series", "legend", "marker", "fill"] }, [this.fills.template])); this._legendFill = u; const d = this._root.interfaceColors.get("disabled"); if (o.states.create("disabled", { fill: d, stroke: d }), u.states.create("disabled", { fill: d, stroke: d }), this.bullets.length > 0) { const f = this.bullets.getIndex(0); if (f) { const m = f(s._root, this, new La(this, { legend: !0 }, {})); if (m) { const p = m.get("sprite"); p instanceof Qe && p.states.create("disabled", { fill: d, stroke: d }), p && (p.setAll({ tooltipText: void 0, tooltipHTML: void 0, focusable: void 0, focusableGroup: void 0, ariaLabel: void 0 }), s.children.push(p), p.setAll({ x: s.width() / 2, y: s.height() / 2 }), s.events.on("boundschanged", () => { p.setAll({ x: s.width() / 2, y: s.height() / 2 }) })) } } } } } } Object.defineProperty(so, "className", { enumerable: !0, configurable: !0, writable: !0, value: "LineSeries" }); Object.defineProperty(so, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: kn.classNames.concat([so.className]) }); class MC extends vo { setupDefaultRules() { super.setupDefaultRules(); const e = this._root.interfaceColors, t = this.rule.bind(this); t("PercentSeries").setAll({ legendLabelText: "{category}", legendValueText: "{valuePercentTotal.formatNumber('0.00p')}", colors: Mr.new(this._root, {}), width: Te, height: Te }), t("PieChart").setAll({ radius: Jt(80), startAngle: -90, endAngle: 270 }), t("PieSeries").setAll({ alignLabels: !0, startAngle: -90, endAngle: 270 }), t("PieSeries").states.create("hidden", { endAngle: -90, opacity: 0 }), t("Slice", ["pie"]).setAll({ position: "absolute", isMeasured: !1, x: 0, y: 0, toggleKey: "active", tooltipText: "{category}: {valuePercentTotal.formatNumber('0.00p')}", strokeWidth: 1, strokeOpacity: 1, role: "figure", lineJoin: "round" }), t("Slice", ["pie"]).states.create("active", { shiftRadius: 20, scale: 1 }), t("Slice", ["pie"]).states.create("hoverActive", { scale: 1.04 }), t("Slice", ["pie"]).states.create("hover", { scale: 1.04 }), t("RadialLabel", ["pie"]).setAll({ textType: "aligned", radius: 10, text: "{category}: {valuePercentTotal.formatNumber('0.00p')}", paddingTop: 5, paddingBottom: 5, populateText: !0 }), t("Tick", ["pie"]).setAll({ location: 1 }), t("SlicedChart").setAll({ paddingLeft: 10, paddingRight: 10, paddingTop: 10, paddingBottom: 10 }), t("FunnelSeries").setAll({ startLocation: 0, endLocation: 1, orientation: "vertical", alignLabels: !0, sequencedInterpolation: !0 }), t("FunnelSlice").setAll({ interactive: !0, expandDistance: 0 }), t("FunnelSlice").states.create("hover", { expandDistance: .15 }), t("Label", ["funnel"]).setAll({ populateText: !0, text: "{category}: {valuePercentTotal.formatNumber('0.00p')}", centerY: Oe }), t("Label", ["funnel", "horizontal"]).setAll({ centerX: 0, centerY: Oe, rotation: -90 }), t("Label", ["funnel", "vertical"]).setAll({ centerY: Oe, centerX: 0 }), t("Tick", ["funnel"]).setAll({ location: 1 }), t("FunnelSlice", ["funnel", "link"]).setAll({ fillOpacity: .5, strokeOpacity: 0, expandDistance: -.1 }), t("FunnelSlice", ["funnel", "link", "vertical"]).setAll({ height: 10 }), t("FunnelSlice", ["funnel", "link", "horizontal"]).setAll({ width: 10 }), t("PyramidSeries").setAll({ valueIs: "area" }), t("FunnelSlice", ["pyramid", "link"]).setAll({ fillOpacity: .5 }), t("FunnelSlice", ["pyramid", "link", "vertical"]).setAll({ height: 0 }), t("FunnelSlice", ["pyramid", "link", "horizontal"]).setAll({ width: 0 }), t("FunnelSlice", ["pyramid"]).setAll({ interactive: !0, expandDistance: 0 }), t("FunnelSlice", ["pyramid"]).states.create("hover", { expandDistance: .15 }), t("Label", ["pyramid"]).setAll({ populateText: !0, text: "{category}: {valuePercentTotal.formatNumber('0.00p')}", centerY: Oe }), t("Label", ["pyramid", "horizontal"]).setAll({ centerX: 0, centerY: Oe, rotation: -90 }), t("Label", ["pyramid", "vertical"]).setAll({ centerY: Oe, centerX: 0 }), t("Tick", ["pyramid"]).setAll({ location: 1 }), t("FunnelSlice", ["pictorial"]).setAll({ interactive: !0, tooltipText: "{category}: {valuePercentTotal.formatNumber('0.00p')}" }), t("Label", ["pictorial"]).setAll({ populateText: !0, text: "{category}: {valuePercentTotal.formatNumber('0.00p')}", centerY: Oe }), t("Label", ["pictorial", "horizontal"]).setAll({ centerX: 0, centerY: Oe, rotation: -90 }), t("Label", ["pictorial", "vertical"]).setAll({ centerY: Oe, centerX: 0 }), t("FunnelSlice", ["pictorial", "link"]).setAll({ fillOpacity: .5, width: 0, height: 0 }), t("Tick", ["pictorial"]).setAll({ location: .5 }); { const s = t("Graphics", ["pictorial", "background"]); s.setAll({ fillOpacity: .2 }), De(s, "fill", e, "alternativeBackground") } } } class Dn extends jn { _afterNew() { this._defaultThemes.push(MC.new(this._root)), super._afterNew(), this.chartContainer.children.push(this.seriesContainer), this.seriesContainer.children.push(this.bulletsContainer) } _processSeries(e) { super._processSeries(e), this.seriesContainer.children.moveValue(this.bulletsContainer, this.seriesContainer.children.length - 1) } } Object.defineProperty(Dn, "className", { enumerable: !0, configurable: !0, writable: !0, value: "PercentChart" }); Object.defineProperty(Dn, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: jn.classNames.concat([Dn.className]) }); class An extends na { constructor() { super(...arguments), Object.defineProperty(this, "slicesContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.children.push(ze.new(this._root, { position: "absolute", isMeasured: !1 })) }), Object.defineProperty(this, "labelsContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.children.push(ze.new(this._root, { position: "absolute", isMeasured: !1 })) }), Object.defineProperty(this, "ticksContainer", { enumerable: !0, configurable: !0, writable: !0, value: this.children.push(ze.new(this._root, { position: "absolute", isMeasured: !1 })) }), Object.defineProperty(this, "_lLabels", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_rLabels", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "_hLabels", { enumerable: !0, configurable: !0, writable: !0, value: [] }), Object.defineProperty(this, "slices", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(this._makeSlices()) }), Object.defineProperty(this, "labels", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(this._makeLabels()) }), Object.defineProperty(this, "ticks", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(this._makeTicks()) }) } _applyThemes(e = !1) { const t = this.get("colors"); return t && t.reset(), super._applyThemes(e) } makeSlice(e) { const t = this.slicesContainer.children.push(this.slices.make()); return t.on("fill", () => { this.updateLegendMarker(e) }), t.on("fillPattern", () => { this.updateLegendMarker(e) }), t.on("stroke", () => { this.updateLegendMarker(e) }), t._setDataItem(e), e.set("slice", t), this.slices.push(t), t } makeLabel(e) { const t = this.labelsContainer.children.push(this.labels.make()); return t._setDataItem(e), e.set("label", t), this.labels.push(t), t } _shouldMakeBullet(e) { return e.get("value") != null } makeTick(e) { const t = this.ticksContainer.children.push(this.ticks.make()); return t._setDataItem(e), e.set("tick", t), this.ticks.push(t), t } _afterNew() { this.fields.push("category", "fill"), super._afterNew() } _onDataClear() { const e = this.get("colors"); e && e.reset(); const t = this.get("patterns"); t && t.reset() } _prepareChildren() { if (super._prepareChildren(), this._lLabels = [], this._rLabels = [], this._hLabels = [], this._valuesDirty) { let e = 0, t = 0, s = 0, r = 1 / 0, o = 0; te(this._dataItems, u => { let d = u.get("valueWorking", 0); e += d, t += Math.abs(d) }), te(this._dataItems, u => { let d = u.get("valueWorking", 0); d > s && (s = d), d < r && (r = d), o++; let f = d / t; t == 0 && (f = 0), u.setRaw("valuePercentTotal", f * 100) }), this.setPrivateRaw("valueLow", r), this.setPrivateRaw("valueHigh", s), this.setPrivateRaw("valueSum", e), this.setPrivateRaw("valueAverage", e / o), this.setPrivateRaw("valueAbsoluteSum", t) } } show(e) { const t = Object.create(null, { show: { get: () => super.show } }); return Mt(this, void 0, void 0, function* () { let s = []; s.push(t.show.call(this, e)), s.push(this._sequencedShowHide(!0, e)), yield Promise.all(s) }) } hide(e) { const t = Object.create(null, { hide: { get: () => super.hide } }); return Mt(this, void 0, void 0, function* () { let s = []; s.push(t.hide.call(this, e)), s.push(this._sequencedShowHide(!1, e)), yield Promise.all(s) }) } _updateChildren() { super._updateChildren(), this._valuesDirty && te(this._dataItems, e => { e.get("label").text.markDirtyText() }), (this.isDirty("legendLabelText") || this.isDirty("legendValueText")) && te(this._dataItems, e => { this.updateLegendValue(e) }), this._arrange() } _arrange() { this._arrangeDown(this._lLabels), this._arrangeUp(this._lLabels), this._arrangeDown(this._rLabels), this._arrangeUp(this._rLabels), this._arrangeLeft(this._hLabels), this._arrangeRight(this._hLabels), te(this.dataItems, e => { this._updateTick(e) }) } _afterChanged() { super._afterChanged(), this._arrange() } processDataItem(e) { if (super.processDataItem(e), e.get("fill") == null) { let t = this.get("colors"); t && e.setRaw("fill", t.next()) } if (e.get("fillPattern") == null) { let t = this.get("patterns"); t && e.setRaw("fillPattern", t.next()) } } showDataItem(e, t) { const s = Object.create(null, { showDataItem: { get: () => super.showDataItem } }); return Mt(this, void 0, void 0, function* () { const r = [s.showDataItem.call(this, e, t)]; le(t) || (t = this.get("stateAnimationDuration", 0)); const o = this.get("stateAnimationEasing"); let u = e.get("value"); const d = e.animate({ key: "valueWorking", to: u, duration: t, easing: o }); d && r.push(d.waitForStop()); const f = e.get("tick"); f && r.push(f.show(t)); const m = e.get("label"); m && r.push(m.show(t)); const p = e.get("slice"); p && r.push(p.show(t)), p.get("active") && p.states.applyAnimate("active"), yield Promise.all(r) }) } hideDataItem(e, t) { const s = Object.create(null, { hideDataItem: { get: () => super.hideDataItem } }); return Mt(this, void 0, void 0, function* () { const r = [s.hideDataItem.call(this, e, t)], o = this.states.create("hidden", {}); le(t) || (t = o.get("stateAnimationDuration", this.get("stateAnimationDuration", 0))); const u = o.get("stateAnimationEasing", this.get("stateAnimationEasing")), d = e.animate({ key: "valueWorking", to: 0, duration: t, easing: u }); d && r.push(d.waitForStop()); const f = e.get("tick"); f && r.push(f.hide(t)); const m = e.get("label"); m && r.push(m.hide(t)); const p = e.get("slice"); p.hideTooltip(), p && r.push(p.hide(t)), yield Promise.all(r) }) } disposeDataItem(e) { super.disposeDataItem(e); let t = e.get("label"); t && (this.labels.removeValue(t), t.dispose()); let s = e.get("tick"); s && (this.ticks.removeValue(s), s.dispose()); let r = e.get("slice"); r && (this.slices.removeValue(r), r.dispose()) } hoverDataItem(e) { const t = e.get("slice"); t && !t.isHidden() && t.hover() } unhoverDataItem(e) { const t = e.get("slice"); t && t.unhover() } updateLegendMarker(e) { if (e) { const t = e.get("slice"); if (t) { const s = e.get("legendDataItem"); if (s) { const r = s.get("markerRectangle"); te(Vf, o => { t.get(o) != null && r.set(o, t.get(o)) }) } } } } _arrangeDown(e) { if (e) { let t = this._getNextDown(); e.sort((s, r) => s.y > r.y ? 1 : s.y < r.y ? -1 : 0), te(e, s => { const r = s.label.adjustedLocalBounds(); let o = r.top; s.y + o < t && (s.y = t - o), s.label.set("y", s.y), t = s.y + r.bottom }) } } _getNextUp() { return this.labelsContainer.maxHeight() } _getNextDown() { return 0 } _arrangeUp(e) { if (e) { let t = this._getNextUp(); e.sort((s, r) => s.y < r.y ? 1 : s.y > r.y ? -1 : 0), te(e, s => { const r = s.label.adjustedLocalBounds(); let o = r.bottom; s.y + o > t && (s.y = t - o), s.label.set("y", s.y), t = s.y + r.top }) } } _arrangeRight(e) { if (e) { let t = 0; e.sort((s, r) => s.y > r.y ? 1 : s.y < r.y ? -1 : 0), te(e, s => { const r = s.label.adjustedLocalBounds(); let o = r.left; s.y + o < t && (s.y = t - o), s.label.set("x", s.y), t = s.y + r.right }) } } _arrangeLeft(e) { if (e) { let t = this.labelsContainer.maxWidth(); e.sort((s, r) => s.y < r.y ? 1 : s.y > r.y ? -1 : 0), te(e, s => { const r = s.label.adjustedLocalBounds(); let o = r.right; s.y + o > t && (s.y = t - o), s.label.set("x", s.y), t = s.y + r.left }) } } _updateSize() { super._updateSize(), this.markDirty() } _updateTick(e) { } _dispose() { super._dispose(); const e = this.chart; e && e.series.removeValue(this) } } Object.defineProperty(An, "className", { enumerable: !0, configurable: !0, writable: !0, value: "PercentSeries" }); Object.defineProperty(An, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: na.classNames.concat([An.className]) }); class bu extends Dn { constructor() { super(...arguments), Object.defineProperty(this, "_maxRadius", { enumerable: !0, configurable: !0, writable: !0, value: 1 }) } _afterNew() { super._afterNew(), this.seriesContainer.setAll({ x: Oe, y: Oe }) } _prepareChildren() { super._prepareChildren(); const e = this.chartContainer, t = e.innerWidth(), s = e.innerHeight(), r = this.get("startAngle", 0), o = this.get("endAngle", 0), u = this.get("innerRadius"); let d = Xf(0, 0, r, o, 1); const f = t / (d.right - d.left), m = s / (d.bottom - d.top); let p = { left: 0, right: 0, top: 0, bottom: 0 }; if (u instanceof Ie) { let b = u.value, v = Math.min(f, m); b = Math.max(v * b, v - Math.min(s, t)) / v, p = Xf(0, 0, r, o, b), this.setPrivateRaw("irModifyer", b / u.value) } d = cN([d, p]); const g = this._maxRadius; this._maxRadius = Math.min(f, m); const y = mt(this.get("radius", 0), this._maxRadius); this.seriesContainer.setAll({ dy: -y * (d.bottom + d.top) / 2, dx: -y * (d.right + d.left) / 2 }), (this.isDirty("startAngle") || this.isDirty("endAngle") || g != this._maxRadius) && this.series.each(b => { b._markDirtyKey("startAngle") }), (this.isDirty("innerRadius") || this.isDirty("radius")) && this.series.each(b => { b._markDirtyKey("innerRadius") }) } radius(e) { let t = mt(this.get("radius", 0), this._maxRadius), s = mt(this.get("innerRadius", 0), t); if (e) { let r = this.series.indexOf(e), o = this.series.length, u = e.get("radius"); return u != null ? s + mt(u, t - s) : s + (t - s) / o * (r + 1) } return t } innerRadius(e) { const t = this.radius(); let s = mt(this.get("innerRadius", 0), t); if (s < 0 && (s = t + s), e) { let r = this.series.indexOf(e), o = this.series.length, u = e.get("innerRadius"); return u != null ? s + mt(u, t - s) : s + (t - s) / o * r } return s } _updateSize() { super._updateSize(), this.markDirtyKey("radius") } } Object.defineProperty(bu, "className", { enumerable: !0, configurable: !0, writable: !0, value: "PieChart" }); Object.defineProperty(bu, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Dn.classNames.concat([bu.className]) }); class xu extends An { _makeSlices() { return new At(at.new({}), () => mu._new(this._root, { themeTags: Ve(this.slices.template.get("themeTags", []), ["pie", "series"]) }, [this.slices.template])) } _makeLabels() { return new At(at.new({}), () => hu._new(this._root, { themeTags: Ve(this.labels.template.get("themeTags", []), ["pie", "series"]) }, [this.labels.template])) } _makeTicks() { return new At(at.new({}), () => wn._new(this._root, { themeTags: Ve(this.ticks.template.get("themeTags", []), ["pie", "series"]) }, [this.ticks.template])) } processDataItem(e) { super.processDataItem(e); const t = this.makeSlice(e); t.on("scale", () => { this._updateTick(e) }), t.on("shiftRadius", () => { this._updateTick(e) }), t.events.on("positionchanged", () => { this._updateTick(e) }); const s = this.makeLabel(e); s.events.on("positionchanged", () => { this._updateTick(e) }), this.makeTick(e), t.events.on("positionchanged", () => { s.markDirty() }) } _getNextUp() { const e = this.chart; return e ? e._maxRadius : this.labelsContainer.maxHeight() / 2 } _getNextDown() { const e = this.chart; return e ? -e._maxRadius : -this.labelsContainer.maxHeight() / 2 } _prepareChildren() { super._prepareChildren(); const e = this.chart; if (e) { if (this.isDirty("alignLabels")) { let t = this.labels.template; if (this.get("alignLabels")) t.set("textType", "aligned"); else { let s = t.get("textType"); (s == null || s == "aligned") && t.set("textType", "adjusted") } } if (this._valuesDirty || this.isDirty("radius") || this.isDirty("innerRadius") || this.isDirty("startAngle") || this.isDirty("endAngle") || this.isDirty("alignLabels")) { this.markDirtyBounds(); const t = this.get("startAngle", e.get("startAngle", -90)), r = this.get("endAngle", e.get("endAngle", 270)) - t; let o = t; const u = e.radius(this); this.setPrivateRaw("radius", u); let d = e.innerRadius(this) * e.getPrivate("irModifyer", 1); d < 0 && (d = u + d), te(this._dataItems, f => { this.updateLegendValue(f); let m = r * f.get("valuePercentTotal") / 100; const p = f.get("slice"); if (p) { p.set("radius", u), p.set("innerRadius", d), p.set("startAngle", o), p.set("arc", m); const b = f.get("fill"); p._setDefault("fill", b), p._setDefault("stroke", b); const v = f.get("fillPattern"); p._setDefault("fillPattern", v) } let g = Au(o + m / 2); const y = f.get("label"); if (y && (y.setPrivate("radius", u), y.setPrivate("innerRadius", d), y.set("labelAngle", g), y.get("textType") == "aligned")) { let b = u + y.get("radius", 0), v = u * zt(g); g > 90 && g <= 270 ? (!y.isHidden() && !y.isHiding() && this._lLabels.push({ label: y, y: v }), b *= -1, b -= this.labelsContainer.get("paddingLeft", 0), y.set("centerX", Te), y.setPrivateRaw("left", !0)) : (!y.isHidden() && !y.isHiding() && this._rLabels.push({ label: y, y: v }), b += this.labelsContainer.get("paddingRight", 0), y.set("centerX", 0), y.setPrivateRaw("left", !1)), y.set("x", b), y.set("y", u * zt(g)) } o += m, this._updateTick(f) }) } } } _updateTick(e) { const t = e.get("tick"), s = e.get("label"), r = e.get("slice"), o = t.get("location", 1); if (t && s && r) { const u = (r.get("shiftRadius", 0) + r.get("radius", 0)) * r.get("scale", 1) * o, d = s.get("labelAngle", 0), f = Wt(d), m = zt(d), p = this.labelsContainer, g = p.get("paddingLeft", 0), y = p.get("paddingRight", 0); let b = 0, v = 0; b = s.x(), v = s.y(); let k = []; if (b != 0 || v != 0) { if (s.get("textType") == "circular") { const S = s.radius() - s.get("paddingBottom", 0), w = s.get("labelAngle", 0); b = S * Wt(w), v = S * zt(w) } let j = -y; s.getPrivate("left") && (j = g), k = [{ x: r.x() + u * f, y: r.y() + u * m }, { x: b + j, y: v }, { x: b, y: v }] } t.set("points", k) } } _positionBullet(e) { const t = e.get("sprite"); if (t) { const r = t.dataItem.get("slice"); if (r) { const o = r.get("innerRadius", 0), u = r.get("radius", 0), d = r.get("startAngle", 0), f = r.get("arc", 0), m = e.get("locationX", .5), p = e.get("locationY", .5), g = d + f * m, y = o + (u - o) * p; t.setAll({ x: Wt(g) * y, y: zt(g) * y }) } } } } Object.defineProperty(xu, "className", { enumerable: !0, configurable: !0, writable: !0, value: "PieSeries" }); Object.defineProperty(xu, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: An.classNames.concat([xu.className]) }); class ao extends Qe { constructor() { super(...arguments), Object.defineProperty(this, "_projectionDirty", { enumerable: !0, configurable: !0, writable: !0, value: !1 }), Object.defineProperty(this, "_tlx", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_tly", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_trx", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_try", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_blx", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_bly", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_brx", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_bry", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_cprx", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_cplx", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_cpry", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_cply", { enumerable: !0, configurable: !0, writable: !0, value: 0 }) } _afterNew() { super._afterNew(), this.set("draw", e => { const t = this.width(), s = this.height(); let r = Math.min(t, s) / 2, o = mt(this.get("cornerRadiusTL", 0), r), u = mt(this.get("cornerRadiusTR", 0), r), d = mt(this.get("cornerRadiusBR", 0), r), f = mt(this.get("cornerRadiusBL", 0), r), m = this._trx, p = this._try, g = this._tlx, y = this._tly, b = this._brx, v = this._bry, k = this._blx, j = this._bly; p == y && (p = p - .01), v == j && (v = v - .01); let S = Ic({ x: g, y }, { x: m, y: p }), w = Ic({ x: m, y: p }, { x: b, y: v }), N = Ic({ x: b, y: v }, { x: k, y: j }), T = Ic({ x: k, y: j }, { x: g, y }); this.get("orientation") == "horizontal" ? (o = Math.min(o, Math.abs(y - p) / 2), u = Math.min(u, Math.abs(y - p) / 2), d = Math.min(d, Math.abs(j - v) / 2), f = Math.min(f, Math.abs(j - v) / 2)) : (o = Math.min(o, Math.abs(g - m) / 2), u = Math.min(u, Math.abs(g - m) / 2), d = Math.min(d, Math.abs(k - b) / 2), f = Math.min(f, Math.abs(k - b) / 2)); const R = g - o * hi((S - T) / 2) * Wt(T), P = y - o * hi((S - T) / 2) * zt(T), O = g - o * hi((T - S) / 2) * Wt(S), z = y - o * hi((T - S) / 2) * zt(S), F = m - u * hi((w - S) / 2) * Wt(S), B = p - u * hi((w - S) / 2) * zt(S), A = m - u * hi((S - w) / 2) * Wt(w), L = p - u * hi((S - w) / 2) * zt(w), M = b - d * hi((N - w) / 2) * Wt(w), X = v - d * hi((N - w) / 2) * zt(w), U = b - d * hi((w - N) / 2) * Wt(N), I = v - d * hi((w - N) / 2) * zt(N), H = k - f * hi((T - N) / 2) * Wt(N), Y = j - f * hi((T - N) / 2) * zt(N), ee = k - f * hi((N - T) / 2) * Wt(T), fe = j - f * hi((N - T) / 2) * zt(T); e.moveTo(O, z), e.lineTo(F, B), e.arcTo(m, p, A, L, u), e.quadraticCurveTo(this._cprx, this._cpry, M, X), e.arcTo(b, v, U, I, d), e.lineTo(H, Y), e.arcTo(k, j, ee, fe, f), e.quadraticCurveTo(this._cplx, this._cply, R, P), e.arcTo(g, y, O, z, o) }) } getPoint(e, t) { let s = this.width(), r = this.height(); const o = this.get("topWidth", 0), u = this.get("bottomWidth", 0); if (this.get("orientation") == "vertical") { let d = -o / 2, f = o / 2, m = u / 2, p = -u / 2, g = d + (p - d) * t, y = f + (m - f) * t; return { x: g + (y - g) * e, y: r * t } } else { let d = -o / 2, f = o / 2, m = u / 2, p = -u / 2, g = d + (p - d) * e, y = f + (m - f) * e; return { x: s * e, y: g + (y - g) * t } } } _changed() { if (this.isDirty("topWidth") || this.isDirty("bottomWidth") || this.isDirty("expandDistance") || this.isDirty("orientation") || this.isDirty("width") || this.isDirty("height")) { const e = this.width(), t = this.height(), s = this.get("topWidth", 0), r = this.get("bottomWidth", 0); this._clear = !0; let o = this.get("expandDistance", 0); this.get("orientation") == "vertical" ? (this._tlx = -s / 2, this._tly = 0, this._trx = s / 2, this._try = 0, this._brx = r / 2, this._bry = t, this._blx = -r / 2, this._bly = t, this._cprx = this._trx + (this._brx - this._trx) / 2 + o * t, this._cpry = this._try + .5 * t, this._cplx = this._tlx + (this._blx - this._tlx) / 2 - o * t, this._cply = this._tly + .5 * t) : (this._tly = s / 2, this._tlx = 0, this._try = -s / 2, this._trx = 0, this._bry = -r / 2, this._brx = e, this._bly = r / 2, this._blx = e, this._cpry = this._try + (this._bry - this._try) / 2 - o * e, this._cprx = this._trx + .5 * e, this._cply = this._tly + (this._bly - this._tly) / 2 + o * e, this._cplx = this._tlx + .5 * e) } super._changed() } } Object.defineProperty(ao, "className", { enumerable: !0, configurable: !0, writable: !0, value: "FunnelSlice" }); Object.defineProperty(ao, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Qe.classNames.concat([ao.className]) }); class no extends An { constructor() { super(...arguments), Object.defineProperty(this, "_tag", { enumerable: !0, configurable: !0, writable: !0, value: "funnel" }), Object.defineProperty(this, "links", { enumerable: !0, configurable: !0, writable: !0, value: this.addDisposer(this._makeLinks()) }), Object.defineProperty(this, "_total", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_count", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_nextCoord", { enumerable: !0, configurable: !0, writable: !0, value: 0 }), Object.defineProperty(this, "_opposite", { enumerable: !0, configurable: !0, writable: !0, value: !1 }) } _makeSlices() { return new At(at.new({}), () => ao._new(this._root, { themeTags: Ve(this.slices.template.get("themeTags", []), [this._tag, "series", "slice", this.get("orientation")]) }, [this.slices.template])) } _makeLabels() { return new At(at.new({}), () => Pi._new(this._root, { themeTags: Ve(this.labels.template.get("themeTags", []), [this._tag, "series", "label", this.get("orientation")]) }, [this.labels.template])) } _makeTicks() { return new At(at.new({}), () => wn._new(this._root, { themeTags: Ve(this.ticks.template.get("themeTags", []), [this._tag, "series", "tick", this.get("orientation")]) }, [this.ticks.template])) } _makeLinks() { return new At(at.new({}), () => ao._new(this._root, { themeTags: Ve(this.links.template.get("themeTags", []), [this._tag, "series", "link", this.get("orientation")]) }, [this.links.template])) } makeLink(e) { const t = this.slicesContainer.children.push(this.links.make()); return t._setDataItem(e), e.set("link", t), this.links.push(t), t } _afterNew() { super._afterNew(); const e = this.slicesContainer; e.setAll({ isMeasured: !0, position: "relative", width: Jt(100), height: Jt(100) }), e.onPrivate("width", () => { this.markDirtySize() }), e.onPrivate("height", () => { this.markDirtySize() }), this.get("orientation") == "vertical" ? this.set("layout", this._root.horizontalLayout) : this.set("layout", this._root.verticalLayout) } processDataItem(e) { super.processDataItem(e); const t = this.makeSlice(e); t._setDataItem(e), e.set("slice", t), this.makeLink(e); const s = this.makeLabel(e); s.on("x", () => { this._updateTick(e) }), s.on("y", () => { this._updateTick(e) }), this.makeTick(e), t.events.on("positionchanged", () => { s.markDirty() }), t.events.on("boundschanged", () => { const r = t.dataItem; r && this._updateTick(r) }) } _updateChildren() { this._opposite = !1, this.children.indexOf(this.labelsContainer) == 0 && (this._opposite = !0); let e = 0, t = 0; if (te(this.dataItems, s => { const r = s.get("value"); le(r) && (t++, r > 0 ? e += Math.abs(s.get("valueWorking", r) / r) : this.get("ignoreZeroValues", !1) || s.isHidden() ? t-- : e += 1) }), this._total = 1 / t * e, this._count = t, this.isDirty("alignLabels") && this._fixLayout(), this._total > 0 && (this._valuesDirty || this._sizeDirty)) { const s = this.slicesContainer; let r; this.get("orientation") == "vertical" ? r = s.innerHeight() : r = s.innerWidth(), this._nextCoord = this.get("startLocation", 0) * r, this.markDirtyBounds(); let o = 0; te(this._dataItems, u => { this.updateLegendValue(u), u.set("index", o), o++; const d = u.get("slice"), f = u.get("tick"), m = u.get("label"), p = u.get("link"), g = u.get("fill"), y = u.get("fillPattern"); d._setDefault("fill", g), d._setDefault("stroke", g), d._setDefault("fillPattern", y), p._setDefault("fill", g), p._setDefault("stroke", g); const b = u.get("value"); le(b) && (b == 0 && this.get("ignoreZeroValues") ? (d.setPrivate("visible", !1), f.setPrivate("visible", !1), m.setPrivate("visible", !1)) : (d.setPrivate("visible", !0), f.setPrivate("visible", !0), m.setPrivate("visible", !0), this.decorateSlice(u), this.isLast(u) ? p.setPrivate("visible", !1) : u.isHidden() || p.setPrivate("visible", !0))) }) } super._updateChildren() } _fixLayout() { const e = this.get("orientation"), t = this.labelsContainer, s = this.labels.template; this.get("alignLabels") ? (t.set("position", "relative"), t.setAll({ isMeasured: !0 }), e == "vertical" ? (this.set("layout", this._root.horizontalLayout), s.setAll({ centerX: Te, x: Te })) : (this.set("layout", this._root.verticalLayout), s.setAll({ centerX: 0, x: 0 }))) : (t.setAll({ isMeasured: !1, position: "absolute" }), e == "vertical" ? (t.setAll({ x: Oe }), s.setAll({ centerX: Oe, x: 0 })) : (t.setAll({ y: Oe }), s.setAll({ centerX: Oe, y: 0 }))), this.markDirtySize() } getNextValue(e) { let t = e.get("index"), s = e.get("valueWorking", 0); if (t < this.dataItems.length - 1) { let r = this.dataItems[t + 1]; if (s = r.get("valueWorking", 0), r.isHidden() || r.get("value") == 0 && this.get("ignoreZeroValues")) return this.getNextValue(r) } return s } isLast(e) { let t = e.get("index"); if (t == this.dataItems.length - 1) return !0; for (let s = t + 1; s < this.dataItems.length; s++)if (!this.dataItems[s].isHidden()) return !1; return !0 } decorateSlice(e) { const t = this.get("orientation"), s = e.get("slice"), r = e.get("label"), o = e.get("link"), u = this.slicesContainer; let d = u.innerWidth(), f = u.innerHeight(), m = d; t == "horizontal" && (m = f); const p = this.getNextValue(e), g = e.get("value", 0), y = Math.abs(e.get("valueWorking", g)), b = this.get("bottomRatio", 0), v = this.getPrivate("valueHigh", 0); let k = 1; g != 0 ? k = y / Math.abs(g) : e.isHidden() && (k = 1e-6), this._nextCoord == 1 / 0 && (this._nextCoord = 0); let j = y / v * m, S = (y - (y - p) * b) / v * m; s.setAll({ topWidth: j, bottomWidth: S, orientation: t }), o.setAll({ topWidth: S, bottomWidth: (y - (y - p)) / v * m, orientation: t }); const w = this.get("startLocation", 0), N = this.get("endLocation", 1); if (t == "vertical") { let T = o.height() * k; f = f * (N - w) + T, s.set("y", this._nextCoord); let R = Math.min(1e5, Math.max(0, f / this._count * k / this._total - T)); s.setAll({ height: R, x: d / 2 }); let P = this._nextCoord + R / 2; r.set("y", P), this._nextCoord += R + T, o.setAll({ y: this._nextCoord - T, x: d / 2 }) } else { let T = o.width() * k; d = d * (N - w) + T, s.set("x", this._nextCoord); let R = Math.min(1e5, Math.max(0, d / this._count * k / this._total - T)); s.setAll({ width: R, y: f / 2 }); const P = this._nextCoord + R / 2; r.set("x", P), this._nextCoord += R + T, o.setAll({ x: this._nextCoord - T, y: f / 2 }) } } hideDataItem(e, t) { const s = Object.create(null, { hideDataItem: { get: () => super.hideDataItem } }); return Mt(this, void 0, void 0, function* () { return e.get("link").hide(t), s.hideDataItem.call(this, e, t) }) } showDataItem(e, t) { const s = Object.create(null, { showDataItem: { get: () => super.showDataItem } }); return Mt(this, void 0, void 0, function* () { return e.get("link").show(t), s.showDataItem.call(this, e, t) }) } _updateTick(e) { if (this.get("alignLabels")) { const t = e.get("tick"), s = e.get("label"), r = e.get("slice"); if (t && r && s) { const o = this.labelsContainer, u = this.slicesContainer; let d = t.get("location", .5); const f = o.width(), m = o.height(), p = o.get("paddingLeft", 0), g = o.get("paddingRight", 0), y = o.get("paddingTop", 0), b = o.get("paddingBottom", 0); let v = { x: 0, y: 0 }, k = { x: 0, y: 0 }, j = { x: 0, y: 0 }; this._opposite && (d = 1 - d), this.get("orientation") == "vertical" ? (v = r.getPoint(d, .5), v.x += r.x() + u.x(), v.y += r.y() + u.y(), this._opposite ? (k.x = f, k.y = s.y(), j.x = f - p, j.y = k.y) : (k.x = u.x() + u.width(), k.y = s.y(), j.x = k.x + f - s.width() - g, j.y = k.y)) : (v = r.getPoint(.5, d), v.x += r.x() + u.x(), v.y += r.y() + u.y(), this._opposite ? (k.y = m, k.x = s.x(), j.y = m - y, j.x = k.x) : (k.y = u.y() + u.height(), k.x = s.x(), j.y = k.y + m - s.height() - b, j.x = k.x)), t.set("points", [v, k, j]) } } } disposeDataItem(e) { super.disposeDataItem(e); let t = e.get("link"); t && (this.links.removeValue(t), t.dispose()) } _positionBullet(e) { const t = e.get("sprite"); if (t) { const r = t.dataItem.get("slice"); if (r) { const o = r.width(), u = r.height(), d = e.get("locationX", .5), f = e.get("locationY", .5); let m = 0, p = 0; this.get("orientation") == "horizontal" ? p = u / 2 : m = o / 2, t.setAll({ x: r.x() + o * d - m, y: r.y() - p + u * f }) } } } } Object.defineProperty(no, "className", { enumerable: !0, configurable: !0, writable: !0, value: "FunnelSeries" }); Object.defineProperty(no, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: An.classNames.concat([no.className]) }); class ro extends Dn { _afterNew() { super._afterNew(), this.seriesContainer.setAll({ isMeasured: !0, layout: this._root.horizontalLayout }) } } Object.defineProperty(ro, "className", { enumerable: !0, configurable: !0, writable: !0, value: "SlicedChart" }); Object.defineProperty(ro, "classNames", { enumerable: !0, configurable: !0, writable: !0, value: Dn.classNames.concat([ro.className]) }); class vm extends vo { setupDefaultRules() { super.setupDefaultRules(), this.rule("Component").setAll({ interpolationDuration: 600 }), this.rule("Hierarchy").set("animationDuration", 600), this.rule("Scrollbar").set("animationDuration", 600), this.rule("Tooltip").set("animationDuration", 300), this.rule("MapChart").set("animationDuration", 1e3), this.rule("MapChart").set("wheelDuration", 300), this.rule("Entity").setAll({ stateAnimationDuration: 600 }), this.rule("Sprite").states.create("default", { stateAnimationDuration: 600 }), this.rule("Tooltip", ["axis"]).setAll({ animationDuration: 200 }), this.rule("WordCloud").set("animationDuration", 500), this.rule("Polygon").set("animationDuration", 600), this.rule("ArcDiagram").set("animationDuration", 600) } } class _m extends vo { setupDefaultRules() { super.setupDefaultRules(), this.rule("InterfaceColors").setAll({ stroke: ke.fromHex(0), fill: ke.fromHex(2829099), primaryButton: ke.lighten(ke.fromHex(6788316), -.2), primaryButtonHover: ke.lighten(ke.fromHex(6779356), -.2), primaryButtonDown: ke.lighten(ke.fromHex(6872181), -.2), primaryButtonActive: ke.lighten(ke.fromHex(6872182), -.2), primaryButtonText: ke.fromHex(16777215), primaryButtonStroke: ke.lighten(ke.fromHex(6788316), -.2), secondaryButton: ke.fromHex(3881787), secondaryButtonHover: ke.lighten(ke.fromHex(3881787), .1), secondaryButtonDown: ke.lighten(ke.fromHex(3881787), .15), secondaryButtonActive: ke.lighten(ke.fromHex(3881787), .2), secondaryButtonText: ke.fromHex(12303291), secondaryButtonStroke: ke.lighten(ke.fromHex(3881787), -.2), grid: ke.fromHex(12303291), background: ke.fromHex(0), alternativeBackground: ke.fromHex(16777215), text: ke.fromHex(16777215), alternativeText: ke.fromHex(0), disabled: ke.fromHex(11382189), positive: ke.fromHex(5288704), negative: ke.fromHex(11730944) }) } } class Eu extends Me.Component { constructor(e) { super(e), this.state = { hasError: !1, error: null } } static getDerivedStateFromError(e) { return { hasError: !0, error: e } } componentDidCatch(e, t) { console.error("Chart Error:", e, t) } render() { return this.state.hasError ? i.jsxs("div", { style: { padding: "20px", textAlign: "center", color: "var(--text-secondary, #64748b)", background: "var(--bg-secondary, #f8fafc)", borderRadius: "12px", border: "1px dashed var(--border-color, #e2e8f0)", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", height: this.props.height || "300px" }, children: [i.jsx("svg", { style: { width: "40px", height: "40px", marginBottom: "10px", color: "#ef4444" }, fill: "none", viewBox: "0 0 24 24", stroke: "currentColor", children: i.jsx("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" }) }), i.jsx("p", { style: { margin: 0, fontWeight: 500 }, children: "Vizuallashdagi xatolik" }), i.jsx("p", { style: { margin: "4px 0 0", fontSize: "13px" }, children: "Ma'lumotlar bu komponent uchun to'g'ri shaklda kelmadi." })] }) : this.props.children } } const w0 = () => document.documentElement.getAttribute("data-theme") === "dark", Kf = l => l && l.replace(/\\n/g, `
`), Bu = l => { const e = _o.new(l), t = [vm.new(e)]; return w0() && t.push(_m.new(e)), e.setThemes(t), e.numberFormatter.setAll({ numberFormat: "#,###", numericFields: ["valueY", "valueX"] }), e }, PC = ["#6366f1", "#10b981", "#f59e0b", "#ef4444", "#06b6d4", "#8b5cf6", "#ec4899", "#3b82f6", "#14b8a6", "#f472b6"], bs = ({ data: l = [], xField: e, yField: t, height: s = 300, horizontal: r = !1, color: o = "#6366f1", colors: u, seriesNames: d, tooltipFormatter: f, barRadius: m = 4, unit: p = "" }) => { const g = C.useRef(null); return C.useLayoutEffect(() => { if (!g.current || !l.length) return; const y = Bu(g.current), b = y.container.children.push(Pr.new(y, { panX: !1, panY: !1, wheelY: "none", layout: y.verticalLayout, paddingLeft: 0, paddingRight: 10 })); let v, k; r ? (v = b.yAxes.push(Es.new(y, { categoryField: e, renderer: Ia.new(y, { minGridDistance: 20, cellStartLocation: .1, cellEndLocation: .9 }) })), k = b.xAxes.push(ra.new(y, { renderer: Tn.new(y, {}), numberFormat: p === "%" ? "#'%'" : "#,###" }))) : (v = b.xAxes.push(Es.new(y, { categoryField: e, renderer: Tn.new(y, { minGridDistance: 40, cellStartLocation: .2, cellEndLocation: .8 }) })), k = b.yAxes.push(ra.new(y, { renderer: Ia.new(y, {}), numberFormat: p === "%" ? "#'%'" : "#,###" }))), v.get("renderer").labels.template.setAll({ fontSize: 11, oversizedBehavior: "truncate", maxWidth: 100 }), v.get("renderer").grid.template.setAll({ visible: !1 }), k.get("renderer").labels.template.setAll({ fontSize: 11 }), k.get("renderer").grid.template.setAll({ strokeDasharray: [3, 3], strokeOpacity: .3 }), v.data.setAll(l); const j = Array.isArray(t) ? t : [t], S = u || [o], w = d || j; if (j.forEach((N, T) => { const R = r ? { valueXField: N, categoryYField: e, xAxis: k, yAxis: v, name: w[T], stacked: j.length > 1, tooltip: Os.new(y, { labelText: Kf(f) || `{categoryY}: {valueX}${p}` }) } : { valueYField: N, categoryXField: e, xAxis: v, yAxis: k, name: w[T], stacked: j.length > 1, tooltip: Os.new(y, { labelText: Kf(f) || `{categoryX}: {valueY}${p}` }) }, P = b.series.push(io.new(y, R)); P.columns.template.setAll({ cornerRadiusTL: r ? 0 : m, cornerRadiusTR: m, cornerRadiusBL: 0, cornerRadiusBR: r ? m : 0, strokeOpacity: 0, fillOpacity: .9, maxWidth: 40 }), P.columns.template.states.create("hover", { fillOpacity: 1 }), P.set("fill", Je(S[T % S.length])), P.set("stroke", Je(S[T % S.length])), P.data.setAll(l), P.appear(800) }), j.length > 1) { const N = b.children.push(Ha.new(y, { centerX: Oe, x: Oe, marginTop: 10 })); N.labels.template.setAll({ fontSize: 11 }), N.data.setAll(b.series.values) } return b.set("cursor", Er.new(y, { behavior: "none" })), b.appear(800, 100), () => y.dispose() }, [l, e, t, r, o, u, d, f, p, m]), i.jsx(Eu, { height: `${s}px`, children: !l || l.length === 0 ? i.jsx("div", { style: { height: `${s}px`, display: "flex", alignItems: "center", justifyContent: "center", background: "var(--bg-secondary, #f8fafc)", borderRadius: "12px", color: "var(--text-secondary, #64748b)", fontSize: "14px", border: "1px dashed var(--border-color, #e2e8f0)" }, children: "Ma'lumot topilmadi" }) : i.jsx("div", { ref: g, style: { width: "100%", height: `${s}px` } }) }) }, Ba = ({ data: l = [], xField: e, yField: t, height: s = 300, color: r = "#6366f1", tooltipText: o, showLine: u = !1 }) => { const d = C.useRef(null); return C.useLayoutEffect(() => { if (!d.current || !l.length) return; const f = Bu(d.current), m = f.container.children.push(Pr.new(f, { panX: !1, panY: !1, wheelY: "none", paddingLeft: 0, paddingRight: 10 })), p = m.xAxes.push(Es.new(f, { categoryField: e, renderer: Tn.new(f, { minGridDistance: 50 }) })); p.get("renderer").labels.template.setAll({ fontSize: 11, rotation: 0 }), p.get("renderer").grid.template.setAll({ visible: !1 }), p.data.setAll(l); const g = m.yAxes.push(ra.new(f, { renderer: Ia.new(f, {}), numberFormat: "#,###" })); g.get("renderer").labels.template.setAll({ fontSize: 11 }), g.get("renderer").grid.template.setAll({ strokeDasharray: [3, 3], strokeOpacity: .3 }); const y = m.series.push(so.new(f, { valueYField: t, categoryXField: e, xAxis: p, yAxis: g, tooltip: Os.new(f, { labelText: Kf(o) || "{categoryX}: {valueY}" }) })); return y.strokes.template.setAll({ strokeWidth: 3, stroke: Je(r) }), y.set("stroke", Je(r)), y.set("fill", Je(r)), u || y.fills.template.setAll({ visible: !0, fillOpacity: .15, fillGradient: uu.new(f, { stops: [{ color: Je(r), opacity: .3 }, { color: Je(r), opacity: .01 }], rotation: 90 }) }), y.bullets.push(() => Kl.new(f, { sprite: Zl.new(f, { radius: 4, fill: Je(r), stroke: f.interfaceColors.get("background"), strokeWidth: 2 }) })), y.data.setAll(l), y.appear(800), m.set("cursor", Er.new(f, { behavior: "none" })), m.appear(800, 100), () => f.dispose() }, [l, e, t, r, u, o]), i.jsx(Eu, { height: `${s}px`, children: !l || l.length === 0 ? i.jsx("div", { style: { height: `${s}px`, display: "flex", alignItems: "center", justifyContent: "center", background: "var(--bg-secondary, #f8fafc)", borderRadius: "12px", color: "var(--text-secondary, #64748b)", fontSize: "14px", border: "1px dashed var(--border-color, #e2e8f0)" }, children: "Ma'lumot topilmadi" }) : i.jsx("div", { ref: d, style: { width: "100%", height: `${s}px` } }) }) }, OC = l => i.jsx(Ba, { ...l, showLine: !0 }), Ra = ({ data: l = [], nameField: e = "name", valueField: t = "value", height: s = 280, innerRadius: r = 55, colors: o, legendPosition: u = "bottom" }) => { const d = C.useRef(null); return C.useLayoutEffect(() => { if (!d.current || !l.length) return; const f = Bu(d.current), m = f.container.children.push(bu.new(f, { layout: u === "right" ? f.horizontalLayout : f.verticalLayout, innerRadius: Jt(r) })), p = m.series.push(xu.new(f, { valueField: t, categoryField: e, alignLabels: !1 })); p.labels.template.setAll({ forceHidden: !0 }), p.ticks.template.setAll({ forceHidden: !0 }); const g = o || PC; p.slices.template.adapters.add("fill", (b, v) => { const k = p.slices.indexOf(v); return Je(g[k % g.length]) }), p.slices.template.adapters.add("stroke", () => Je(w0() ? 1976635 : 16777215)), p.slices.template.setAll({ strokeWidth: 2, strokeOpacity: 1, cornerRadius: 4, tooltipText: "{category}: {value}" }), p.slices.template.states.create("hover", { scale: 1.05 }), p.data.setAll(l); const y = m.children.push(Ha.new(f, { centerX: u === "right" ? void 0 : Oe, x: u === "right" ? void 0 : Oe, marginTop: u === "right" ? 0 : 10, layout: u === "right" ? f.verticalLayout : f.gridLayout })); return y.labels.template.setAll({ fontSize: 11 }), y.valueLabels.template.setAll({ fontSize: 11, fontWeight: "600" }), y.data.setAll(p.dataItems), p.appear(800, 100), m.appear(800, 100), () => f.dispose() }, [l, e, t, r, o, u]), i.jsx(Eu, { height: `${s}px`, children: !l || l.length === 0 ? i.jsx("div", { style: { height: `${s}px`, display: "flex", alignItems: "center", justifyContent: "center", background: "var(--bg-secondary, #f8fafc)", borderRadius: "12px", color: "var(--text-secondary, #64748b)", fontSize: "14px", border: "1px dashed var(--border-color, #e2e8f0)" }, children: "Ma'lumot topilmadi" }) : i.jsx("div", { ref: d, style: { width: "100%", height: `${s}px` } }) }) }, EC = ({ data: l = [], xField: e, barFields: t = [], lineField: s, height: r = 300, lineYAxisFormat: o = "#'%'" }) => { const u = C.useRef(null); return C.useLayoutEffect(() => { if (!u.current || !l.length) return; const d = Bu(u.current), f = d.container.children.push(Pr.new(d, { panX: !1, panY: !1, wheelY: "none", layout: d.verticalLayout, paddingLeft: 0, paddingRight: 10 })), m = f.xAxes.push(Es.new(d, { categoryField: e, renderer: Tn.new(d, { minGridDistance: 40, cellStartLocation: .15, cellEndLocation: .85 }) })); m.get("renderer").labels.template.setAll({ fontSize: 10, oversizedBehavior: "truncate", maxWidth: 80 }), m.get("renderer").grid.template.setAll({ visible: !1 }), m.data.setAll(l); const p = f.yAxes.push(ra.new(d, { renderer: Ia.new(d, {}), numberFormat: "#,###" })); if (p.get("renderer").labels.template.setAll({ fontSize: 11 }), p.get("renderer").grid.template.setAll({ strokeDasharray: [3, 3], strokeOpacity: .3 }), t.forEach((y, b) => { const v = f.series.push(io.new(d, { valueYField: y.field, categoryXField: e, xAxis: m, yAxis: p, name: y.name, stacked: !0, tooltip: Os.new(d, { labelText: "{name}: {valueY}" }) })); v.columns.template.setAll({ cornerRadiusTL: b === t.length - 1 ? 4 : 0, cornerRadiusTR: b === t.length - 1 ? 4 : 0, strokeOpacity: 0, fillOpacity: .9 }), v.set("fill", Je(y.color)), v.set("stroke", Je(y.color)), v.data.setAll(l), v.appear(800) }), s) { const y = f.yAxes.push(ra.new(d, { renderer: Ia.new(d, { opposite: !0 }), numberFormat: o, syncWithAxis: p })); y.get("renderer").labels.template.setAll({ fontSize: 11 }), y.get("renderer").grid.template.setAll({ visible: !1 }); const b = f.series.push(so.new(d, { valueYField: s.field, categoryXField: e, xAxis: m, yAxis: y, name: s.name, tooltip: Os.new(d, { labelText: "{name}: {valueY}%" }) })); b.strokes.template.setAll({ strokeWidth: 3 }), b.set("stroke", Je(s.color)), b.bullets.push(() => Kl.new(d, { sprite: Zl.new(d, { radius: 4, fill: Je(s.color), stroke: d.interfaceColors.get("background"), strokeWidth: 2 }) })), b.data.setAll(l), b.appear(800) } const g = f.children.push(Ha.new(d, { centerX: Oe, x: Oe, marginTop: 10 })); return g.labels.template.setAll({ fontSize: 11 }), g.data.setAll(f.series.values), f.set("cursor", Er.new(d, { behavior: "none" })), f.appear(800, 100), () => d.dispose() }, [l, e, t, s, o]), i.jsx(Eu, { height: `${r}px`, children: !l || l.length === 0 ? i.jsx("div", { style: { height: `${r}px`, display: "flex", alignItems: "center", justifyContent: "center", background: "var(--bg-secondary, #f8fafc)", borderRadius: "12px", color: "var(--text-secondary, #64748b)", fontSize: "14px", border: "1px dashed var(--border-color, #e2e8f0)" }, children: "Ma'lumot topilmadi" }) : i.jsx("div", { ref: u, style: { width: "100%", height: `${r}px` } }) }) }, Zf = ({ items: l = [], title: e, icon: t, height: s = 400 }) => { const r = C.useRef(null), o = C.useRef(null); return C.useLayoutEffect(() => { if (!r.current || !l || l.length === 0) return; const u = l.filter(w => (w.count || 0) > 0); if (u.length === 0) return; const d = _o.new(r.current); o.current = d; const f = document.documentElement.getAttribute("data-theme") === "dark", m = [vm.new(d)]; f && m.push(_m.new(d)), d.setThemes(m); const p = d.container.children.push(ro.new(d, { layout: d.verticalLayout, paddingTop: 0, paddingBottom: 0 })), g = Math.max(...u.map(w => w.count || 0)), y = Math.min(...u.map(w => w.count || 0)), b = g > 0 && y / g < .05, v = p.series.push(no.new(d, { alignLabels: b, orientation: "vertical", valueField: "value", categoryField: "category", bottomRatio: .15 })); v.slices.template.setAll({ strokeWidth: 0, strokeOpacity: 0, fillOpacity: .9, cornerRadius: 4, tooltipText: "{category}: {value} ta" }), v.slices.template.states.create("hover", { fillOpacity: 1, scale: 1.02 }), b ? (v.labels.template.setAll({ fontSize: 12, fontWeight: "600", fill: Je(f ? 14870768 : 3359061), text: "{category}: {value} ta", populateText: !0 }), v.ticks.template.setAll({ stroke: Je(f ? 4674921 : 13358561), strokeWidth: 1, strokeDasharray: [3, 3] })) : (v.labels.template.setAll({ fontSize: 13, fontWeight: "600", fill: Je(16777215), text: "{category}: {value} ta", textAlign: "center", populateText: !0 }), v.ticks.template.setAll({ forceHidden: !0 })); const k = b ? Math.max(1, Math.round(g * .04)) : 0, j = u.map(w => ({ value: Math.max(w.count || 0, k), realValue: w.count || 0, category: w.name, sliceSettings: { fill: Je(w.color) } })); v.labels.template.adapters.add("text", (w, N) => { const T = N.dataItem; return T?.dataContext?.realValue !== void 0 ? `${T.dataContext.category}: ${T.dataContext.realValue} ta` : w }), v.slices.template.adapters.add("tooltipText", (w, N) => { const T = N.dataItem; return T?.dataContext?.realValue !== void 0 ? `${T.dataContext.category}: ${T.dataContext.realValue} ta` : w }), v.slices.template.adapters.add("fill", (w, N) => { const T = N.dataItem; return T?.dataContext?.sliceSettings ? T.dataContext.sliceSettings.fill : w }), v.slices.template.adapters.add("stroke", (w, N) => { const T = N.dataItem; return T?.dataContext?.sliceSettings ? T.dataContext.sliceSettings.fill : w }), v.data.setAll(j); const S = p.children.push(Ha.new(d, { centerX: Oe, x: Oe, marginTop: 10, marginBottom: 5 })); return S.labels.template.setAll({ fontSize: 12, fill: Je(f ? 13358561 : 4674921) }), S.valueLabels.template.setAll({ fontSize: 12, fontWeight: "600", fill: Je(f ? 15857145 : 988970) }), S.valueLabels.template.adapters.add("text", (w, N) => { const T = N.dataItem?.dataContext; return T?.dataContext?.realValue !== void 0 ? String(T.dataContext.realValue) : w }), S.data.setAll(v.dataItems), v.appear(1e3, 100), p.appear(1e3, 100), () => { d.dispose() } }, [l]), C.useEffect(() => { const u = new MutationObserver(() => { o.current && (o.current.dispose(), o.current = null); const d = new Event("themechange"); window.dispatchEvent(d) }); return u.observe(document.documentElement, { attributes: !0, attributeFilter: ["data-theme"] }), () => u.disconnect() }, []), !l || l.length === 0 ? null : i.jsxs("div", { style: { width: "100%" }, children: [e && i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "8px", marginBottom: "8px", fontSize: "15px", fontWeight: "700", color: "var(--text-primary)" }, children: [t, e] }), i.jsx("div", { ref: r, style: { width: "100%", height: `${s}px` } })] }) }, BC = () => { const { user: l } = xo(), [e, t] = C.useState(null), [s, r] = C.useState(!0); C.useEffect(() => { o() }, []); const o = async () => { try { const g = await Rf.getSummary(); t(g.data) } catch (g) { console.error("Dashboard stats error:", g) } finally { r(!1) } }, u = g => new Intl.NumberFormat("uz-UZ").format(g) + " so'm", d = [{ label: "Binolar", value: e?.buildings_count || "0", color: "primary", icon: "building" }, { label: "Uylar", value: e?.homes_count || "0", color: "success", icon: "home" }, { label: "Mijozlar", value: e?.clients_count || "0", color: "warning", icon: "users" }, { label: "Shartnomalar", value: e?.contracts_count || "0", color: "cyan", icon: "contract" }], f = [{ label: "Bugungi tushum", value: e?.revenue?.daily || 0, color: "success" }, { label: "Haftalik tushum", value: e?.revenue?.weekly || 0, color: "primary" }, { label: "Oylik tushum", value: e?.revenue?.monthly || 0, color: "info" }, { label: "Umumiy qarzlar", value: e?.revenue?.total_debt || 0, color: "warning" }], p = (() => { const g = new Date, y = ["Yakshanba", "Dushanba", "Seshanba", "Chorshanba", "Payshanba", "Juma", "Shanba"], b = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"]; return { weekday: y[g.getDay()], formatted: `${g.getDate()}-${b[g.getMonth()]} ${g.getFullYear()}` } })(); return s && !e ? i.jsxs("div", { className: "loading-container", children: [i.jsx("div", { className: "loading-spinner" }), i.jsx("p", { children: "Ma'lumotlar yuklanmoqda..." })] }) : i.jsxs("div", { className: "dashboard-content", children: [i.jsxs("header", { className: "dashboard-header", children: [i.jsxs("div", { className: "header-info", children: [i.jsx("p", { className: "greeting", children: "Xush kelibsiz," }), i.jsxs("h1", { className: "title", children: [l?.first_name || l?.username || "Admin", " ", i.jsx("span", { children: "" })] })] }), i.jsxs("div", { className: "date-box", children: [i.jsx(RC, {}), i.jsxs("div", { children: [i.jsx("span", { className: "date-label", children: p.weekday }), i.jsx("span", { className: "date-value", children: p.formatted })] })] })] }), i.jsx("section", { className: "stats-grid", children: d.map(g => i.jsxs("div", { className: `stat-card stat-${g.color}`, children: [i.jsx("div", { className: "stat-icon", children: i.jsx(LC, { type: g.icon }) }), i.jsxs("div", { className: "stat-info-box", children: [i.jsx("span", { className: "stat-value", children: g.value }), i.jsx("span", { className: "stat-label", children: g.label })] })] }, g.label)) }), i.jsx("div", { className: "section-title", children: "Moliyaviy ko'rsatkichlar" }), i.jsx("section", { className: "revenue-grid", children: f.map(g => { const y = e?.revenue?.total_sales_value || 1, b = g.value / y * 100, v = Math.min(100, Math.max(2, b)), k = g.label === "Umumiy qarzlar"; return i.jsxs("div", { className: `revenue-card rev-${g.color}`, children: [i.jsx("span", { className: "revenue-label", children: g.label }), i.jsx("span", { className: "revenue-value", children: u(g.value) }), i.jsxs("div", { className: "revenue-chart-mini", children: [i.jsx("div", { className: "mini-bar-container", children: i.jsx("div", { className: "mini-bar", style: { width: `${v}%` } }) }), i.jsxs("div", { className: "revenue-footer", children: [i.jsx("span", { className: "footer-target", children: k ? `To'langan: ${u(y - g.value)}` : `Jami: ${u(y)}` }), i.jsx("span", { className: "footer-percent", children: k ? `${b.toFixed(1)}% to'lanmagan` : `${b.toFixed(1)}%` })] })] })] }, g.label) }) }), i.jsx("div", { className: "section-title", children: "Asosiy tahlillar" }), i.jsxs("section", { className: "charts-grid-layout", children: [e?.homes_funnel && i.jsx("div", { className: "chart-card", children: i.jsx(Zf, { items: e.homes_funnel, maxWidth: 550, title: "Xonadonlar holati", unit: "ta uy", icon: i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M3 12l9-9 9 9" }), i.jsx("path", { d: "M5 10v10a1 1 0 001 1h12a1 1 0 001-1V10" })] }) }) }), i.jsxs("div", { className: "chart-card", children: [i.jsx("div", { className: "chart-header", children: i.jsx("h3", { children: "Bino bandligi (Sotilgan / Jami)" }) }), i.jsx("div", { className: "chart-container", children: i.jsx(bs, { data: e?.building_occupancy || [], xField: "name", yField: "percentage", height: 300, color: "#6366f1", unit: "%", tooltipFormatter: "{categoryX}: {valueY}%" }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsx("div", { className: "chart-header", children: i.jsx("h3", { children: "Haftalik mijozlar o'sishi" }) }), i.jsx("div", { className: "chart-container", children: i.jsx(Ba, { data: e?.weekly_trend || [], xField: "date", yField: "count", height: 300, color: "#6366f1", tooltipText: "Sana: {categoryX}\\nMijozlar: {valueY}" }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsx("div", { className: "chart-header", children: i.jsx("h3", { children: "Mijozlar qayerdan eshitgan" }) }), i.jsx("div", { className: "chart-container pie-chart-container", children: i.jsx(Ra, { data: e?.lead_sources || [], nameField: "heard_source", valueField: "count", height: 280, innerRadius: 55 }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsx("div", { className: "chart-header", children: i.jsx("h3", { children: "Eng ko'p qarzdorlar" }) }), i.jsx("div", { className: "chart-container", children: i.jsx(bs, { data: e?.debtors || [], xField: "client", yField: "amount", height: 300, horizontal: !0, color: "#ef4444", tooltipFormatter: "{categoryY}: {valueX}" }) })] })] }), i.jsx("div", { className: "section-title", children: "Chiqimlar tahlili" }), i.jsxs("section", { className: "charts-grid-layout charts-three-col", children: [i.jsxs("div", { className: "chart-card", children: [i.jsx("div", { className: "chart-header", children: i.jsx("h3", { children: "Kunlik chiqimlar trendi" }) }), i.jsx("div", { className: "chart-container", children: i.jsx(Ba, { data: e?.expenses?.daily_trend || [], xField: "date", yField: "amount", height: 250, color: "#ef4444", tooltipText: "Sana: {categoryX}\\nChiqim: {valueY}" }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsx("div", { className: "chart-header", children: i.jsx("h3", { children: "Xarajat turlari" }) }), i.jsx("div", { className: "chart-container pie-chart-container", children: i.jsx(Ra, { data: e?.expenses?.by_category || [], nameField: "name", valueField: "value", height: 260, innerRadius: 55 }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsx("div", { className: "chart-header", children: i.jsx("h3", { children: "Binolar bo'yicha chiqimlar" }) }), i.jsx("div", { className: "chart-container", children: i.jsx(bs, { data: e?.expenses?.by_building || [], xField: "name", yField: "value", height: 250, color: "#f59e0b", tooltipFormatter: "{categoryX}: {valueY}" }) })] })] })] }) }, RC = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "3", y: "4", width: "18", height: "18", rx: "2" }), i.jsx("line", { x1: "16", y1: "2", x2: "16", y2: "6" }), i.jsx("line", { x1: "8", y1: "2", x2: "8", y2: "6" }), i.jsx("line", { x1: "3", y1: "10", x2: "21", y2: "10" })] }), LC = ({ type: l }) => l === "building" ? i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "4", y: "2", width: "16", height: "20", rx: "2" }), i.jsx("path", { d: "M9 22v-4h6v4" })] }) : l === "home" ? i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M3 12l9-9 9 9" }), i.jsx("path", { d: "M5 10v10a1 1 0 001 1h12a1 1 0 001-1V10" })] }) : l === "users" ? i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" }), i.jsx("circle", { cx: "9", cy: "7", r: "4" })] }) : i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }), i.jsx("polyline", { points: "14 2 14 8 20 8" })] }), Ir = async (l = {}) => (await we.get("/cities/", { params: l })).data, k0 = async () => { const l = await we.get("/cities/", { params: { page_size: 1e3 } }); return l.data.results || l.data }, zC = async l => (await we.post("/cities/", l)).data, FC = async (l, e) => (await we.put(`/cities/${l}/`, e)).data, HC = async l => (await we.delete(`/cities/${l}/`)).data, IC = () => { const [l, e] = C.useState([]), [t, s] = C.useState(!0), [r, o] = C.useState(""), [u, d] = C.useState({ open: !1, type: null, city: null }), [f, m] = C.useState(!1), [p, g] = C.useState({ name: "" }), [y, b] = C.useState(!1), [v, k] = C.useState({ count: 0, page: 1, pageSize: 20, totalPages: 1 }); C.useEffect(() => { j() }, [v.page]); const j = async () => { try { s(!0); const B = { page: v.page, page_size: v.pageSize }; r && (B.search = r); const A = await Ir(B), L = Array.isArray(A) ? A : A.results || []; e(L); const M = Array.isArray(A) ? A.length : A.count || L.length || 0; k(X => ({ ...X, count: M, totalPages: Math.ceil(M / X.pageSize) || 1 })) } catch (B) { console.error("Shaharlarni yuklashda xatolik:", B), $.error("Shaharlarni yuklashda xatolik"), e([]), k(A => ({ ...A, count: 0, totalPages: 1 })) } finally { s(!1) } }, S = B => { const A = B.target.value; o(A), k(L => ({ ...L, page: 1 })) }; C.useEffect(() => { setTimeout(() => { j() }, 300) }, [r]); const w = B => { B >= 1 && B <= v.totalPages && k(A => ({ ...A, page: B })) }, N = () => { g({ name: "" }), d({ open: !0, type: "create", city: null }) }, T = B => { g({ name: B.name }), d({ open: !0, type: "edit", city: B }) }, R = B => { d({ open: !0, type: "delete", city: B }) }, P = () => { m(!0), setTimeout(() => { d({ open: !1, type: null, city: null }), m(!1), g({ name: "" }) }, 250) }, O = async B => { if (B.preventDefault(), !p.name.trim()) { $.error("Shahar nomini kiriting"); return } try { b(!0), u.type === "edit" ? (await FC(u.city.id, p), $.success("Shahar muvaffaqiyatli yangilandi")) : (await zC(p), $.success("Shahar muvaffaqiyatli yaratildi")), P(), j() } catch { $.error(u.type === "edit" ? "Shaharni yangilashda xatolik" : "Shahar yaratishda xatolik") } finally { b(!1) } }, z = async () => { if (u.city) try { b(!0), await HC(u.city.id), $.success("Shahar muvaffaqiyatli o'chirildi"), P(), j() } catch { $.error("Shaharni o'chirishda xatolik") } finally { b(!1) } }, F = B => { const A = new Date(B), L = A.getDate(), M = A.getFullYear(), U = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"][A.getMonth()]; return `${L}-${U} ${M}` }; return i.jsxs("div", { className: "cities-page", children: [i.jsxs("div", { className: "page-header", children: [i.jsxs("div", { className: "header-left", children: [i.jsx("h1", { className: "page-title", children: "Shaharlar" }), i.jsx("p", { className: "page-subtitle", children: "Barcha shaharlar ro'yxati" })] }), i.jsxs("button", { className: "btn-primary", onClick: N, children: [i.jsx(_y, {}), i.jsx("span", { children: "Shahar qo'shish" })] })] }), i.jsx("div", { className: "page-content", children: i.jsxs("div", { className: "content-card", children: [i.jsxs("div", { className: "card-header", children: [i.jsxs("div", { className: "search-box", children: [i.jsx(qC, {}), i.jsx("input", { type: "text", placeholder: "Shahar nomi bo'yicha qidirish...", value: r, onChange: S })] }), i.jsxs("div", { className: "results-count", children: ["Jami: ", i.jsx("strong", { children: v.count }), " ta shahar"] })] }), t ? i.jsxs("div", { className: "loading-state", children: [i.jsx("div", { className: "spinner" }), i.jsx("p", { children: "Yuklanmoqda..." })] }) : l.length === 0 ? i.jsxs("div", { className: "empty-state", children: [i.jsx(UC, {}), i.jsx("h3", { children: "Shaharlar topilmadi" }), i.jsx("p", { children: "Hozircha shaharlar mavjud emas yoki qidiruv natijasi topilmadi" }), i.jsxs("button", { className: "btn-primary", onClick: N, children: [i.jsx(_y, {}), i.jsx("span", { children: "Birinchi shaharni qo'shish" })] })] }) : i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "table-container", children: i.jsxs("table", { className: "data-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { children: "#" }), i.jsx("th", { children: "Shahar nomi" }), i.jsx("th", { children: "Yaratilgan sana" }), i.jsx("th", { children: "Amallar" })] }) }), i.jsx("tbody", { children: l.map((B, A) => i.jsxs("tr", { onClick: () => T(B), style: { cursor: "pointer" }, className: "clickable-row", children: [i.jsx("td", { className: "cell-number", children: (v.page - 1) * v.pageSize + A + 1 }), i.jsx("td", { className: "cell-name", children: B.name }), i.jsx("td", { className: "cell-date", children: F(B.created) }), i.jsx("td", { className: "cell-actions", onClick: L => L.stopPropagation(), children: i.jsxs("div", { className: "table-actions", children: [i.jsx("button", { className: "btn-icon btn-edit", onClick: () => T(B), title: "Tahrirlash", children: i.jsx(YC, {}) }), i.jsx("button", { className: "btn-icon btn-delete", onClick: () => R(B), title: "O'chirish", children: i.jsx(jy, {}) })] }) })] }, B.id)) })] }) }), v.totalPages > 1 && i.jsxs("div", { className: "pagination-container", children: [i.jsxs("div", { className: "pagination-info", children: ["Sahifa ", v.page, " / ", v.totalPages] }), i.jsxs("div", { className: "pagination-controls", children: [i.jsx("button", { className: "pagination-btn", onClick: () => w(v.page - 1), disabled: v.page === 1, children: i.jsx(VC, {}) }), Array.from({ length: Math.min(5, v.totalPages) }, (B, A) => { let L; return v.totalPages <= 5 || v.page <= 3 ? L = A + 1 : v.page >= v.totalPages - 2 ? L = v.totalPages - 4 + A : L = v.page - 2 + A, i.jsx("button", { className: `pagination-btn ${v.page === L ? "active" : ""}`, onClick: () => w(L), children: L }, L) }), i.jsx("button", { className: "pagination-btn", onClick: () => w(v.page + 1), disabled: v.page === v.totalPages, children: i.jsx(WC, {}) })] })] })] })] }) }), u.open && (u.type === "create" || u.type === "edit") && gt.createPortal(i.jsx("div", { className: `modal-overlay ${f ? "closing" : ""}`, onClick: P, children: i.jsxs("div", { className: `modal-content modal-form ${f ? "closing" : ""}`, onClick: B => B.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: u.type === "edit" ? "Shaharni tahrirlash" : "Yangi shahar qo'shish" }), i.jsx("button", { className: "modal-close", onClick: P, children: i.jsx(wy, {}) })] }), i.jsxs("form", { onSubmit: O, children: [i.jsx("div", { className: "modal-form-body", children: i.jsxs("div", { className: "form-group", children: [i.jsx("label", { htmlFor: "name", className: "required", children: "Shahar nomi" }), i.jsx("input", { type: "text", id: "name", placeholder: "Masalan: Toshkent", value: p.name, onChange: B => g({ ...p, name: B.target.value }), autoFocus: !0 })] }) }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { type: "button", className: "btn-secondary", onClick: P, children: "Bekor qilish" }), i.jsx("button", { type: "submit", className: "btn-primary", disabled: y, children: y ? i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "btn-spinner" }), i.jsx("span", { children: "Saqlanmoqda..." })] }) : i.jsxs(i.Fragment, { children: [i.jsx(XC, {}), i.jsx("span", { children: u.type === "edit" ? "Saqlash" : "Yaratish" })] }) })] })] })] }) }), document.body), u.open && u.type === "delete" && gt.createPortal(i.jsx("div", { className: `modal-overlay ${f ? "closing" : ""}`, onClick: P, children: i.jsxs("div", { className: `modal-content ${f ? "closing" : ""}`, onClick: B => B.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: "Shaharni o'chirish" }), i.jsx("button", { className: "modal-close", onClick: P, children: i.jsx(wy, {}) })] }), i.jsxs("div", { className: "modal-body", style: { textAlign: "center", padding: "32px 24px" }, children: [i.jsx("div", { className: "modal-icon danger", style: { margin: "0 auto 20px", width: "64px", height: "64px", borderRadius: "50%", background: "rgba(239, 68, 68, 0.1)", color: "#ef4444", display: "flex", alignItems: "center", justifyContent: "center" }, children: i.jsx(jy, {}) }), i.jsxs("p", { style: { fontSize: "16px", color: "var(--text-primary)", marginBottom: "8px" }, children: [i.jsx("strong", { children: u.city?.name }), " shahrini o'chirishni xohlaysizmi?"] }), i.jsx("p", { style: { fontSize: "14px", color: "var(--text-secondary)" }, children: "Bu amalni ortga qaytarib bo'lmaydi." })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { className: "btn-secondary", onClick: P, children: "Bekor qilish" }), i.jsx("button", { className: "btn-danger", onClick: z, disabled: y, children: y ? "O'chirilmoqda..." : "O'chirish" })] })] }) }), document.body)] }) }, _y = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "12", y1: "5", x2: "12", y2: "19" }), i.jsx("line", { x1: "5", y1: "12", x2: "19", y2: "12" })] }), qC = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "11", cy: "11", r: "8" }), i.jsx("line", { x1: "21", y1: "21", x2: "16.65", y2: "16.65" })] }), YC = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" }), i.jsx("path", { d: "M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" })] }), jy = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("polyline", { points: "3 6 5 6 21 6" }), i.jsx("path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" })] }), XC = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" }), i.jsx("polyline", { points: "17 21 17 13 7 13 7 21" }), i.jsx("polyline", { points: "7 3 7 8 15 8" })] }), wy = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }), UC = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "1.5", children: [i.jsx("path", { d: "M3 21h18M5 21V7l8-4 8 4v14" }), i.jsx("rect", { x: "9", y: "9", width: "2", height: "2" }), i.jsx("rect", { x: "13", y: "9", width: "2", height: "2" }), i.jsx("rect", { x: "9", y: "13", width: "2", height: "2" }), i.jsx("rect", { x: "13", y: "13", width: "2", height: "2" })] }), VC = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("polyline", { points: "15 18 9 12 15 6" }) }), WC = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("polyline", { points: "9 18 15 12 9 6" }) }), Ru = async (l = {}) => (await we.get("/buildings/", { params: l })).data, jm = async (l = {}) => { const e = await we.get("/buildings/", { params: { ...l, page_size: 1e3 } }); return e.data.results || e.data }, GC = async l => (await we.get(`/buildings/${l}/`)).data, $C = async l => { const t = l instanceof FormData ? { headers: { "Content-Type": "multipart/form-data" } } : {}; return (await we.post("/buildings/", l, t)).data }, KC = async (l, e) => { const s = e instanceof FormData ? { headers: { "Content-Type": "multipart/form-data" } } : {}; return (await we.put(`/buildings/${l}/`, e, s)).data }, ZC = async l => (await we.delete(`/buildings/${l}/`)).data, QC = () => { const l = bi(), [e, t] = C.useState([]), [s, r] = C.useState([]), [o, u] = C.useState(!0), [d, f] = C.useState(""), [m, p] = C.useState(""), [g, y] = C.useState({ open: !1, type: null, building: null }), [b, v] = C.useState(!1), [k, j] = C.useState(!1), [S, w] = C.useState({ count: 0, page: 1, pageSize: 20, totalPages: 1 }); C.useEffect(() => { T() }, []), C.useEffect(() => { N() }, [S.page, d, m]); const N = async () => { try { u(!0); const U = { page: S.page, page_size: S.pageSize }; d && (U.search = d), m && (U.city = m); const I = await Ru(U), H = Array.isArray(I) ? I : I.results || []; t(H); const Y = Array.isArray(I) ? I.length : I.count || H.length || 0; w(ee => ({ ...ee, count: Y, totalPages: Math.ceil(Y / ee.pageSize) || 1 })) } catch (U) { console.error("Binolarni yuklashda xatolik:", U), $.error("Binolarni yuklashda xatolik"), t([]), w(I => ({ ...I, count: 0, totalPages: 1 })) } finally { u(!1) } }, T = async () => { try { const U = await Ir({ page_size: 1e3 }), I = U.results || U; r(Array.isArray(I) ? I : []) } catch (U) { console.error("Shaharlarni yuklashda xatolik:", U) } }, R = U => { const I = U.target.value; f(I), w(H => ({ ...H, page: 1 })) }, P = U => { const I = U.target.value; p(I), w(H => ({ ...H, page: 1 })) }, O = U => { U >= 1 && U <= S.totalPages && w(I => ({ ...I, page: U })) }, z = () => { l("/buildings/create") }, F = U => { l(`/buildings/${U.id}/edit`) }, B = U => { y({ open: !0, type: "delete", building: U }) }, A = () => { v(!0), setTimeout(() => { y({ open: !1, type: null, building: null }), v(!1) }, 250) }, L = U => { if (U == null || U === "") return ""; const I = Math.floor(Number(U)); return isNaN(I) ? "" : I.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") }, M = async () => { if (g.building) try { j(!0), await ZC(g.building.id), $.success("Bino muvaffaqiyatli o'chirildi"), A(), N() } catch (U) { const I = U.response?.data?.detail || "Binoni o'chirishda xatolik"; $.error(I) } finally { j(!1) } }, X = U => { const I = new Date(U), H = I.getDate(), Y = I.getFullYear(); return `${H}-${["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"][I.getMonth()]} ${Y}` }; return i.jsxs("div", { className: "buildings-page", children: [i.jsxs("div", { className: "page-header", children: [i.jsxs("div", { className: "header-left", children: [i.jsx("h1", { className: "page-title", children: "Binolar" }), i.jsx("p", { className: "page-subtitle", children: "Barcha binolar ro'yxati" })] }), i.jsxs("button", { className: "btn-primary", onClick: z, children: [i.jsx(ky, {}), i.jsx("span", { children: "Bino qo'shish" })] })] }), i.jsx("div", { className: "page-content", children: i.jsxs("div", { className: "content-card", children: [i.jsxs("div", { className: "card-header", children: [i.jsxs("div", { className: "filters-row", children: [i.jsxs("div", { className: "search-box", children: [i.jsx(JC, {}), i.jsx("input", { type: "text", placeholder: "Bino nomi yoki shifri...", value: d, onChange: R })] }), i.jsxs("select", { className: "filter-select", value: m, onChange: P, children: [i.jsx("option", { value: "", children: "Barcha shaharlar" }), s.map(U => i.jsx("option", { value: U.id, children: U.name }, U.id))] })] }), i.jsxs("div", { className: "results-count", children: ["Jami: ", i.jsx("strong", { children: S.count }), " ta bino"] })] }), o ? i.jsxs("div", { className: "loading-state", children: [i.jsx("div", { className: "spinner" }), i.jsx("p", { children: "Yuklanmoqda..." })] }) : e.length === 0 ? i.jsxs("div", { className: "empty-state", children: [i.jsx(iT, {}), i.jsx("h3", { children: "Binolar topilmadi" }), i.jsx("p", { children: "Hozircha binolar mavjud emas yoki qidiruv natijasi topilmadi" }), i.jsxs("button", { className: "btn-primary", onClick: z, children: [i.jsx(ky, {}), i.jsx("span", { children: "Birinchi binoni qo'shish" })] })] }) : i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "table-container", children: i.jsxs("table", { className: "data-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { children: "#" }), i.jsx("th", { children: "Shifr" }), i.jsx("th", { children: "Bino nomi" }), i.jsx("th", { children: "Shahar" }), i.jsx("th", { children: "Tuzilishi" }), i.jsx("th", { children: "Byudjet" }), i.jsx("th", { children: "Holat" }), i.jsx("th", { children: "Sana" }), i.jsx("th", { children: "Amallar" })] }) }), i.jsx("tbody", { children: e.map((U, I) => i.jsxs("tr", { onClick: () => l(`/buildings/${U.id}/edit`), style: { cursor: "pointer" }, className: "clickable-row", children: [i.jsx("td", { className: "cell-number", children: (S.page - 1) * S.pageSize + I + 1 }), i.jsx("td", { className: "cell-code", children: U.code }), i.jsx("td", { className: "cell-name", children: U.name }), i.jsx("td", { className: "cell-city", children: U.city_name || "-" }), i.jsx("td", { className: "cell-structure", children: i.jsxs("div", { style: { display: "flex", gap: "12px", fontSize: "13px" }, children: [i.jsxs("div", { title: "Qavatlar", style: { display: "flex", flexDirection: "column", alignItems: "center" }, children: [i.jsx("span", { style: { fontWeight: 600 }, children: U.floor }), i.jsx("span", { style: { fontSize: "11px", color: "var(--text-secondary)" }, children: "qavat" })] }), i.jsx("div", { style: { borderLeft: "1px solid var(--border-color)" } }), i.jsxs("div", { title: "Padezlar", style: { display: "flex", flexDirection: "column", alignItems: "center" }, children: [i.jsx("span", { style: { fontWeight: 600 }, children: U.padez }), i.jsx("span", { style: { fontSize: "11px", color: "var(--text-secondary)" }, children: "padez" })] }), i.jsx("div", { style: { borderLeft: "1px solid var(--border-color)" } }), i.jsxs("div", { title: "Xonadonlar", style: { display: "flex", flexDirection: "column", alignItems: "center" }, children: [i.jsx("span", { style: { fontWeight: 600 }, children: U.total_homes }), i.jsx("span", { style: { fontSize: "11px", color: "var(--text-secondary)" }, children: "xona" })] })] }) }), i.jsx("td", { className: "cell-budget", children: i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "2px", fontSize: "12px" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", gap: "8px" }, children: [i.jsx("span", { style: { color: "var(--text-secondary)" }, children: "Jami:" }), i.jsx("span", { style: { fontWeight: 600, color: "#6366f1" }, children: L(U.budget) })] }), i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", gap: "8px" }, children: [i.jsx("span", { style: { color: "var(--text-secondary)" }, children: "Sarflangan:" }), i.jsx("span", { style: { fontWeight: 600, color: "#ef4444" }, children: L(U.spent_amount) })] }), i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", gap: "8px", borderTop: "1px solid var(--border-color)", paddingTop: "2px", marginTop: "2px" }, children: [i.jsx("span", { style: { color: "var(--text-secondary)" }, children: "Qolgan:" }), i.jsx("span", { style: { fontWeight: 600, color: "#10b981" }, children: L((U.budget || 0) - (U.spent_amount || 0)) })] })] }) }), i.jsx("td", { children: i.jsx("span", { className: `status-badge ${U.status ? "active" : "inactive"}`, children: U.status ? "Yuklangan" : "Bo'sh" }) }), i.jsx("td", { className: "cell-date", children: X(U.created) }), i.jsx("td", { className: "cell-actions", onClick: H => H.stopPropagation(), children: i.jsxs("div", { className: "table-actions", children: [i.jsx("button", { className: "btn-icon btn-edit", onClick: () => F(U), title: "Tahrirlash", children: i.jsx(eT, {}) }), i.jsx("button", { className: "btn-icon btn-delete", onClick: () => B(U), title: "O'chirish", disabled: U.status, children: i.jsx(Sy, {}) })] }) })] }, U.id)) })] }) }), S.totalPages > 1 && i.jsxs("div", { className: "pagination-container", children: [i.jsxs("div", { className: "pagination-info", children: ["Sahifa ", S.page, " / ", S.totalPages] }), i.jsxs("div", { className: "pagination-controls", children: [i.jsx("button", { className: "pagination-btn", onClick: () => O(S.page - 1), disabled: S.page === 1, children: i.jsx(sT, {}) }), Array.from({ length: Math.min(5, S.totalPages) }, (U, I) => { let H; return S.totalPages <= 5 || S.page <= 3 ? H = I + 1 : S.page >= S.totalPages - 2 ? H = S.totalPages - 4 + I : H = S.page - 2 + I, i.jsx("button", { className: `pagination-btn ${S.page === H ? "active" : ""}`, onClick: () => O(H), children: H }, H) }), i.jsx("button", { className: "pagination-btn", onClick: () => O(S.page + 1), disabled: S.page === S.totalPages, children: i.jsx(aT, {}) })] })] })] })] }) }), g.open && g.type === "delete" && gt.createPortal(i.jsx("div", { className: `modal-overlay ${b ? "closing" : ""}`, onClick: A, children: i.jsxs("div", { className: `modal-content ${b ? "closing" : ""}`, onClick: U => U.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: "Binoni o'chirish" }), i.jsx("button", { className: "modal-close", onClick: A, children: i.jsx(tT, {}) })] }), i.jsxs("div", { className: "modal-body", style: { textAlign: "center", padding: "32px 24px" }, children: [i.jsx("div", { className: "modal-icon danger", style: { margin: "0 auto 20px", width: "64px", height: "64px", borderRadius: "50%", background: "rgba(239, 68, 68, 0.1)", color: "#ef4444", display: "flex", alignItems: "center", justifyContent: "center" }, children: i.jsx(Sy, {}) }), i.jsxs("p", { style: { fontSize: "16px", color: "var(--text-primary)", marginBottom: "8px" }, children: [i.jsxs("strong", { children: [g.building?.code, " - ", g.building?.name] }), " ", "binoni o'chirishni xohlaysizmi?"] }), i.jsx("p", { style: { fontSize: "14px", color: "var(--text-secondary)" }, children: "Bu amalni ortga qaytarib bo'lmaydi." })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { className: "btn-secondary", onClick: A, children: "Bekor qilish" }), i.jsx("button", { className: "btn-danger", onClick: M, disabled: k, children: k ? "O'chirilmoqda..." : "O'chirish" })] })] }) }), document.body)] }) }, ky = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "12", y1: "5", x2: "12", y2: "19" }), i.jsx("line", { x1: "5", y1: "12", x2: "19", y2: "12" })] }), JC = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "11", cy: "11", r: "8" }), i.jsx("line", { x1: "21", y1: "21", x2: "16.65", y2: "16.65" })] }), eT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" }), i.jsx("path", { d: "M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" })] }), Sy = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("polyline", { points: "3 6 5 6 21 6" }), i.jsx("path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" })] }), tT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }), iT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "1.5", children: [i.jsx("rect", { x: "4", y: "2", width: "16", height: "20", rx: "2" }), i.jsx("path", { d: "M9 22v-4h6v4" }), i.jsx("path", { d: "M8 6h.01M16 6h.01M8 10h.01M16 10h.01" })] }), sT = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("polyline", { points: "15 18 9 12 15 6" }) }), aT = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("polyline", { points: "9 18 15 12 9 6" }) }), nT = () => { Mn("Yangi bino qo'shish"); const l = bi(), [e, t] = C.useState(!1), [s, r] = C.useState([]), [o, u] = C.useState(!1), [d, f] = C.useState({ code: "", city: "", name: "", location: "", floor: "", padez: "", padez_home: [], construction_status: "new", budget: "", construction_start_date: "", construction_end_date: "", description: "", contract_template: null, template_mapping: {} }); C.useEffect(() => { m() }, []); const m = async () => { try { const P = await Ir({ page_size: 1e3 }), O = P.results || P; r(Array.isArray(O) ? O : []) } catch { $.error("Shaharlarni yuklashda xatolik") } }, p = C.useMemo(() => d.padez_home.length ? d.padez_home.reduce((P, O) => P + (parseInt(O) || 0), 0) : 0, [d.padez_home]), g = parseInt(d.padez) || 0, y = parseInt(d.floor) || 0, b = C.useMemo(() => s.find(P => String(P.id) === String(d.city)), [s, d.city]), v = P => { const { name: O, value: z, type: F, files: B } = P.target; if (F === "file" && O === "contract_template") { f(A => ({ ...A, [O]: B[0] })); return } if (!(["floor", "padez"].includes(O) && z && !/^\d+$/.test(z))) { if (O === "budget") { const A = z.replace(/\s/g, "").replace(/[^\d]/g, ""); f(L => ({ ...L, budget: A })); return } if (O === "code") { f(A => ({ ...A, code: z.toUpperCase() })); return } if (f(A => ({ ...A, [O]: z })), O === "padez") { const A = parseInt(z) || 0; if (A > 0 && A <= 20) { const L = Array(A).fill(0); d.padez_home.forEach((M, X) => { X < A && (L[X] = M) }), f(M => ({ ...M, padez_home: L })), u(!1) } else f(L => ({ ...L, padez_home: [] })), u(!1) } } }, k = (P, O) => { if (O && !/^\d+$/.test(O)) return; const z = [...d.padez_home]; z[P] = parseInt(O) || 0, f(F => ({ ...F, padez_home: z })) }, j = () => { const P = parseInt(d.padez) || 0; if (P < 1 || P > 20) { $.error("Padezlar sonini to'g'ri kiriting (1-20)"); return } d.padez_home.length !== P && f(O => ({ ...O, padez_home: Array(P).fill(0) })), u(!0) }, S = (P, O) => { f(z => ({ ...z, template_mapping: { ...z.template_mapping, [P]: O } })) }, w = P => { if (P == null || P === "") return ""; const O = Math.floor(Number(String(P).replace(/\s/g, ""))); return isNaN(O) ? "" : O.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") }, N = () => d.code.trim() ? d.code.length > 6 ? ($.error("Bino shifri 6 ta belgidan oshmasligi kerak"), !1) : d.city ? d.name.trim() ? !d.floor || parseInt(d.floor) <= 0 ? ($.error("Qavatlar sonini kiriting"), !1) : !d.padez || parseInt(d.padez) <= 0 ? ($.error("Padezlar sonini kiriting"), !1) : !o || d.padez_home.length !== parseInt(d.padez) ? ($.error('"Xonalarni kiritish" tugmasini bosib har bir padez uchun xonadonlar sonini kiriting'), !1) : d.padez_home.some(P => parseInt(P) <= 0) ? ($.error("Har bir padezdagi xonadonlar soni kamida 1 ta bo'lishi kerak"), !1) : !0 : ($.error("Bino nomini kiriting"), !1) : ($.error("Shaharni tanlang"), !1) : ($.error("Bino shifrini kiriting"), !1), T = async () => { if (!N()) return; const P = new FormData; P.append("code", d.code.toUpperCase().trim()), P.append("city", d.city), P.append("name", d.name.trim()), d.location.trim() && P.append("location", d.location.trim()), P.append("floor", d.floor), P.append("padez", d.padez), d.padez_home.forEach(O => { P.append("padez_home", parseInt(O) || 0) }), P.append("construction_status", d.construction_status || "new"), P.append("budget", d.budget ? parseFloat(d.budget) : 0), d.construction_start_date && P.append("construction_start_date", d.construction_start_date), d.construction_end_date && P.append("construction_end_date", d.construction_end_date), d.description && P.append("description", d.description), d.contract_template && P.append("contract_template", d.contract_template), P.append("template_mapping", JSON.stringify(d.template_mapping)); try { t(!0), await $C(P), $.success("Bino muvaffaqiyatli yaratildi!"), l("/buildings") } catch (O) { const z = O.response?.data?.code?.[0] || O.response?.data?.detail || O.response?.data?.padez_home?.[0] || "Bino yaratishda xatolik yuz berdi"; $.error(z) } finally { t(!1) } }, R = { new: "Yangi", started: "Qurilish boshlangan", finished: "Tugatildi" }; return i.jsxs("div", { className: "bc-page", children: [i.jsxs("div", { className: "bc-header", children: [i.jsxs("div", { className: "bc-header-left", children: [i.jsx("button", { className: "bc-back-btn", onClick: () => l("/buildings"), title: "Orqaga", children: i.jsx(lT, {}) }), i.jsxs("div", { children: [i.jsx("h1", { className: "bc-title", children: "Yangi bino qo'shish" }), i.jsx("p", { className: "bc-subtitle", children: "Yangi ob'ekt ma'lumotlarini kiriting" })] })] }), i.jsxs("div", { className: "bc-header-actions", children: [i.jsx("button", { className: "bc-btn-secondary", onClick: () => l("/buildings"), disabled: e, children: "Bekor qilish" }), i.jsx("button", { className: "bc-btn-primary", onClick: T, disabled: e, children: e ? i.jsxs(i.Fragment, { children: [i.jsx(Cy, {}), "Saqlanmoqda..."] }) : i.jsxs(i.Fragment, { children: [i.jsx(Ny, {}), "Saqlash"] }) })] })] }), i.jsxs("div", { className: "bc-content", children: [i.jsxs("div", { className: "bc-card", style: { animationDelay: "0s" }, children: [i.jsxs("div", { className: "bc-card-header", children: [i.jsx("div", { className: "bc-icon-box bc-icon-primary", children: i.jsx(oT, {}) }), i.jsxs("div", { children: [i.jsx("h3", { className: "bc-card-title", children: "Asosiy ma'lumotlar" }), i.jsx("p", { className: "bc-card-desc", children: "Bino identifikatsiyasi va joylashuvi" })] })] }), i.jsxs("div", { className: "bc-grid-3", children: [i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label bc-required", children: "Bino shifri" }), i.jsx("input", { className: "bc-input bc-input-code", type: "text", name: "code", value: d.code, onChange: v, placeholder: "Masalan: A1, B2", maxLength: 6, autoFocus: !0 }), i.jsx("span", { className: "bc-hint", children: "Maksimum 6 ta belgi" })] }), i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label bc-required", children: "Shahar" }), i.jsxs("select", { className: "bc-select", name: "city", value: d.city, onChange: v, children: [i.jsx("option", { value: "", children: "Shaharni tanlang" }), s.map(P => i.jsx("option", { value: P.id, children: P.name }, P.id))] })] }), i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label bc-required", children: "Bino nomi" }), i.jsx("input", { className: "bc-input", type: "text", name: "name", value: d.name, onChange: v, placeholder: "Bino nomini kiriting" })] })] }), i.jsxs("div", { className: "bc-field bc-field-full", style: { marginTop: 20 }, children: [i.jsx("label", { className: "bc-label", children: "Bino joylashuvi" }), i.jsx("textarea", { className: "bc-textarea", name: "location", value: d.location, onChange: v, placeholder: "Masalan: Chilonzor tumani, 12-kvartal, 23-uy", rows: 2 })] }), i.jsxs("div", { className: "bc-field bc-field-full", style: { marginTop: 20 }, children: [i.jsx("label", { className: "bc-label", children: "Shartnoma shabloni (.docx)" }), i.jsx("input", { className: "bc-input", type: "file", accept: ".docx,application/vnd.openxmlformats-officedocument.wordprocessingml.document", name: "contract_template", onChange: v }), i.jsx("span", { className: "bc-hint", children: "Yuklash faqat .docx formatida. Agar yuklamasangiz oddiy shablondan foydalaniladi." })] }), d.contract_template && i.jsxs("div", { className: "bc-mapping-section", style: { marginTop: 30, padding: 20, background: "#f8fafc", borderRadius: 8, border: "1px solid #e2e8f0" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", marginBottom: 15 }, children: [i.jsx(pT, {}), i.jsx("h4", { style: { margin: "0 0 0 8px", fontSize: 16, color: "#0f172a" }, children: "Shablon o'zgaruvchilarini xaritalash" })] }), i.jsxs("p", { style: { fontSize: 13, color: "#64748b", marginBottom: 20 }, children: ["Word faylidagi matnlarni tizim maydonlariga bog'lang. Masalan: Word faylida mijoz ismi chiqishi kerak bo'lgan joyga ", i.jsx("strong", { children: "[MIJOZ]" }), ` deb yozgan bo'lsangiz, quyidagi "Mijoz Ismi" qatoriga ham xuddi shunday `, i.jsx("strong", { children: "[MIJOZ]" }), " deb kiriting."] }), i.jsx("div", { className: "bc-mapping-grid", style: { display: "grid", gridTemplateColumns: "minmax(150px, 1fr) 2fr", gap: "12px 20px", alignItems: "center" }, children: [{ key: "client_name", label: "Mijoz Ismi" }, { key: "client_phone", label: "Telefon raqami" }, { key: "client_passport", label: "Pasport seriyasi" }, { key: "client_address", label: "Manzili" }, { key: "contract_number", label: "Shartnoma raqami" }, { key: "contract_date", label: "Shartnoma sanasi" }, { key: "home_number", label: "Xonadon raqami" }, { key: "home_floor", label: "Qavati" }, { key: "home_rooms", label: "Xonalar soni" }, { key: "home_area", label: "Maydoni (kv.m)" }, { key: "total_price", label: "Jami summa (raqamda)" }, { key: "total_price_text", label: "Jami summa (so'zda)" }, { key: "initial_payment", label: "Boshlang'ich to'lov" }, { key: "monthly_payment", label: "Oylik to'lov" }, { key: "term_months", label: "Muddatli to'lov oyi" }].map(P => i.jsxs("div", { style: { display: "contents" }, children: [i.jsx("label", { style: { fontSize: 14, fontWeight: 500, color: "#334155" }, children: P.label }), i.jsx("input", { type: "text", className: "bc-input", placeholder: "Masalan: __MATN__", value: d.template_mapping[P.key] || "", onChange: O => S(P.key, O.target.value) })] }, P.key)) })] })] }), i.jsxs("div", { className: "bc-two-col", children: [i.jsxs("div", { className: "bc-card bc-card-stretch", style: { animationDelay: "0.08s" }, children: [i.jsxs("div", { className: "bc-card-header", children: [i.jsx("div", { className: "bc-icon-box bc-icon-success", children: i.jsx(cT, {}) }), i.jsxs("div", { children: [i.jsx("h3", { className: "bc-card-title", children: "Bino tuzilishi" }), i.jsx("p", { className: "bc-card-desc", children: "Qavat, padez va xonadon soni" })] })] }), i.jsxs("div", { className: "bc-grid-3", children: [i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label bc-required", children: "Qavatlar soni" }), i.jsxs("div", { className: "bc-input-suffix-wrap", children: [i.jsx("input", { className: "bc-input", type: "text", name: "floor", value: d.floor, onChange: v, placeholder: "0" }), i.jsx("span", { className: "bc-suffix", children: "qavat" })] })] }), i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label bc-required", children: "Padezlar soni" }), i.jsxs("div", { className: "bc-input-suffix-wrap", children: [i.jsx("input", { className: "bc-input", type: "text", name: "padez", value: d.padez, onChange: v, placeholder: "0" }), i.jsx("span", { className: "bc-suffix", children: "padez" })] })] }), i.jsx("div", { className: "bc-field bc-field-btn-align", children: i.jsxs("button", { type: "button", className: `bc-btn-outline ${o ? "bc-btn-outline-done" : ""}`, onClick: j, disabled: !d.padez || g < 1, children: [o ? i.jsx(dT, {}) : i.jsx(Ty, {}), o ? "Kiritildi" : "Xonalarni kiritish"] }) })] }), o && d.padez_home.length > 0 && i.jsxs("div", { className: "bc-padez-section", children: [i.jsxs("p", { className: "bc-padez-label", children: [i.jsx(Ty, {}), "Har bir padezdagi xonadonlar soni:"] }), i.jsx("div", { className: "bc-padez-grid", children: d.padez_home.map((P, O) => i.jsxs("div", { className: "bc-padez-item", children: [i.jsxs("label", { className: "bc-padez-item-label", children: [O + 1, "-padez"] }), i.jsx("input", { className: "bc-padez-input", type: "text", value: P || "", onChange: z => k(O, z.target.value), placeholder: "0" })] }, O)) })] }), i.jsxs("div", { className: "bc-structure-preview", children: [i.jsxs("div", { className: "bc-preview-item", children: [i.jsx("span", { className: "bc-preview-icon bc-preview-floor", children: i.jsx(hT, {}) }), i.jsxs("div", { children: [i.jsx("span", { className: "bc-preview-val", children: y || "" }), i.jsx("span", { className: "bc-preview-key", children: "Qavat" })] })] }), i.jsx("div", { className: "bc-preview-divider" }), i.jsxs("div", { className: "bc-preview-item", children: [i.jsx("span", { className: "bc-preview-icon bc-preview-padez", children: i.jsx(fT, {}) }), i.jsxs("div", { children: [i.jsx("span", { className: "bc-preview-val", children: g || "" }), i.jsx("span", { className: "bc-preview-key", children: "Padez" })] })] }), i.jsx("div", { className: "bc-preview-divider" }), i.jsxs("div", { className: "bc-preview-item", children: [i.jsx("span", { className: "bc-preview-icon bc-preview-home", children: i.jsx(mT, {}) }), i.jsxs("div", { children: [i.jsx("span", { className: "bc-preview-val", children: p || "" }), i.jsx("span", { className: "bc-preview-key", children: "Jami xonadon" })] })] })] })] }), i.jsxs("div", { className: "bc-card bc-card-stretch", style: { animationDelay: "0.14s" }, children: [i.jsxs("div", { className: "bc-card-header", children: [i.jsx("div", { className: "bc-icon-box bc-icon-warning", children: i.jsx(uT, {}) }), i.jsxs("div", { children: [i.jsx("h3", { className: "bc-card-title", children: "Qurilish va Byudjet" }), i.jsx("p", { className: "bc-card-desc", children: "Moliyaviy va qurilish ma'lumotlari" })] })] }), i.jsxs("div", { className: "bc-grid-2", children: [i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label", children: "Qurilish holati" }), i.jsx("div", { className: "bc-status-group", children: ["new", "started", "finished"].map(P => i.jsxs("button", { type: "button", className: `bc-status-btn bc-status-${P} ${d.construction_status === P ? "active" : ""}`, onClick: () => f(O => ({ ...O, construction_status: P })), children: [i.jsx(rT, { status: P }), R[P]] }, P)) })] }), i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label", children: "Ajratilgan byudjet" }), i.jsxs("div", { className: "bc-input-suffix-wrap", children: [i.jsx("input", { className: "bc-input", type: "text", name: "budget", value: w(d.budget), onChange: v, placeholder: "0" }), i.jsx("span", { className: "bc-suffix", children: "so'm" })] }), d.budget && i.jsxs("span", { className: "bc-hint", children: [w(d.budget), " so'm"] })] })] }), i.jsxs("div", { className: "bc-grid-2", style: { marginTop: 16 }, children: [i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label", children: "Qurilish boshlangan sana" }), i.jsx("input", { className: "bc-input", type: "date", name: "construction_start_date", value: d.construction_start_date, onChange: v })] }), i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label", children: "Taxminiy tugash sanasi" }), i.jsx("input", { className: "bc-input", type: "date", name: "construction_end_date", value: d.construction_end_date, onChange: v })] })] }), i.jsxs("div", { className: "bc-field bc-field-full", style: { marginTop: 16 }, children: [i.jsx("label", { className: "bc-label", children: "Bino tavsifi" }), i.jsx("textarea", { className: "bc-textarea", name: "description", value: d.description, onChange: v, placeholder: "Bino haqida qo'shimcha ma'lumotlar...", rows: 3 })] }), (d.code || d.name || b) && i.jsxs("div", { className: "bc-mini-summary", children: [i.jsx("p", { className: "bc-mini-summary-title", children: "Ko'rinish" }), i.jsxs("div", { className: "bc-mini-summary-row", children: [i.jsx("span", { children: "Shifr" }), i.jsx("strong", { children: d.code || "" })] }), i.jsxs("div", { className: "bc-mini-summary-row", children: [i.jsx("span", { children: "Nomi" }), i.jsx("strong", { children: d.name || "" })] }), i.jsxs("div", { className: "bc-mini-summary-row", children: [i.jsx("span", { children: "Shahar" }), i.jsx("strong", { children: b?.name || "" })] }), i.jsxs("div", { className: "bc-mini-summary-row", children: [i.jsx("span", { children: "Holat" }), i.jsx("strong", { children: R[d.construction_status] })] }), d.budget && i.jsxs("div", { className: "bc-mini-summary-row", children: [i.jsx("span", { children: "Byudjet" }), i.jsxs("strong", { children: [w(d.budget), " so'm"] })] })] })] })] }), i.jsxs("div", { className: "bc-bottom-bar", children: [i.jsx("button", { className: "bc-btn-secondary", onClick: () => l("/buildings"), disabled: e, children: "Bekor qilish" }), i.jsx("button", { className: "bc-btn-primary bc-btn-lg", onClick: T, disabled: e, children: e ? i.jsxs(i.Fragment, { children: [i.jsx(Cy, {}), "Saqlanmoqda..."] }) : i.jsxs(i.Fragment, { children: [i.jsx(Ny, {}), "Binoni saqlash"] }) })] })] })] }) }, rT = ({ status: l }) => { const e = { new: "#6366f1", started: "#f59e0b", finished: "#10b981" }; return i.jsx("span", { style: { display: "inline-block", width: 8, height: 8, borderRadius: "50%", background: e[l] || "#9ca3af", flexShrink: 0 } }) }, lT = () => i.jsx("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2.5", strokeLinecap: "round", strokeLinejoin: "round", children: i.jsx("polyline", { points: "15 18 9 12 15 6" }) }), Ny = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" }), i.jsx("polyline", { points: "17 21 17 13 7 13 7 21" }), i.jsx("polyline", { points: "7 3 7 8 15 8" })] }), Cy = () => i.jsx("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2.5", className: "bc-spin", children: i.jsx("path", { d: "M21 12a9 9 0 1 1-6.219-8.56" }) }), oT = () => i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("rect", { x: "3", y: "3", width: "18", height: "18", rx: "3" }), i.jsx("line", { x1: "12", y1: "8", x2: "12", y2: "8.01" }), i.jsx("line", { x1: "12", y1: "12", x2: "12", y2: "16" })] }), cT = () => i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("rect", { x: "3", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "3", y: "14", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "14", width: "7", height: "7" })] }), uT = () => i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M21 12V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-2" }), i.jsx("path", { d: "M17 12h4v4h-4a2 2 0 0 1 0-4z" })] }), Ty = () => i.jsxs("svg", { width: "15", height: "15", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("line", { x1: "8", y1: "6", x2: "21", y2: "6" }), i.jsx("line", { x1: "8", y1: "12", x2: "21", y2: "12" }), i.jsx("line", { x1: "8", y1: "18", x2: "21", y2: "18" }), i.jsx("line", { x1: "3", y1: "6", x2: "3.01", y2: "6" }), i.jsx("line", { x1: "3", y1: "12", x2: "3.01", y2: "12" }), i.jsx("line", { x1: "3", y1: "18", x2: "3.01", y2: "18" })] }), dT = () => i.jsx("svg", { width: "15", height: "15", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2.5", strokeLinecap: "round", strokeLinejoin: "round", children: i.jsx("polyline", { points: "20 6 9 17 4 12" }) }), hT = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("line", { x1: "3", y1: "12", x2: "21", y2: "12" }), i.jsx("line", { x1: "3", y1: "6", x2: "21", y2: "6" }), i.jsx("line", { x1: "3", y1: "18", x2: "21", y2: "18" })] }), fT = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("rect", { x: "3", y: "3", width: "18", height: "18", rx: "2" }), i.jsx("line", { x1: "12", y1: "3", x2: "12", y2: "21" })] }), mT = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M3 12l9-9 9 9" }), i.jsx("path", { d: "M12 21a9 9 0 0 0 9-9H3a9 9 0 0 0 9 9z" })] }), pT = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "#6366f1", strokeWidth: "2.5", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" }), i.jsx("path", { d: "M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" })] }), gT = () => { Mn("Binoni tahrirlash"); const { id: l } = ju(), e = bi(), [t, s] = C.useState(!0), [r, o] = C.useState(!1), [u, d] = C.useState([]), [f, m] = C.useState(!1), [p, g] = C.useState(null), [y, b] = C.useState({ code: "", city: "", name: "", location: "", floor: "", padez: "", padez_home: [], construction_status: "new", budget: "", construction_start_date: "", construction_end_date: "", description: "", contract_template: null, template_mapping: {} }); C.useEffect(() => { v(), k() }, [l]); const v = async () => { try { const M = await Ir({ page_size: 1e3 }), X = M.results || M; d(Array.isArray(X) ? X : []) } catch { $.error("Shaharlarni yuklashda xatolik") } }, k = async () => { try { s(!0); const M = await GC(l); g(M), b({ code: M.code || "", city: M.city || "", name: M.name || "", location: M.location || "", floor: M.floor || "", padez: M.padez || "", padez_home: M.padez_home || [], construction_status: M.construction_status || "new", budget: M.budget ? String(Math.floor(Number(M.budget))) : "", construction_start_date: M.construction_start_date || "", construction_end_date: M.construction_end_date || "", description: M.description || "", contract_template: null, template_mapping: M.template_mapping || {} }), M.padez_home && M.padez_home.length > 0 && m(!0) } catch { $.error("Bino ma'lumotlarini yuklashda xatolik"), e("/buildings") } finally { s(!1) } }, j = p?.status === !0, S = C.useMemo(() => y.padez_home.length ? y.padez_home.reduce((M, X) => M + (parseInt(X) || 0), 0) : 0, [y.padez_home]), w = parseInt(y.padez) || 0, N = parseInt(y.floor) || 0, T = C.useMemo(() => u.find(M => String(M.id) === String(y.city)), [u, y.city]), R = { new: "Yangi", started: "Qurilish boshlangan", finished: "Tugatildi" }, P = M => { const { name: X, value: U, type: I, files: H } = M.target; if (I === "file" && X === "contract_template") { b(Y => ({ ...Y, [X]: H[0] })); return } if (!(["floor", "padez"].includes(X) && !j && U && !/^\d+$/.test(U))) { if (X === "budget") { const Y = U.replace(/\s/g, "").replace(/[^\d]/g, ""); b(ee => ({ ...ee, budget: Y })); return } if (X === "code") { b(Y => ({ ...Y, code: U.toUpperCase() })); return } if (b(Y => ({ ...Y, [X]: U })), X === "padez" && !j) { const Y = parseInt(U) || 0; if (Y > 0 && Y <= 20) { const ee = Array(Y).fill(0); y.padez_home.forEach((fe, q) => { q < Y && (ee[q] = fe) }), b(fe => ({ ...fe, padez_home: ee })), m(!1) } else b(ee => ({ ...ee, padez_home: [] })), m(!1) } } }, O = (M, X) => { if (j || X && !/^\d+$/.test(X)) return; const U = [...y.padez_home]; U[M] = parseInt(X) || 0, b(I => ({ ...I, padez_home: U })) }, z = () => { if (j) return; const M = parseInt(y.padez) || 0; if (M < 1 || M > 20) { $.error("Padezlar sonini to'g'ri kiriting (1-20)"); return } y.padez_home.length !== M && b(X => ({ ...X, padez_home: Array(M).fill(0) })), m(!0) }, F = (M, X) => { b(U => ({ ...U, template_mapping: { ...U.template_mapping, [M]: X } })) }, B = M => { if (M == null || M === "") return ""; const X = Math.floor(Number(String(M).replace(/\s/g, ""))); return isNaN(X) ? "" : X.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") }, A = () => y.code.trim() ? y.code.length > 6 ? ($.error("Bino shifri 6 ta belgidan oshmasligi kerak"), !1) : y.city ? y.name.trim() ? !y.floor || parseInt(y.floor) <= 0 ? ($.error("Qavatlar sonini kiriting"), !1) : !y.padez || parseInt(y.padez) <= 0 ? ($.error("Padezlar sonini kiriting"), !1) : !j && (!f || y.padez_home.length !== parseInt(y.padez)) ? ($.error('"Xonalarni kiritish" tugmasini bosib har bir padez uchun xonadonlar sonini kiriting'), !1) : !j && y.padez_home.some(M => parseInt(M) <= 0) ? ($.error("Har bir padezdagi xonadonlar soni kamida 1 ta bo'lishi kerak"), !1) : !0 : ($.error("Bino nomini kiriting"), !1) : ($.error("Shaharni tanlang"), !1) : ($.error("Bino shifrini kiriting"), !1), L = async () => { if (!A()) return; const M = new FormData; M.append("code", y.code.toUpperCase().trim()), M.append("city", y.city), M.append("name", y.name.trim()), y.location.trim() && M.append("location", y.location.trim()), M.append("floor", y.floor), M.append("padez", y.padez), y.padez_home.forEach(X => { M.append("padez_home", parseInt(X) || 0) }), M.append("construction_status", y.construction_status || "new"), M.append("budget", y.budget ? parseFloat(y.budget) : 0), y.construction_start_date && M.append("construction_start_date", y.construction_start_date), y.construction_end_date && M.append("construction_end_date", y.construction_end_date), y.description && M.append("description", y.description), y.contract_template && M.append("contract_template", y.contract_template), M.append("template_mapping", JSON.stringify(y.template_mapping)); try { o(!0), await KC(l, M), $.success("Bino muvaffaqiyatli yangilandi!"), e("/buildings") } catch (X) { const U = X.response?.data?.code?.[0] || X.response?.data?.detail || X.response?.data?.padez_home?.[0] || "Binoni yangilashda xatolik yuz berdi"; $.error(U) } finally { o(!1) } }; return t ? i.jsx("div", { className: "bc-page", children: i.jsxs("div", { className: "bc-loading-screen", children: [i.jsx("div", { className: "bc-loading-spinner" }), i.jsx("p", { children: "Ma'lumotlar yuklanmoqda..." })] }) }) : i.jsxs("div", { className: "bc-page", children: [i.jsxs("div", { className: "bc-header", children: [i.jsxs("div", { className: "bc-header-left", children: [i.jsx("button", { className: "bc-back-btn", onClick: () => e("/buildings"), title: "Orqaga", children: i.jsx(bT, {}) }), i.jsxs("div", { children: [i.jsxs("div", { className: "bc-title-row", children: [i.jsx("h1", { className: "bc-title", children: "Binoni tahrirlash" }), j && i.jsxs("span", { className: "bc-locked-badge", children: [i.jsx(Ll, {}), "Tuzilish bloklangan"] })] }), i.jsxs("p", { className: "bc-subtitle", children: [i.jsx("span", { className: "bc-subtitle-code", children: p?.code }), p?.name] })] })] }), i.jsxs("div", { className: "bc-header-actions", children: [i.jsx("button", { className: "bc-btn-secondary", onClick: () => e("/buildings"), disabled: r, children: "Bekor qilish" }), i.jsx("button", { className: "bc-btn-primary", onClick: L, disabled: r, children: r ? i.jsxs(i.Fragment, { children: [i.jsx(My, {}), "Saqlanmoqda..."] }) : i.jsxs(i.Fragment, { children: [i.jsx(Ay, {}), "Saqlash"] }) })] })] }), j && i.jsxs("div", { className: "bc-lock-banner", children: [i.jsx(Ll, {}), i.jsxs("div", { children: [i.jsx("strong", { children: "Bino tuzilishi bloklangan" }), i.jsx("p", { children: "Ushbu binoga xonadonlar yuklanganligi sababli qavat, padez va xonadonlar sonini o'zgartirib bo'lmaydi. Faqat asosiy ma'lumotlar, qurilish holati va byudjetni tahrirlash mumkin." })] })] }), i.jsxs("div", { className: "bc-content", children: [i.jsxs("div", { className: "bc-card", style: { animationDelay: "0s" }, children: [i.jsxs("div", { className: "bc-card-header", children: [i.jsx("div", { className: "bc-icon-box bc-icon-primary", children: i.jsx(xT, {}) }), i.jsxs("div", { children: [i.jsx("h3", { className: "bc-card-title", children: "Asosiy ma'lumotlar" }), i.jsx("p", { className: "bc-card-desc", children: "Bino identifikatsiyasi va joylashuvi" })] })] }), i.jsxs("div", { className: "bc-grid-3", children: [i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label bc-required", children: "Bino shifri" }), i.jsx("input", { className: "bc-input bc-input-code", type: "text", name: "code", value: y.code, onChange: P, placeholder: "Masalan: A1, B2", maxLength: 6 }), i.jsx("span", { className: "bc-hint", children: "Maksimum 6 ta belgi" })] }), i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label bc-required", children: "Shahar" }), i.jsxs("select", { className: "bc-select", name: "city", value: y.city, onChange: P, children: [i.jsx("option", { value: "", children: "Shaharni tanlang" }), u.map(M => i.jsx("option", { value: M.id, children: M.name }, M.id))] })] }), i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label bc-required", children: "Bino nomi" }), i.jsx("input", { className: "bc-input", type: "text", name: "name", value: y.name, onChange: P, placeholder: "Bino nomini kiriting" })] })] }), i.jsxs("div", { className: "bc-field bc-field-full", style: { marginTop: 20 }, children: [i.jsx("label", { className: "bc-label", children: "Bino joylashuvi" }), i.jsx("textarea", { className: "bc-textarea", name: "location", value: y.location, onChange: P, placeholder: "Masalan: Chilonzor tumani, 12-kvartal, 23-uy", rows: 2 })] }), i.jsxs("div", { className: "bc-field bc-field-full", style: { marginTop: 20 }, children: [i.jsx("label", { className: "bc-label", children: "Shartnoma shabloni (.docx)" }), p?.contract_template && i.jsxs("p", { style: { fontSize: "13px", color: "#666", marginBottom: "8px" }, children: ["Joriy fayl: ", i.jsx("a", { href: p.contract_template, target: "_blank", rel: "noopener noreferrer", children: "shablonini yuklab ko'rish" })] }), i.jsx("input", { className: "bc-input", type: "file", accept: ".docx,application/vnd.openxmlformats-officedocument.wordprocessingml.document", name: "contract_template", onChange: P }), i.jsx("span", { className: "bc-hint", children: "Yuklash faqat .docx formatida. Yangi fayl yuklansa eskisi uzgaradi." })] }), (p?.contract_template || y.contract_template) && i.jsxs("div", { className: "bc-mapping-section", style: { marginTop: 30, padding: 20, background: "#f8fafc", borderRadius: 8, border: "1px solid #e2e8f0" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", marginBottom: 15 }, children: [i.jsx(ST, {}), i.jsx("h4", { style: { margin: "0 0 0 8px", fontSize: 16, color: "#0f172a" }, children: "Shablon o'zgaruvchilarini xaritalash" })] }), i.jsxs("p", { style: { fontSize: 13, color: "#64748b", marginBottom: 20 }, children: ["Word faylidagi matnlarni tizim maydonlariga bog'lang. Masalan: Word faylida mijoz ismi chiqishi kerak bo'lgan joyga ", i.jsx("strong", { children: "[MIJOZ]" }), ` deb yozgan bo'lsangiz, quyidagi "Mijoz Ismi" qatoriga ham xuddi shunday `, i.jsx("strong", { children: "[MIJOZ]" }), " deb kiriting."] }), i.jsx("div", { className: "bc-mapping-grid", style: { display: "grid", gridTemplateColumns: "minmax(150px, 1fr) 2fr", gap: "12px 20px", alignItems: "center" }, children: [{ key: "client_name", label: "Mijoz Ismi" }, { key: "client_phone", label: "Telefon raqami" }, { key: "client_passport", label: "Pasport seriyasi" }, { key: "client_address", label: "Manzili" }, { key: "contract_number", label: "Shartnoma raqami" }, { key: "contract_date", label: "Shartnoma sanasi" }, { key: "home_number", label: "Xonadon raqami" }, { key: "home_floor", label: "Qavati" }, { key: "home_rooms", label: "Xonalar soni" }, { key: "home_area", label: "Maydoni (kv.m)" }, { key: "total_price", label: "Jami summa (raqamda)" }, { key: "total_price_text", label: "Jami summa (so'zda)" }, { key: "initial_payment", label: "Boshlang'ich to'lov" }, { key: "monthly_payment", label: "Oylik to'lov" }, { key: "term_months", label: "Muddatli to'lov oyi" }].map(M => i.jsxs("div", { style: { display: "contents" }, children: [i.jsx("label", { style: { fontSize: 14, fontWeight: 500, color: "#334155" }, children: M.label }), i.jsx("input", { type: "text", className: "bc-input", placeholder: "Masalan: __MATN__", value: y.template_mapping[M.key] || "", onChange: X => F(M.key, X.target.value) })] }, M.key)) })] })] }), i.jsxs("div", { className: "bc-two-col", children: [i.jsxs("div", { className: "bc-card bc-card-stretch", style: { animationDelay: "0.08s" }, children: [i.jsxs("div", { className: "bc-card-header", children: [i.jsx("div", { className: "bc-icon-box bc-icon-success", children: i.jsx(yT, {}) }), i.jsxs("div", { children: [i.jsx("h3", { className: "bc-card-title", children: "Bino tuzilishi" }), i.jsx("p", { className: "bc-card-desc", children: "Qavat, padez va xonadon soni" })] }), j && i.jsxs("span", { className: "bc-section-lock", children: [i.jsx(Ll, {}), " Bloklangan"] })] }), i.jsxs("div", { className: "bc-grid-3", children: [i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label bc-required", children: "Qavatlar soni" }), i.jsxs("div", { className: "bc-input-suffix-wrap", children: [i.jsx("input", { className: `bc-input ${j ? "bc-input-disabled" : ""}`, type: "text", name: "floor", value: y.floor, onChange: P, placeholder: "0", disabled: j }), i.jsx("span", { className: "bc-suffix", children: "qavat" })] })] }), i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label bc-required", children: "Padezlar soni" }), i.jsxs("div", { className: "bc-input-suffix-wrap", children: [i.jsx("input", { className: `bc-input ${j ? "bc-input-disabled" : ""}`, type: "text", name: "padez", value: y.padez, onChange: P, placeholder: "0", disabled: j }), i.jsx("span", { className: "bc-suffix", children: "padez" })] })] }), i.jsx("div", { className: "bc-field bc-field-btn-align", children: j ? i.jsxs("div", { className: "bc-locked-info", children: [i.jsx(Ll, {}), i.jsx("span", { children: "Qulflangan" })] }) : i.jsxs("button", { type: "button", className: `bc-btn-outline ${f ? "bc-btn-outline-done" : ""}`, onClick: z, disabled: !y.padez || w < 1, children: [f ? i.jsx(_T, {}) : i.jsx(Py, {}), f ? "Kiritildi" : "Xonalarni kiritish"] }) })] }), f && y.padez_home.length > 0 && i.jsxs("div", { className: "bc-padez-section", children: [i.jsxs("p", { className: "bc-padez-label", children: [i.jsx(Py, {}), "Har bir padezdagi xonadonlar soni:", j && i.jsx("span", { className: "bc-padez-locked-note", children: "(o'zgartirib bo'lmaydi)" })] }), i.jsx("div", { className: "bc-padez-grid", children: y.padez_home.map((M, X) => i.jsxs("div", { className: "bc-padez-item", children: [i.jsxs("label", { className: "bc-padez-item-label", children: [X + 1, "-padez"] }), i.jsx("input", { className: `bc-padez-input ${j ? "bc-input-disabled" : ""}`, type: "text", value: M || "", onChange: U => O(X, U.target.value), placeholder: "0", disabled: j })] }, X)) })] }), i.jsxs("div", { className: "bc-structure-preview", children: [i.jsxs("div", { className: "bc-preview-item", children: [i.jsx("span", { className: "bc-preview-icon bc-preview-floor", children: i.jsx(jT, {}) }), i.jsxs("div", { children: [i.jsx("span", { className: "bc-preview-val", children: N || "" }), i.jsx("span", { className: "bc-preview-key", children: "Qavat" })] })] }), i.jsx("div", { className: "bc-preview-divider" }), i.jsxs("div", { className: "bc-preview-item", children: [i.jsx("span", { className: "bc-preview-icon bc-preview-padez", children: i.jsx(wT, {}) }), i.jsxs("div", { children: [i.jsx("span", { className: "bc-preview-val", children: w || "" }), i.jsx("span", { className: "bc-preview-key", children: "Padez" })] })] }), i.jsx("div", { className: "bc-preview-divider" }), i.jsxs("div", { className: "bc-preview-item", children: [i.jsx("span", { className: "bc-preview-icon bc-preview-home", children: i.jsx(kT, {}) }), i.jsxs("div", { children: [i.jsx("span", { className: "bc-preview-val", children: S || "" }), i.jsx("span", { className: "bc-preview-key", children: "Jami xonadon" })] })] })] }), p && i.jsxs("div", { className: "bc-budget-stats", children: [i.jsxs("div", { className: "bc-budget-stat", children: [i.jsx("span", { className: "bc-budget-label", children: "Sarflangan" }), i.jsxs("span", { className: "bc-budget-val bc-budget-spent", children: [B(p.spent_amount), " so'm"] })] }), i.jsxs("div", { className: "bc-budget-stat", children: [i.jsx("span", { className: "bc-budget-label", children: "Qolgan byudjet" }), i.jsxs("span", { className: "bc-budget-val bc-budget-remaining", children: [B((p.budget || 0) - (p.spent_amount || 0)), " ", "so'm"] })] })] })] }), i.jsxs("div", { className: "bc-card bc-card-stretch", style: { animationDelay: "0.14s" }, children: [i.jsxs("div", { className: "bc-card-header", children: [i.jsx("div", { className: "bc-icon-box bc-icon-warning", children: i.jsx(vT, {}) }), i.jsxs("div", { children: [i.jsx("h3", { className: "bc-card-title", children: "Qurilish va Byudjet" }), i.jsx("p", { className: "bc-card-desc", children: "Moliyaviy va qurilish ma'lumotlari" })] })] }), i.jsxs("div", { className: "bc-grid-2", children: [i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label", children: "Qurilish holati" }), i.jsx("div", { className: "bc-status-group", children: ["new", "started", "finished"].map(M => i.jsxs("button", { type: "button", className: `bc-status-btn bc-status-${M} ${y.construction_status === M ? "active" : ""}`, onClick: () => b(X => ({ ...X, construction_status: M })), children: [i.jsx(Dy, { status: M }), R[M]] }, M)) })] }), i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label", children: "Ajratilgan byudjet" }), i.jsxs("div", { className: "bc-input-suffix-wrap", children: [i.jsx("input", { className: "bc-input", type: "text", name: "budget", value: B(y.budget), onChange: P, placeholder: "0" }), i.jsx("span", { className: "bc-suffix", children: "so'm" })] }), y.budget && i.jsxs("span", { className: "bc-hint", children: [B(y.budget), " so'm"] })] })] }), i.jsxs("div", { className: "bc-grid-2", style: { marginTop: 16 }, children: [i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label", children: "Qurilish boshlangan sana" }), i.jsx("input", { className: "bc-input", type: "date", name: "construction_start_date", value: y.construction_start_date, onChange: P })] }), i.jsxs("div", { className: "bc-field", children: [i.jsx("label", { className: "bc-label", children: "Taxminiy tugash sanasi" }), i.jsx("input", { className: "bc-input", type: "date", name: "construction_end_date", value: y.construction_end_date, onChange: P })] })] }), i.jsxs("div", { className: "bc-field bc-field-full", style: { marginTop: 16 }, children: [i.jsx("label", { className: "bc-label", children: "Bino tavsifi" }), i.jsx("textarea", { className: "bc-textarea", name: "description", value: y.description, onChange: P, placeholder: "Bino haqida qo'shimcha ma'lumotlar...", rows: 3 })] }), i.jsxs("div", { className: "bc-mini-summary", children: [i.jsx("p", { className: "bc-mini-summary-title", children: "Joriy holat" }), i.jsxs("div", { className: "bc-mini-summary-row", children: [i.jsx("span", { children: "Shifr" }), i.jsx("strong", { className: "bc-code-badge", children: y.code || "" })] }), i.jsxs("div", { className: "bc-mini-summary-row", children: [i.jsx("span", { children: "Nomi" }), i.jsx("strong", { children: y.name || "" })] }), i.jsxs("div", { className: "bc-mini-summary-row", children: [i.jsx("span", { children: "Shahar" }), i.jsx("strong", { children: T?.name || "" })] }), i.jsxs("div", { className: "bc-mini-summary-row", children: [i.jsx("span", { children: "Qurilish holati" }), i.jsxs("strong", { children: [i.jsx(Dy, { status: y.construction_status }), " ", R[y.construction_status]] })] }), i.jsxs("div", { className: "bc-mini-summary-row", children: [i.jsx("span", { children: "Byudjet" }), i.jsx("strong", { children: y.budget ? B(y.budget) + " so'm" : "" })] }), i.jsxs("div", { className: "bc-mini-summary-row", children: [i.jsx("span", { children: "Tuzilish" }), i.jsx("strong", { children: j ? i.jsxs("span", { className: "bc-locked-text", children: [i.jsx(Ll, {}), " Bloklangan"] }) : "Tahrirlash mumkin" })] })] })] })] }), i.jsxs("div", { className: "bc-bottom-bar", children: [i.jsx("button", { className: "bc-btn-secondary", onClick: () => e("/buildings"), disabled: r, children: "Bekor qilish" }), i.jsx("button", { className: "bc-btn-primary bc-btn-lg", onClick: L, disabled: r, children: r ? i.jsxs(i.Fragment, { children: [i.jsx(My, {}), "Saqlanmoqda..."] }) : i.jsxs(i.Fragment, { children: [i.jsx(Ay, {}), "O'zgarishlarni saqlash"] }) })] })] })] }) }, Dy = ({ status: l }) => { const e = { new: "#6366f1", started: "#f59e0b", finished: "#10b981" }; return i.jsx("span", { style: { display: "inline-block", width: 8, height: 8, borderRadius: "50%", background: e[l] || "#9ca3af", flexShrink: 0, verticalAlign: "middle" } }) }, bT = () => i.jsx("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2.5", strokeLinecap: "round", strokeLinejoin: "round", children: i.jsx("polyline", { points: "15 18 9 12 15 6" }) }), Ay = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" }), i.jsx("polyline", { points: "17 21 17 13 7 13 7 21" }), i.jsx("polyline", { points: "7 3 7 8 15 8" })] }), My = () => i.jsx("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2.5", className: "bc-spin", children: i.jsx("path", { d: "M21 12a9 9 0 1 1-6.219-8.56" }) }), xT = () => i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("rect", { x: "3", y: "3", width: "18", height: "18", rx: "3" }), i.jsx("line", { x1: "12", y1: "8", x2: "12", y2: "8.01" }), i.jsx("line", { x1: "12", y1: "12", x2: "12", y2: "16" })] }), yT = () => i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("rect", { x: "3", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "3", y: "14", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "14", width: "7", height: "7" })] }), vT = () => i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M21 12V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-2" }), i.jsx("path", { d: "M17 12h4v4h-4a2 2 0 0 1 0-4z" })] }), Py = () => i.jsxs("svg", { width: "15", height: "15", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("line", { x1: "8", y1: "6", x2: "21", y2: "6" }), i.jsx("line", { x1: "8", y1: "12", x2: "21", y2: "12" }), i.jsx("line", { x1: "8", y1: "18", x2: "21", y2: "18" }), i.jsx("line", { x1: "3", y1: "6", x2: "3.01", y2: "6" }), i.jsx("line", { x1: "3", y1: "12", x2: "3.01", y2: "12" }), i.jsx("line", { x1: "3", y1: "18", x2: "3.01", y2: "18" })] }), _T = () => i.jsx("svg", { width: "15", height: "15", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2.5", strokeLinecap: "round", strokeLinejoin: "round", children: i.jsx("polyline", { points: "20 6 9 17 4 12" }) }), jT = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("line", { x1: "3", y1: "12", x2: "21", y2: "12" }), i.jsx("line", { x1: "3", y1: "6", x2: "21", y2: "6" }), i.jsx("line", { x1: "3", y1: "18", x2: "21", y2: "18" })] }), wT = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("rect", { x: "3", y: "3", width: "18", height: "18", rx: "2" }), i.jsx("line", { x1: "12", y1: "3", x2: "12", y2: "21" })] }), kT = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M3 12l9-9 9 9" }), i.jsx("path", { d: "M5 10v10a1 1 0 0 0 1 1h4v-5h4v5h4a1 1 0 0 0 1-1V10" })] }), Ll = () => i.jsxs("svg", { width: "15", height: "15", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("rect", { x: "3", y: "11", width: "18", height: "11", rx: "2", ry: "2" }), i.jsx("path", { d: "M7 11V7a5 5 0 0 1 10 0v4" })] }), ST = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "#6366f1", strokeWidth: "2.5", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" }), i.jsx("path", { d: "M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" })] }), S0 = async l => (await we.get("/homes/", { params: l })).data, NT = async (l, e) => (await we.patch(`/homes/${l}/`, e)).data, CT = async l => (await we.post("/homes/upload-excel/", l, { headers: { "Content-Type": "multipart/form-data" } })).data, TT = async l => (await we.post("/homes/batch-create/", l, { headers: { "Content-Type": "multipart/form-data" } })).data, Ft = { getAll: l => we.get("/contracts/", { params: l }), get: l => we.get(`/contracts/${l}/`), create: l => we.post("/contracts/", l), update: (l, e) => we.put(`/contracts/${l}/`, e), delete: l => we.delete(`/contracts/${l}/`), getPayments: l => we.get(`/contracts/${l}/payments/`), makePayment: (l, e) => we.post(`/contracts/${l}/make_payment/`, e), updateSchedule: (l, e) => we.post(`/contracts/${l}/update_schedule/`, e), updateMonths: (l, e) => we.post(`/contracts/${l}/update_months/`, e), autoDistribute: (l, e) => we.post(`/contracts/${l}/auto_distribute/`, e), adminAction: (l, e) => we.post(`/contracts/${l}/admin_payment/`, e), downloadPdf: l => we.get(`/contracts/${l}/download_pdf/`, { responseType: "blob" }), downloadTransactionPdf: (l, e) => we.get(`/contracts/${l}/download_transaction_pdf/${e}/`, { responseType: "blob" }), getTransactions: l => we.get(`/contracts/${l}/transactions/`), updateTransaction: (l, e, t) => we.patch(`/contracts/${l}/update_transaction/${e}/`, t), checkNumber: l => we.get("/contracts/check-number/", { params: l }) }, wm = ({ isOpen: l, imageSrc: e, onClose: t }) => !l || !e ? null : i.jsx("div", { className: "modal-overlay", onClick: t, role: "presentation", children: i.jsx("div", { className: "modal-content modal-xl", onClick: s => s.stopPropagation(), role: "dialog", "aria-modal": "true", children: i.jsxs("div", { style: { position: "relative", width: "100%", height: "100%", minHeight: "500px" }, children: [i.jsx("button", { className: "modal-close", onClick: t, "aria-label": "Close modal", type: "button", style: { position: "absolute", top: "12px", right: "12px", zIndex: 10 }, children: i.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }) }), i.jsx("img", { src: e || "/placeholder.svg", alt: "Preview", style: { width: "100%", height: "100%", objectFit: "contain", borderRadius: "12px", display: "block" } })] }) }) }), DT = () => { const [l, e] = C.useState("expanded"), [t, s] = C.useState(!0), r = C.useRef(0), o = C.useRef(null); return C.useEffect(() => { let u = !1; const d = () => { u || (window.requestAnimationFrame(() => { const f = window.scrollY, m = f - r.current; f < 60 ? (e("expanded"), s(!0)) : f < 120 && m > 0 ? (e("collapsed"), s(!0)) : f > 120 && m > 0 ? (e("hidden"), s(!1)) : m < 0 && (e(f < 60 ? "expanded" : "collapsed"), s(!0)), r.current = f, u = !1 }), u = !0) }; return window.addEventListener("scroll", d, { passive: !0 }), () => window.removeEventListener("scroll", d) }, []), { headerState: l, isVisible: t, headerRef: o } }, AT = ({ icon: l, title: e, subtitle: t, actions: s, headerState: r = "expanded", isVisible: o = !0 }) => { const u = () => { let d = "adaptive-page-header"; return r === "expanded" ? d += " state-expanded" : r === "collapsed" ? d += " state-collapsed" : r === "hidden" && (d += " state-hidden"), o || (d += " is-hidden"), d }; return i.jsxs("div", { className: u(), children: [i.jsx("div", { className: "header-background" }), i.jsxs("div", { className: "header-content", children: [i.jsxs("div", { className: "header-left", children: [l && i.jsx("div", { className: "icon-box", children: l }), i.jsxs("div", { className: "header-text", children: [i.jsx("h1", { className: "header-title", children: e }), t && i.jsx("p", { className: "header-subtitle", children: t })] })] }), s && i.jsx("div", { className: "header-actions", children: s })] }), i.jsx("div", { className: "header-divider" })] }) }, km = () => i.jsxs("div", { className: "scroll-hint", children: [i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M13 5l7 7-7 7M5 5l7 7-7 7" }) }), i.jsxs("span", { children: ["Gorizontal surish uchun: ", i.jsx("kbd", { children: "Shift" }), " + ", i.jsx("kbd", { children: "Scroll" })] })] }), on = l => l ? new Intl.NumberFormat("uz-UZ").format(Math.floor(Number(l))) : "0", MT = () => { const { headerState: l, isVisible: e } = DT(), [t, s] = C.useState([]), [r, o] = C.useState([]), [u, d] = C.useState([]), [f, m] = C.useState(!1), [p, g] = C.useState(""), [y, b] = C.useState(""), [v, k] = C.useState(null), [j, S] = C.useState(!1), [w, N] = C.useState(null), [T, R] = C.useState(!1), [P, O] = C.useState(null), z = bi(), [F, B] = C.useState(null), [A, L] = C.useState({ top: 0, left: 0 }); C.useEffect(() => { M() }, []); const M = async () => { try { const J = await k0(); s(J) } catch { $.error("Shaharlarni yuklashda xatolik") } }; C.useEffect(() => { p ? X() : (o([]), d([]), b("")) }, [p]); const X = async () => { try { const J = await jm({ city: p }); o(J) } catch { $.error("Binolarni yuklashda xatolik") } }; C.useEffect(() => { y ? U() : d([]) }, [y]); const U = async () => { m(!0); try { const J = await S0({ building: y, page_size: 1e3 }); d(J.results || J) } catch { $.error("Xonadonlarni yuklashda xatolik") } finally { m(!1) } }, I = C.useMemo(() => { if (!u.length) return null; let J = 0, G = 0; u.forEach(de => { const Se = parseInt(de.floor) || parseInt(de.home_floor) || 0, Ee = parseInt(de.padez) || parseInt(de.padez_number) || 1; Se > J && (J = Se), Ee > G && (G = Ee) }); const ge = {}; for (let de = 1; de <= G; de++) { ge[de] = {}; for (let Se = 1; Se <= J; Se++)ge[de][Se] = [] } return u.forEach(de => { const Se = parseInt(de.floor) || parseInt(de.home_floor) || 1, Ee = parseInt(de.padez) || parseInt(de.padez_number) || 1; ge[Ee] && ge[Ee][Se] && ge[Ee][Se].push(de) }), Object.keys(ge).forEach(de => { Object.keys(ge[de]).forEach(Se => { ge[de][Se].sort((Ee, be) => { const se = parseInt(String(Ee.number || Ee.home_number).replace(/\D/g, "")) || 0, Ne = parseInt(String(be.number || be.home_number).replace(/\D/g, "")) || 0; return se - Ne }) }) }), ge }, [u]), H = C.useMemo(() => { const J = u.filter(Se => Se.status === "AVAILABLE").length, G = u.filter(Se => Se.status === "SOLD").length, ge = u.filter(Se => Se.status === "BOOKED").length, de = u.filter(Se => Se.status === "INACTIVE" || Se.status === "UNAVAILABLE").length; return { available: J, sold: G, reserved: ge, inactive: de, total: u.length } }, [u]), Y = J => { const G = (J.status || "AVAILABLE").toUpperCase(); return G === "AVAILABLE" ? "available" : G === "SOLD" ? "sold" : G === "BOOKED" || G === "RESERVED" ? "booked" : "unavailable" }, ee = J => { const G = (J.status || "AVAILABLE").toUpperCase(); return G === "AVAILABLE" ? "Sotuvda" : G === "SOLD" ? "Sotilgan" : G === "BOOKED" || G === "RESERVED" ? "Band qilingan" : G === "INACTIVE" || G === "UNAVAILABLE" ? "Nofaol" : "Noma'lum" }, fe = async J => { if (k(J), S(!0), O(null), J.status === "SOLD" && J.contract_id) { R(!0); try { const G = await Ft.get(J.contract_id); O(G.data) } catch (G) { console.error("Shartnoma yuklashda xatolik:", G) } finally { R(!1) } } }, q = (J, G) => { const ge = J.currentTarget.getBoundingClientRect(); L({ top: ge.top, left: ge.left + ge.width / 2 }), B(G) }, Q = () => { B(null) }, ce = () => { S(!1), k(null) }, W = r.find(J => J.id === parseInt(y)), ae = ({ home: J, position: G }) => { if (!J) return null; const ge = (J.price || 0) * (J.square_meter || 0); return gt.createPortal(i.jsxs("div", { className: "home-info-tooltip", style: { top: G.top, left: G.left }, children: [i.jsxs("div", { className: "tooltip-header", children: [i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" }) }), i.jsxs("span", { children: ["Uy #", J.number || J.home_number] })] }), i.jsxs("div", { className: "tooltip-body", children: [i.jsxs("div", { className: "tooltip-row", children: [i.jsx("div", { className: "tooltip-label", children: "Padez:" }), i.jsx("div", { className: "tooltip-value", children: J.padez || J.padez_number || 1 })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsx("div", { className: "tooltip-label", children: "Qavat:" }), i.jsx("div", { className: "tooltip-value", children: J.floor || J.home_floor })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsx("div", { className: "tooltip-label", children: "Xonalar:" }), i.jsxs("div", { className: "tooltip-value", children: [J.rooms, " xona"] })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsx("div", { className: "tooltip-label", children: "Maydon:" }), i.jsxs("div", { className: "tooltip-value", children: [J.square_meter, " m"] })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsx("div", { className: "tooltip-label", children: "1 kv/m narxi:" }), i.jsxs("div", { className: "tooltip-value", children: [on(J.price), " so'm"] })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsx("div", { className: "tooltip-label", children: "Umumiy narxi:" }), i.jsxs("div", { className: "tooltip-value", children: [on(ge), " so'm"] })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsx("div", { className: "tooltip-label", children: "Holati:" }), i.jsx("div", { className: `tooltip-value status-${Y(J)}`, children: ee(J) })] })] })] }), document.body) }; return i.jsxs("div", { className: "contract-create-page building-info-page", children: [F && i.jsx(ae, { home: F, position: A }), i.jsx(AT, { icon: i.jsxs("svg", { width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "4", y: "2", width: "16", height: "20", rx: "2" }), i.jsx("path", { d: "M9 22v-4h6v4" }), i.jsx("path", { d: "M8 6h.01M16 6h.01M8 10h.01M16 10h.01M8 14h.01M16 14h.01" })] }), title: "Bino ma'lumotlari", subtitle: "Binolarni tanlang va xonadonlarni ko'ring", headerState: l, isVisible: e }), i.jsxs("div", { className: "create-content", children: [i.jsxs("div", { className: "card-section", children: [i.jsxs("div", { className: "section-header", children: [i.jsx("div", { className: "icon-box bg-info-subtle", children: i.jsx("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("polygon", { points: "22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" }) }) }), i.jsx("h3", { children: "Filtr" })] }), i.jsxs("div", { className: "form-grid", children: [i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["Shahar ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsxs("select", { className: "form-select", value: p, onChange: J => g(J.target.value), children: [i.jsx("option", { value: "", children: "Shaharni tanlang" }), t.map(J => i.jsx("option", { value: J.id, children: J.name }, J.id))] })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["Bino ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsxs("select", { className: "form-select", value: y, onChange: J => b(J.target.value), disabled: !p, children: [i.jsx("option", { value: "", children: "Binoni tanlang" }), r.map(J => i.jsx("option", { value: J.id, children: J.name }, J.id))] })] })] }), W && i.jsx("div", { className: "budget-stats-row", children: i.jsxs("div", { className: "budget-mini-stats", children: [i.jsxs("div", { className: "stat-item", children: [i.jsx("span", { className: "stat-label", children: "Byudjet:" }), i.jsxs("span", { className: "stat-value", children: [on(W.budget), " so'm"] })] }), i.jsx("div", { className: "stat-divider" }), i.jsxs("div", { className: "stat-item", children: [i.jsx("span", { className: "stat-label", children: "Sarflandi:" }), i.jsxs("span", { className: "stat-value spent", children: [on(W.spent_amount), " so'm"] })] }), i.jsx("div", { className: "stat-divider" }), i.jsxs("div", { className: "stat-item", children: [i.jsx("span", { className: "stat-label", children: "Qoldi:" }), i.jsxs("span", { className: `stat-value remaining ${W.remaining_budget < 0 ? "text-danger" : "text-success"}`, children: [on(W.remaining_budget), " so'm"] })] })] }) })] }), i.jsxs("div", { className: "card-section home-selector", children: [i.jsxs("div", { className: "section-header", children: [i.jsx("div", { className: "icon-box bg-success-subtle", children: i.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" }), i.jsx("polyline", { points: "9 22 9 12 15 12 15 22" })] }) }), i.jsx("h3", { children: "Bino tarkibi" }), u.length > 0 && i.jsxs("div", { className: "home-stats", children: [i.jsxs("span", { className: "stat available", children: ["Sotuvda: ", H.available] }), i.jsxs("span", { className: "stat sold", children: ["Sotilgan: ", H.sold] }), i.jsxs("span", { className: "stat booked", children: ["Band: ", H.reserved] })] })] }), i.jsx("div", { className: "homes-container", children: f ? i.jsxs("div", { className: "loading-state", children: [i.jsx("div", { className: "spinner" }), i.jsx("p", { children: "Uylar yuklanmoqda..." })] }) : y ? u.length === 0 ? i.jsx("div", { className: "empty-state", children: "Bu binoda uylar topilmadi" }) : I ? i.jsxs(i.Fragment, { children: [i.jsx(km, {}), i.jsxs("div", { className: "building-grid-wrapper", children: [i.jsx("div", { className: "building-grid", children: Object.keys(I).sort((J, G) => J - G).map(J => i.jsxs("div", { className: "padez-column", children: [i.jsxs("div", { className: "padez-header", children: [J, "-padez"] }), i.jsx("div", { className: "floors-wrapper", children: Object.keys(I[J]).sort((G, ge) => ge - G).map(G => i.jsxs("div", { className: "floor-row", children: [i.jsx("div", { className: "floor-label", children: G }), i.jsx("div", { className: "homes-row", children: I[J][G].length > 0 ? I[J][G].map(ge => i.jsx("div", { className: `home-cell ${Y(ge)}`, onClick: () => fe(ge), onMouseEnter: de => q(de, ge), onMouseLeave: Q, children: ge.number || ge.home_number }, ge.id)) : i.jsx("div", { className: "no-homes", children: "-" }) })] }, G)) })] }, J)) }), i.jsxs("div", { className: "legend", children: [i.jsxs("div", { className: "legend-item", children: [i.jsx("span", { className: "dot available" }), " Sotuvda"] }), i.jsxs("div", { className: "legend-item", children: [i.jsx("span", { className: "dot sold" }), " Sotilgan"] })] })] })] }) : null : i.jsxs("div", { className: "empty-state", children: [i.jsxs("svg", { width: "48", height: "48", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "1.5", children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("line", { x1: "12", y1: "16", x2: "12", y2: "12" }), i.jsx("line", { x1: "12", y1: "8", x2: "12.01", y2: "8" })] }), i.jsx("p", { children: "Binoni tanlang va bino tarkibi shu yerda ko'rsatiladi" })] }) })] })] }), j && v && gt.createPortal(i.jsx("div", { className: "modal-overlay", onClick: ce, children: i.jsxs("div", { className: "modal-content modal-lg home-details-modal", onClick: J => J.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsxs("div", { className: "modal-title", children: [i.jsx("div", { className: "icon-box bg-primary-subtle", children: i.jsx("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" }) }) }), i.jsxs("div", { children: [i.jsxs("h3", { children: ["Uy #", v.number || v.home_number] }), i.jsx("span", { className: `status-badge ${Y(v)}`, children: ee(v) })] })] }), i.jsx("button", { className: "modal-close", onClick: ce, children: i.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }) })] }), i.jsxs("div", { className: "modal-body", children: [i.jsxs("div", { className: "home-summary", children: [i.jsxs("div", { className: "summary-item", children: [i.jsx("span", { className: "label", children: "Padez" }), i.jsx("span", { className: "value", children: v.padez || v.padez_number || 1 })] }), i.jsxs("div", { className: "summary-item", children: [i.jsx("span", { className: "label", children: "Qavat" }), i.jsx("span", { className: "value", children: v.floor || v.home_floor })] }), i.jsxs("div", { className: "summary-item", children: [i.jsx("span", { className: "label", children: "Xonalar" }), i.jsxs("span", { className: "value", children: [v.rooms, " xona"] })] }), i.jsxs("div", { className: "summary-item", children: [i.jsx("span", { className: "label", children: "Maydon" }), i.jsxs("span", { className: "value", children: [v.square_meter, " m"] })] }), i.jsxs("div", { className: "summary-item", children: [i.jsx("span", { className: "label", children: "1 m narxi" }), i.jsxs("span", { className: "value", children: [on(v.price), " so'm"] })] }), i.jsxs("div", { className: "summary-item", children: [i.jsx("span", { className: "label", children: "Umumiy narx" }), i.jsxs("span", { className: "value highlight", children: [on(v.price * v.square_meter), " ", "so'm"] })] })] }), v.status === "SOLD" && i.jsxs("div", { className: "contract-preview-section", children: [i.jsx("h4", { children: "Sotuv ma'lumotlari" }), T ? i.jsxs("div", { className: "preview-loading", children: [i.jsx("div", { className: "spinner-sm" }), i.jsx("span", { children: "Ma'lumotlar yuklanmoqda..." })] }) : P ? i.jsxs("div", { className: "contract-info-card", children: [i.jsxs("div", { className: "info-row", children: [i.jsxs("div", { className: "info-item", children: [i.jsx("span", { className: "label", children: "Mijoz:" }), i.jsx("span", { className: "value", children: P.client_name || P.client?.full_name })] }), i.jsxs("div", { className: "info-item", children: [i.jsx("span", { className: "label", children: "Telefon:" }), i.jsx("span", { className: "value", children: P.client?.phone || "Mavjud emas" })] })] }), i.jsxs("div", { className: "info-row", children: [i.jsxs("div", { className: "info-item", children: [i.jsx("span", { className: "label", children: "Shartnoma:" }), i.jsxs("span", { className: "value", children: ["#", P.contract_number] })] }), i.jsxs("div", { className: "info-item", children: [i.jsx("span", { className: "label", children: "Sana:" }), i.jsx("span", { className: "value", children: (() => { const J = P.contract_date || P.created_at, G = new Date(J), ge = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"]; return `${G.getDate()}-${ge[G.getMonth()]} ${G.getFullYear()}` })() })] })] }), i.jsxs("button", { className: "btn-view-contract", onClick: () => z("/contracts", { state: { search: P.contract_number, autoOpenContractId: P.id } }), children: [i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" }), i.jsx("polyline", { points: "15 3 21 3 21 9" }), i.jsx("line", { x1: "10", y1: "14", x2: "21", y2: "3" })] }), "Shartnomani ko'rish"] })] }) : i.jsx("div", { className: "preview-error", children: "Shartnoma ma'lumotlarini yuklab bo'lmadi" })] }), (v.floor_plan || v.cadastral_image) && i.jsxs("div", { className: "images-section", children: [i.jsx("h4", { children: "Rasmlar" }), i.jsxs("div", { className: "images-row", children: [v.floor_plan && i.jsxs("div", { className: "image-card", onClick: () => N(v.floor_plan), children: [i.jsx("img", { src: v.floor_plan || "/placeholder.svg", alt: "Loyiha rasmi" }), i.jsx("span", { children: "Loyiha rasmi" })] }), v.cadastral_image && i.jsxs("div", { className: "image-card", onClick: () => N(v.cadastral_image), children: [i.jsx("img", { src: v.cadastral_image || "/placeholder.svg", alt: "Kadastr rasmi" }), i.jsx("span", { children: "Kadastr rasmi" })] })] })] })] }), i.jsx("div", { className: "modal-actions", children: i.jsx("button", { className: "btn-secondary", onClick: ce, children: "Yopish" }) })] }) }), document.body), i.jsx(wm, { isOpen: !!w, onClose: () => N(null), imageSrc: w, title: "Xonadon rasmi" })] }) }, PT = l => { if (!l && l !== 0) return ""; const e = typeof l == "string" ? l.replace(/\s/g, "") : String(l); return !e || isNaN(e) ? "" : Number(e).toLocaleString("ru-RU").replace(/,/g, " ") }, OT = (l, e) => { const t = l.replace(/\s/g, ""); (t === "" || /^\d+$/.test(t)) && e(t) }, ET = l => l === "" || l === "." ? !0 : /^(\d+\.?\d*|\.\d+)$/.test(l), Oy = l => l === "" ? !0 : /^\d+$/.test(l), BT = ({ isOpen: l, onClose: e, building: t, onSuccess: s }) => { const [r, o] = C.useState(!1), [u, d] = C.useState(null), [f, m] = C.useState(!1), p = C.useRef(null), g = j => { const S = j.target.files[0]; S && d(S) }, y = j => { j.preventDefault(), j.stopPropagation(), j.type === "dragenter" || j.type === "dragover" ? m(!0) : j.type === "dragleave" && m(!1) }, b = j => { if (j.preventDefault(), j.stopPropagation(), m(!1), j.dataTransfer.files && j.dataTransfer.files[0]) { const S = j.dataTransfer.files[0], w = S.name.split(".").pop().toLowerCase();["xlsx", "xls"].includes(w) ? d(S) : $.error("Faqat .xlsx yoki .xls fayllarni yuklash mumkin") } }, v = async j => { if (j.preventDefault(), !u || !t) return; o(!0); const S = new FormData; S.append("file", u), S.append("building", t.id); try { const w = await CT(S); $.success(w.message || "Fayl muvaffaqiyatli yuklandi"), s(), e() } catch (w) { $.error(w.response?.data?.error || "Yuklashda xatolik yuz berdi") } finally { o(!1), d(null) } }, k = () => { d(null), p.current && (p.current.value = "") }; return l ? gt.createPortal(i.jsx("div", { className: "modal-overlay", onClick: e, children: i.jsxs("div", { className: "modal-content import-modal", onClick: j => j.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("div", { className: "modal-header-icon", children: i.jsx(RT, {}) }), i.jsxs("div", { className: "modal-header-text", children: [i.jsx("h3", { children: "Exceldan yuklash" }), i.jsxs("p", { className: "modal-subtitle", children: [t?.name, " binosi uchun"] })] }), i.jsx("button", { className: "modal-close", onClick: e, children: i.jsx(Ey, {}) })] }), i.jsxs("form", { onSubmit: v, children: [i.jsxs("div", { className: "modal-form-body", children: [i.jsxs("div", { className: "template-download", children: [i.jsxs("div", { className: "template-info", children: [i.jsx(LT, {}), i.jsxs("div", { children: [i.jsx("span", { className: "template-title", children: "Namuna fayli kerakmi?" }), i.jsx("span", { className: "template-desc", children: "Excel faylni to'g'ri tuzish uchun yuklab oling" })] })] }), i.jsxs("a", { href: "/xonadonlar_malumotlari_demo.xlsx", download: "xonadonlar_namuna.xlsx", className: "btn-download", children: [i.jsx(zT, {}), i.jsx("span", { children: "Yuklab olish" })] })] }), i.jsxs("div", { className: "format-info", children: [i.jsxs("div", { className: "format-header", children: [i.jsx(FT, {}), i.jsxs("span", { style: { display: "flex", alignItems: "center", gap: "5px" }, children: ["Excel fayl formati", i.jsxs("span", { style: { fontSize: "0.8rem", fontWeight: "normal", color: "var(--text-secondary)" }, children: ["(Rasmlar uchun fayl nomini yozing: ", i.jsx("b", { children: "kv1.jpg" }), " kabi)"] })] })] }), i.jsxs("div", { className: "format-columns", children: [i.jsxs("div", { className: "format-column", children: [i.jsx("span", { className: "col-num", children: "1" }), i.jsx("span", { className: "col-name", children: "Xonadon raqami" })] }), i.jsxs("div", { className: "format-column", children: [i.jsx("span", { className: "col-num", children: "2" }), i.jsx("span", { className: "col-name", children: "Narx (1 m2)" })] }), i.jsxs("div", { className: "format-column", children: [i.jsx("span", { className: "col-num", children: "3" }), i.jsx("span", { className: "col-name", children: "Maydon (m)" })] }), i.jsxs("div", { className: "format-column", children: [i.jsx("span", { className: "col-num", children: "4" }), i.jsx("span", { className: "col-name", children: "Loyiha Rasmi" })] }), i.jsxs("div", { className: "format-column", children: [i.jsx("span", { className: "col-num", children: "5" }), i.jsx("span", { className: "col-name", children: "Kadastr Rasmi" })] }), i.jsxs("div", { className: "format-column", children: [i.jsx("span", { className: "col-num", children: "6" }), i.jsx("span", { className: "col-name", children: "Xonalar Soni" })] }), i.jsxs("div", { className: "format-column", children: [i.jsx("span", { className: "col-num", children: "7" }), i.jsx("span", { className: "col-name", children: "Qavat" })] }), i.jsxs("div", { className: "format-column", children: [i.jsx("span", { className: "col-num", children: "8" }), i.jsx("span", { className: "col-name", children: "Padez" })] })] })] }), i.jsxs("div", { className: `drop-zone ${f ? "drag-active" : ""} ${u ? "has-file" : ""}`, onDragEnter: y, onDragLeave: y, onDragOver: y, onDrop: b, onClick: () => p.current?.click(), children: [i.jsx("input", { ref: p, type: "file", accept: ".xlsx, .xls", onChange: g, style: { display: "none" } }), u ? i.jsxs("div", { className: "file-preview", children: [i.jsx("div", { className: "file-icon-wrapper", children: i.jsx(HT, {}) }), i.jsxs("div", { className: "file-info", children: [i.jsx("span", { className: "file-name", children: u.name }), i.jsxs("span", { className: "file-size", children: [(u.size / 1024).toFixed(1), " KB"] })] }), i.jsx("button", { type: "button", className: "btn-remove-file", onClick: j => { j.stopPropagation(), k() }, children: i.jsx(Ey, {}) })] }) : i.jsxs("div", { className: "drop-content", children: [i.jsx("div", { className: "drop-icon", children: i.jsx(IT, {}) }), i.jsxs("div", { className: "drop-text", children: [i.jsx("span", { className: "drop-title", children: "Faylni bu yerga tashlang" }), i.jsx("span", { className: "drop-or", children: "yoki" }), i.jsx("span", { className: "drop-browse", children: "kompyuterdan tanlang" })] }), i.jsx("span", { className: "drop-hint", children: ".xlsx yoki .xls formatida" })] })] })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { type: "button", className: "btn-secondary", onClick: e, children: "Bekor qilish" }), i.jsx("button", { type: "submit", className: "btn-primary", disabled: r || !u, children: r ? i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "btn-spinner" }), i.jsx("span", { children: "Yuklanmoqda..." })] }) : i.jsxs(i.Fragment, { children: [i.jsx(qT, {}), i.jsx("span", { children: "Yuklash" })] }) })] })] })] }) }), document.body) : null }, Ey = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }), RT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "1.5", children: [i.jsx("path", { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }), i.jsx("polyline", { points: "14 2 14 8 20 8" }), i.jsx("path", { d: "M8 13l2.5 3L8 19" }), i.jsx("path", { d: "M16 13l-2.5 3L16 19" })] }), LT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", style: { width: "20px", height: "20px" }, children: [i.jsx("path", { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }), i.jsx("polyline", { points: "14 2 14 8 20 8" })] }), zT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", style: { width: "16px", height: "16px" }, children: [i.jsx("path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" }), i.jsx("polyline", { points: "7 10 12 15 17 10" }), i.jsx("line", { x1: "12", y1: "15", x2: "12", y2: "3" })] }), FT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", style: { width: "16px", height: "16px" }, children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("line", { x1: "12", y1: "16", x2: "12", y2: "12" }), i.jsx("line", { x1: "12", y1: "8", x2: "12.01", y2: "8" })] }), HT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "1.5", children: [i.jsx("path", { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }), i.jsx("polyline", { points: "14 2 14 8 20 8" })] }), IT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "1.5", children: [i.jsx("path", { d: "M16 16l-4-4-4 4" }), i.jsx("path", { d: "M12 12v9" }), i.jsx("path", { d: "M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3" })] }), qT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", style: { width: "18px", height: "18px" }, children: [i.jsx("path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" }), i.jsx("polyline", { points: "17 8 12 3 7 8" }), i.jsx("line", { x1: "12", y1: "3", x2: "12", y2: "15" })] }), YT = () => { const l = bi(), [e, t] = C.useState([]), [s, r] = C.useState([]), [o, u] = C.useState([]), [d, f] = C.useState(!0), [m, p] = C.useState({ city: "", building: "", status: "", padez: "" }), [g, y] = C.useState("list"), [b, v] = C.useState(null), [k, j] = C.useState(null), [S, w] = C.useState({ top: 0, left: 0 }), [N, T] = C.useState({ count: 0, page: 1, pageSize: 20, totalPages: 1 }), [R, P] = C.useState({ open: !1, home: null }), [O, z] = C.useState(!1), [F, B] = C.useState(!1), [A, L] = C.useState(null), [M, X] = C.useState(!1), [U, I] = C.useState({ open: !1, src: "" }), [H, Y] = C.useState({ padez: "", floor: "", number: "", rooms: "", square_meter: "", price: "", status: "AVAILABLE", floor_plan: null, cadastral_image: null, is_booked: !1, booked_by_name: "", booked_by_phone: "" }); C.useEffect(() => { ee(), fe() }, []), C.useEffect(() => { if (m.building) { const K = o.find(ve => ve.id.toString() === m.building.toString()); L(K) } else L(null) }, [m.building, o]); const ee = async () => { try { const K = await Ir({ page_size: 1e3 }), ve = K.results || K; r(Array.isArray(ve) ? ve : []) } catch (K) { console.error(K) } }, fe = async () => { try { const K = await Ru({ page_size: 1e3 }), ve = K.results || K; u(Array.isArray(ve) ? ve : []) } catch (K) { console.error(K) } }, q = async () => { f(!0); try { const K = { page: N.page, page_size: g === "card" ? 1e3 : N.pageSize }; m.city && (K.city = m.city), m.building && (K.building = m.building), m.status && (K.status = m.status), m.padez && (K.padez = m.padez); const ve = await S0(K), Ae = Array.isArray(ve) ? ve : ve.results || []; t(Ae), g === "card" && Q(Ae); const ne = Array.isArray(ve) ? ve.length : ve.count || Ae.length || 0; T(re => ({ ...re, count: ne, totalPages: Math.ceil(ne / re.pageSize) || 1 })) } catch (K) { console.error("Uylarni yuklashda xatolik:", K), $.error("Uylarni yuklashda xatolik"), t([]) } finally { f(!1) } }, Q = K => { let ve = 0, Ae = 0; K.forEach(re => { const Ce = parseInt(re.floor) || 0, Ue = parseInt(re.padez) || 0; Ce > ve && (ve = Ce), Ue > Ae && (Ae = Ue) }); const ne = {}; for (let re = 1; re <= Ae; re++) { ne[re] = {}; for (let Ce = 1; Ce <= ve; Ce++)ne[re][Ce] = [] } K.forEach(re => { ne[re.padez] && ne[re.padez][re.floor] && ne[re.padez][re.floor].push(re) }), Object.keys(ne).forEach(re => { Object.keys(ne[re]).forEach(Ce => { ne[re][Ce].sort((Ue, wt) => { const kt = parseInt(String(Ue.number || "").replace(/\D/g, "")) || 0, Ki = parseInt(String(wt.number || "").replace(/\D/g, "")) || 0; return kt - Ki }) }) }), v(ne) }; C.useEffect(() => { q() }, [m, N.page, g]); const ce = K => { K !== g && (T(ve => ({ ...ve, page: 1 })), y(K)) }, W = (K, ve) => { p(Ae => ({ ...Ae, [K]: ve, ...K === "city" ? { building: "" } : {} })), T(Ae => ({ ...Ae, page: 1 })) }, ae = K => { K >= 1 && K <= N.totalPages && T(ve => ({ ...ve, page: K })) }, J = m.city ? o.filter(K => K.city?.id?.toString() === m.city || K.city === parseInt(m.city)) : o, G = K => new Intl.NumberFormat("uz-UZ").format(K), ge = K => { K.status === "SOLD" ? K.contract_id ? l(`/contracts/${K.contract_id}/edit`) : $.error("Bu uy uchun shartnoma topilmadi") : K.status === "AVAILABLE" || K.status === "BOOKED" ? de(K) : $.info("Bu holatdagi uyni tahrirlash mumkin emas") }, de = K => { const ve = K.status === "BOOKED"; Y({ padez: K.padez || "", floor: K.floor || "", number: K.number || "", rooms: K.rooms || "", square_meter: K.square_meter || "", price: K.price || "", status: K.status || "AVAILABLE", floor_plan: null, cadastral_image: null, floor_plan_preview: K.floor_plan || null, cadastral_image_preview: K.cadastral_image || null, is_booked: ve, booked_by_name: K.booked_by_name || "", booked_by_phone: K.booked_by_phone || "" }), P({ open: !0, home: K }) }, Se = () => { z(!0), setTimeout(() => { P({ open: !1, home: null }), z(!1) }, 250) }, Ee = async K => { if (K.preventDefault(), !!R.home) { X(!0); try { const ve = new FormData; H.padez !== "" && ve.append("padez", H.padez), H.floor !== "" && ve.append("floor", H.floor), H.number !== "" && ve.append("number", H.number), H.rooms !== "" && ve.append("rooms", H.rooms), H.square_meter !== "" && ve.append("square_meter", H.square_meter), H.price !== "" && ve.append("price", H.price), H.status && ve.append("status", H.status), H.floor_plan instanceof File && ve.append("floor_plan", H.floor_plan), H.cadastral_image instanceof File && ve.append("cadastral_image", H.cadastral_image), H.is_booked ? (ve.append("status", "BOOKED"), ve.append("booked_by_name", H.booked_by_name), ve.append("booked_by_phone", H.booked_by_phone)) : (ve.append("booked_by_name", ""), ve.append("booked_by_phone", "")), await NT(R.home.id, ve), $.success("Xonadon yangilandi"), Se(), q() } catch (ve) { console.error("Update error:", ve); const Ae = ve.response?.data; if (Ae && typeof Ae == "object") { const ne = Object.entries(Ae)[0]; if (ne) { const [re, Ce] = ne, Ue = Array.isArray(Ce) ? Ce[0] : Ce; $.error(`${re}: ${Ue}`) } else $.error("Yangilashda xatolik yuzaga keldi") } else $.error(ve.response?.data?.message || "Yangilashda xatolik") } finally { X(!1) } } }, be = (K, ve) => { const Ae = K.currentTarget.getBoundingClientRect(); w({ top: Ae.top, left: Ae.left + Ae.width / 2 }), j(ve) }, se = () => { j(null) }, Ne = K => { const ve = K?.toUpperCase(); return ve === "AVAILABLE" ? "available" : ve === "SOLD" ? "sold" : ve === "BOOKED" || ve === "ORDERED" ? "booked" : "unavailable" }, xe = ({ home: K, position: ve }) => { if (!K) return null; const Ae = (K.price || 0) * (K.square_meter || 0); return gt.createPortal(i.jsxs("div", { className: "home-info-tooltip fixed-tooltip", style: { top: ve.top, left: ve.left }, children: [i.jsxs("div", { className: "tooltip-header", children: [i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" }) }), i.jsxs("span", { children: ["Uy #", K.number] })] }), i.jsxs("div", { className: "tooltip-body", children: [i.jsxs("div", { className: "tooltip-row", children: [i.jsx("div", { className: "tooltip-label", children: "Padez / Qavat:" }), i.jsxs("div", { className: "tooltip-value", children: [K.padez, " / ", K.floor] })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsx("div", { className: "tooltip-label", children: "Xonalar / Maydon:" }), i.jsxs("div", { className: "tooltip-value", children: [K.rooms, " xona / ", K.square_meter, " m"] })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsx("div", { className: "tooltip-label", children: "Umumiy narxi:" }), i.jsxs("div", { className: "tooltip-value", children: [new Intl.NumberFormat("uz-UZ").format(Ae), " so'm"] })] }), (K.floor_plan || K.cadastral_image) && i.jsx("div", { className: "tooltip-image-section clickable", onClick: () => I({ open: !0, src: K.floor_plan || K.cadastral_image }), title: "Kattalashtirish uchun bosing", children: i.jsx("img", { src: K.floor_plan || K.cadastral_image, alt: "Plan" }) })] })] }), document.body) }; return i.jsxs("div", { className: "homes-page", children: [k && i.jsx(xe, { home: k, position: S }), i.jsxs("div", { className: "page-header", children: [i.jsxs("div", { className: "header-left", children: [i.jsx("h1", { className: "page-title", children: "Xonadonlar" }), i.jsx("p", { className: "page-subtitle", children: "Barcha xonadonlar ro'yxati va boshqaruvi" })] }), i.jsxs("div", { className: "header-actions", children: [i.jsxs("button", { className: "btn-secondary", onClick: () => B(!0), disabled: !A || A.status, title: A ? A.status ? "Uylar allaqachon yuklangan" : "Excel fayldan yuklash" : "Avval binoni tanlang", children: [i.jsx(UT, {}), i.jsx("span", { children: "Excel Yuklash" })] }), i.jsxs("button", { className: "btn-primary", onClick: () => l("/homes/create"), children: [i.jsx(jf, {}), i.jsx("span", { children: "Xonadon qo'shish" })] })] })] }), i.jsx("div", { className: "page-content", children: i.jsxs("div", { className: "content-card", children: [i.jsxs("div", { className: "card-header", children: [i.jsxs("div", { className: "filters-container", children: [i.jsxs("select", { value: m.city, onChange: K => W("city", K.target.value), className: "filter-select", children: [i.jsx("option", { value: "", children: "Barcha Shaharlar" }), s.map(K => i.jsx("option", { value: K.id, children: K.name }, K.id))] }), i.jsxs("select", { value: m.building, onChange: K => W("building", K.target.value), className: "filter-select", children: [i.jsx("option", { value: "", children: "Barcha Binolar" }), J.map(K => i.jsx("option", { value: K.id, children: K.name }, K.id))] }), i.jsxs("select", { value: m.status, onChange: K => W("status", K.target.value), className: "filter-select", children: [i.jsx("option", { value: "", children: "Barcha Holatlar" }), i.jsx("option", { value: "AVAILABLE", children: "Sotuvda" }), i.jsx("option", { value: "SOLD", children: "Sotilgan" }), i.jsx("option", { value: "BOOKED", children: "Band qilingan" }), i.jsx("option", { value: "UNAVAILABLE", children: "Sotuvda emas" })] }), i.jsx("input", { type: "number", placeholder: "Padez", value: m.padez, onChange: K => W("padez", K.target.value), className: "filter-input small" }), i.jsxs("div", { className: "results-count", children: ["Jami: ", i.jsx("strong", { children: N.count }), " ta xonadon"] })] }), i.jsxs("div", { className: "view-mode-tabs homes-tabs", children: [i.jsxs("button", { className: `tab-btn ${g === "list" ? "active" : ""}`, onClick: () => ce("list"), children: [i.jsx(KT, {}), i.jsx("span", { children: "Ro'yxat" })] }), i.jsxs("button", { className: `tab-btn ${g === "card" ? "active" : ""}`, onClick: () => ce("card"), children: [i.jsx(By, {}), i.jsx("span", { children: "Karta" })] })] })] }), d ? i.jsxs("div", { className: "loading-state", children: [i.jsx("div", { className: "spinner" }), i.jsx("p", { children: "Yuklanmoqda..." })] }) : e.length === 0 ? i.jsxs("div", { className: "empty-state", children: [i.jsx(wf, {}), i.jsx("h3", { children: "Xonadonlar topilmadi" }), i.jsx("p", { children: "Tanlangan filtrlarga mos xonadonlar mavjud emas" }), i.jsxs("button", { className: "btn-primary", onClick: () => l("/homes/create"), children: [i.jsx(jf, {}), i.jsx("span", { children: "Yangi xonadon qo'shish" })] })] }) : g === "card" ? m.building ? e.length === 0 ? i.jsxs("div", { className: "empty-state", children: [i.jsx(wf, {}), i.jsx("h3", { children: "Xonadonlar topilmadi" }), i.jsx("p", { children: "Ushbu binoda hali xonadonlar mavjud emas" }), i.jsxs("button", { className: "btn-primary", onClick: () => l("/homes/create"), children: [i.jsx(jf, {}), i.jsx("span", { children: "Xonadon qo'shish" })] })] }) : b ? i.jsxs(i.Fragment, { children: [i.jsx(km, {}), i.jsxs("div", { className: "building-grid-wrapper main-homes-grid", children: [i.jsx("div", { className: "building-grid", children: Object.keys(b).sort((K, ve) => parseInt(K) - parseInt(ve)).map(K => i.jsxs("div", { className: "padez-column", children: [i.jsxs("div", { className: "padez-header", children: [K, "-Padez"] }), i.jsx("div", { className: "floors-wrapper", children: Object.keys(b[K]).sort((ve, Ae) => parseInt(Ae) - parseInt(ve)).map(ve => i.jsxs("div", { className: "floor-row", children: [i.jsx("div", { className: "floor-label", children: ve }), i.jsx("div", { className: "homes-row", children: b[K][ve].length > 0 ? b[K][ve].map(Ae => i.jsx("div", { className: `home-cell ${Ne(Ae.status)}`, onClick: () => de(Ae), onMouseEnter: ne => be(ne, Ae), onMouseLeave: se, children: Ae.number }, Ae.id)) : i.jsx("div", { className: "no-homes", children: "-" }) })] }, ve)) })] }, K)) }), i.jsxs("div", { className: "grid-legend", children: [i.jsxs("div", { className: "legend-item", children: [i.jsx("span", { className: "dot available" }), " Sotuvda"] }), i.jsxs("div", { className: "legend-item", children: [i.jsx("span", { className: "dot sold" }), " Sotilgan"] }), i.jsxs("div", { className: "legend-item", children: [i.jsx("span", { className: "dot booked" }), " Band"] })] })] })] }) : i.jsxs("div", { className: "empty-state", children: [i.jsx(wf, {}), i.jsx("h3", { children: "Struktura xatosi" }), i.jsx("p", { children: "Binoning uylar strukturasini shakllantirishda muammo yuzaga keldi" })] }) : i.jsxs("div", { className: "empty-state card-empty-state", children: [i.jsx("div", { className: "empty-icon-wrapper", children: i.jsx(By, {}) }), i.jsx("h3", { children: "Bino tanlanmagan" }), i.jsx("p", { children: "Karta ko'rinishini ko'rish uchun yuqoridagi filtrdan binoni tanlang" })] }) : i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "table-container", children: i.jsxs("table", { className: "data-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { children: "#" }), i.jsx("th", { children: "Bino" }), i.jsx("th", { children: "Padez" }), i.jsx("th", { children: "Qavat" }), i.jsx("th", { children: "Raqam" }), i.jsx("th", { children: "Xona" }), i.jsx("th", { children: "Maydon (m)" }), i.jsx("th", { children: "Narx (1m)" }), i.jsx("th", { children: "Umumiy Narx" }), i.jsx("th", { children: "Holati" }), i.jsx("th", { children: "Amallar" })] }) }), i.jsx("tbody", { children: e.map((K, ve) => i.jsxs("tr", { onClick: () => ge(K), style: { cursor: "pointer" }, className: "clickable-row", children: [i.jsx("td", { className: "cell-number", children: (N.page - 1) * N.pageSize + ve + 1 }), i.jsx("td", { children: K.building_name }), i.jsx("td", { children: K.padez }), i.jsx("td", { children: K.floor }), i.jsx("td", { className: "font-bold", children: K.number }), i.jsx("td", { children: K.rooms }), i.jsx("td", { children: K.square_meter }), i.jsx("td", { children: G(K.price) }), i.jsx("td", { children: G(K.price * K.square_meter) }), i.jsx("td", { children: i.jsx("span", { className: `status-badge status-${K.status.toLowerCase()}`, children: K.status === "AVAILABLE" ? "Sotuvda" : K.status === "SOLD" ? "Sotilgan" : K.status === "BOOKED" ? "Band" : "Yopiq" }) }), i.jsx("td", { className: "cell-actions", onClick: Ae => Ae.stopPropagation(), children: i.jsx("div", { className: "table-actions", children: i.jsx("button", { className: "btn-icon btn-edit", onClick: () => de(K), title: "Tahrirlash", children: i.jsx(XT, {}) }) }) })] }, K.id)) })] }) }), g === "list" && N.totalPages > 1 && i.jsxs("div", { className: "pagination-container", children: [i.jsxs("div", { className: "pagination-info", children: ["Sahifa ", N.page, " / ", N.totalPages] }), i.jsxs("div", { className: "pagination-controls", children: [i.jsx("button", { className: "pagination-btn", onClick: () => ae(N.page - 1), disabled: N.page === 1, children: i.jsx(VT, {}) }), Array.from({ length: Math.min(5, N.totalPages) }, (K, ve) => { let Ae; return N.totalPages <= 5 || N.page <= 3 ? Ae = ve + 1 : N.page >= N.totalPages - 2 ? Ae = N.totalPages - 4 + ve : Ae = N.page - 2 + ve, i.jsx("button", { className: `pagination-btn ${N.page === Ae ? "active" : ""}`, onClick: () => ae(Ae), children: Ae }, Ae) }), i.jsx("button", { className: "pagination-btn", onClick: () => ae(N.page + 1), disabled: N.page === N.totalPages, children: i.jsx(WT, {}) })] })] })] })] }) }), i.jsx(BT, { isOpen: F, onClose: () => B(!1), building: A, onSuccess: () => { q(), fe() } }), R.open && gt.createPortal(i.jsx("div", { className: `modal-overlay ${O ? "closing" : ""}`, onClick: Se, children: i.jsxs("div", { className: `modal-content modal-form ${O ? "closing" : ""}`, onClick: K => K.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: "Xonadonni tahrirlash" }), i.jsx("button", { className: "modal-close", onClick: Se, children: i.jsx($T, {}) })] }), i.jsxs("form", { onSubmit: Ee, children: [i.jsxs("div", { className: "modal-form-body", children: [i.jsxs("div", { className: "form-row readonly-row", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Padez" }), i.jsx("input", { type: "number", value: H.padez, disabled: !0, className: "readonly-input" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Qavat" }), i.jsx("input", { type: "number", value: H.floor, disabled: !0, className: "readonly-input" })] })] }), i.jsxs("div", { className: "form-details-box", children: [i.jsxs("div", { className: "form-row", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Xona raqami" }), i.jsx("input", { type: "text", value: H.number, onChange: K => Y({ ...H, number: K.target.value }) })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Xonalar" }), i.jsx("input", { type: "number", value: H.rooms, onChange: K => Y({ ...H, rooms: K.target.value }) })] })] }), i.jsxs("div", { className: "form-row", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Maydon (m)" }), i.jsx("input", { type: "number", step: "0.01", value: H.square_meter, onChange: K => Y({ ...H, square_meter: K.target.value }) })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Narx (1m)" }), i.jsx("input", { type: "text", value: PT(H.price), onChange: K => OT(K.target.value, ve => Y({ ...H, price: ve })), placeholder: "0" })] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Holati" }), i.jsxs("select", { value: H.is_booked ? "BOOKED" : H.status, onChange: K => { const ve = K.target.value; Y(ve === "BOOKED" ? { ...H, status: ve, is_booked: !0 } : { ...H, status: ve, is_booked: !1, booked_by_name: "", booked_by_phone: "" }) }, disabled: H.is_booked, children: [i.jsx("option", { value: "AVAILABLE", children: "Sotuvda" }), i.jsx("option", { value: "BOOKED", children: "Band qilingan" }), i.jsx("option", { value: "UNAVAILABLE", children: "Sotuvda emas" })] })] }), i.jsxs("div", { className: "booking-toggle-section", children: [i.jsxs("div", { className: `booking-toggle ${H.is_booked ? "active" : ""}`, onClick: () => { const K = !H.is_booked; Y({ ...H, is_booked: K, status: K ? "BOOKED" : "AVAILABLE", booked_by_name: K ? H.booked_by_name : "", booked_by_phone: K ? H.booked_by_phone : "" }) }, children: [i.jsx("div", { className: "toggle-checkbox", children: H.is_booked && i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "3", children: i.jsx("polyline", { points: "20 6 9 17 4 12" }) }) }), i.jsxs("div", { className: "toggle-content", children: [i.jsx("span", { className: "toggle-label", children: "Band qilish" }), i.jsx("span", { className: "toggle-hint", children: "Xonadonni mijoz uchun band qilish" })] })] }), H.is_booked && i.jsxs("div", { className: "booking-details", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Band qilgan shaxs ismi *" }), i.jsx("input", { type: "text", value: H.booked_by_name, onChange: K => Y({ ...H, booked_by_name: K.target.value }), placeholder: "Ism familiya", required: !0 })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Telefon raqami *" }), i.jsx("input", { type: "tel", value: H.booked_by_phone, onChange: K => { let ve = K.target.value.replace(/\D/g, ""); ve.startsWith("998") && (ve = ve.slice(3)), ve.length > 9 && (ve = ve.slice(0, 9)); let Ae = "+998"; ve.length > 0 && (Ae += " " + ve.slice(0, 2)), ve.length > 2 && (Ae += " " + ve.slice(2, 5)), ve.length > 5 && (Ae += " " + ve.slice(5, 7)), ve.length > 7 && (Ae += " " + ve.slice(7, 9)), Y({ ...H, booked_by_phone: Ae }) }, placeholder: "+998 XX XXX XX XX", required: !0 })] })] })] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Loyiha rasmi" }), i.jsx("input", { type: "file", accept: "image/*", onChange: K => { K.target.files && K.target.files[0] && Y({ ...H, floor_plan: K.target.files[0], floor_plan_preview: URL.createObjectURL(K.target.files[0]) }) }, className: "file-input" }), H.floor_plan_preview && i.jsx("div", { className: "image-preview clickable", onClick: () => I({ open: !0, src: H.floor_plan_preview }), title: "Kattalashtirish uchun bosing", children: i.jsx("img", { src: H.floor_plan_preview, alt: "Plan" }) })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Kadastr rasmi" }), i.jsx("input", { type: "file", accept: "image/*", onChange: K => { K.target.files && K.target.files[0] && Y({ ...H, cadastral_image: K.target.files[0], cadastral_image_preview: URL.createObjectURL(K.target.files[0]) }) }, className: "file-input" }), H.cadastral_image_preview && i.jsx("div", { className: "image-preview clickable", onClick: () => I({ open: !0, src: H.cadastral_image_preview }), title: "Kattalashtirish uchun bosing", children: i.jsx("img", { src: H.cadastral_image_preview, alt: "Kadastr" }) })] })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { type: "button", className: "btn-secondary", onClick: Se, children: "Bekor qilish" }), i.jsx("button", { type: "submit", className: "btn-primary", disabled: M, children: M ? i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "btn-spinner" }), i.jsx("span", { children: "Saqlanmoqda..." })] }) : i.jsxs(i.Fragment, { children: [i.jsx(GT, {}), i.jsx("span", { children: "Saqlash" })] }) })] })] })] }) }), document.body), i.jsx(wm, { isOpen: U.open, imageSrc: U.src, onClose: () => I({ open: !1, src: "" }) })] }) }, jf = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "12", y1: "5", x2: "12", y2: "19" }), i.jsx("line", { x1: "5", y1: "12", x2: "19", y2: "12" })] }), XT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" }), i.jsx("path", { d: "M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" })] }), wf = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "1.5", children: [i.jsx("path", { d: "M3 21h18M5 21V7l8-4 8 4v14" }), i.jsx("rect", { x: "9", y: "9", width: "2", height: "2" }), i.jsx("rect", { x: "13", y: "9", width: "2", height: "2" }), i.jsx("rect", { x: "9", y: "13", width: "2", height: "2" }), i.jsx("rect", { x: "13", y: "13", width: "2", height: "2" })] }), UT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" }), i.jsx("polyline", { points: "17 8 12 3 7 8" }), i.jsx("line", { x1: "12", y1: "3", x2: "12", y2: "15" })] }), VT = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("polyline", { points: "15 18 9 12 15 6" }) }), WT = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("polyline", { points: "9 18 15 12 9 6" }) }), GT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" }), i.jsx("polyline", { points: "17 21 17 13 7 13 7 21" }), i.jsx("polyline", { points: "7 3 7 8 15 8" })] }), $T = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }), KT = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "8", y1: "6", x2: "21", y2: "6" }), i.jsx("line", { x1: "8", y1: "12", x2: "21", y2: "12" }), i.jsx("line", { x1: "8", y1: "18", x2: "21", y2: "18" }), i.jsx("line", { x1: "3", y1: "6", x2: "3.01", y2: "6" }), i.jsx("line", { x1: "3", y1: "12", x2: "3.01", y2: "12" }), i.jsx("line", { x1: "3", y1: "18", x2: "3.01", y2: "18" })] }), By = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "3", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "14", width: "7", height: "7" }), i.jsx("rect", { x: "3", y: "14", width: "7", height: "7" })] }), ZT = () => { const l = bi(), [e, t] = C.useState(!0), [s, r] = C.useState(!1), [o, u] = C.useState([]), [d, f] = C.useState([]), [m, p] = C.useState(""), [g, y] = C.useState(null), [b, v] = C.useState([]), [k, j] = C.useState([]); C.useEffect(() => { (async () => (t(!0), await Promise.all([S(), w()]), t(!1)))() }, []); const S = async () => { try { const F = await Ir({ page_size: 1e3 }), B = Array.isArray(F) ? F : F.results || F || []; u(Array.isArray(B) ? B : []) } catch (F) { console.error("Shaharlarni yuklashda xatolik:", F), u([]) } }, w = async () => { try { const F = await Ru({ page_size: 1e3 }), B = Array.isArray(F) ? F : F.results || F || [], A = Array.isArray(B) ? B : []; f(A.filter(L => !L.status)) } catch (F) { console.error("Binolarni yuklashda xatolik:", F), f([]) } }, N = m?.toString(), T = N ? d.filter(F => { const B = typeof F.city == "object" ? F.city?.id : F.city; return B == null ? !1 : B.toString() === N }) : d; C.useEffect(() => { if (!N || !g) return; (typeof g.city == "object" ? g.city?.id : g.city)?.toString() !== N && (y(null), v([]), j([])) }, [N, g]); const R = F => { const B = T.find(A => A.id.toString() === F); if (y(B), B) { const A = B.padez_home || [], L = []; A.forEach((M, X) => { const U = X + 1, I = []; for (let H = 0; H < M; H++)I.push({ padez: U, number: "", floor: 1, rooms: 0, square_meter: "", price: "", floor_plan: null, cadastral_image: null }); L.push({ padez: U, homes: I }) }), v(L), j([1]) } else v([]) }, P = F => { j(B => B.includes(F) ? B.filter(A => A !== F) : [...B, F]) }, O = (F, B, A, L) => { v(M => { const X = [...M]; return X[F].homes[B][A] = L, X }) }, z = async F => { if (F.preventDefault(), !g) { $.error("Bino tanlanmagan"); return } const A = b.flatMap(L => L.homes).filter(L => L.number && L.square_meter); if (A.length === 0) { $.error("Kamida bitta xonadon ma'lumotlarini to'ldiring"); return } r(!0); try { const L = new FormData; L.append("building_id", g.id), A.forEach((X, U) => { L.append(`homes[${U}][padez]`, X.padez), L.append(`homes[${U}][number]`, X.number), L.append(`homes[${U}][floor]`, X.floor), L.append(`homes[${U}][rooms]`, X.rooms), L.append(`homes[${U}][square_meter]`, X.square_meter), L.append(`homes[${U}][price]`, X.price), X.floor_plan && L.append(`homes[${U}][floor_plan]`, X.floor_plan), X.cadastral_image && L.append(`homes[${U}][cadastral_image]`, X.cadastral_image) }), L.append("homes_count", A.length); const M = await TT(L); $.success(M.message), l("/homes") } catch (L) { $.error(L.response?.data?.error || "Xatolik yuz berdi") } finally { r(!1) } }; return i.jsxs("div", { className: "homes-page", children: [i.jsx("div", { className: "page-header", children: i.jsxs("div", { className: "header-left", children: [i.jsx("button", { className: "btn-back", onClick: () => l("/homes"), children: i.jsx(QT, {}) }), i.jsxs("div", { children: [i.jsx("h1", { className: "page-title", children: "Xonadonlarni qo'lda qo'shish" }), i.jsx("p", { className: "page-subtitle", children: "Har bir xonadon uchun ma'lumotlarni kiriting" })] })] }) }), i.jsx("div", { className: "page-content", children: i.jsxs("div", { className: "content-card", children: [i.jsxs("div", { className: "card-header", children: [i.jsxs("div", { className: "filters-container", children: [i.jsxs("select", { value: m, onChange: F => { p(F.target.value), y(null), v([]), j([]) }, className: "filter-select", children: [i.jsx("option", { value: "", children: "Barcha shaharlar" }), o.map(F => i.jsx("option", { value: F.id, children: F.name }, F.id))] }), i.jsxs("select", { value: g?.id || "", onChange: F => R(F.target.value), className: "filter-select", disabled: !m, children: [i.jsx("option", { value: "", children: m ? "Bino tanlang..." : "Avval shahar tanlang..." }), T.map(F => i.jsxs("option", { value: F.id, children: [F.name, " - ", F.padez, " ta padez, ", F.floor, " qavat"] }, F.id))] })] }), g && i.jsxs("div", { className: "results-count", children: [i.jsx("strong", { children: g.name }), " - ", g.padez_home?.reduce((F, B) => F + B, 0), " ta xonadon"] })] }), i.jsx("div", { style: { padding: "24px" }, children: e ? i.jsxs("div", { className: "loading-state", children: [i.jsx("div", { className: "spinner" }), i.jsx("p", { children: "Ma'lumotlar yuklanmoqda..." })] }) : g ? i.jsxs("form", { onSubmit: z, children: [b.map((F, B) => i.jsxs("div", { className: "padez-section", children: [i.jsxs("button", { type: "button", className: `padez-header ${k.includes(F.padez) ? "expanded" : ""}`, onClick: () => P(F.padez), children: [i.jsxs("span", { children: [i.jsx(iD, {}), F.padez, "-Padez (", F.homes.length, " ta xonadon)"] }), i.jsx(JT, { expanded: k.includes(F.padez) })] }), i.jsx("div", { className: `padez-content ${k.includes(F.padez) ? "expanded" : "collapsed"}`, children: i.jsx("div", { className: "homes-grid", children: F.homes.map((A, L) => i.jsxs("div", { className: "home-card", children: [i.jsx("div", { className: "home-card-header", children: i.jsxs("span", { className: "home-number", children: ["#", L + 1] }) }), i.jsxs("div", { className: "home-card-body", children: [i.jsxs("div", { className: "form-row", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { className: "required", children: "Raqam" }), i.jsx("input", { type: "text", value: A.number, onChange: M => O(B, L, "number", M.target.value), placeholder: "1A" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { className: "required", children: "Qavat" }), i.jsx("input", { type: "text", value: A.floor, onChange: M => { Oy(M.target.value) && O(B, L, "floor", M.target.value) }, placeholder: "1" })] })] }), i.jsxs("div", { className: "form-row", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { className: "required", children: "Xonalar" }), i.jsx("input", { type: "text", value: A.rooms, onChange: M => { Oy(M.target.value) && O(B, L, "rooms", M.target.value) }, placeholder: "2" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { className: "required", children: "Maydon (m)" }), i.jsx("input", { type: "text", value: A.square_meter, onChange: M => { ET(M.target.value) && O(B, L, "square_meter", M.target.value) }, placeholder: "64.5" })] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { className: "required", children: "Narx (1m uchun)" }), i.jsx("input", { type: "text", value: A.price ? Number(A.price).toLocaleString("ru-RU").replace(/,/g, " ") : "", onChange: M => { const X = M.target.value.replace(/\s/g, ""); (X === "" || /^\d+$/.test(X)) && O(B, L, "price", X) }, placeholder: "10 000 000" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Loyiha rasmi" }), i.jsxs("div", { className: "file-input-wrapper", children: [i.jsx("input", { type: "file", accept: "image/*", onChange: M => O(B, L, "floor_plan", M.target.files[0]) }), i.jsxs("div", { className: `file-upload-box ${A.floor_plan ? "has-file" : ""}`, children: [i.jsx("div", { className: "file-upload-icon", children: i.jsx(Ry, {}) }), i.jsxs("div", { className: "file-upload-text", children: [i.jsx("span", { className: "file-upload-label", children: A.floor_plan ? i.jsx("span", { className: "file-name", children: A.floor_plan.name }) : "Rasm yuklash" }), i.jsx("span", { className: "file-upload-hint", children: "PNG, JPG (max 5MB)" })] })] })] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Kadastr rasmi" }), i.jsxs("div", { className: "file-input-wrapper", children: [i.jsx("input", { type: "file", accept: "image/*", onChange: M => O(B, L, "cadastral_image", M.target.files[0]) }), i.jsxs("div", { className: `file-upload-box ${A.cadastral_image ? "has-file" : ""}`, children: [i.jsx("div", { className: "file-upload-icon", children: i.jsx(Ry, {}) }), i.jsxs("div", { className: "file-upload-text", children: [i.jsx("span", { className: "file-upload-label", children: A.cadastral_image ? i.jsx("span", { className: "file-name", children: A.cadastral_image.name }) : "Rasm yuklash" }), i.jsx("span", { className: "file-upload-hint", children: "PNG, JPG (max 5MB)" })] })] })] })] })] })] }, L)) }) })] }, F.padez)), i.jsxs("div", { className: "modal-actions", style: { marginTop: "24px", padding: "24px 0 0", borderTop: "1px solid var(--border-color)" }, children: [i.jsx("button", { type: "button", className: "btn-secondary", onClick: () => l("/homes"), children: "Bekor qilish" }), i.jsx("button", { type: "submit", className: "btn-primary", disabled: s, children: s ? i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "btn-spinner" }), i.jsx("span", { children: "Saqlanmoqda..." })] }) : i.jsxs(i.Fragment, { children: [i.jsx(eD, {}), i.jsx("span", { children: "Xonadonlarni saqlash" })] }) })] })] }) : i.jsxs("div", { className: "empty-state", children: [i.jsx(tD, {}), i.jsx("h3", { children: "Bino tanlang" }), i.jsx("p", { children: "Xonadonlarni qo'shish uchun avval binoni tanlang" })] }) })] }) })] }) }, QT = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("polyline", { points: "15 18 9 12 15 6" }) }), JT = ({ expanded: l }) => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", style: { width: "20px", height: "20px", transform: l ? "rotate(180deg)" : "rotate(0)", transition: "transform 0.2s" }, children: i.jsx("polyline", { points: "6 9 12 15 18 9" }) }), eD = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" }), i.jsx("polyline", { points: "17 21 17 13 7 13 7 21" }), i.jsx("polyline", { points: "7 3 7 8 15 8" })] }), tD = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "1.5", children: [i.jsx("rect", { x: "4", y: "2", width: "16", height: "20", rx: "2" }), i.jsx("path", { d: "M9 22v-4h6v4" }), i.jsx("path", { d: "M8 6h.01M16 6h.01M8 10h.01M16 10h.01M8 14h.01M16 14h.01" })] }), iD = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", style: { width: "18px", height: "18px", marginRight: "8px" }, children: [i.jsx("rect", { x: "3", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "14", width: "7", height: "7" }), i.jsx("rect", { x: "3", y: "14", width: "7", height: "7" })] }), Ry = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "3", y: "3", width: "18", height: "18", rx: "2", ry: "2" }), i.jsx("circle", { cx: "8.5", cy: "8.5", r: "1.5" }), i.jsx("polyline", { points: "21 15 16 10 5 21" })] }), cn = { getAll: l => we.get("/clients/", { params: l }), get: l => we.get(`/clients/${l}/`), create: l => we.post("/clients/", l), update: (l, e) => we.put(`/clients/${l}/`, e), delete: (l, e = !1) => we.delete(`/clients/${l}/${e ? "?force=true" : ""}`), checkDelete: l => we.get(`/clients/${l}/check_delete/`), sendBulkSms: l => we.post("/clients/send_bulk_sms/", { message: l }), sendSms: (l, e) => we.post(`/clients/${l}/send_sms/`, { message: e }) }, yu = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("line", { x1: "12", y1: "5", x2: "12", y2: "19" }), i.jsx("line", { x1: "5", y1: "12", x2: "19", y2: "12" })] }), Sm = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("circle", { cx: "11", cy: "11", r: "8" }), i.jsx("line", { x1: "21", y1: "21", x2: "16.65", y2: "16.65" })] }), Nm = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("path", { d: "M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" }), i.jsx("path", { d: "M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" })] }), lo = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("polyline", { points: "3 6 5 6 21 6" }), i.jsx("path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" })] }), N0 = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("path", { d: "M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" }), i.jsx("polyline", { points: "17 21 17 13 7 13 7 21" }), i.jsx("polyline", { points: "7 3 7 8 15 8" })] }), ql = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }), C0 = l => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: i.jsx("polyline", { points: "15 18 9 12 15 6" }) }), T0 = l => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: i.jsx("polyline", { points: "9 18 15 12 9 6" }) }), D0 = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "1.5", ...l, children: [i.jsx("path", { d: "M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" }), i.jsx("circle", { cx: "9", cy: "7", r: "4" }), i.jsx("path", { d: "M23 21v-2a4 4 0 0 0-3-3.87" }), i.jsx("path", { d: "M16 3.13a4 4 0 0 1 0 7.75" })] }), Ly = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("path", { d: "M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" }), i.jsx("line", { x1: "9", y1: "10", x2: "15", y2: "10" })] }), zy = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("line", { x1: "22", y1: "2", x2: "11", y2: "13" }), i.jsx("polygon", { points: "22 2 15 22 11 13 2 9 22 2" })] }), kf = [{ value: "Telegramda", label: "Telegram", className: "telegram" }, { value: "Instagramda", label: "Instagram", className: "instagram" }, { value: "YouTubeda", label: "YouTube", className: "youtube" }, { value: "Odamlar orasida", label: "Odamlar orasida", className: "people" }, { value: "Xech qayerda", label: "Xech qayerda", className: "none" }], sD = () => { const [l, e] = C.useState([]), [t, s] = C.useState(!0), [r, o] = C.useState(""), [u, d] = C.useState(""), [f, m] = C.useState({ count: 0, page: 1, pageSize: 20, totalPages: 1 }), [p, g] = C.useState({ open: !1, type: null, client: null }), [y, b] = C.useState(!1), [v, k] = C.useState({ full_name: "", phone: "", phone2: "", heard_source: "Xech qayerda" }), [j, S] = C.useState(!1), [w, N] = C.useState(null), [T, R] = C.useState(!1), [P, O] = C.useState({ open: !1, client: null }), [z, F] = C.useState(""), [B, A] = C.useState(!1); C.useEffect(() => { L() }, [f.page, r, u]); const L = async () => { try { s(!0); const be = { page: f.page, page_size: f.pageSize }; r && (be.search = r), u && u !== "all" && (be.heard = u); const Ne = (await cn.getAll(be)).data, xe = Array.isArray(Ne) ? Ne : Ne.results || []; e(xe); const K = Array.isArray(Ne) ? Ne.length : Ne.count || xe.length || 0; m(ve => ({ ...ve, count: K, totalPages: Math.ceil(K / ve.pageSize) || 1 })) } catch (be) { console.error(be), $.error("Mijozlarni yuklashda xatolik"), e([]) } finally { s(!1) } }, M = be => { o(be.target.value), m(se => ({ ...se, page: 1 })) }, X = be => { d(be.target.value), m(se => ({ ...se, page: 1 })) }, U = be => { be >= 1 && be <= f.totalPages && m(se => ({ ...se, page: be })) }, I = be => { if (!be) return be; const se = be.replace(/\D/g, ""); return se.length < 3 ? se : se.length < 6 ? `${se.slice(0, 2)} ${se.slice(2)}` : se.length < 8 ? `${se.slice(0, 2)} ${se.slice(2, 5)} ${se.slice(5)}` : `${se.slice(0, 2)} ${se.slice(2, 5)} ${se.slice(5, 7)} ${se.slice(7, 9)}` }, H = () => { k({ full_name: "", phone: "", phone2: "", heard_source: "Xech qayerda" }) }, Y = () => { H(), g({ open: !0, type: "create", client: null }) }, ee = be => { k({ full_name: be.full_name, phone: I(be.phone || ""), phone2: I(be.phone2 || ""), heard_source: be.heard_source }), g({ open: !0, type: "edit", client: be }) }, fe = async be => { N(null), g({ open: !0, type: "delete", client: be }); try { const se = await cn.checkDelete(be.id); se.data.has_contracts && N(se.data) } catch { } }, q = () => { b(!0), setTimeout(() => { g({ open: !1, type: null, client: null }), b(!1), H(), N(null) }, 250) }, Q = be => { const { name: se, value: Ne } = be.target; if (se === "phone" || se === "phone2") { const xe = I(Ne); Ne.length < v[se].length ? k(K => ({ ...K, [se]: Ne })) : k(K => ({ ...K, [se]: xe })) } else k(xe => ({ ...xe, [se]: Ne })) }, ce = async be => { if (be.preventDefault(), !v.full_name.trim()) { $.error("Ism kiritish majburiy"); return } if (!v.phone || v.phone.length < 9) { $.error("Telefon raqam to'liq emas"); return } const se = { ...v, phone: v.phone.replace(/\s/g, ""), phone2: v.phone2 ? v.phone2.replace(/\s/g, "") : "" }; try { S(!0), p.type === "edit" ? (await cn.update(p.client.id, se), $.success("Mijoz muvaffaqiyatli yangilandi")) : (await cn.create(se), $.success("Mijoz muvaffaqiyatli yaratildi")), q(), L() } catch { $.error("Saqlashda xatolik") } finally { S(!1) } }, W = async () => { if (!p.client) return; const be = !!w; try { S(!0), await cn.delete(p.client.id, be), $.success(be ? "Mijoz va shartnomalari o'chirildi" : "Mijoz o'chirildi"), q(), L() } catch (se) { se.response?.status === 409 && se.response?.data?.error === "has_contracts" ? N(se.response.data) : $.error("O'chirishda xatolik") } finally { S(!1) } }, ae = () => { F(""), R(!0) }, J = () => { b(!0), setTimeout(() => { R(!1), b(!1), F("") }, 250) }, G = be => { F(""), O({ open: !0, client: be }) }, ge = () => { b(!0), setTimeout(() => { O({ open: !1, client: null }), b(!1), F("") }, 250) }, de = async () => { if (!z.trim()) { $.error("SMS matnini kiriting"); return } if (z.length < 10) { $.error("SMS matni kamida 10 ta belgidan iborat bo'lishi kerak (Eskiz talabi)"); return } try { A(!0); const be = await cn.sendBulkSms(z); be.status >= 200 && be.status < 300 ? ($.success(be.data.message || "SMS yuborildi"), J()) : $.error(be.data.error || "Xatolik yuz berdi") } catch (be) { $.error(be.response?.data?.error || "SMS yuborishda xatolik") } finally { A(!1) } }, Se = async () => { if (!z.trim()) { $.error("SMS matnini kiriting"); return } if (z.length < 10) { $.error("SMS matni kamida 10 ta belgidan iborat bo'lishi kerak (Eskiz talabi)"); return } if (P.client) try { A(!0); const be = await cn.sendSms(P.client.id, z); be.status >= 200 && be.status < 300 ? ($.success(be.data.message || "SMS yuborildi"), ge()) : $.error(be.data.error || "Xatolik yuz berdi") } catch (be) { $.error(be.response?.data?.error || "SMS yuborishda xatolik") } finally { A(!1) } }, Ee = be => { const se = kf.find(ve => ve.value === be), Ne = se ? se.className : "none"; let xe = "#6b7280", K = "rgba(107, 114, 128, 0.1)"; return Ne === "telegram" && (xe = "#3b82f6", K = "rgba(59, 130, 246, 0.1)"), Ne === "instagram" && (xe = "#ec4899", K = "rgba(236, 72, 153, 0.1)"), Ne === "youtube" && (xe = "#ef4444", K = "rgba(239, 68, 68, 0.1)"), Ne === "people" && (xe = "#10b981", K = "rgba(16, 185, 129, 0.1)"), i.jsxs("span", { style: { padding: "6px 10px", borderRadius: "8px", fontSize: "12px", fontWeight: "600", display: "inline-flex", alignItems: "center", gap: "6px", background: K, color: xe }, children: [i.jsx("span", { style: { width: "6px", height: "6px", borderRadius: "50%", background: "currentColor" } }), se ? se.label : be] }) }; return i.jsxs("div", { className: "clients-page", children: [i.jsxs("div", { className: "page-header", children: [i.jsxs("div", { className: "header-left", children: [i.jsx("h1", { className: "page-title", children: "Mijozlar" }), i.jsx("p", { className: "page-subtitle", children: "Mijozlar bazasini boshqarish" })] }), i.jsxs("div", { className: "header-actions", children: [i.jsxs("button", { className: "btn-secondary", onClick: ae, children: [i.jsx(Ly, {}), i.jsx("span", { children: "SMS yuborish" })] }), i.jsxs("button", { className: "btn-primary", onClick: Y, children: [i.jsx(yu, {}), i.jsx("span", { children: "Mijoz qo'shish" })] })] })] }), i.jsx("div", { className: "page-content", children: i.jsxs("div", { className: "content-card", children: [i.jsx("div", { className: "card-header", children: i.jsxs("div", { className: "filters-container", children: [i.jsxs("div", { className: "search-box", children: [i.jsx(Sm, {}), i.jsx("input", { type: "text", placeholder: "Qidirish...", value: r, onChange: M })] }), i.jsxs("select", { className: "filter-select", value: u, onChange: X, children: [i.jsx("option", { value: "all", children: "Barcha manbalar" }), kf.map(be => i.jsx("option", { value: be.value, children: be.label }, be.value))] }), i.jsxs("div", { className: "results-count", children: ["Jami: ", i.jsx("strong", { children: f.count }), " ta mijoz"] })] }) }), t ? i.jsxs("div", { className: "loading-state", children: [i.jsx("div", { className: "spinner" }), i.jsx("p", { children: "Yuklanmoqda..." })] }) : l.length === 0 ? i.jsxs("div", { className: "empty-state", children: [i.jsx(D0, {}), i.jsx("h3", { children: "Mijozlar topilmadi" }), i.jsx("p", { children: "Sizning so'rovingiz bo'yicha mijozlar topilmadi" }), i.jsxs("button", { className: "btn-primary", onClick: Y, children: [i.jsx(yu, { style: { width: 18, height: 18, flexShrink: 0 } }), i.jsx("span", { children: "Mijoz qo'shish" })] })] }) : i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "responsive-table", children: i.jsxs("table", { className: "data-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { children: "#" }), i.jsx("th", { children: "To'liq Ismi" }), i.jsx("th", { children: "Telefon Raqami" }), i.jsx("th", { children: "Manba" }), i.jsx("th", { children: "Qo'shimcha Tel" }), i.jsx("th", { style: { textAlign: "right" }, children: "Amallar" })] }) }), i.jsx("tbody", { children: l.map((be, se) => i.jsxs("tr", { onClick: () => ee(be), style: { cursor: "pointer" }, className: "clickable-row", children: [i.jsx("td", { className: "cell-number", children: (f.page - 1) * f.pageSize + se + 1 }), i.jsx("td", { className: "cell-name", children: be.full_name }), i.jsx("td", { className: "cell-phone", children: i.jsxs("a", { href: `tel:+998${be.phone}`, onClick: Ne => Ne.stopPropagation(), children: [i.jsx("span", { children: "+998" }), I(be.phone)] }) }), i.jsx("td", { children: Ee(be.heard_source) }), i.jsx("td", { className: "cell-phone", children: be.phone2 ? i.jsxs("a", { href: `tel:+998${be.phone2}`, onClick: Ne => Ne.stopPropagation(), children: [i.jsx("span", { children: "+998" }), I(be.phone2)] }) : i.jsx("span", { className: "text-muted", children: "-" }) }), i.jsx("td", { className: "cell-actions", style: { justifyContent: "flex-end" }, onClick: Ne => Ne.stopPropagation(), children: i.jsxs("div", { className: "table-actions", children: [i.jsx("button", { className: "btn-icon btn-sms", onClick: () => G(be), title: "SMS yuborish", children: i.jsx(Ly, {}) }), i.jsx("button", { className: "btn-icon btn-edit", onClick: () => ee(be), title: "Tahrirlash", children: i.jsx(Nm, {}) }), i.jsx("button", { className: "btn-icon btn-delete", onClick: () => fe(be), title: "O'chirish", children: i.jsx(lo, {}) })] }) })] }, be.id)) })] }) }), f.totalPages > 1 && i.jsxs("div", { className: "pagination-container", children: [i.jsxs("div", { className: "pagination-info", children: ["Sahifa ", f.page, " / ", f.totalPages] }), i.jsxs("div", { className: "pagination-controls", children: [i.jsx("button", { className: "pagination-btn", onClick: () => U(f.page - 1), disabled: f.page === 1, children: i.jsx(C0, {}) }), Array.from({ length: Math.min(5, f.totalPages) }, (be, se) => { let Ne; return f.totalPages <= 5 || f.page <= 3 ? Ne = se + 1 : f.page >= f.totalPages - 2 ? Ne = f.totalPages - 4 + se : Ne = f.page - 2 + se, i.jsx("button", { className: `pagination-btn ${f.page === Ne ? "active" : ""}`, onClick: () => U(Ne), children: Ne }, Ne) }), i.jsx("button", { className: "pagination-btn", onClick: () => U(f.page + 1), disabled: f.page === f.totalPages, children: i.jsx(T0, {}) })] })] })] })] }) }), p.open && (p.type === "create" || p.type === "edit") && gt.createPortal(i.jsx("div", { className: `modal-overlay ${y ? "closing" : ""}`, onClick: q, children: i.jsxs("div", { className: `modal-content modal-form ${y ? "closing" : ""}`, onClick: be => be.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: p.type === "edit" ? "Mijozni tahrirlash" : "Yangi mijoz qo'shish" }), i.jsx("button", { className: "modal-close", onClick: q, children: i.jsx(ql, {}) })] }), i.jsxs("form", { onSubmit: ce, children: [i.jsxs("div", { className: "modal-form-body", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { htmlFor: "full_name", className: "required", children: "To'liq ismi" }), i.jsx("input", { type: "text", id: "full_name", name: "full_name", placeholder: "Masalan: Eshmat Toshmatov", value: v.full_name, onChange: Q })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { htmlFor: "phone", className: "required", children: "Telefon raqami" }), i.jsx("input", { type: "text", id: "phone", name: "phone", placeholder: "+998 90 123 45 67", value: v.phone ? `+998 ${v.phone}` : "", onChange: be => { const se = be.target.value.replace("+998 ", "").replace("+998", ""); Q({ target: { name: "phone", value: se } }) }, maxLength: 17 })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { htmlFor: "phone2", children: "Qo'shimcha telefon" }), i.jsx("input", { type: "text", id: "phone2", name: "phone2", placeholder: "+998 90 123 45 67", value: v.phone2 ? `+998 ${v.phone2}` : "", onChange: be => { const se = be.target.value.replace("+998 ", "").replace("+998", ""); Q({ target: { name: "phone2", value: se } }) }, maxLength: 17 })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { htmlFor: "heard_source", className: "required", children: "Qayerda eshitgan" }), i.jsx("select", { id: "heard_source", name: "heard_source", value: v.heard_source, onChange: Q, children: kf.map(be => i.jsx("option", { value: be.value, children: be.label }, be.value)) })] })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { type: "button", className: "btn-secondary", onClick: q, children: "Bekor qilish" }), i.jsx("button", { type: "submit", className: "btn-primary", disabled: j, children: j ? i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "btn-spinner" }), i.jsx("span", { children: "Saqlanmoqda..." })] }) : i.jsxs(i.Fragment, { children: [i.jsx(N0, {}), i.jsx("span", { children: p.type === "edit" ? "Saqlash" : "Yaratish" })] }) })] })] })] }) }), document.body), p.open && p.type === "delete" && gt.createPortal(i.jsx("div", { className: `modal-overlay ${y ? "closing" : ""}`, onClick: q, children: i.jsxs("div", { className: `modal-content ${y ? "closing" : ""}`, onClick: be => be.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: "Mijozni o'chirish" }), i.jsx("button", { className: "modal-close", onClick: q, children: i.jsx(ql, {}) })] }), i.jsxs("div", { className: "modal-body", style: { textAlign: "center", padding: "32px 24px" }, children: [i.jsx("div", { className: "modal-icon danger", style: { margin: "0 auto 20px", width: "64px", height: "64px", borderRadius: "50%", background: w ? "rgba(245,158,11,0.15)" : "rgba(239, 68, 68, 0.1)", color: w ? "#f59e0b" : "#ef4444", display: "flex", alignItems: "center", justifyContent: "center" }, children: i.jsx(lo, {}) }), i.jsxs("p", { style: { fontSize: "16px", color: "var(--text-primary)", marginBottom: "8px" }, children: [i.jsx("strong", { children: p.client?.full_name }), " mijozini o'chirishni xohlaysizmi?"] }), w ? i.jsxs("div", { style: { background: "rgba(245,158,11,0.1)", border: "1px solid rgba(245,158,11,0.3)", borderRadius: "10px", padding: "14px", marginTop: "12px", textAlign: "left" }, children: [i.jsxs("p", { style: { fontSize: "13px", fontWeight: 700, color: "#f59e0b", marginBottom: "8px" }, children: [" ", w.message] }), w.contracts.map(be => i.jsxs("p", { style: { fontSize: "12px", color: "var(--text-secondary)", marginBottom: "4px" }, children: [" #", be.contract_number, "  ", be.building_name, ",", " ", be.home_number, "-xona"] }, be.id)), i.jsx("p", { style: { fontSize: "12px", color: "#ef4444", marginTop: "10px", fontWeight: 600 }, children: "O'chirsangiz barcha shartnomalari ham o'chiriladi!" })] }) : i.jsx("p", { style: { fontSize: "14px", color: "var(--text-secondary)" }, children: "Bu amalni ortga qaytarib bo'lmaydi." })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { className: "btn-secondary", onClick: q, children: "Bekor qilish" }), i.jsx("button", { className: "btn-danger", onClick: W, disabled: j, children: j ? "O'chirilmoqda..." : w ? "Hammasi bilan o'chirish" : "O'chirish" })] })] }) }), document.body), T && gt.createPortal(i.jsx("div", { className: `modal-overlay ${y ? "closing" : ""}`, onClick: J, children: i.jsxs("div", { className: `modal-content modal-form ${y ? "closing" : ""}`, onClick: be => be.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: "Ommaviy SMS yuborish" }), i.jsx("button", { className: "modal-close", onClick: J, children: i.jsx(ql, {}) })] }), i.jsxs("div", { className: "modal-form-body", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "SMS MAQSADI" }), i.jsxs("div", { className: "sms-info-note", style: { padding: "12px", background: "rgba(99, 102, 241, 0.05)", borderRadius: "10px", color: "var(--text-secondary)", fontSize: "13px", border: "1px dashed rgba(99, 102, 241, 0.2)" }, children: ["Xabar ro'yxatdagi barcha mijozlarga (jami ", f.count, " ", "ta) yuboriladi."] })] }), i.jsxs("div", { className: "form-group", style: { marginBottom: 0 }, children: [i.jsx("label", { htmlFor: "bulkSmsMessage", children: "SMS MATNI *" }), i.jsx("textarea", { id: "bulkSmsMessage", placeholder: "Xabar matnini kiriting...", value: z, onChange: be => F(be.target.value), rows: 5 }), i.jsxs("div", { className: "sms-char-count-minimal", style: { textAlign: "right", fontSize: "11px", marginTop: "6px", color: z.length < 10 ? "#ef4444" : "var(--text-secondary)" }, children: [z.length, " belgi", " ", z.length < 10 && "(kamida 10 ta bo'lishi shart)"] })] })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { className: "btn-secondary", onClick: J, children: "Bekor qilish" }), i.jsx("button", { className: "btn-primary", onClick: de, disabled: B || z.length < 10, children: B ? i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "btn-spinner" }), i.jsx("span", { children: "Yuborilmoqda..." })] }) : i.jsxs(i.Fragment, { children: [i.jsx(zy, {}), i.jsx("span", { children: "Hammaga yuborish" })] }) })] })] }) }), document.body), P.open && gt.createPortal(i.jsx("div", { className: `modal-overlay ${y ? "closing" : ""}`, onClick: ge, children: i.jsxs("div", { className: `modal-content modal-form ${y ? "closing" : ""}`, onClick: be => be.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: "SMS yuborish" }), i.jsx("button", { className: "modal-close", onClick: ge, children: i.jsx(ql, {}) })] }), i.jsxs("div", { className: "modal-form-body", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "MIJOZ" }), i.jsx("input", { type: "text", readOnly: !0, value: `${P.client?.full_name} (+998 ${I(P.client?.phone)})` })] }), i.jsxs("div", { className: "form-group", style: { marginBottom: 0 }, children: [i.jsx("label", { htmlFor: "smsMessage", children: "SMS MATNI *" }), i.jsx("textarea", { id: "smsMessage", placeholder: "Xabar matnini kiriting...", value: z, onChange: be => F(be.target.value), rows: 5 }), i.jsxs("div", { className: "sms-char-count-minimal", style: { textAlign: "right", fontSize: "11px", marginTop: "6px", color: z.length < 10 ? "#ef4444" : "var(--text-secondary)" }, children: [z.length, " belgi", " ", z.length < 10 && "(kamida 10 ta bo'lishi shart)"] })] })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { className: "btn-secondary", onClick: ge, children: "Bekor qilish" }), i.jsx("button", { className: "btn-primary", onClick: Se, disabled: B || z.length < 10, children: B ? i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "btn-spinner" }), i.jsx("span", { children: "Yuborilmoqda..." })] }) : i.jsxs(i.Fragment, { children: [i.jsx(zy, {}), i.jsx("span", { children: "Yuborish" })] }) })] })] }) }), document.body)] }) }, aD = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("line", { x1: "12", y1: "5", x2: "12", y2: "19" }), i.jsx("line", { x1: "5", y1: "12", x2: "19", y2: "12" })] }), nD = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("circle", { cx: "11", cy: "11", r: "8" }), i.jsx("line", { x1: "21", y1: "21", x2: "16.65", y2: "16.65" })] }), Qf = l => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: i.jsx("polygon", { points: "22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" }) }), vu = ({ width: l = 18, height: e = 18, ...t }) => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", width: l, height: e, ...t, children: [i.jsx("path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" }), i.jsx("polyline", { points: "7 10 12 15 17 10" }), i.jsx("line", { x1: "12", y1: "15", x2: "12", y2: "3" })] }), rD = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("path", { d: "M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" }), i.jsx("circle", { cx: "12", cy: "12", r: "3" })] }), A0 = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("polyline", { points: "3 6 5 6 21 6" }), i.jsx("path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" })] }), Ms = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("line", { x1: "12", y1: "1", x2: "12", y2: "23" }), i.jsx("path", { d: "M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" })] }), Cm = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }), lD = l => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: i.jsx("polyline", { points: "15 18 9 12 15 6" }) }), Lu = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("path", { d: "M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" }), i.jsx("polyline", { points: "17 21 17 13 7 13 7 21" }), i.jsx("polyline", { points: "7 3 7 8 15 8" })] }), M0 = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", ...l, children: [i.jsx("rect", { x: "3", y: "4", width: "18", height: "18", rx: "2", ry: "2" }), i.jsx("line", { x1: "16", y1: "2", x2: "16", y2: "6" }), i.jsx("line", { x1: "8", y1: "2", x2: "8", y2: "6" }), i.jsx("line", { x1: "3", y1: "10", x2: "21", y2: "10" })] }), eu = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...l, children: [i.jsx("path", { d: "M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" }), i.jsx("path", { d: "M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" })] }), Jf = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...l, children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("polyline", { points: "12 6 12 12 16 14" })] }), oD = l => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", ...l, children: [i.jsx("polyline", { points: "23 4 23 10 17 10" }), i.jsx("polyline", { points: "1 20 1 14 7 14" }), i.jsx("path", { d: "M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" })] }), cD = ({ isOpen: l, onClose: e, onFilter: t, initialFilters: s }) => { const [r, o] = C.useState(s), [u, d] = C.useState([]), [f, m] = C.useState([]), [p, g] = C.useState(!1), y = async () => { try { const [w, N] = await Promise.all([we.get("/cities/"), we.get("/buildings/")]); d(w.data.results || w.data), m(N.data.results || N.data) } catch (w) { console.error("Error fetching filter options:", w) } }; C.useEffect(() => { l && setTimeout(() => { o(s), g(!1), y() }, 0) }, [l, s]); const b = w => { const { name: N, value: T } = w.target; o(R => ({ ...R, [N]: T })) }, v = () => { g(!0), setTimeout(() => { e(), g(!1) }, 250) }, k = () => { t(r), v() }, j = () => { const w = { start_date: "", end_date: "", city: "", building: "", debt_status: "", status: "" }; o(w), t(w), v() }; if (!l && !p) return null; const S = r.city ? f.filter(w => w.city === parseInt(r.city)) : f; return gt.createPortal(i.jsx("div", { className: `modal-overlay ${p ? "closing" : ""}`, onClick: v, children: i.jsxs("div", { className: `modal-content modal-form ${p ? "closing" : ""}`, onClick: w => w.stopPropagation(), style: { maxWidth: "420px" }, children: [i.jsxs("div", { className: "modal-header", children: [i.jsxs("h3", { style: { display: "flex", alignItems: "center", gap: "8px" }, children: [i.jsx(Qf, { width: "18", height: "18" }), "Filterlar"] }), i.jsx("button", { className: "modal-close", onClick: v, children: i.jsx(Cm, { width: "20", height: "20" }) })] }), i.jsxs("form", { onSubmit: w => { w.preventDefault(), k() }, children: [i.jsxs("div", { className: "modal-form-body", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Shartnoma sanasi" }), i.jsxs("div", { style: { display: "grid", gridTemplateColumns: "1fr 1fr", gap: "10px" }, children: [i.jsx("input", { type: "date", name: "start_date", value: r.start_date, onChange: b }), i.jsx("input", { type: "date", name: "end_date", value: r.end_date, onChange: b })] }), i.jsx("p", { style: { fontSize: "11px", color: "var(--text-muted)", marginTop: "4px" }, children: "Oraliq bo'yicha tuzilgan shartnomalar" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Shahar bo'yicha" }), i.jsxs("select", { name: "city", value: r.city, onChange: b, children: [i.jsx("option", { value: "", children: "Barchasi" }), u.map(w => i.jsx("option", { value: w.id, children: w.name }, w.id))] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Binolar bo'yicha" }), i.jsxs("select", { name: "building", value: r.building, onChange: b, children: [i.jsx("option", { value: "", children: "Barchasi" }), S.map(w => i.jsx("option", { value: w.id, children: w.name }, w.id))] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Qarzdorlik bo'yicha" }), i.jsxs("select", { name: "debt_status", value: r.debt_status, onChange: b, children: [i.jsx("option", { value: "", children: "Barchasi" }), i.jsx("option", { value: "has_debt", children: "Qarzdorligi borlar" }), i.jsx("option", { value: "no_debt", children: "Qarzdorligi yo'qlar" })] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Holati bo'yicha" }), i.jsxs("select", { name: "status", value: r.status, onChange: b, children: [i.jsx("option", { value: "", children: "Barchasi" }), i.jsx("option", { value: "pending", children: "Rasmiylashtirilmoqda" }), i.jsx("option", { value: "active", children: "Faol" }), i.jsx("option", { value: "paid", children: "To'liq to'langan" }), i.jsx("option", { value: "completed", children: "Tugallangan" }), i.jsx("option", { value: "cancelled", children: "Bekor qilingan" })] })] })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsxs("button", { type: "button", className: "btn-secondary", onClick: j, children: [i.jsx(oD, { width: "16", height: "16" }), "Tozalash"] }), i.jsxs("button", { type: "submit", className: "btn-primary", children: [i.jsx(Qf, { width: "16", height: "16" }), "Filterlash"] })] })] })] }) }), document.body) }, uD = () => { Mn("Shartnomalar"); const l = bi(), e = Oi(), [t, s] = C.useState([]), [r, o] = C.useState(!0), [u, d] = C.useState(""), [f, m] = C.useState(!1), [p, g] = C.useState({ start_date: "", end_date: "", city: "", building: "", debt_status: "", status: "" }), [y, b] = C.useState(1), [v, k] = C.useState(1), [j, S] = C.useState(0), [w, N] = C.useState(null), [T, R] = C.useState(!1), [P, O] = C.useState(!1), [z, F] = C.useState(!1), [B, A] = C.useState(!1), [L, M] = C.useState(!1), [X, U] = C.useState(null), [I, H] = C.useState(0), [Y, ee] = C.useState(""), [fe, q] = C.useState(!1), [Q, ce] = C.useState(""), [W, ae] = C.useState(null), J = async () => { o(!0); try { const re = { page: y, search: u, ...p }, Ce = await Ft.getAll(re); Ce.data.results ? (s(Ce.data.results), S(Ce.data.count), k(Math.ceil(Ce.data.count / 20))) : s(Ce.data) } catch (re) { $.error("Shartnomalarni yuklashda xatolik yuz berdi"), console.error(re) } finally { o(!1) } }; C.useEffect(() => { const re = setTimeout(() => { J() }, 300); return () => clearTimeout(re) }, [y, u, p]), C.useEffect(() => { e.state?.autoOpenContractId && (Se(e.state.autoOpenContractId), window.history.replaceState({}, document.title)), e.state?.search && d(e.state.search) }, [e.state]); const G = re => { re >= 1 && re <= v && b(re) }, ge = re => new Intl.NumberFormat("uz-UZ").format(re) + " so'm", de = re => { const Ce = { pending: "Rasmiylashtirilmoqda", active: "Faol", paid: "To'liq to'langan", completed: "Tugallangan", cancelled: "Bekor qilingan" }, Ue = Ce[re] || Ce.pending; return i.jsx("span", { className: `status-badge status-${re || "pending"}`, children: Ue }) }, Se = async re => { O(!0), R(!0); try { const Ce = await Ft.get(re); N(Ce.data) } catch { $.error("Ma'lumotlarni yuklashda xatolik"), R(!1) } finally { O(!1) } }, Ee = () => { F(!0), setTimeout(() => { R(!1), N(null), F(!1) }, 250) }, be = re => { if (!re) return {}; const Ce = re.total_price - re.remaining_balance, Ue = re.total_price > 0 ? Math.round(Ce / re.total_price * 100) : 0; return { totalPaid: Ce, paidPercentage: Ue } }, se = async (re, Ce) => { Ce.stopPropagation(); try { $.loading("PDF yaratilmoqda...", { id: `pdf-${re}` }); const Ue = await Ft.downloadPdf(re), wt = new Blob([Ue.data], { type: "application/pdf" }), kt = window.URL.createObjectURL(wt); window.open(kt, "_blank"), $.dismiss(`pdf-${re}`), $.success("PDF tayyor!") } catch (Ue) { $.dismiss(`pdf-${re}`), $.error("PDF yaratishda xatolik"), console.error(Ue) } }, Ne = (re, Ce) => { U(re), H(Ce), ee(""), ce(""), A(!0) }, xe = () => { M(!0), setTimeout(() => { A(!1), U(null), H(0), ee(""), ce(""), M(!1) }, 250) }, K = re => re ? re.replace(/\B(?=(\d{3})+(?!\d))/g, " ") : "", ve = re => { const Ce = re.target.value.replace(/[^0-9]/g, ""); ee(Ce), ce(""); const Ue = parseInt(Ce) || 0; Ue < 1 && Ce !== "" ? ce("To'lov miqdori kamida 1 so'm bo'lishi kerak") : Ue > I && ce("To'lov miqdori qolgan qarzdan oshmasligi kerak") }, Ae = async () => { const re = parseInt(Y) || 0; if (re < 1) { ce("To'lov miqdori kamida 1 so'm bo'lishi kerak"); return } if (re > I) { ce("To'lov miqdori qolgan qarzdan oshmasligi kerak"); return } q(!0); try { await Ft.makePayment(X, { amount: re }), $.success("To'lov muvaffaqiyatli qabul qilindi!"), xe(), J() } catch (Ce) { const Ue = Ce.response?.data?.error || "To'lovda xatolik yuz berdi"; $.error(Ue) } finally { q(!1) } }, ne = async (re, Ce, Ue) => { if (re.stopPropagation(), !!window.confirm(`Haqiqatdan ham #${Ue} shartnomani o'chirmoqchimisiz?`)) try { ae(Ce); const wt = $.loading("Shartnoma o'chirilmoqda..."); await Ft.delete(Ce), $.success("Shartnoma muvaffaqiyatli o'chirildi", { id: wt }), J() } catch (wt) { console.error(wt), $.error(wt.response?.data?.error || "O'chirishda xatolik yuz berdi") } finally { ae(null) } }; return i.jsxs("div", { className: "contracts-page", children: [i.jsxs("div", { className: "page-header", children: [i.jsx("div", { className: "header-left", children: i.jsxs("div", { children: [i.jsx("h1", { className: "page-title", children: "Shartnomalar" }), i.jsxs("p", { className: "page-subtitle", children: ["Jami ", j, " ta shartnoma"] })] }) }), i.jsx("div", { className: "header-actions", children: i.jsxs("button", { className: "btn-primary", onClick: () => l("/contracts/create"), children: [i.jsx(aD, {}), "Shartnoma tuzish"] }) })] }), i.jsx("div", { className: "page-content", children: i.jsxs("div", { className: "content-card", children: [i.jsx("div", { className: "card-header", children: i.jsxs("div", { className: "filters-container", children: [i.jsxs("div", { className: "search-box", children: [i.jsx(nD, {}), i.jsx("input", { type: "text", placeholder: "Qidirish... (Mijoz, shartnoma raqami)", value: u, onChange: re => d(re.target.value) })] }), i.jsxs("button", { className: `btn-filter-trigger ${Object.values(p).some(re => re !== "") ? "active" : ""}`, onClick: () => m(!0), children: [i.jsx(Qf, { width: "18", height: "18" }), "Filterlash"] })] }) }), i.jsxs("div", { className: "card-body p-0", children: [i.jsx("div", { className: "responsive-table", children: i.jsxs("table", { className: "data-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { children: "#" }), i.jsx("th", { children: "Shartnoma" }), i.jsx("th", { children: "Mijoz" }), i.jsx("th", { children: "Xonadon" }), i.jsx("th", { children: "Umumiy summa" }), i.jsx("th", { children: "Qoldiq" }), i.jsx("th", { children: "Status" }), i.jsx("th", { children: "Amallar" })] }) }), i.jsx("tbody", { children: r ? i.jsx("tr", { children: i.jsx("td", { colSpan: "8", style: { textAlign: "center", padding: "40px" }, children: "Yuklanmoqda..." }) }) : t.length === 0 ? i.jsx("tr", { children: i.jsx("td", { colSpan: "8", style: { textAlign: "center", padding: "40px" }, children: "Hech qanday ma'lumot topilmadi" }) }) : t.map((re, Ce) => i.jsxs("tr", { onClick: () => Se(re.id), style: { cursor: "pointer" }, className: "clickable-row", children: [i.jsx("td", { className: "cell-number", children: (y - 1) * 20 + Ce + 1 }), i.jsxs("td", { style: { fontWeight: "600" }, children: ["#", re.contract_number] }), i.jsx("td", { className: "cell-name", children: re.client_name }), i.jsxs("td", { children: [re.building_name, " - ", re.home_number, "-uy"] }), i.jsx("td", { children: ge(re.total_price) }), i.jsx("td", { style: { color: re.remaining_balance > 0 ? "#ef4444" : "#10b981", fontWeight: "500" }, children: ge(re.remaining_balance) }), i.jsx("td", { children: de(re.status) }), i.jsx("td", { onClick: Ue => Ue.stopPropagation(), children: i.jsxs("div", { className: "table-actions", children: [i.jsx("button", { className: "btn-icon btn-view", title: "Batafsil", onClick: () => Se(re.id), children: i.jsx(rD, {}) }), re.status !== "cancelled" ? i.jsx("button", { className: "btn-icon btn-edit", title: "Tahrirlash", onClick: () => l(`/contracts/${re.id}/edit`), children: i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" }), i.jsx("path", { d: "M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" })] }) }) : i.jsx("span", { className: "btn-icon-placeholder" }), re.remaining_balance > 0 && re.status === "active" ? i.jsx("button", { className: "btn-icon btn-payment", title: "To'lov qilish", onClick: () => Ne(re.id, re.remaining_balance), children: i.jsx(Ms, {}) }) : i.jsx("span", { className: "btn-icon-placeholder" }), i.jsx("button", { className: "btn-icon btn-download", title: "Shartnomani yuklab olish", onClick: Ue => se(re.id, Ue), children: i.jsx(vu, { width: "18", height: "18" }) }), i.jsx("button", { className: "btn-icon btn-schedule", title: "To'lovlar jadvali", onClick: () => l(`/contracts/${re.id}/schedule`), children: i.jsx(M0, { width: "18", height: "18" }) }), i.jsx("button", { className: "btn-icon btn-delete", title: "O'chirish", onClick: Ue => ne(Ue, re.id, re.contract_number), disabled: W === re.id, children: i.jsx(A0, { width: "18", height: "18" }) })] }) })] }, re.id)) })] }) }), v > 1 && i.jsxs("div", { className: "pagination-container", children: [i.jsxs("div", { className: "pagination-info", children: ["Sahifa ", y, " / ", v] }), i.jsxs("div", { className: "pagination-controls", children: [i.jsx("button", { className: "pagination-btn", disabled: y === 1, onClick: () => G(y - 1), children: "<" }), [...Array(Math.min(5, v))].map((re, Ce) => i.jsx("button", { className: `pagination-btn ${y === Ce + 1 ? "active" : ""}`, onClick: () => G(Ce + 1), children: Ce + 1 }, Ce + 1)), i.jsx("button", { className: "pagination-btn", disabled: y === v, onClick: () => G(y + 1), children: ">" })] })] })] })] }) }), T && gt.createPortal(i.jsx("div", { className: `modal-overlay ${z ? "closing" : ""}`, onClick: Ee, children: i.jsxs("div", { className: `modal-content modal-lg ${z ? "closing" : ""}`, onClick: re => re.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsxs("h3", { className: "modal-title", children: [i.jsxs("svg", { width: "22", height: "22", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", style: { marginRight: "10px", verticalAlign: "middle" }, children: [i.jsx("path", { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }), i.jsx("polyline", { points: "14 2 14 8 20 8" })] }), "Shartnoma tafsilotlari"] }), i.jsx("button", { className: "modal-close", onClick: Ee, children: i.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }) })] }), P ? i.jsxs("div", { style: { padding: "40px", textAlign: "center" }, children: [i.jsx("div", { className: "spinner", style: { margin: "0 auto" } }), i.jsx("p", { style: { marginTop: "16px", color: "var(--text-secondary)" }, children: "Yuklanmoqda..." })] }) : w && i.jsx("div", { className: "modal-body", children: i.jsxs("div", { className: "detail-grid", children: [i.jsxs("div", { className: "detail-card", children: [i.jsxs("div", { className: "detail-card-header", children: [i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" }), i.jsx("circle", { cx: "12", cy: "7", r: "4" })] }), i.jsx("span", { children: "Mijoz ma'lumotlari" })] }), i.jsxs("div", { className: "detail-card-body", children: [i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Shartnoma :" }), i.jsxs("span", { className: "detail-value highlight", children: ["#", w.contract_number] })] }), i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "To'liq ismi:" }), i.jsx("span", { className: "detail-value", children: w.client_name })] }), i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Telefon:" }), i.jsx("span", { className: "detail-value", children: w.client_phone || "-" })] }), i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Passport:" }), i.jsx("span", { className: "detail-value", children: w.passport_series || "-" })] })] })] }), i.jsxs("div", { className: "detail-card", children: [i.jsxs("div", { className: "detail-card-header", children: [i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" }), i.jsx("polyline", { points: "9 22 9 12 15 12 15 22" })] }), i.jsx("span", { children: "Uy ma'lumotlari" })] }), i.jsxs("div", { className: "detail-card-body", children: [i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Bino:" }), i.jsx("span", { className: "detail-value", children: w.building_name })] }), i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Xonadon:" }), i.jsxs("span", { className: "detail-value", children: [w.home_number, "-uy"] })] })] })] }), i.jsxs("div", { className: "detail-card", children: [i.jsxs("div", { className: "detail-card-header", children: [i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "12", y1: "1", x2: "12", y2: "23" }), i.jsx("path", { d: "M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" })] }), i.jsx("span", { children: "To'lov ma'lumotlari" })] }), i.jsxs("div", { className: "detail-card-body", children: [i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Umumiy narx:" }), i.jsx("span", { className: "detail-value", children: ge(w.total_price) })] }), i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Boshlang'ich to'lov:" }), i.jsx("span", { className: "detail-value", children: ge(w.initial_payment) })] }), i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Jami to'langan:" }), i.jsx("span", { className: "detail-value success", children: ge(be(w).totalPaid) })] }), i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Qolgan qarz:" }), i.jsx("span", { className: "detail-value danger", children: ge(w.remaining_balance) })] }), i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Oylik to'lov:" }), i.jsx("span", { className: "detail-value", children: ge(w.monthly_payment) })] }), i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Muddat:" }), i.jsxs("span", { className: "detail-value", children: [w.term_months, " oy"] })] }), i.jsxs("div", { className: "payment-progress", children: [i.jsxs("div", { className: "progress-label", children: [i.jsx("span", { children: "To'langan" }), i.jsxs("span", { children: [be(w).paidPercentage, "%"] })] }), i.jsx("div", { className: "progress-bar", children: i.jsx("div", { className: "progress-fill", style: { width: `${be(w).paidPercentage}%` } }) })] })] })] }), i.jsxs("div", { className: "detail-card", children: [i.jsxs("div", { className: "detail-card-header", children: [i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("line", { x1: "12", y1: "16", x2: "12", y2: "12" }), i.jsx("line", { x1: "12", y1: "8", x2: "12.01", y2: "8" })] }), i.jsx("span", { children: "Holat ma'lumotlari" })] }), i.jsxs("div", { className: "detail-card-body", children: [i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Holati:" }), i.jsx("span", { className: "detail-value", children: de(w.status) })] }), i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Shartnoma sanasi:" }), i.jsx("span", { className: "detail-value", children: (() => { const re = w.contract_date || w.created_at; if (!re) return "-"; const Ce = new Date(re), Ue = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"]; return `${Ce.getDate()}-${Ue[Ce.getMonth()]} ${Ce.getFullYear()}` })() })] }), i.jsxs("div", { className: "detail-row", children: [i.jsx("span", { className: "detail-label", children: "Yaratilgan:" }), i.jsx("span", { className: "detail-value", children: (() => { if (!w.created_at) return "-"; const re = new Date(w.created_at), Ce = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"]; return `${re.getDate()}-${Ce[re.getMonth()]} ${re.getFullYear()}` })() })] })] })] })] }) }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { className: "btn-secondary", onClick: Ee, children: "Yopish" }), i.jsx("button", { className: "btn-primary", onClick: () => { Ee(), l(`/contracts/${w?.id}/edit`) }, children: "Tahrirlash" })] })] }) }), document.body), B && gt.createPortal(i.jsx("div", { className: `modal-overlay ${L ? "closing" : ""}`, onClick: xe, children: i.jsxs("div", { className: `modal-content modal-form ${L ? "closing" : ""}`, onClick: re => re.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsxs("div", { children: [i.jsxs("h3", { className: "modal-title", children: [i.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", style: { marginRight: "8px", verticalAlign: "middle" }, children: [i.jsx("rect", { x: "1", y: "4", width: "22", height: "16", rx: "2", ry: "2" }), i.jsx("line", { x1: "1", y1: "10", x2: "23", y2: "10" })] }), "To'lov qilish"] }), i.jsxs("p", { className: "modal-subtitle", children: ["Qarzdorlik summasi: ", i.jsx("strong", { children: ge(I) })] })] }), i.jsx("button", { className: "modal-close", onClick: xe, children: i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }) })] }), i.jsx("div", { className: "modal-form-body", children: i.jsxs("div", { className: "form-group", children: [i.jsx("label", { className: "required", children: "Summani kiriting" }), i.jsxs("div", { className: "payment-input-wrapper", style: { display: "flex", alignItems: "center", border: "1px solid var(--border-color)", borderRadius: "12px", padding: "0 12px", background: "var(--bg-secondary)" }, children: [i.jsx("span", { style: { color: "var(--text-secondary)", marginRight: "8px" }, children: i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "12", y1: "1", x2: "12", y2: "23" }), i.jsx("path", { d: "M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" })] }) }), i.jsx("input", { type: "text", className: `payment-input ${Q ? "error" : ""}`, placeholder: "To'lov miqdori", value: K(Y), onChange: ve, autoFocus: !0, style: { flex: 1, border: "none", background: "transparent", padding: "12px 0", outline: "none", color: "var(--text-primary)", fontSize: "15px" } }), i.jsx("span", { style: { color: "var(--text-secondary)", fontWeight: 500, fontSize: "14px" }, children: "so'm" })] }), Q && i.jsx("div", { className: "payment-error", style: { color: "#ef4444", fontSize: "12px", marginTop: "6px" }, children: Q })] }) }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { className: "btn-secondary", onClick: xe, children: "Bekor qilish" }), i.jsx("button", { className: "btn-primary", onClick: Ae, disabled: fe || !!Q || !Y, children: fe ? i.jsxs(i.Fragment, { children: [i.jsx("span", { className: "btn-spinner" }), "Kuting..."] }) : i.jsxs(i.Fragment, { children: [i.jsx(Ms, {}), "To'lovni tasdiqlash"] }) })] })] }) }), document.body), i.jsx(cD, { isOpen: f, onClose: () => m(!1), onFilter: re => { g(re), b(1) }, initialFilters: p })] }) }, P0 = ({ onSelect: l, selectedData: e }) => { const [t, s] = C.useState([]), [r, o] = C.useState([]), [u, d] = C.useState(!1); C.useEffect(() => { f() }, []), C.useEffect(() => { e.cityId ? m(e.cityId) : o([]) }, [e.cityId]); const f = async () => { try { const b = await we.get("/cities/"); s(b.data.results || b.data) } catch (b) { console.error("Error loading cities:", b), $.error("Shaharlarni yuklashda xatolik") } }, m = async b => { try { d(!0); const v = await we.get("/buildings/", { params: { city: b } }); o(v.data.results || v.data) } catch (v) { console.error("Error loading buildings:", v), $.error("Binolarni yuklashda xatolik") } finally { d(!1) } }, p = b => { const v = b.target.value; l({ cityId: v, buildingId: "", buildingName: "", buildingData: null }) }, g = b => { const v = b.target.value, k = r.find(j => String(j.id) === String(v)); l({ ...e, buildingId: k ? Number(v) : "", buildingName: k ? k.name : "", buildingData: k }) }, y = r.find(b => String(b.id) === String(e.buildingId)); return i.jsxs("div", { className: "card-section", children: [i.jsxs("div", { className: "section-header", children: [i.jsx("div", { className: "icon-box bg-primary-subtle", children: i.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "4", y: "2", width: "16", height: "20", rx: "2" }), i.jsx("path", { d: "M9 22v-4h6v4" }), i.jsx("path", { d: "M8 6h.01M16 6h.01M8 10h.01M16 10h.01" })] }) }), i.jsx("h3", { children: "Bino tanlash" })] }), i.jsxs("div", { className: "form-grid", children: [i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["Shahar ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsx("div", { className: "input-wrapper", children: i.jsxs("select", { className: "form-select", value: e.cityId || "", onChange: p, children: [i.jsx("option", { value: "", children: "Shaharni tanlang" }), t.map(b => i.jsx("option", { value: b.id, children: b.name }, b.id))] }) })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["Bino ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsx("div", { className: "input-wrapper", children: i.jsxs("select", { className: "form-select", value: e.buildingId || "", onChange: g, disabled: !e.cityId || u, children: [i.jsx("option", { value: "", children: "Binoni tanlang" }), r.map(b => i.jsx("option", { value: b.id, children: b.name }, b.id))] }) })] })] }), y && i.jsxs("div", { className: "building-summary", children: [i.jsxs("div", { className: "summary-item", children: [i.jsx("div", { className: "label", children: "Bino nomi" }), i.jsx("div", { className: "value", children: y.name })] }), i.jsxs("div", { className: "summary-item", children: [i.jsx("div", { className: "label", children: "Padezlar" }), i.jsx("div", { className: "value", children: y.padez })] }), i.jsxs("div", { className: "summary-item", children: [i.jsx("div", { className: "label", children: "Qavatlar" }), i.jsx("div", { className: "value", children: y.floor })] }), i.jsxs("div", { className: "summary-item", children: [i.jsx("div", { className: "label", children: "Uylar soni" }), i.jsx("div", { className: "value", children: y.total_homes || y.padez_home?.reduce((b, v) => b + v, 0) })] })] })] }) }, O0 = ({ buildingId: l, onSelect: e, selectedHomeId: t, contractedHomeId: s }) => { const [r, o] = C.useState("grid"), [u, d] = C.useState([]), [f, m] = C.useState(!1), [p, g] = C.useState(null), [y, b] = C.useState(null), [v, k] = C.useState({ top: 0, left: 0 }), [j, S] = C.useState({ open: !1, src: "" }); C.useEffect(() => { l ? w(l) : (d([]), g(null)) }, [l]); const w = async A => { try { m(!0); const L = await we.get("/homes/", { params: { building: A, page_size: 1e3 } }), M = L.data.results || L.data; d(M); let X = 0, U = 0; M.forEach(H => { H.floor > X && (X = H.floor), H.padez > U && (U = H.padez) }); const I = {}; for (let H = 1; H <= U; H++) { I[H] = {}; for (let Y = 1; Y <= X; Y++)I[H][Y] = [] } M.forEach(H => { I[H.padez] && I[H.padez][H.floor] && I[H.padez][H.floor].push(H) }), Object.keys(I).forEach(H => { Object.keys(I[H]).forEach(Y => { I[H][Y].sort((ee, fe) => { const q = parseInt(ee.number.replace(/\D/g, "")) || 0, Q = parseInt(fe.number.replace(/\D/g, "")) || 0; return q - Q }) }) }), g(I) } catch (L) { console.error("Error loading homes:", L), $.error("Uylarni yuklashda xatolik") } finally { m(!1) } }, N = A => { if (String(t) === String(A.id)) { e(A); return } if (s && String(s) === String(A.id)) { e(A); return } if (A.status !== "AVAILABLE" && A.status !== "available") { $.warning(`Bu uy ${A.status === "SOLD" ? "sotilgan" : "band"}`); return } e(A) }, T = (A, L) => { const M = A.currentTarget.getBoundingClientRect(); k({ top: M.top, left: M.left + M.width / 2 }), b(L) }, R = () => { b(null) }, P = A => { const L = A?.toUpperCase(); return L === "AVAILABLE" ? "available" : L === "SOLD" ? "sold" : L === "BOOKED" || L === "ORDERED" ? "booked" : "unavailable" }, O = A => { const L = A?.toUpperCase(); return L === "AVAILABLE" ? "Bo'sh" : L === "SOLD" ? "Sotilgan" : L === "BOOKED" ? "Band" : "Noma'lum" }, z = A => new Intl.NumberFormat("uz-UZ").format(A), F = u.find(A => String(A.id) === String(t)), B = ({ home: A, position: L }) => { if (!A) return null; const M = (A.price || 0) * (A.square_meter || 0); return gt.createPortal(i.jsxs("div", { className: "home-info-tooltip", style: { top: L.top, left: L.left }, children: [i.jsxs("div", { className: "tooltip-header", children: [i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" }) }), i.jsxs("span", { children: ["Uy #", A.number] })] }), i.jsxs("div", { className: "tooltip-body", children: [i.jsxs("div", { className: "tooltip-row", children: [i.jsxs("div", { className: "tooltip-label", children: [i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" }) }), "Padez:"] }), i.jsx("div", { className: "tooltip-value", children: A.padez })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsxs("div", { className: "tooltip-label", children: [i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "3", y: "3", width: "18", height: "18", rx: "2", ry: "2" }), i.jsx("line", { x1: "3", y1: "9", x2: "21", y2: "9" }), i.jsx("line", { x1: "3", y1: "15", x2: "21", y2: "15" })] }), "Qavat:"] }), i.jsx("div", { className: "tooltip-value", children: A.floor })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsxs("div", { className: "tooltip-label", children: [i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "3", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "14", width: "7", height: "7" }), i.jsx("rect", { x: "3", y: "14", width: "7", height: "7" })] }), "Xonalar:"] }), i.jsxs("div", { className: "tooltip-value", children: [A.rooms, " xona"] })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsxs("div", { className: "tooltip-label", children: [i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "3", y: "3", width: "18", height: "18", rx: "2", ry: "2" }), i.jsx("line", { x1: "9", y1: "3", x2: "9", y2: "21" })] }), "Maydon:"] }), i.jsxs("div", { className: "tooltip-value", children: [A.square_meter, " m"] })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsxs("div", { className: "tooltip-label", children: [i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("line", { x1: "12", y1: "8", x2: "12", y2: "12" }), i.jsx("line", { x1: "12", y1: "16", x2: "12.01", y2: "16" })] }), "1 kv/m narxi:"] }), i.jsxs("div", { className: "tooltip-value", children: [z(A.price), " so'm"] })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsxs("div", { className: "tooltip-label", children: [i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "2", y: "5", width: "20", height: "14", rx: "2" }), i.jsx("line", { x1: "2", y1: "10", x2: "22", y2: "10" })] }), "Umumiy narxi:"] }), i.jsxs("div", { className: "tooltip-value", children: [z(M), " so'm"] })] }), i.jsxs("div", { className: "tooltip-row", children: [i.jsxs("div", { className: "tooltip-label", children: [i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("line", { x1: "12", y1: "16", x2: "12", y2: "12" }), i.jsx("line", { x1: "12", y1: "8", x2: "12.01", y2: "8" })] }), "Holati:"] }), i.jsx("div", { className: `tooltip-value status-${P(A.status)}`, children: O(A.status) })] }), (A.floor_plan || A.cadastral_image) && i.jsxs("div", { className: "tooltip-image-section clickable", onClick: () => S({ open: !0, src: A.floor_plan || A.cadastral_image }), title: "Kattalashtirish uchun bosing", children: [i.jsx("div", { className: "image-label", children: "Loyiha rasmi:" }), i.jsx("img", { src: A.floor_plan || A.cadastral_image, alt: "Plan" })] })] })] }), document.body) }; return l ? i.jsxs("div", { className: "card-section home-selector", children: [y && i.jsx(B, { home: y, position: v }), i.jsxs("div", { className: "section-header", children: [i.jsx("div", { className: "icon-box bg-success-subtle", children: i.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" }), i.jsx("polyline", { points: "9 22 9 12 15 12 15 22" })] }) }), i.jsx("h3", { children: "Uyni tanlang" }), i.jsxs("div", { className: "home-stats", children: [i.jsxs("span", { className: "stat available", children: ["Sotuvda: ", u.filter(A => A.status === "AVAILABLE").length] }), i.jsxs("span", { className: "stat sold", children: ["Sotilgan: ", u.filter(A => A.status === "SOLD").length] })] })] }), i.jsxs("div", { className: "view-mode-tabs", children: [i.jsxs("button", { className: `tab-btn ${r === "grid" ? "active" : ""}`, onClick: () => o("grid"), children: [i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "3", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "14", width: "7", height: "7" }), i.jsx("rect", { x: "3", y: "14", width: "7", height: "7" })] }), "Vizual ko'rinish"] }), i.jsxs("button", { className: `tab-btn ${r === "list" ? "active" : ""}`, onClick: () => o("list"), children: [i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "8", y1: "6", x2: "21", y2: "6" }), i.jsx("line", { x1: "8", y1: "12", x2: "21", y2: "12" }), i.jsx("line", { x1: "8", y1: "18", x2: "21", y2: "18" }), i.jsx("line", { x1: "3", y1: "6", x2: "3.01", y2: "6" }), i.jsx("line", { x1: "3", y1: "12", x2: "3.01", y2: "12" }), i.jsx("line", { x1: "3", y1: "18", x2: "3.01", y2: "18" })] }), "Ro'yxat ko'rinish"] })] }), i.jsx("div", { className: "homes-container", children: f ? i.jsxs("div", { className: "loading-state", children: [i.jsx("div", { className: "spinner" }), i.jsx("p", { children: "Uylar yuklanmoqda..." })] }) : u.length === 0 ? i.jsx("div", { className: "empty-state", children: "Bu binoda uylar topilmadi" }) : r === "grid" && p ? i.jsxs("div", { className: "building-grid-wrapper", children: [i.jsx("div", { className: "building-grid", children: Object.keys(p).sort((A, L) => A - L).map(A => i.jsxs("div", { className: "padez-column", children: [i.jsxs("div", { className: "padez-header", children: [A, "-padez"] }), i.jsx("div", { className: "floors-wrapper", children: Object.keys(p[A]).sort((L, M) => M - L).map(L => i.jsxs("div", { className: "floor-row", children: [i.jsx("div", { className: "floor-label", children: L }), i.jsx("div", { className: "homes-row", children: p[A][L].length > 0 ? p[A][L].map(M => i.jsx("div", { className: `home-cell ${P(M.status)} ${String(t) === String(M.id) ? "selected" : ""}`, onClick: () => N(M), onMouseEnter: X => T(X, M), onMouseLeave: R, children: M.number }, M.id)) : i.jsx("div", { className: "no-homes", children: "-" }) })] }, L)) })] }, A)) }), i.jsxs("div", { className: "legend", children: [i.jsxs("div", { className: "legend-item", children: [i.jsx("span", { className: "dot available" }), " Sotuvda"] }), i.jsxs("div", { className: "legend-item", children: [i.jsx("span", { className: "dot sold" }), " Sotilgan"] }), i.jsxs("div", { className: "legend-item", children: [i.jsx("span", { className: "dot booked" }), " Band"] })] })] }) : i.jsx("div", { className: "homes-list-grouped", children: Object.keys(p).sort((A, L) => A - L).map(A => { const L = u.filter(M => M.padez == A).sort((M, X) => { const U = parseInt(M.number) || 0, I = parseInt(X.number) || 0; return U - I }); return i.jsxs("div", { className: "padez-list-section", children: [i.jsxs("div", { className: "padez-list-header", children: [A, "-PADEZ"] }), i.jsxs("div", { className: "homes-list-view", children: [i.jsxs("div", { className: "list-header", children: [i.jsx("div", { className: "col", children: "" }), i.jsx("div", { className: "col", children: "Qavat" }), i.jsx("div", { className: "col", children: "Xonalar" }), i.jsx("div", { className: "col", children: "Maydon" }), i.jsx("div", { className: "col", children: "Narx (m)" }), i.jsx("div", { className: "col", children: "Umumiy" }), i.jsx("div", { className: "col", children: "Holat" })] }), i.jsx("div", { className: "list-body", children: L.map(M => i.jsxs("div", { className: `list-row ${P(M.status)} ${String(t) === String(M.id) ? "selected" : ""}`, onClick: () => N(M), children: [i.jsx("div", { className: "col number", children: M.number }), i.jsx("div", { className: "col", children: M.floor }), i.jsxs("div", { className: "col", children: [M.rooms, " xona"] }), i.jsxs("div", { className: "col", children: [M.square_meter, " m"] }), i.jsx("div", { className: "col", children: z(M.price) }), i.jsx("div", { className: "col total", children: z(M.price * M.square_meter) }), i.jsx("div", { className: "col", children: i.jsx("span", { className: `status-badge ${P(M.status)}`, children: M.status === "AVAILABLE" ? "Sotuvda" : M.status === "SOLD" ? "Sotilgan" : "Band" }) })] }, M.id)) })] })] }, A) }) }) }), F && i.jsxs("div", { className: "selected-home-info", children: [i.jsx("div", { className: "info-title", children: "Tanlangan xonadon" }), i.jsxs("div", { className: "info-grid", children: [i.jsxs("div", { className: "info-item", children: [i.jsx("span", { className: "label", children: "Uy raqami" }), i.jsxs("span", { className: "value", children: ["", F.number] })] }), i.jsxs("div", { className: "info-item", children: [i.jsx("span", { className: "label", children: "Padez / Qavat" }), i.jsxs("span", { className: "value", children: [F.padez, "-padez, ", F.floor, "-qavat"] })] }), i.jsxs("div", { className: "info-item", children: [i.jsx("span", { className: "label", children: "Xonalar" }), i.jsxs("span", { className: "value", children: [F.rooms, " xona"] })] }), i.jsxs("div", { className: "info-item", children: [i.jsx("span", { className: "label", children: "Maydon" }), i.jsxs("span", { className: "value", children: [F.square_meter, " m"] })] }), i.jsxs("div", { className: "info-item", children: [i.jsx("span", { className: "label", children: "1 m narxi" }), i.jsxs("span", { className: "value", children: [z(F.price), " so'm"] })] }), i.jsxs("div", { className: "info-item highlight", children: [i.jsx("span", { className: "label", children: "Umumiy narx" }), i.jsxs("span", { className: "value", children: [z(F.price * F.square_meter), " so'm"] })] })] }), (F.floor_plan || F.cadastral_image) && i.jsxs("div", { className: "floor-plans-section", children: [i.jsx("div", { className: "floor-plans-title", children: "Xonadon rasmlari" }), i.jsxs("div", { className: "floor-plans-grid", children: [F.floor_plan && i.jsxs("div", { className: "floor-plan-item", children: [i.jsx("div", { className: "plan-label", children: "Loyiha (planirovka)" }), i.jsx("img", { src: F.floor_plan, alt: "Loyiha", className: "clickable", onClick: () => S({ open: !0, src: F.floor_plan }), title: "Kattalashtirish uchun bosing" })] }), F.cadastral_image && i.jsxs("div", { className: "floor-plan-item", children: [i.jsx("div", { className: "plan-label", children: "Kadastri rasmi" }), i.jsx("img", { src: F.cadastral_image, alt: "Kadastri", className: "clickable", onClick: () => S({ open: !0, src: F.cadastral_image }), title: "Kattalashtirish uchun bosing" })] })] })] })] }), i.jsx(wm, { isOpen: j.open, imageSrc: j.src, onClose: () => S({ open: !1, src: "" }) })] }) : null }, Fy = l => { const e = l.replace(/\D/g, "").slice(0, 9); let t = ""; return e.length > 0 && (t += e.slice(0, 2)), e.length > 2 && (t += " " + e.slice(2, 5)), e.length > 5 && (t += " " + e.slice(5, 7)), e.length > 7 && (t += " " + e.slice(7, 9)), t }, dD = l => { const e = l.replace(/[^a-zA-Z0-9]/g, ""); let t = e.slice(0, 2).replace(/[^a-zA-Z]/g, "").toUpperCase(), s = e.slice(2).replace(/\D/g, "").slice(0, 7); return t && s ? t + " " + s : t || "" }, hD = l => { const e = l.replace(/\D/g, "").slice(0, 8); let t = ""; return e.length > 0 && (t += e.slice(0, 2)), e.length > 2 && (t += "." + e.slice(2, 4)), e.length > 4 && (t += "." + e.slice(4, 8)), t }, E0 = ({ formData: l, onChange: e }) => { const [t, s] = C.useState({}), r = b => { s(v => ({ ...v, [b]: !0 })) }, o = (b, v) => { const k = Fy(b); e(v, k.replace(/\s/g, "")) }, u = b => { const v = dD(b); e("passport_series", v) }, d = b => { const v = hD(b); e("passport_date", v) }, f = b => b ? Fy(b) : "", m = (b, v, k) => t[b] && v ? k : null, p = m("phone", l.phone && l.phone.length < 9, "9 ta raqam kerak"), g = m("passport_series", l.passport_series && l.passport_series.length < 10, "AA 1234567 formatida kiriting"), y = m("passport_date", l.passport_date && l.passport_date.length < 10, "KK.OO.YYYY formatida kiriting"); return i.jsxs("div", { className: "card-section", children: [i.jsxs("div", { className: "section-header", children: [i.jsx("div", { className: "icon-box bg-info-subtle", children: i.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" }), i.jsx("circle", { cx: "12", cy: "7", r: "4" })] }) }), i.jsx("h3", { children: "Mijoz ma'lumotlari" })] }), i.jsxs("div", { className: "form-grid", children: [i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["Mijoz to'liq ismi ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsx("input", { type: "text", className: "form-control", placeholder: "Familiya Ism Otasining ismi", value: l.full_name || "", onChange: b => e("full_name", b.target.value), onBlur: () => r("full_name") }), i.jsx("small", { className: "input-hint", children: "To'liq F.I.O. kiriting (pasportdagi kabi)" })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["Telefon raqami ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsxs("div", { className: "input-with-prefix", children: [i.jsx("span", { className: "prefix", children: "+998" }), i.jsx("input", { type: "text", className: `form-control ${p ? "error" : ""}`, placeholder: "99 123 45 67", value: f(l.phone), onChange: b => o(b.target.value, "phone"), onBlur: () => r("phone") })] }), i.jsx("small", { className: "input-hint", children: "Asosiy aloqa raqami" }), p && i.jsx("small", { className: "error-text", children: p })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Qo'shimcha telefon" }), i.jsxs("div", { className: "input-with-prefix", children: [i.jsx("span", { className: "prefix", children: "+998" }), i.jsx("input", { type: "text", className: "form-control", placeholder: "99 123 45 67", value: f(l.phone2), onChange: b => o(b.target.value, "phone2") })] }), i.jsx("small", { className: "input-hint", children: "Qo'shimcha yoki yaqinining raqami" })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["Passport seriyasi va raqami ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsx("input", { type: "text", className: `form-control ${g ? "error" : ""}`, placeholder: "AA 1234567", value: l.passport_series || "", onChange: b => u(b.target.value), onBlur: () => r("passport_series"), maxLength: 10 }), i.jsx("small", { className: "input-hint", children: "2 ta harf + 7 ta raqam (masalan: AB 1234567)" }), g && i.jsx("small", { className: "error-text", children: g })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["Passport berilgan sana ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsx("input", { type: "text", className: `form-control ${y ? "error" : ""}`, placeholder: "23.01.2020", value: l.passport_date || "", onChange: b => d(b.target.value), onBlur: () => r("passport_date"), maxLength: 10 }), i.jsx("small", { className: "input-hint", children: "Kun.Oy.Yil formatida (masalan: 15.06.2020)" }), y && i.jsx("small", { className: "error-text", children: y })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["Passport kim tomonidan berilgan ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsx("input", { type: "text", className: "form-control", placeholder: "Toshkent sh. Chilonzor IIB", value: l.passport_given || "", onChange: b => e("passport_given", b.target.value), onBlur: () => r("passport_given") }), i.jsx("small", { className: "input-hint", children: "Passportni bergan organ nomi" })] }), i.jsxs("div", { className: "form-group full-width", children: [i.jsxs("label", { children: ["Yashash manzili ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsx("textarea", { className: "form-control", placeholder: "Viloyat, tuman, ko'cha, uy raqami", rows: 2, value: l.address || "", onChange: b => e("address", b.target.value), onBlur: () => r("address") }), i.jsx("small", { className: "input-hint", children: "To'liq yashash manzili (ro'yxatdan o'tgan)" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Qayerda eshitgan" }), i.jsxs("select", { className: "form-select", value: l.heard_from || "Xech qayerda", onChange: b => e("heard_from", b.target.value), children: [i.jsx("option", { value: "Telegramda", children: "Telegramda" }), i.jsx("option", { value: "Instagramda", children: "Instagramda" }), i.jsx("option", { value: "YouTubeda", children: "YouTubeda" }), i.jsx("option", { value: "Odamlar orasida", children: "Odamlar orasida" }), i.jsx("option", { value: "Xech qayerda", children: "Xech qayerda" })] }), i.jsx("small", { className: "input-hint", children: "Mijoz kompaniya haqida qayerdan bilgan" })] })] })] }) }, oi = l => { if (l == null || l === "") return ""; const e = Math.floor(Number(l)); return isNaN(e) ? "" : e.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") }, Xi = l => l && Math.floor(Number(String(l).replace(/\s/g, ""))) || 0, Sf = (l, e) => { const t = parseFloat(l) || 0, s = Math.floor(Number(e)) || 0; return Math.floor(t * s) }, B0 = ({ formData: l, homeData: e, onChange: t, isEditMode: s = !1 }) => { const r = parseFloat(e?.square_meter) || 0, [o, u] = C.useState(""), [d, f] = C.useState(""), [m, p] = C.useState(""), [g, y] = C.useState(""), [b, v] = C.useState("amount"), [k, j] = C.useState(!1), [S, w] = C.useState(!1), [N, T] = C.useState({}), R = C.useRef(!1), P = C.useRef(!1), O = ae => { T(J => ({ ...J, [ae]: !0 })) }; C.useEffect(() => { if (e) { if (s && l.price_per_meter > 0) { u(oi(l.price_per_meter)); const ae = l.total_price || Sf(r, l.price_per_meter); if (f(oi(ae)), t("total_price", ae), l.initial_payment !== void 0 && (p(oi(l.initial_payment)), ae > 0)) { const J = (l.initial_payment / ae * 100).toFixed(1); y(J.endsWith(".0") ? J.slice(0, -2) : J) } } else { const ae = Math.floor(e.price) || 0, J = Sf(e.square_meter, ae); u(oi(ae)), f(oi(J)), p(""), y(""), v("amount"), t("price_per_meter", ae), t("total_price", J) } j(!1), T({}) } }, [e?.id, s]); const z = ae => { if (!N[ae]) return null; const J = Xi(d), G = Xi(m), ge = parseInt(l.term_months) || 0; if (ae === "term_months") { if (ge > 120) return "Maksimum 120 oy"; const de = Xi(m), Se = Xi(d); if (de < Se && ge < 1) return "Kamida 1 oy" } return ae === "initial_payment" && G > J && J > 0 ? "Umumiy summadan oshib ketdi" : null }, F = ae => { const J = ae.target.value.replace(/[^\d]/g, ""), G = Xi(J); if (u(oi(G)), !P.current && r > 0) { R.current = !0; const ge = Sf(r, G); f(oi(ge)), t("price_per_meter", G), t("total_price", ge); const de = Xi(m); if (b === "percent") { const Se = parseFloat(g) || 0, Ee = Math.floor(ge * Se / 100); p(oi(Ee)), t("initial_payment", Ee) } else if (de > ge) p(""), y(""), t("initial_payment", 0); else if (ge > 0) { const Se = (de / ge * 100).toFixed(1); y(Se.endsWith(".0") ? Se.slice(0, -2) : Se) } R.current = !1 } }, B = ae => { const J = ae.target.value.replace(/[^\d]/g, ""), G = Xi(J); if (f(oi(G)), t("total_price", G), !R.current && r > 0) { P.current = !0; const ge = Math.floor(G / r); u(oi(ge)), t("price_per_meter", ge); const de = Xi(m); if (b === "percent") { const Se = parseFloat(g) || 0, Ee = Math.floor(G * Se / 100); p(oi(Ee)), t("initial_payment", Ee) } else if (de > G) p(""), y(""), t("initial_payment", 0); else if (G > 0) { const Se = (de / G * 100).toFixed(1); y(Se.endsWith(".0") ? Se.slice(0, -2) : Se) } P.current = !1 } }, A = ae => { const J = ae.target.value.replace(/[^\d]/g, ""), G = Xi(J); p(oi(G)), t("initial_payment", G); const ge = Xi(d); if (ge > 0) { const de = (G / ge * 100).toFixed(1); y(de.endsWith(".0") ? de.slice(0, -2) : de) } }, L = ae => { let J = ae.target.value.replace(/[^\d.]/g, ""); J.split(".").length - 1 > 1 && (J = J.substring(0, J.lastIndexOf("."))); const ge = parseFloat(J) || 0; if (ge > 100) return; y(J); const de = Xi(d), Se = Math.floor(de * ge / 100); p(oi(Se)), t("initial_payment", Se) }, M = ae => { v(ae) }, X = ae => { const J = ae.target.value; t("term_months", J) }, U = ae => { let J = ae.target.value.replace(/[^\d]/g, ""); J.length > 8 && (J = J.substring(0, 8)); let G = J; J.length >= 2 && (G = J.substring(0, 2) + "." + J.substring(2)), J.length >= 4 && (G = J.substring(0, 2) + "." + J.substring(2, 4) + "." + J.substring(4)), t("contract_date", G) }, I = ae => { w(ae), ae || t("contract_date", "") }, H = Xi(d), Y = Xi(m), ee = parseInt(l.term_months) || 0, fe = Math.max(0, H - Y), q = ee > 0 ? Math.floor(fe / ee) : 0; C.useEffect(() => { setTimeout(() => { t("monthly_payment", q), H > 0 && t("total_price", H) }, 0) }, [q, H]); const Q = () => { j(!k) }, ce = z("term_months"), W = z("initial_payment"); return i.jsxs("div", { className: "card-section", children: [i.jsxs("div", { className: "section-header", children: [i.jsx("div", { className: "icon-box bg-warning-subtle", children: i.jsx("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M12 1v22M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" }) }) }), i.jsx("h3", { children: "To'lov ma'lumotlari" })] }), i.jsxs("div", { className: "form-grid", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Xonalar soni" }), i.jsx("input", { type: "text", className: "form-control", value: e?.rooms || "", disabled: !0 }), i.jsx("small", { className: "input-hint", children: "Xonadondagi xonalar soni" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Maydoni (m)" }), i.jsx("input", { type: "text", className: "form-control", value: r, disabled: !0 }), i.jsx("small", { className: "input-hint", children: "Xonadon umumiy maydoni" })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["1 m narxi ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsxs("div", { className: "input-with-edit", children: [i.jsx("input", { type: "text", className: "form-control", value: o, onChange: F, disabled: !k, placeholder: "0" }), i.jsx("button", { type: "button", className: `edit-btn ${k ? "active" : ""}`, onClick: Q, title: k ? "Tahrirlash off" : "Narxni o'zgartirish", children: i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" }), i.jsx("path", { d: "M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" })] }) })] }), i.jsx("small", { className: "input-hint", children: "Kelishilgan narx uchun tahrirlash tugmasini bosing" })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["Umumiy narx ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsxs("div", { className: "input-with-suffix", children: [i.jsx("input", { type: "text", className: "form-control", value: d, onChange: B, placeholder: "0" }), i.jsx("span", { className: "suffix", children: "so'm" })] }), i.jsx("small", { className: "input-hint", children: "Xonadon uchun umumiy to'lov summasi" })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["To'lov muddati (oy) ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsx("input", { type: "number", className: `form-control ${ce ? "error" : ""}`, placeholder: "Masalan: 24", min: "0", max: "120", value: l.term_months || "", onChange: X, onBlur: () => O("term_months") }), i.jsx("small", { className: "input-hint", children: "Necha oy ichida to'lanadi (0-120)" }), ce && i.jsx("small", { className: "error-text", children: ce })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["To'lov sanasi (kun) ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsx("input", { type: "number", className: "form-control", placeholder: "1-30", min: "1", max: "30", value: l.payment_day || "", onChange: ae => t("payment_day", ae.target.value) }), i.jsx("small", { className: "input-hint", children: "Har oyning qaysi kunida to'lanadi" })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("div", { className: "label-with-toggle", children: [i.jsxs("label", { children: ["Boshlang'ich to'lov ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsxs("div", { className: "mode-toggle", children: [i.jsx("button", { type: "button", className: `toggle-item ${b === "amount" ? "active" : ""}`, onClick: () => M("amount"), children: "So'm" }), i.jsx("button", { type: "button", className: `toggle-item ${b === "percent" ? "active" : ""}`, onClick: () => M("percent"), children: "%" })] })] }), i.jsxs("div", { className: "input-with-suffix", children: [b === "amount" ? i.jsx("input", { type: "text", className: `form-control ${W ? "error" : ""}`, value: m, onChange: A, onBlur: () => O("initial_payment"), placeholder: "0" }) : i.jsx("input", { type: "text", className: `form-control ${W ? "error" : ""}`, value: g, onChange: L, onBlur: () => O("initial_payment"), placeholder: "0" }), i.jsx("span", { className: "suffix", children: b === "amount" ? "so'm" : "%" })] }), i.jsx("small", { className: "input-hint", children: b === "amount" ? "Dastlabki oldindan to'lanadigan summa" : "Umumiy summaning foizdagi ulushi" }), i.jsx("small", { className: "input-hint secondary", children: b === "amount" ? `Jami summaning ${g || 0}% qismi` : `Summa: ${m || 0} so'm` }), W && i.jsx("small", { className: "error-text", children: W })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["Holat ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsxs("select", { className: "form-select", value: l.status || "pending", onChange: ae => t("status", ae.target.value), children: [i.jsx("option", { value: "pending", children: "Rasmiylashtirilmoqda" }), i.jsx("option", { value: "active", children: "Rasmiylashtirilgan" }), i.jsx("option", { value: "paid", children: "To'liq to'langan" }), i.jsx("option", { value: "completed", children: "Tugallangan" }), s && i.jsx("option", { value: "cancelled", children: "Bekor qilingan" })] }), i.jsx("small", { className: "input-hint", children: l.status === "paid" || l.status === "completed" ? "Shartnoma to'liq to'landi deb belgilanadi" : l.status === "cancelled" ? "Uy bo'shatiladi va qayta sotib olish mumkin" : "Shartnoma hozirgi holati" })] }), !s && i.jsxs("div", { className: "form-group", children: [i.jsxs("div", { className: "label-with-toggle", children: [i.jsx("label", { children: "Sana belgilash kerakmi?" }), i.jsxs("div", { className: "mode-toggle", children: [i.jsx("button", { type: "button", className: `toggle-item ${S ? "active" : ""}`, onClick: () => I(!0), children: "Ha" }), i.jsx("button", { type: "button", className: `toggle-item ${S ? "" : "active"}`, onClick: () => I(!1), children: "Yo'q" })] })] }), S ? i.jsxs("div", { className: "input-container", children: [i.jsx("input", { type: "text", className: "form-control", placeholder: "DD.MM.YYYY (masalan: 12122020)", value: l.contract_date || "", onChange: U, maxLength: "10" }), i.jsx("small", { className: "input-hint", children: "Shartnoma yaratilgan sana (format: 12.12.2020)" })] }) : i.jsx("input", { type: "text", className: "form-control", value: "Real vaqt rejimi (Hozir)", disabled: !0 })] })] }), i.jsxs("div", { className: "payment-summary", children: [i.jsxs("div", { className: "summary-row", children: [i.jsx("span", { className: "label", children: "Umumiy narx:" }), i.jsxs("span", { className: "value", children: [oi(H), " so'm"] })] }), i.jsxs("div", { className: "summary-row", children: [i.jsx("span", { className: "label", children: "Boshlang'ich to'lov:" }), i.jsxs("span", { className: "value", children: [oi(Y), " so'm"] })] }), i.jsxs("div", { className: "summary-row", children: [i.jsx("span", { className: "label", children: "Qoldiq summa:" }), i.jsxs("span", { className: "value", children: [oi(fe), " so'm"] })] }), i.jsxs("div", { className: "summary-row highlight", children: [i.jsx("span", { className: "label", children: "Oylik to'lov:" }), i.jsxs("span", { className: "value", children: [oi(q), " so'm"] })] }), ee > 0 && ee <= 120 && i.jsxs("div", { className: "summary-note", children: [ee, " oy davomida to'lanadi"] })] })] }) }, fD = () => { Mn("Yangi shartnoma"); const l = bi(), [e, t] = C.useState(!1), [s, r] = C.useState({ cityId: "", buildingId: "", buildingName: "", buildingData: null }), [o, u] = C.useState(null), [d, f] = C.useState({ full_name: "", phone: "", phone2: "", passport_series: "", passport_date: "", passport_given: "", address: "", heard_from: "Xech qayerda" }), [m, p] = C.useState({ price_per_meter: 0, term_months: "", payment_day: 15, total_price: 0, initial_payment: 0, status: "pending", monthly_payment: 0, contract_date: "", _hasErrors: !1 }), g = C.useMemo(() => { const w = {}; d.full_name.trim() || (w.full_name = "To'liq ism kiritilishi shart"), (!d.phone || d.phone.length < 9) && (w.phone = "Telefon raqami 9 ta raqamdan iborat bo'lishi kerak"), (!d.passport_series || d.passport_series.length < 10) && (w.passport_series = "Passport to'liq kiritilishi kerak (AA 1234567)"), d.passport_date || (w.passport_date = "Passport berilgan sana kiritilishi shart"), (!d.passport_given || !d.passport_given.trim()) && (w.passport_given = "Passport bergan organ kiritilishi shart"), (!d.address || !d.address.trim()) && (w.address = "Yashash manzili kiritilishi shart"); const N = parseInt(m.term_months) || 0, T = m.total_price, R = m.initial_payment; return R < T ? (N < 1 || N > 120) && (w.term_months = "To'lov muddati 1-120 oy oralig'ida bo'lishi kerak") : R === T && (N < 0 || N > 120) && (w.term_months = "To'lov muddati noto'g'ri"), w }, [d, m]), y = C.useMemo(() => o && Object.keys(g).length === 0 && !m._hasErrors && d.full_name.trim() && d.phone.length >= 9 && d.passport_series.length >= 10 && d.passport_date && d.address.trim() && (m.initial_payment >= m.total_price || m.term_months !== "" && parseInt(m.term_months) >= 1) && m.initial_payment >= 0, [o, g, m, d]), b = w => { r(w), u(null) }, v = w => { u(w), p(N => ({ ...N, price_per_meter: Math.floor(w.price), initial_payment: 0, _hasErrors: !1 })) }, k = (w, N) => { f(T => ({ ...T, [w]: N })) }, j = (w, N) => { p(T => ({ ...T, [w]: N })) }, S = async () => { if (!y) { $.error("Iltimos, barcha maydonlarni to'g'ri to'ldiring"); return } const w = { home_id: o.id, client: { full_name: d.full_name, phone: d.phone, phone2: d.phone2, passport_series: d.passport_series, passport_date: d.passport_date, passport_given: d.passport_given, address: d.address, heard_from: d.heard_from }, price_per_meter: m.price_per_meter, total_price: m.total_price, initial_payment: m.initial_payment, term_months: parseInt(m.term_months), payment_day: parseInt(m.payment_day), monthly_payment: m.monthly_payment, status: m.status, contract_date: m.contract_date || null }; try { t(!0), await Ft.create(w), $.success("Shartnoma muvaffaqiyatli yaratildi"), l("/contracts") } catch (N) { console.error("Create error:", N); const T = N.response?.data?.error || "Xatolik yuz berdi"; $.error(T) } finally { t(!1) } }; return i.jsxs("div", { className: "contract-create-page", children: [i.jsxs("div", { className: "page-header", children: [i.jsx("div", { className: "header-left", children: i.jsxs("div", { children: [i.jsx("h1", { className: "page-title", children: "Yangi shartnoma" }), i.jsx("p", { className: "page-subtitle", children: "Yangi shartnoma rasmiylashtirish" })] }) }), i.jsxs("div", { className: "header-actions", children: [i.jsx("button", { className: "btn-secondary", onClick: () => l("/contracts"), children: "Bekor qilish" }), i.jsxs("button", { className: "btn-primary", onClick: S, disabled: e || !y, children: [i.jsx(Lu, {}), e ? "Saqlanmoqda..." : "Saqlash"] })] })] }), i.jsxs("div", { className: "create-content", children: [i.jsx(P0, { selectedData: s, onSelect: b }), s.buildingId && i.jsx(O0, { buildingId: s.buildingId, onSelect: v, selectedHomeId: o?.id }), o && i.jsxs("div", { className: "details-grid", children: [i.jsx(E0, { formData: d, onChange: k, errors: g }), i.jsx(B0, { formData: m, homeData: o, onChange: j, errors: g, isEditMode: !1 })] })] })] }) }, mD = ({ contractNumber: l, onChange: e, contractDate: t, validation: s }) => {
        const r = o => { if (!o) return "---"; const u = new Date(o), d = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"]; return `${u.getDate()}-${d[u.getMonth()]} ${u.getFullYear()}` }; return i.jsxs("div", {
            className: "card-section", style: { gridColumn: "1 / -1", marginBottom: "16px" }, children: [i.jsxs("div", { className: "section-header", children: [i.jsx("div", { className: "icon-box bg-primary-subtle", children: i.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }), i.jsx("polyline", { points: "14 2 14 8 20 8" }), i.jsx("line", { x1: "16", y1: "13", x2: "8", y2: "13" }), i.jsx("line", { x1: "16", y1: "17", x2: "8", y2: "17" }), i.jsx("polyline", { points: "10 9 9 9 8 9" })] }) }), i.jsx("h3", { children: "Shartnoma ma'lumotlari" })] }), i.jsxs("div", { className: "form-grid", style: { gridTemplateColumns: "1fr 1fr" }, children: [i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { children: ["Shartnoma raqami ", i.jsx("span", { className: "text-danger", children: "*" })] }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsx("input", { type: "text", className: `form-control ${s?.message ? "error" : ""}`, placeholder: "Raqam kiriting", value: l || "", onChange: o => e(o.target.value), style: { fontWeight: "600", color: s?.available ? "var(--primary-color)" : "#ef4444", paddingRight: s?.loading ? "40px" : "12px" } }), s?.loading && i.jsx("div", { style: { position: "absolute", right: "12px", top: "50%", transform: "translateY(-50%)", width: "16px", height: "16px", border: "2px solid rgba(0,0,0,0.1)", borderTopColor: "var(--primary-color)", borderRadius: "50%", animation: "spin 0.6s linear infinite" } })] }), s?.message && i.jsx("small", { className: "error-text", style: { color: "#ef4444", marginTop: "4px", display: "block" }, children: s.message }), i.jsx("small", { className: "input-hint", children: "Shartnomaning rasmiy tartib raqami" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Tuzilgan sana" }), i.jsx("input", { type: "text", className: "form-control", value: r(t), disabled: !0, style: { background: "rgba(255, 255, 255, 0.05)", color: "#94a3b8", border: "1px solid rgba(255, 255, 255, 0.1)", cursor: "not-allowed" } }), i.jsx("small", { className: "input-hint", children: "Shartnoma rasmiylashtirilgan sana (o'zgartirib bo'lmaydi)" })] }), s?.suggestion && i.jsxs("div", { style: { gridColumn: "1 / -1", padding: "12px", background: "rgba(56, 189, 248, 0.1)", border: "1px solid rgba(56, 189, 248, 0.2)", borderRadius: "8px", display: "flex", gap: "10px", alignItems: "center" }, children: [i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "#38bdf8", strokeWidth: "2", children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("line", { x1: "12", y1: "16", x2: "12", y2: "12" }), i.jsx("line", { x1: "12", y1: "8", x2: "12.01", y2: "8" })] }), i.jsx("span", { style: { fontSize: "13px", color: "#38bdf8" }, children: s.suggestion })] })] }), i.jsx("style", {
                children: `
                @keyframes spin {
                    to { transform: translateY(-50%) rotate(360deg); }
                }
            `})]
        })
    }, pD = l => { if (!l) return ""; try { const e = new Date(l); if (isNaN(e.getTime())) return l; const t = e.getDate().toString().padStart(2, "0"), s = (e.getMonth() + 1).toString().padStart(2, "0"), r = e.getFullYear(); return `${t}.${s}.${r}` } catch { return l || "" } }, gD = () => { const { id: l } = ju(); Mn("Shartnomani tahrirlash"); const e = bi(), [t, s] = C.useState(!0), [r, o] = C.useState(!1), [u, d] = C.useState(null), [f, m] = C.useState({ cityId: "", buildingId: "", buildingName: "", buildingData: null }), [p, g] = C.useState(null), [y, b] = C.useState({ full_name: "", phone: "", phone2: "", passport_series: "", passport_date: "", passport_given: "", address: "", heard_from: "Xech qayerda" }), [v, k] = C.useState({ price_per_meter: 0, term_months: "", payment_day: 15, total_price: 0, initial_payment: 0, status: "pending", monthly_payment: 0, _hasErrors: !1 }), [j, S] = C.useState(""), [w, N] = C.useState({ loading: !1, available: !0, suggestion: null, message: null }); C.useEffect(() => { l && (async () => { try { s(!0); const M = (await Ft.get(l)).data; if (d(M), M.home && M.home.building && m({ cityId: String(M.home.building.city), buildingId: String(M.home.building.id), buildingName: M.home.building.name, buildingData: M.home.building }), M.home && g(M.home), M.client && b({ full_name: M.client.full_name || "", phone: M.client.phone || "", phone2: M.client.phone2 || "", passport_series: M.passport_series || "", passport_date: pD(M.passport_given_date), passport_given: M.passport_given_by || "", address: M.address || "", heard_from: M.client.heard_source || "Xech qayerda" }), M) { let X = 0; M.home.square_meter > 0 && (X = Math.floor(M.total_price / M.home.square_meter)), k({ price_per_meter: X, total_price: M.total_price, term_months: M.term_months, payment_day: M.payment_day, initial_payment: M.initial_payment, status: M.status, monthly_payment: M.monthly_payment, _hasErrors: !1 }) } } catch (L) { console.error("Error loading contract:", L), $.error("Shartnoma ma'lumotlarini yuklashda xatolik"), e("/contracts") } finally { s(!1) } })() }, [l, e]), C.useEffect(() => { u && S(u.contract_number || "") }, [u]), C.useEffect(() => { if (!j || !f.buildingId || !u) return; if (j === u.contract_number) { N({ loading: !1, available: !0, suggestion: null, message: null }); return } const A = setTimeout(async () => { N(L => ({ ...L, loading: !0 })); try { const L = await Ft.checkNumber({ number: j, building_id: f.buildingId, exclude_id: l }); N({ loading: !1, available: L.data.available, suggestion: L.data.suggestion, message: L.data.message }) } catch (L) { console.error("Number validation error:", L), N(M => ({ ...M, loading: !1 })) } }, 500); return () => clearTimeout(A) }, [j, f.buildingId, u, l]); const T = C.useMemo(() => { const A = {}; y.full_name.trim() || (A.full_name = "To'liq ism kiritilishi shart"), (!y.phone || y.phone.length < 9) && (A.phone = "Telefon raqami 9 ta raqamdan iborat bo'lishi kerak"), (!y.passport_series || y.passport_series.length < 10) && (A.passport_series = "Passport to'liq kiritilishi kerak (AA 1234567)"), y.passport_date || (A.passport_date = "Passport berilgan sana kiritilishi shart"), (!y.address || !y.address.trim()) && (A.address = "Yashash manzili kiritilishi shart"); const L = parseInt(v.term_months) || 0; return (L < 1 || L > 120) && v.status !== "cancelled" && v.status !== "completed" && (A.term_months = "To'lov muddati 1-120 oy oralig'ida bo'lishi kerak"), A }, [y, v]), R = C.useMemo(() => p && Object.keys(T).length === 0 && !v._hasErrors && w.available && y.full_name.trim() && y.phone.length >= 9 && y.passport_series.length >= 10 && y.passport_date, [p, T, v, y, w.available]), P = A => { m(A), A.buildingId !== f.buildingId && g(null) }, O = A => { g(A), u && A.id !== u.home.id && k(L => ({ ...L, price_per_meter: Math.floor(A.price), initial_payment: 0, _hasErrors: !1 })) }, z = (A, L) => { b(M => ({ ...M, [A]: L })) }, F = (A, L) => { k(M => ({ ...M, [A]: L })) }, B = async () => { if (!R) { $.error("Iltimos, barcha maydonlarni to'g'ri to'ldiring"); return } const A = { home_id: p.id, client: { full_name: y.full_name, phone: y.phone, phone2: y.phone2, passport_series: y.passport_series, passport_date: y.passport_date, passport_given: y.passport_given, address: y.address, heard_from: y.heard_from }, price_per_meter: v.price_per_meter, total_price: v.total_price, initial_payment: v.initial_payment, term_months: parseInt(v.term_months), payment_day: parseInt(v.payment_day), monthly_payment: v.monthly_payment, status: v.status, contract_number: j }; try { o(!0), await Ft.update(l, A), $.success("Shartnoma muvaffaqiyatli yangilandi"), e("/contracts") } catch (L) { console.error("Update error:", L); const M = L.response?.data?.error || "Xatolik yuz berdi"; $.error(M) } finally { o(!1) } }; return t ? i.jsx("div", { style: { display: "flex", justifyContent: "center", alignItems: "center", height: "100vh" }, children: i.jsx("div", { style: { padding: "20px", background: "#fff", borderRadius: "8px", boxShadow: "0 2px 8px rgba(0,0,0,0.1)" }, children: "Yuklanmoqda..." }) }) : i.jsxs("div", { className: "contract-create-page", children: [i.jsxs("div", { className: "page-header", children: [i.jsx("div", { className: "header-left", children: i.jsxs("div", { children: [i.jsx("h1", { className: "page-title", children: "Shartnomani tahrirlash" }), i.jsx("div", { style: { display: "flex", gap: "8px", alignItems: "center" }, children: i.jsxs("span", { style: { fontWeight: "600", color: "var(--primary-color)", background: "var(--primary-color-alpha)", padding: "2px 8px", borderRadius: "4px", fontSize: "13px" }, children: ["#", u?.contract_number] }) })] }) }), i.jsxs("div", { className: "header-actions", children: [i.jsx("button", { className: "btn-secondary", onClick: () => e("/contracts"), children: u?.status === "cancelled" ? "Orqaga" : "Bekor qilish" }), u?.status !== "cancelled" && i.jsxs("button", { className: "btn-primary", onClick: B, disabled: r || !R, children: [i.jsx(Lu, {}), r ? "Saqlanmoqda..." : "Saqlash"] })] })] }), i.jsxs("div", { className: "create-content", children: [i.jsxs("div", { className: `status-alert status-alert-${u?.status || "pending"}`, children: [i.jsxs("div", { className: "status-alert-content", children: [i.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("line", { x1: "12", y1: "16", x2: "12", y2: "12" }), i.jsx("line", { x1: "12", y1: "8", x2: "12.01", y2: "8" })] }), i.jsxs("span", { className: "status-alert-text", children: ["Joriy holat:", " ", i.jsx("strong", { children: u?.status === "pending" ? "Rasmiylashtirilmoqda" : u?.status === "active" ? "Rasmiylashtirilgan" : u?.status === "paid" ? "To'liq to'langan" : u?.status === "cancelled" ? "Bekor qilingan" : "Tugallangan" })] })] }), u?.status === "pending" && i.jsx("span", { className: "status-alert-hint", children: "Barcha ma'lumotlarni o'zgartirish mumkin" }), u?.status === "cancelled" && i.jsx("span", { className: "status-alert-hint", style: { color: "var(--error-color, #ef4444)" }, children: " Bu shartnoma bekor qilingan. O'zgartirib bo'lmaydi. Yangi shartnoma rasmiylashtiring." })] }), i.jsx(mD, { contractNumber: j, onChange: S, contractDate: u?.created_at, validation: w }), i.jsx("div", { children: i.jsx(P0, { selectedData: f, onSelect: P }) }), f.buildingId && i.jsx("div", { children: i.jsx(O0, { buildingId: f.buildingId, onSelect: O, selectedHomeId: String(p?.id || ""), contractedHomeId: u?.home?.id ? String(u.home.id) : null }) }), p && i.jsxs("div", { className: "details-grid", children: [i.jsx(E0, { formData: y, onChange: z, errors: T }), i.jsx(B0, { formData: v, homeData: p, onChange: F, errors: T, isEditMode: !0 })] })] })] }) }, la = ({ isOpen: l, onClose: e, title: t, children: s, footer: r, size: o = "md", icon: u = null, closeable: d = !0, className: f = "", overlayClassName: m = "", contentClassName: p = "" }) => { if (!l) return null; const g = { sm: "modal-sm", md: "modal-md", lg: "modal-lg", xl: "modal-xl" }, y = v => { v.target === v.currentTarget && e() }, b = i.jsx("div", { className: `modal-overlay ${m}`, onClick: y, role: "presentation", children: i.jsxs("div", { className: `modal-content ${g[o]} ${p} ${f}`, onClick: v => v.stopPropagation(), role: "dialog", "aria-modal": "true", "aria-labelledby": t ? "modal-title" : void 0, children: [t && i.jsxs("div", { className: "modal-header", children: [i.jsxs("h2", { id: "modal-title", className: "modal-title", children: [u && i.jsx("span", { className: "modal-icon", children: u }), t] }), d && i.jsx("button", { className: "modal-close", onClick: e, "aria-label": "Close modal", type: "button", children: i.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }) })] }), i.jsx("div", { className: "modal-body", children: s }), r && i.jsx("div", { className: "modal-actions", children: r })] }) }); return gt.createPortal(b, document.body) }, zu = ({ label: l, required: e, children: t, fullWidth: s = !1, error: r }) => i.jsxs("div", { className: "form-group", style: { gridColumn: s ? "1 / -1" : "auto" }, children: [l && i.jsxs("label", { children: [l, e && i.jsx("span", { className: "required", children: "*" })] }), t, r && i.jsx("small", { style: { color: "#ef4444", marginTop: "4px", display: "block" }, children: r })] }), Fu = ({ items: l, label: e }) => i.jsxs("div", { style: { marginBottom: "20px", padding: "0" }, children: [e && i.jsx("div", { className: "section-title", children: e }), i.jsx("div", { style: { display: "flex", flexDirection: "column", gap: "12px" }, children: l.map((t, s) => i.jsxs("div", { className: "modal-info-row", style: { borderBottom: "1px solid var(--border-color)" }, children: [i.jsx("span", { children: t.label }), i.jsx("strong", { style: { color: t.color || "var(--text-primary)" }, children: t.value })] }, s)) })] }), Hu = ({ type: l = "info", children: e }) => { const t = l === "warning" ? "warning" : l === "danger" ? "danger" : l === "success" ? "success" : ""; return i.jsx("div", { className: `modal-info-note ${t}`, style: { marginBottom: "20px" }, children: e }) }, Tm = ({ value: l, onChange: e, placeholder: t = "Summa kiriting", name: s }) => i.jsxs("div", { style: { display: "flex", alignItems: "center", border: "2px solid var(--border-color)", borderRadius: "10px", padding: "0 12px", background: "var(--bg-tertiary)", transition: "all 0.3s ease" }, children: [i.jsx("input", { type: "text", name: s, value: l, onChange: e, placeholder: t, style: { flex: 1, border: "none", background: "transparent", padding: "12px 0", outline: "none", color: "var(--text-primary)", fontSize: "14px", fontFamily: "inherit" } }), i.jsx("span", { style: { color: "var(--text-secondary)", fontWeight: 500, fontSize: "13px", whiteSpace: "nowrap" }, children: "so'm" })] }), bD = ({ isOpen: l, onClose: e, payment: t, formatPrice: s }) => { if (!l || !t) return null; const r = t.history || [], o = t.month_number === 0 ? "Boshlang'ich to'lov" : `${t.month_number}-oy`; return i.jsxs(la, { isOpen: l, onClose: e, title: `${o} tarixi`, icon: i.jsx(Jf, { width: "20", height: "20" }), size: "md", footer: i.jsx("button", { className: "btn-v2 btn-v2-secondary", onClick: e, type: "button", children: "Yopish" }), children: [i.jsx(Fu, { items: [{ label: "Belgilangan miqdori", value: s(t.amount) }, { label: "To'langan", value: s(t.amount_paid), color: "#10b981" }, { label: "Qoldiq qarz", value: s(t.remaining), color: t.remaining > 0 ? "#ef4444" : "#10b981" }] }), r && r.length > 0 && i.jsxs("div", { className: "history-section", children: [i.jsx("h4", { className: "section-title", children: "AMALLAR TARIXI" }), i.jsx("div", { className: "history-list", children: r.map((u, d) => i.jsxs("div", { className: "history-card", children: [i.jsxs("div", { className: "history-card-header", children: [i.jsxs("span", { className: "history-date", children: [(() => { const f = new Date(u.paid_date), m = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"]; return `${f.getDate()}-${m[f.getMonth()]} ${f.getFullYear()}` })(), i.jsx("small", { className: "history-time", children: new Date(u.paid_date).toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" }) })] }), i.jsxs("span", { className: `history-amount ${u.amount >= 0 ? "text-success" : "text-danger"}`, children: [u.amount >= 0 ? "+" : "", s(u.amount)] })] }), u.note && i.jsx("div", { className: "history-note", children: u.note })] }, d)) })] }), (!r || r.length === 0) && i.jsx("div", { className: "no-history-alert", children: "Hozircha amallar tarixi mavjud emas" })] }) }, Hy = ({ isOpen: l, onClose: e, payment: t, amount: s, onAmountChange: r, onSubmit: o, isLoading: u, formatPrice: d, title: f }) => i.jsxs(la, { isOpen: l, onClose: e, title: f || (t?.month_number === 0 ? "Boshlang'ich to'lov" : `${t?.month_number}-oy uchun to'lov`), icon: i.jsx(Ms, { width: "20", height: "20" }), size: "md", footer: i.jsxs(i.Fragment, { children: [i.jsx("button", { type: "button", className: "btn-v2 btn-v2-secondary", onClick: e, children: "Bekor qilish" }), i.jsx("button", { type: "button", className: "btn-v2 btn-v2-primary", onClick: o, disabled: u || !s, children: u ? "Jarayonda..." : "To'lovni tasdiqlash" })] }), children: [i.jsx(Fu, { items: [{ label: "Belgilangan miqdori", value: d(t?.amount) }, { label: "Qolgan qarz", value: d(t?.remaining), color: "#ef4444" }] }), i.jsx(zu, { label: "To'lov summasi", required: !0, children: i.jsx(Tm, { value: s, onChange: r, placeholder: "Summa kiriting" }) }), i.jsxs(Hu, { type: "info", children: [i.jsx("strong", { children: "Eslatma:" }), " To'lov miqdori oy uchun qoldiqdan oshmasligi kerak."] })] }), xD = ({ isOpen: l, onClose: e, remainingBalance: t, amount: s, onAmountChange: r, onSubmit: o, isLoading: u, formatPrice: d }) => i.jsxs(la, { isOpen: l, onClose: e, title: "Ixtiyoriy to'lov qilish", icon: i.jsx(Ms, { width: "20", height: "20" }), size: "md", footer: i.jsxs(i.Fragment, { children: [i.jsx("button", { type: "button", className: "btn-v2 btn-v2-secondary", onClick: e, children: "Bekor qilish" }), i.jsx("button", { type: "button", className: "btn-v2 btn-v2-primary", onClick: o, disabled: u || !s, children: u ? "Jarayonda..." : "To'lovni tasdiqlash" })] }), children: [i.jsx(Fu, { items: [{ label: "Qolgan umumiy qarz", value: d(t), color: "#ef4444" }] }), i.jsx(zu, { label: "To'lov summasi", required: !0, children: i.jsx(Tm, { value: s, onChange: r, placeholder: "Summa kiriting" }) }), i.jsxs(Hu, { type: "success", children: [i.jsx("strong", { children: "Ma'lumot:" }), " Ixtiyoriy to'lov avtomatik ravishda eng yaqin to'lanmagan oylarga taqsimlanadi."] })] }), yD = ({ isOpen: l, onClose: e, contractId: t, formatPrice: s }) => {
        const [r, o] = C.useState([]), [u, d] = C.useState(!1), [f, m] = C.useState(null), [p, g] = C.useState(null), [y, b] = C.useState(""), [v, k] = C.useState(""); C.useEffect(() => { l && t && j() }, [l, t]); const j = async () => { d(!0); try { const T = await Ft.getTransactions(t); o(T.data) } catch (T) { console.error("Tranzaksiyalarni yuklashda xatolik:", T) } finally { d(!1) } }, S = async T => { m(T), $.loading("Kvitansiya tayyorlanmoqda...", { id: "receipt-loading" }); try { const R = await Ft.downloadTransactionPdf(t, T), P = new Blob([R.data], { type: "application/pdf" }), O = window.URL.createObjectURL(P); window.open(O, "_blank"), $.dismiss("receipt-loading"), $.success("Kvitansiya ochildi") } catch (R) { console.error("PDF yuklashda xatolik:", R), $.dismiss("receipt-loading"), $.error("PDF yaratishda xatolik yuz berdi") } finally { m(null) } }, w = T => { const R = new Date(T.paid_date), P = R.getFullYear() + "-" + String(R.getMonth() + 1).padStart(2, "0") + "-" + String(R.getDate()).padStart(2, "0"), O = String(R.getHours()).padStart(2, "0") + ":" + String(R.getMinutes()).padStart(2, "0"); g(T.id), b(P), k(O) }, N = async T => { if (!y) { $.error("Sanani kiriting"); return } const R = v || "00:00", P = new Date(`${y}T${R}:00`); d(!0); try { await Ft.updateTransaction(t, T.id, { paid_date: P.toISOString() }), $.success("Sana muvaffaqiyatli saqlandi"), g(null), j() } catch { $.error("Sanani saqlashda xatolik"), d(!1) } }; return l ? i.jsxs(la, {
            isOpen: l, onClose: e, title: "Umumiy to'lovlar tarixi", icon: i.jsx(Ms, { width: "20", height: "20" }), size: "lg", footer: i.jsx("button", { className: "btn-v2 btn-v2-secondary", onClick: e, type: "button", children: "Yopish" }), children: [i.jsx("div", { className: "transactions-modal-content", children: u ? i.jsx("div", { className: "loading-container", children: "Yuklanmoqda..." }) : r.length > 0 ? i.jsx("div", { className: "transaction-history-table-container", children: i.jsxs("table", { className: "transaction-history-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { children: "Sana" }), i.jsx("th", { children: "Vaqt" }), i.jsx("th", { children: "Summa" }), i.jsx("th", { children: "Izoh" }), i.jsx("th", { style: { textAlign: "center" }, children: "Harakat" })] }) }), i.jsx("tbody", { children: r.map(T => i.jsxs("tr", { children: [i.jsx("td", { children: p === T.id ? i.jsx("input", { type: "date", value: y, onChange: R => b(R.target.value), style: { padding: "4px", border: "1px solid #cbd5e1", borderRadius: "4px", fontSize: "13px" } }) : (() => { const R = new Date(T.paid_date), P = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"]; return `${R.getDate()}-${P[R.getMonth()]} ${R.getFullYear()}` })() }), i.jsx("td", { children: p === T.id ? i.jsx("input", { type: "time", value: v, onChange: R => k(R.target.value), style: { padding: "4px", border: "1px solid #cbd5e1", borderRadius: "4px", width: "80px", fontSize: "13px" } }) : new Date(T.paid_date).toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" }) }), i.jsxs("td", { className: "amount-cell text-success", children: ["+", s(T.amount)] }), i.jsx("td", { className: "note-cell", children: T.note || "---" }), i.jsx("td", { style: { textAlign: "center" }, children: i.jsx("div", { style: { display: "flex", gap: "5px", justifyContent: "center" }, children: p === T.id ? i.jsxs(i.Fragment, { children: [i.jsx("button", { className: "btn-download-sm", style: { background: "rgba(59, 130, 246, 0.1)", color: "#3b82f6", border: "1px solid rgba(59, 130, 246, 0.2)" }, onClick: () => N(T), title: "Saqlash", children: i.jsx(Lu, { width: "16", height: "16" }) }), i.jsx("button", { className: "btn-download-sm", style: { background: "rgba(239, 68, 68, 0.1)", color: "#ef4444", border: "1px solid rgba(239, 68, 68, 0.2)" }, onClick: () => g(null), title: "Bekor qilish", children: i.jsx(Cm, { width: "16", height: "16" }) })] }) : i.jsxs(i.Fragment, { children: [i.jsx("button", { className: "btn-download-sm", style: { background: "rgba(245, 158, 11, 0.1)", color: "#f59e0b", border: "1px solid rgba(245, 158, 11, 0.2)" }, onClick: () => w(T), title: "Tahrirlash", children: i.jsx(eu, { width: "16", height: "16" }) }), i.jsx("button", { className: "btn-download-sm", onClick: () => S(T.id), disabled: f === T.id, title: "Kvitansiya yuklash", children: i.jsx(vu, { width: "16", height: "16" }) })] }) }) })] }, T.id)) })] }) }) : i.jsx("div", { className: "no-data-alert", children: "Hozircha hech qanday to'lov amalga oshirilmagan" }) }), i.jsx("style", {
                jsx: !0, children: `
                .transactions-modal-content {
                    padding: 0;
                }
                .transaction-history-table-container {
                    max-height: 450px;
                    overflow-y: auto;
                    overflow-x: auto;
                    border-radius: 8px;
                    border: 1px solid var(--border-color, #e2e8f0);
                }
                .transaction-history-table {
                    width: 100%;
                    border-collapse: collapse;
                    font-size: 14px;
                }
                .transaction-history-table th {
                    background: var(--bg-secondary, #f8fafc);
                    padding: 12px 16px;
                    text-align: left;
                    font-weight: 600;
                    color: var(--text-secondary, #64748b);
                    border-bottom: 1px solid var(--border-color, #e2e8f0);
                }
                .transaction-history-table td {
                    padding: 12px 16px;
                    color: var(--text-primary, #1e293b);
                    border-bottom: 1px solid var(--border-color, #e2e8f0);
                }
                .transaction-history-table tr:last-child td {
                    border-bottom: none;
                }
                .amount-cell {
                    font-weight: 600;
                }
                .text-success {
                    color: #10b981;
                }
                .note-cell {
                    color: var(--text-secondary, #64748b);
                    max-width: 250px;
                    word-wrap: break-word;
                    font-style: italic;
                    font-size: 13px;
                }
                .btn-download-sm {
                    background: rgba(34, 197, 94, 0.1);
                    color: #22c55e;
                    border: 1px solid rgba(34, 197, 94, 0.2);
                    padding: 6px;
                    border-radius: 6px;
                    cursor: pointer;
                    transition: all 0.2s;
                    display: inline-flex;
                    align-items: center;
                    justify-content: center;
                }
                .btn-download-sm:hover {
                    background: #22c55e;
                    color: white;
                    transform: translateY(-1px);
                }
                .btn-download-sm:disabled {
                    opacity: 0.5;
                    cursor: not-allowed;
                }
                .loading-container, .no-data-alert {
                    padding: 40px;
                    text-align: center;
                    color: var(--text-secondary, #64748b);
                }
            `})]
        }) : null
    }, vD = ({ isOpen: l, onClose: e, payment: t, amount: s, onAmountChange: r, onSubmit: o, onReset: u, isLoading: d, formatPrice: f }) => i.jsxs(la, { isOpen: l, onClose: e, title: "Admin amallar", size: "md", footer: i.jsxs(i.Fragment, { children: [i.jsx("button", { type: "button", className: "btn-v2 btn-v2-danger-light", onClick: u, disabled: d, children: "Yopish" }), i.jsx("button", { type: "button", className: "btn-v2 btn-v2-primary", onClick: o, disabled: d, children: d ? "Saqlanmoqda..." : "O'zgarishni saqlash" })] }), children: [i.jsx(Fu, { items: [{ label: "Belgilangan miqdori", value: f(t?.amount) }, { label: "Hozirgi to'langan", value: f(t?.amount_paid), color: "#10b981" }] }), i.jsx(zu, { label: "TO'LANGAN MIQDORNI O'ZGARTIRISH", required: !0, children: i.jsx(Tm, { value: s, onChange: r, placeholder: "Yangi miqdor kiriting" }) }), i.jsxs(Hu, { type: "danger", children: [i.jsx("strong", { children: "Diqqat:" }), " Bu amalni faqat admin foydalanuvchi bajar oladi. O'zgarishlar avtomatik ravishda tizimdagi barcha hisoblashlarni qayta hisoblab chiqadi."] })] }), _D = () => { const { id: l } = ju(), e = bi(); Mn("To'lovlar jadvali"); const [t, s] = C.useState(!0), [r, o] = C.useState(null), [u, d] = C.useState([]), [f, m] = C.useState([]), [p, g] = C.useState(null), [y, b] = C.useState(!1), [v, k] = C.useState(!1), [j, S] = C.useState(""), [w, N] = C.useState({ open: !1, payment: null }), [T, R] = C.useState(""), [P, O] = C.useState({ open: !1, payment: null }), [z, F] = C.useState(""), [B, A] = C.useState({ open: !1, payment: null, amount: "" }), [L, M] = C.useState({ open: !1, payment: null }), [X, U] = C.useState(!1), I = async () => { try { const [se, Ne] = await Promise.all([Ft.get(l), Ft.getPayments(l)]); o(se.data), d(Ne.data), m(JSON.parse(JSON.stringify(Ne.data))) } catch (se) { $.error("Ma'lumotlarni yuklashda xatolik"), console.error(se) } finally { s(!1) } }; C.useEffect(() => { I() }, [l]); const H = se => new Intl.NumberFormat("uz-UZ").format(Math.round(se || 0)) + " so'm", Y = se => { if (se == null || se === "") return ""; const Ne = parseInt(String(se).replace(/\s/g, "").replace(/\D/g, "")) || 0; return new Intl.NumberFormat("uz-UZ").format(Ne) }, ee = se => parseInt(String(se).replace(/\s/g, "").replace(/\D/g, "")) || 0, fe = se => { if (!se) return "---"; const Ne = new Date(se), xe = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"]; return `${Ne.getDate()}-${xe[Ne.getMonth()]} ${Ne.getFullYear()}` }, q = C.useMemo(() => { if (!r) return 0; const se = f.find(xe => xe.month_number === 0), Ne = se ? parseFloat(se.amount || 0) : 0; return r.total_price - Ne }, [r, f]), Q = C.useMemo(() => f.filter(se => se.month_number > 0).reduce((se, Ne) => se + parseFloat(Ne.amount || 0), 0), [f]), ce = C.useMemo(() => q - Q, [q, Q]), W = (se, Ne) => { const K = parseFloat(Ne) || 0, ve = parseFloat(r?.total_price || 0), Ae = JSON.parse(JSON.stringify(f)), ne = Ae.findIndex(yt => yt.id === se); if (ne === -1) return; const re = Ae[ne].month_number, Ce = Ae.filter(yt => yt.month_number < re).reduce((yt, xi) => yt + parseFloat(xi.amount || 0), 0), Ue = Math.max(0, ve - Ce), wt = Math.min(K, Ue); K > Ue && K > 0 && $.warning(`Maksimal summa: ${Y(Math.round(Ue))} so'm`), Ae[ne].amount = wt, Ae[ne].remaining = wt - parseFloat(Ae[ne].amount_paid || 0); const kt = Ae.filter(yt => yt.month_number > re), Ki = kt.filter(yt => parseFloat(yt.amount_paid || 0) === 0), ti = kt.filter(yt => parseFloat(yt.amount_paid || 0) > 0).reduce((yt, xi) => yt + parseFloat(xi.amount || 0), 0), Bi = Math.max(0, ve - Ce - wt - ti); if (Ki.length > 0) if (Bi <= 0) Ki.forEach(yt => { const xi = Ae.findIndex(us => us.id === yt.id); xi !== -1 && (Ae[xi].amount = 0, Ae[xi].remaining = 0) }); else { const yt = Bi / Ki.length, xi = Math.floor(yt / 1) * 1, us = Ki.length - 1, qr = xi * us, Pn = Bi - qr; Ki.forEach((ds, St) => { const Kt = Ae.findIndex(Nt => Nt.id === ds.id); Kt !== -1 && (St === Ki.length - 1 ? Ae[Kt].amount = Math.max(0, Math.round(Pn)) : Ae[Kt].amount = Math.max(0, xi), Ae[Kt].remaining = Ae[Kt].amount - parseFloat(Ae[Kt].amount_paid || 0)) }) } m(Ae) }, ae = async () => { g("saving"); try { const se = f.map(Ne => ({ id: Ne.id, amount: Ne.amount, due_date: Ne.due_date })); await Ft.updateSchedule(l, { changes: se }), $.success("O'zgarishlar saqlandi"), b(!1), I() } catch { $.error("Saqlashda xatolik") } finally { g(null) } }, J = async () => { const se = ee(T); if (!se || se <= 0) { $.error("To'lov summasi kiritilmadi"); return } const Ne = w.payment?.remaining || 0; if (se > Ne) { $.error(`To'lov miqdori qoldiqdan (${H(Ne)}) oshmasligi kerak`); return } g(w.payment?.id); try { await Ft.makePayment(l, { amount: se, payment_id: w.payment?.id }), $.success("To'lov muvaffaqiyatli qabul qilindi"), N({ open: !1, payment: null }), R(""), I() } catch { $.error("Xatolik yuz berdi") } finally { g(null) } }, G = async () => { const se = ee(j); if (!se || se <= 0) { $.error("To'lov summasi kiritilmadi"); return } if (se > r.remaining_balance) { $.error(`To'lov miqdori qolgan qarzdan (${H(r.remaining_balance)}) oshmasligi kerak`); return } g("custom"); try { await Ft.makePayment(l, { amount: se }), $.success("To'lov muvaffaqiyatli taqsimlandi"), k(!1), S(""), I() } catch { $.error("To'lovda xatolik") } finally { g(null) } }, ge = async () => { const se = ee(z); if (!se || se <= 0) { $.error("Qo'shimcha summa kiritilmadi"); return } const Ne = P.payment?.remaining || 0; if (se > Ne) { $.error(`Summa qolgan qarzdan (${H(Ne)}) oshmasligi kerak`); return } g("additional"); try { await Ft.makePayment(l, { amount: se, payment_id: P.payment?.id }), $.success("Qo'shimcha to'lov qabul qilindi"), O({ open: !1, payment: null }), F(""), I() } catch { $.error("Xatolik") } finally { g(null) } }, de = async (se, Ne, xe = 0) => { const K = Ne === "reset" ? "Bu to'lovni bekor qilmoqchimisiz?" : "O'zgarishni saqlaysizmi?"; if (window.confirm(K)) { g(se); try { await Ft.adminAction(l, { payment_id: se, action: Ne, amount_paid: ee(xe) }), $.success(Ne === "reset" ? "To'lov bekor qilindi" : "O'zgarish saqlandi"), A({ open: !1, payment: null, amount: "" }), I() } catch { $.error("Xatolik") } finally { g(null) } } }, Se = async () => { try { g("pdf"), $.loading("PDF yaratilmoqda...", { id: "pdf-loading" }); const se = await Ft.downloadPdf(l), Ne = new Blob([se.data], { type: "application/pdf" }), xe = window.URL.createObjectURL(Ne); window.open(xe, "_blank"), $.dismiss("pdf-loading"), $.success("PDF tayyor!") } catch (se) { $.dismiss("pdf-loading"), $.error("PDF yaratishda xatolik"), console.error(se) } finally { g(null) } }, Ee = C.useMemo(() => y ? f : u || [], [y, f, u]); if (t) return i.jsx("div", { className: "contract-schedule-page loading-state", children: "Yuklanmoqda..." }); const be = r.total_price - r.remaining_balance; return i.jsxs("div", { className: "contract-schedule-page", children: [i.jsxs("div", { className: "schedule-header", children: [i.jsxs("div", { className: "header-left", children: [i.jsx("button", { className: "btn-back", onClick: () => e("/contracts"), children: i.jsx(lD, {}) }), i.jsx("div", { className: "header-title", children: i.jsxs("div", { className: "title-with-badge", children: [i.jsxs("h1", { children: ["Shartnoma #", r.contract_number] }), r.status === "active" && i.jsx("span", { className: "contract-status-badge status-active", children: "Rasmiylashtirilgan" }), r.status === "paid" && i.jsx("span", { className: "contract-status-badge status-paid", children: "To'liq to'langan" }), r.status === "completed" && i.jsx("span", { className: "contract-status-badge status-completed", children: "Tugallangan" }), r.status === "cancelled" && i.jsx("span", { className: "contract-status-badge status-cancelled", children: "Bekor qilingan" })] }) })] }), i.jsxs("div", { className: "header-actions", children: [i.jsx("div", { className: "title-with-badge", children: i.jsxs("p", { className: "contract-status-badge status-completed", children: [r.client_name, " - ", r.building_name, ",", " ", r.home_number, "-uy"] }) }), r.status === "cancelled" ? i.jsxs(i.Fragment, { children: [i.jsx("span", { style: { color: "var(--error-color, #ef4444)", fontSize: "13px", fontWeight: "500", padding: "8px 12px", background: "rgba(239, 68, 68, 0.1)", borderRadius: "8px" }, children: " Bu shartnoma bekor qilingan" }), i.jsxs("button", { className: "btn-primary", onClick: Se, disabled: p === "pdf", children: [i.jsx(vu, { width: "16", height: "16" }), p === "pdf" ? "Yuklanmoqda..." : "Shartnomani yuklab olish"] })] }) : y ? i.jsxs(i.Fragment, { children: [i.jsxs("button", { className: "btn-outline-danger", onClick: () => { b(!1), I() }, children: [i.jsx(Cm, { width: "16", height: "16" }), " Bekor qilish"] }), i.jsxs("button", { className: "btn-success", onClick: ae, disabled: p === "saving", children: [i.jsx(Lu, { width: "16", height: "16" }), " ", p === "saving" ? "Saqlanmoqda..." : "Barchasini saqlash"] })] }) : i.jsxs(i.Fragment, { children: [i.jsxs("button", { className: "btn-primary", onClick: Se, disabled: p === "pdf", children: [i.jsx(vu, { width: "16", height: "16" }), p === "pdf" ? "Yuklanmoqda..." : "Shartnomani yuklab olish"] }), i.jsxs("button", { className: "btn-secondary", onClick: () => k(!0), children: [i.jsx(Ms, { width: "16", height: "16" }), " Ixtiyoriy to'lov"] }), i.jsxs("button", { className: "btn-history", onClick: () => U(!0), children: [i.jsx(Jf, { width: "16", height: "16" }), " To'lovlar tarixi"] }), i.jsxs("button", { className: "btn-warning", onClick: () => b(!0), children: [i.jsx(eu, { width: "16", height: "16" }), " Tahrirlash rejimi"] })] })] })] }), i.jsxs("div", { className: "schedule-stats", children: [i.jsxs("div", { className: "stat-card", children: [i.jsx("div", { className: "stat-icon primary", children: i.jsx(Ms, {}) }), i.jsxs("div", { className: "stat-info", children: [i.jsx("span", { className: "value", children: H(r.total_price) }), i.jsx("span", { className: "label", children: "Xonadon narxi" })] })] }), i.jsxs("div", { className: "stat-card", children: [i.jsx("div", { className: "stat-icon success", children: i.jsx(Ms, {}) }), i.jsxs("div", { className: "stat-info", children: [i.jsx("span", { className: "value", children: H(be) }), i.jsx("span", { className: "label", children: "To'langan" })] })] }), i.jsxs("div", { className: "stat-card", children: [i.jsx("div", { className: "stat-icon danger", children: i.jsx(Ms, {}) }), i.jsxs("div", { className: "stat-info", children: [i.jsx("span", { className: "value", children: H(r.remaining_balance) }), i.jsx("span", { className: "label", children: "Qolgan qarz" })] })] }), i.jsxs("div", { className: "stat-card", children: [i.jsx("div", { className: "stat-icon warning", children: i.jsx(M0, {}) }), i.jsxs("div", { className: "stat-info", children: [i.jsxs("span", { className: "value", children: ["Oyning ", r.payment_day, "-kuni"] }), i.jsx("span", { className: "label", children: "To'lov sanasi" })] })] })] }), y && i.jsxs("div", { className: "edit-controls-card", children: [i.jsxs("div", { className: "control-row", children: [i.jsxs("div", { className: "control-group", children: [i.jsx("label", { children: "Maqsadli summa:" }), i.jsx("div", { className: "readonly-value", children: H(q) }), i.jsx("small", { className: "hint-text", children: "Xonadon narxi - Boshlang'ich to'lov" })] }), i.jsxs("div", { className: "control-group", children: [i.jsx("label", { children: "Hozirgi jami:" }), i.jsx("div", { className: "readonly-value", children: H(Q) }), i.jsx("small", { className: "hint-text", children: "Barcha oylik to'lovlar yig'indisi" })] }), i.jsxs("div", { className: "control-group", children: [i.jsx("label", { children: "Farq:" }), i.jsx("div", { className: `diff-badge ${ce === 0 ? "balanced" : "unbalanced"}`, children: H(ce) }), i.jsx("small", { className: "hint-text", children: "Maqsadli summa - Hozirgi jami" })] })] }), i.jsx("div", { className: "control-row goal-badge", children: i.jsx("div", { className: `goal-indicator ${ce === 0 ? "success" : "warning"}`, children: ce === 0 ? i.jsxs(i.Fragment, { children: [i.jsx("span", { className: "icon", children: "" }), " Maqsad: Farq 0 so'm bo'ldi!"] }) : i.jsxs(i.Fragment, { children: [i.jsx("span", { className: "icon", children: "" }), " Maqsad: Farq 0 so'm bo'lishi kerak"] }) }) })] }), i.jsxs("div", { className: "schedule-table-container", children: [i.jsxs("div", { className: "table-header", children: [i.jsx("h2", { children: "To'lovlar jadvali" }), i.jsx("div", { className: "table-actions", children: i.jsxs("button", { className: "btn-outline-primary", onClick: () => k(!0), children: [i.jsx(Ms, { width: "14", height: "14" }), " Ixtiyoriy to'lov"] }) })] }), i.jsx("div", { style: { overflowX: "auto" }, children: i.jsxs("table", { className: "schedule-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { children: "Oy" }), i.jsx("th", { children: "To'lov miqdori" }), i.jsx("th", { children: "To'langan" }), i.jsx("th", { children: "Qoldiq" }), i.jsx("th", { children: "Sana" }), i.jsx("th", { children: "Holat" }), i.jsx("th", { children: "Harakat" })] }) }), i.jsx("tbody", { children: Ee.map(se => i.jsxs("tr", { className: se.amount_paid > 0 && se.remaining <= 0 ? "row-paid" : "", children: [i.jsx("td", { className: `month-cell ${se.month_number === 0 ? "initial" : ""} clickable-month`, onClick: () => !y && M({ open: !0, payment: se }), title: y ? "" : "To'lov tarixini ko'rish", children: se.month_number === 0 ? i.jsx("span", { className: "month-badge initial", children: "Boshlang'ich" }) : i.jsxs("span", { className: "month-badge", children: [se.month_number, "-oy"] }) }), i.jsx("td", { children: y ? i.jsxs("div", { className: "amount-cell-wrapper", children: [i.jsxs("div", { className: "input-group-inline", children: [i.jsx("input", { className: `amount-input ${se.amount_paid > 0 ? "readonly" : ""}`, type: "text", value: Y(se.amount), onChange: Ne => W(se.id, ee(Ne.target.value)), disabled: se.amount_paid > 0, readOnly: se.amount_paid > 0 }), i.jsx("button", { className: `btn-edit-inline ${se.amount_paid > 0 ? "disabled" : ""}`, disabled: se.amount_paid > 0, title: se.amount_paid > 0 ? "To'langan oyni o'zgartirib bo'lmaydi" : "Tahrirlash", children: i.jsx(eu, { width: "14", height: "14" }) })] }), i.jsx("small", { className: `amount-hint ${se.amount_paid > 0 ? "protected" : ""}`, children: se.amount_paid > 0 ? i.jsx(i.Fragment, { children: " To'langan oy himoyalangan" }) : se.month_number === 0 ? i.jsx(i.Fragment, { children: " Boshlang'ich to'lov - barcha oylarni ta'sir qiladi" }) : i.jsx(i.Fragment, { children: " Faqat keyingi oylarni ta'sir qiladi" }) })] }) : i.jsx("span", { className: se.amount_paid > 0 && se.remaining <= 0 ? "text-success" : "", children: H(se.amount) }) }), i.jsx("td", { children: i.jsxs("div", { className: "paid-amount-wrapper", children: [i.jsx("span", { children: H(se.amount_paid) }), !y && se.amount_paid > 0 && i.jsxs("div", { className: "admin-actions", children: [i.jsx("button", { className: "btn-small-icon edit", title: "To'lovni tahrirlash", onClick: () => A({ open: !0, payment: se, amount: Y(se.amount_paid) }), children: i.jsx(eu, { width: "12" }) }), i.jsx("button", { className: "btn-small-icon danger", title: "To'lovni bekor qilish", onClick: () => de(se.id, "reset"), disabled: p === se.id, children: i.jsx(A0, { width: "12" }) })] })] }) }), i.jsx("td", { className: se.remaining > 0 ? "text-danger" : "text-success", children: H(se.remaining) }), i.jsx("td", { children: y ? i.jsx("input", { type: "date", className: "date-input", value: se.due_date, onChange: Ne => { const xe = [...f], K = xe.findIndex(ve => ve.id === se.id); xe[K].due_date = Ne.target.value, m(xe) } }) : fe(se.due_date) }), i.jsx("td", { children: se.remaining <= 0 && se.amount > 0 ? i.jsx("span", { className: "status-paid", children: "To'langan" }) : se.amount_paid > 0 ? i.jsx("span", { className: "status-partial", children: "Qisman" }) : i.jsx("span", { className: "status-waiting", children: "Kutilmoqda" }) }), i.jsx("td", { children: y ? null : i.jsxs("div", { className: "action-buttons", children: [i.jsx("button", { className: "btn-history-round", title: "Tarix", onClick: () => M({ open: !0, payment: se }), children: i.jsx(Jf, { width: "14", height: "14" }) }), se.remaining > 0 ? i.jsxs(i.Fragment, { children: [i.jsx("button", { className: "btn-pay", onClick: () => { N({ open: !0, payment: se }), R(Y(se.remaining)) }, disabled: p === se.id, children: "To'lov" }), se.amount_paid > 0 && i.jsx("button", { className: "btn-add", onClick: () => { O({ open: !0, payment: se }), F("") }, title: "Qo'shimcha to'lov", children: "+" })] }) : i.jsx("span", { className: "check-icon", children: "" })] }) })] }, se.id)) })] }) })] }), i.jsx(Hy, { isOpen: w.open, onClose: () => N({ open: !1, payment: null }), payment: w.payment, amount: T, onAmountChange: se => R(Y(se.target.value)), onSubmit: J, isLoading: p === w.payment?.id, formatPrice: H, title: w.payment?.month_number === 0 ? "Boshlang'ich to'lov" : `${w.payment?.month_number}-oy uchun to'lov` }), i.jsx(xD, { isOpen: v, onClose: () => k(!1), remainingBalance: r?.remaining_balance, amount: j, onAmountChange: se => S(Y(se.target.value)), onSubmit: G, isLoading: p === "custom", formatPrice: H }), i.jsx(Hy, { isOpen: P.open, onClose: () => O({ open: !1, payment: null }), payment: P.payment, amount: z, onAmountChange: se => F(Y(se.target.value)), onSubmit: ge, isLoading: p === "additional", formatPrice: H, title: P.payment ? `Qo'shimcha to'lov (${P.payment?.month_number}-oy)` : "Qo'shimcha to'lov" }), i.jsx(vD, { isOpen: B.open, onClose: () => A({ open: !1, payment: null, amount: "" }), payment: B.payment, amount: B.amount, onAmountChange: se => A({ ...B, amount: Y(se.target.value) }), onSubmit: () => de(B.payment?.id, "edit", B.amount), onReset: () => de(B.payment?.id, "reset"), isLoading: p === B.payment?.id, formatPrice: H }), i.jsx(bD, { isOpen: L.open, onClose: () => M({ open: !1, payment: null }), payment: L.payment, formatPrice: H }), i.jsx(yD, { isOpen: X, onClose: () => U(!1), contractId: l, formatPrice: H })] }) }, ei = { getAll: l => we.get("/leads/", { params: l }), get: l => we.get(`/leads/${l}/`), create: l => { const e = l instanceof FormData ? { headers: { "Content-Type": "multipart/form-data" } } : {}; return we.post("/leads/", l, e) }, update: (l, e) => { const t = e instanceof FormData ? { headers: { "Content-Type": "multipart/form-data" } } : {}; return we.put(`/leads/${l}/`, e, t) }, patch: (l, e) => we.patch(`/leads/${l}/`, e), delete: l => we.delete(`/leads/${l}/`), getStages: () => we.get("/lead-stages/"), createStage: l => we.post("/lead-stages/", l), updateStage: (l, e) => we.put(`/lead-stages/${l}/`, e), deleteStage: l => we.delete(`/lead-stages/${l}/`), reorderStages: l => we.post("/lead-stages/reorder/", { orders: l }), getKanban: l => we.get("/leads/kanban/", { params: l }), getStatistics: l => we.get("/leads/statistics/", { params: l }), convert: (l, e) => we.post(`/leads/${l}/convert/`, e) }, jD = () => i.jsx("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" }) }), wD = ({ value: l, onChange: e, placeholder: t }) => { const s = u => { if (!u) return "+998"; let d = u.replace(/\D/g, ""); d.startsWith("998") || (d.startsWith("8") ? d = "998" + d.substring(1) : d.length > 0 ? d = "998" + d : d = "998"); let f = "+998"; return d.length > 3 && (f += " " + d.substring(3, 5)), d.length > 5 && (f += " " + d.substring(5, 8)), d.length > 8 && (f += " " + d.substring(8, 10)), d.length > 10 && (f += " " + d.substring(10, 12)), f }, r = u => { const d = s(u.target.value); e(d) }, o = s(l); return i.jsxs("div", { className: "phone-input-wrapper", children: [i.jsx(jD, {}), i.jsx("input", { type: "text", value: o, onChange: r, placeholder: t || "+998 XX XXX XX XX", className: "phone-input" })] }) }, kD = ({ isOpen: l, onClose: e, lead: t, initialStageId: s, onSuccess: r }) => { const o = !!t, [u, d] = C.useState(!1), [f, m] = C.useState(!1), [p, g] = C.useState([]), y = [{ value: "", label: "Qo'ng'iroq qilinmagan" }, { value: "answered", label: "Javob berdi" }, { value: "not_answered", label: "Javob bermadi" }, { value: "client_answered", label: "Mijoz javob berdi" }, { value: "client_not_answered", label: "Mijoz javob bermadi" }], [b, v] = C.useState({ client_name: "", phone_number: "+998", stage: "", call_status: "", duration_hours: 0, duration_minutes: 0, duration_seconds: 0, follow_up_date: "", follow_up_time: "", audio_file: null, audio_file_name: "", notes: "", is_considering: !1 }); C.useEffect(() => { if (l) if (k(), o && t) { let R = 0, P = 0, O = 0; if (t.call_duration) { const B = t.call_duration.split(":"); R = parseInt(B[0]) || 0, P = parseInt(B[1]) || 0, O = parseInt(B[2]) || 0 } let z = "", F = ""; if (t.follow_up_date) { const B = new Date(t.follow_up_date); z = B.toISOString().split("T")[0], F = B.toTimeString().substring(0, 5) } v({ client_name: t.client_name || "", phone_number: t.phone_number || "+998", stage: (t.stage?.id || t.stage || "").toString(), call_status: t.call_status || "", duration_hours: R, duration_minutes: P, duration_seconds: O, follow_up_date: z, follow_up_time: F, notes: t.notes || "", is_considering: t.is_considering || !1 }) } else v({ client_name: "", phone_number: "+998", stage: s ? s.toString() : "", call_status: "", duration_hours: 0, duration_minutes: 0, duration_seconds: 0, follow_up_date: "", follow_up_time: "", audio_file: null, audio_file_name: "", notes: "" }) }, [l, t, s]); const k = async () => { try { const R = await ei.getStages(), P = Array.isArray(R.data) ? R.data : R.data.results || []; if (g(P), !o && !b.stage && P.length > 0) { const O = s || P[0]?.id?.toString(); v(z => ({ ...z, stage: O })) } } catch (R) { console.error(R), g([]) } }, j = R => { const { name: P, value: O, type: z, files: F } = R.target; z === "file" && F[0] ? v(B => ({ ...B, audio_file: F[0], audio_file_name: F[0].name })) : v(B => ({ ...B, [P]: O })) }, S = () => { e() }, w = async R => { if (R && R.preventDefault(), b.phone_number.replace(/\D/g, "").length < 12) { $.error("Telefon raqam to'liq kiritilishi kerak"); return } d(!0); try { const O = new FormData; O.append("client_name", b.client_name), O.append("phone_number", b.phone_number), O.append("stage", b.stage), O.append("call_status", b.call_status); const z = parseInt(b.duration_hours) || 0, F = parseInt(b.duration_minutes) || 0, B = parseInt(b.duration_seconds) || 0; if (z > 0 || F > 0 || B > 0) { const A = `${String(z).padStart(2, "0")}:${String(F).padStart(2, "0")}:${String(B).padStart(2, "0")}`; O.append("call_duration", A) } if (b.follow_up_date) { const A = b.follow_up_time || "00:00"; O.append("follow_up_date", `${b.follow_up_date}T${A}`) } else O.append("follow_up_date", ""); O.append("is_considering", b.is_considering ? "true" : "false"), b.audio_file && O.append("audio_recording", b.audio_file), O.append("notes", b.notes), o ? (await ei.update(t.id, O), $.success("Lead yangilandi")) : (await ei.create(O), $.success("Yangi lead qo'shildi")), r(), S() } catch (O) { console.error(O), $.error("Xatolik yuz berdi") } finally { d(!1) } }, N = async () => { if (window.confirm("Bu leadni o'chirishni xohlaysizmi? Bu amalni qaytarib bo'lmaydi.")) { m(!0); try { await ei.delete(t.id), $.success("Lead o'chirildi"), r(), S() } catch (R) { console.error(R), $.error("O'chirishda xatolik") } finally { m(!1) } } }, T = i.jsxs("div", { style: { display: "flex", width: "100%", alignItems: "center" }, children: [o && i.jsx("button", { type: "button", className: "btn-v2 btn-v2-danger", onClick: N, disabled: f, children: f ? "O'chirilmoqda..." : "O'chirish" }), i.jsx("div", { style: { flex: 1 } }), i.jsx("button", { type: "button", className: "btn-v2 btn-v2-danger-light", onClick: S, style: { marginRight: "8px" }, children: "Bekor qilish" }), i.jsx("button", { type: "submit", className: "btn-v2 btn-v2-primary", disabled: u, onClick: w, children: u ? "Saqlanmoqda..." : o ? "Yangilash" : "Saqlash" })] }); return i.jsx(la, { isOpen: l, onClose: S, title: o ? "Leadni tahrirlash" : "Lead qo'shish", size: "lg", footer: T, children: i.jsx("form", { onSubmit: w, children: i.jsxs("div", { className: "modal-form-body", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Mijoz ismi" }), i.jsx("input", { type: "text", name: "client_name", value: b.client_name, onChange: j, placeholder: "To'liq ismni kiriting" })] }), i.jsxs("div", { className: "form-row two-cols", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Telefon raqami" }), i.jsx(wD, { value: b.phone_number, onChange: R => v(P => ({ ...P, phone_number: R })) })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Qo'ng'iroq holati" }), i.jsx("select", { name: "call_status", value: b.call_status, onChange: j, children: y.map(R => i.jsx("option", { value: R.value, children: R.label }, R.value)) })] })] }), i.jsxs("div", { className: "form-row two-cols", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Qo'ng'iroq davomiyligi" }), i.jsx("span", { className: "info-text", children: b.duration_hours > 0 || b.duration_minutes > 0 || b.duration_seconds > 0 ? `${String(b.duration_hours).padStart(2, "0")}:${String(b.duration_minutes).padStart(2, "0")}:${String(b.duration_seconds).padStart(2, "0")}` : "Mavjud emas" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Audio yozuv" }), t?.audio_recording ? i.jsx("audio", { controls: !0, src: t.audio_recording, style: { height: "32px" } }) : i.jsx("span", { className: "info-text", children: "Mavjud emas" })] })] }), i.jsxs("div", { className: "form-row two-cols", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Keyingi qo'ng'iroq sanasi" }), i.jsx("input", { type: "date", name: "follow_up_date", value: b.follow_up_date, onChange: j })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Keyingi qo'ng'iroq vaqti" }), i.jsx("input", { type: "time", name: "follow_up_time", value: b.follow_up_time, onChange: j })] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Bosqich (Status)" }), i.jsxs("select", { name: "stage", value: b.stage, onChange: j, children: [i.jsx("option", { value: "", children: "Bosqichni tanlang" }), p.map(R => i.jsx("option", { value: R.id, children: R.name }, R.id))] })] }), i.jsx("div", { className: "form-group", children: i.jsxs("label", { style: { display: "flex", alignItems: "center", gap: "8px", cursor: "pointer" }, children: [i.jsx("input", { type: "checkbox", name: "is_considering", checked: b.is_considering, onChange: R => v(P => ({ ...P, is_considering: R.target.checked })), style: { width: "18px", height: "18px", accentColor: "#f59e0b" } }), "O'ylab ko'ryabdi"] }) }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Izohlar" }), i.jsx("textarea", { name: "notes", value: b.notes, onChange: j, placeholder: "Qo'ng'iroq haqida qo'shimcha ma'lumotlar...", rows: 3 })] })] }) }) }) }, SD = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "12", y1: "5", x2: "12", y2: "19" }), i.jsx("line", { x1: "5", y1: "12", x2: "19", y2: "12" })] }), ND = () => { Mn("Leadlar"); const l = bi(), e = Oi(), [t, s] = C.useState(0), [r, o] = C.useState({ open: !1, lead: null, initialStageId: null, type: "create" }), [u, d] = C.useState(0); C.useEffect(() => { (e.pathname === "/leads" || e.pathname === "/leads/") && l("kanban", { replace: !0 }) }, [e.pathname, l]); const f = (k = null) => { o({ open: !0, lead: null, initialStageId: k, type: "create" }) }, m = k => { o({ open: !0, lead: k, initialStageId: null, type: "edit" }) }, p = () => { o({ open: !1, lead: null, initialStageId: null, type: "create" }) }, g = () => { d(k => k + 1) }, y = k => { s(k) }, v = e.pathname.includes("/leads/list") ? "list" : "kanban"; return i.jsxs("div", { className: "leads-page", children: [i.jsxs("div", { className: "page-header", children: [i.jsx("div", { className: "header-left", children: i.jsxs("div", { children: [i.jsx("h1", { className: "page-title", children: "Leadlar" }), i.jsxs("p", { className: "page-subtitle", children: ["Jami ", t, " ta lead"] })] }) }), i.jsx("div", { className: "header-actions", children: i.jsxs("button", { className: "btn-primary", onClick: () => f(), children: [i.jsx(SD, {}), "Lead qo'shish"] }) })] }), i.jsxs("div", { className: "leads-tabs", children: [i.jsxs("button", { className: `leads-tab ${v === "kanban" ? "active" : ""}`, onClick: () => l("/leads/kanban"), children: [i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "3", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "3", width: "7", height: "7" }), i.jsx("rect", { x: "3", y: "14", width: "7", height: "7" }), i.jsx("rect", { x: "14", y: "14", width: "7", height: "7" })] }), "Kanban"] }), i.jsxs("button", { className: `leads-tab ${v === "list" ? "active" : ""}`, onClick: () => l("/leads/list"), children: [i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "8", y1: "6", x2: "21", y2: "6" }), i.jsx("line", { x1: "8", y1: "12", x2: "21", y2: "12" }), i.jsx("line", { x1: "8", y1: "18", x2: "21", y2: "18" }), i.jsx("line", { x1: "3", y1: "6", x2: "3.01", y2: "6" }), i.jsx("line", { x1: "3", y1: "12", x2: "3.01", y2: "12" }), i.jsx("line", { x1: "3", y1: "18", x2: "3.01", y2: "18" })] }), "Ro'yxat"] })] }), i.jsx("div", { className: "page-content", children: i.jsx(l2, { context: { openCreateModal: f, openEditModal: m, refreshTrigger: u, updateTotalLeads: y } }) }), i.jsx(kD, { isOpen: r.open, onClose: p, lead: r.lead, initialStageId: r.initialStageId, onSuccess: g })] }) }, R0 = l => we.get("/users/", { params: l }), CD = l => we.post("/users/", l), TD = (l, e) => we.patch(`/users/${l}/`, e), DD = l => we.delete(`/users/${l}/`), AD = () => i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" }), i.jsx("path", { d: "M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" })] }), MD = () => i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("polyline", { points: "3 6 5 6 21 6" }), i.jsx("path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" })] }), PD = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "12", y1: "5", x2: "12", y2: "19" }), i.jsx("line", { x1: "5", y1: "12", x2: "19", y2: "12" })] }), OD = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "9", cy: "5", r: "1" }), i.jsx("circle", { cx: "9", cy: "12", r: "1" }), i.jsx("circle", { cx: "9", cy: "19", r: "1" }), i.jsx("circle", { cx: "15", cy: "5", r: "1" }), i.jsx("circle", { cx: "15", cy: "12", r: "1" }), i.jsx("circle", { cx: "15", cy: "19", r: "1" })] }), ED = () => i.jsxs("svg", { width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }), BD = ["#ef4444", "#f97316", "#eab308", "#84cc16", "#22c55e", "#14b8a6", "#0ea5e9", "#3b82f6", "#8b5cf6", "#d946ef", "#ec4899", "#f43f5e"], Iy = l => l.toLowerCase().replace(/[^a-z0-9\s-]/g, "").replace(/\s+/g, "_").replace(/^-+|-+$/g, ""), RD = ({ isOpen: l, onClose: e, onSuccess: t }) => { const [s, r] = C.useState([]), [o, u] = C.useState(!1), [d, f] = C.useState(null), [m, p] = C.useState(!1), [g, y] = C.useState(null), [b, v] = C.useState(!1), [k, j] = C.useState(!1), [S, w] = C.useState({ name: "", key: "", color: "#3b82f6", description: "", order: 0 }); C.useEffect(() => { l && N() }, [l]); const N = async () => { u(!0); try { const Y = await ei.getStages(), ee = Array.isArray(Y.data) ? Y.data : Y.data.results || []; r(ee) } catch (Y) { console.error(Y), $.error("Bosqichlarni yuklashda xatolik"), r([]) } finally { u(!1) } }, T = Y => { const ee = Y.target.value; w(fe => ({ ...fe, name: ee, key: d ? fe.key : Iy(ee) })) }, R = async () => { if (!S.name.trim()) { $.error("Bosqich nomi kiritilishi shart"); return } if (!S.key.trim()) { $.error("Kalit kiritilishi shart"); return } try { const Y = { name: S.name, key: S.key, color: S.color, description: S.description, order: parseInt(S.order) || 0 }; d ? (await ei.updateStage(d, Y), $.success("Bosqich yangilandi")) : (await ei.createStage(Y), $.success("Yangi bosqich qo'shildi")), F(), N(), t && t() } catch (Y) { console.error(Y), $.error("Xatolik yuz berdi") } }, P = Y => { w({ name: Y.name, key: Y.key || Iy(Y.name), color: Y.color || "#3b82f6", description: Y.description || "", order: Y.order || 0 }), f(Y.id), p(!0) }, O = async (Y, ee) => { if (ee) { $.error("Tizim bosqichini o'chirib bo'lmaydi"); return } if (window.confirm("Bu bosqichni o'chirmoqchimisiz? Barcha leadlar boshqa bosqichga o'tkaziladi.")) try { await ei.deleteStage(Y), $.success("Bosqich o'chirildi"), N(), t && t() } catch (fe) { console.error(fe), $.error("O'chirishda xatolik") } }, z = () => { w({ name: "", key: "", color: "#3b82f6", description: "", order: 0 }), f(null), p(!1) }, F = () => { j(!0), setTimeout(() => { z(), j(!1) }, 300) }, B = () => { v(!0), setTimeout(() => { z(), e(), v(!1) }, 300) }, A = (Y, ee) => { y(ee), Y.dataTransfer.effectAllowed = "move", setTimeout(() => { Y.target.classList.add("dragging") }, 0) }, L = (Y, ee) => { Y.preventDefault(), !(g === null || g === ee) && Y.currentTarget.classList.add("drag-over") }, M = Y => { Y.currentTarget.classList.remove("drag-over") }, X = Y => { Y.target.classList.remove("dragging"), y(null), document.querySelectorAll(".stage-row").forEach(ee => ee.classList.remove("drag-over")) }, U = async (Y, ee) => { if (Y.preventDefault(), Y.currentTarget.classList.remove("drag-over"), g === null || g === ee) return; const fe = [...s].sort((W, ae) => (W.order || 0) - (ae.order || 0)), [q] = fe.splice(g, 1); fe.splice(ee, 0, q); const Q = fe.map((W, ae) => ({ id: W.id, order: ae })); if (Q.some((W, ae) => s.sort((G, ge) => (G.order || 0) - (ge.order || 0))[ae].id !== W.id)) { r(fe.map((W, ae) => ({ ...W, order: ae }))); try { await ei.reorderStages(Q), $.success("Bosqichlar tartibi saqlandi"), t && t() } catch (W) { console.error("Reorder error:", W), $.error("Tartibni saqlashda xatolik"), N() } } }, I = i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "4px" }, children: [i.jsx("span", { children: "Bosqichlarni boshqarish" }), i.jsx("span", { style: { fontSize: "13px", fontWeight: "400", color: "var(--text-secondary)" }, children: "Lead bosqichlarini yaratish, tahrirlash va o'chirish" })] }), H = m ? null : i.jsxs("button", { className: "btn-v2 btn-v2-primary", onClick: () => { p(!0), f(null), w({ name: "", key: "", color: "#3b82f6", description: "", order: s.length }) }, children: [i.jsx(PD, {}), " Bosqich qo'shish"] }); return i.jsxs(la, { isOpen: l, onClose: B, title: I, size: "lg", className: b ? "closing" : "", footer: H, children: [(m || k) && i.jsxs("div", { className: `status-form ${k ? "closing" : ""}`, children: [i.jsxs("div", { className: "status-form-header", children: [i.jsx("h3", { children: d ? "Bosqichni tahrirlash" : "Bosqich qo'shish" }), i.jsx("button", { className: "modal-close", onClick: F, children: i.jsx(ED, {}) })] }), i.jsxs("div", { className: "status-form-body", children: [i.jsxs("div", { className: "form-row", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Bosqich nomi *" }), i.jsx("input", { type: "text", value: S.name, onChange: T, placeholder: "Masalan: Yangi lead" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Kalit (inglizcha) *" }), i.jsx("input", { type: "text", value: S.key, onChange: Y => w(ee => ({ ...ee, key: Y.target.value })), placeholder: "yangi_lead", disabled: d && s.find(Y => Y.id === d)?.is_system_stage }), i.jsx("span", { className: "hint-text", children: "Avtomatik generatsiya qilinadi" })] })] }), i.jsxs("div", { className: "form-row", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Tartib raqami" }), i.jsx("input", { type: "number", value: S.order, onChange: Y => w(ee => ({ ...ee, order: Y.target.value })), min: "0" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Rang" }), i.jsxs("div", { className: "color-picker-row", children: [i.jsx("input", { type: "color", value: S.color, onChange: Y => w(ee => ({ ...ee, color: Y.target.value })), className: "color-input" }), i.jsx("span", { className: "color-value", children: S.color })] })] })] }), i.jsxs("div", { className: "form-group full-width", children: [i.jsx("label", { children: "Tavsif" }), i.jsx("textarea", { value: S.description, onChange: Y => w(ee => ({ ...ee, description: Y.target.value })), placeholder: "Bosqich haqida qisqacha tavsif...", rows: 2 })] }), i.jsx("div", { className: "color-presets", children: BD.map(Y => i.jsx("button", { type: "button", className: `color-btn ${S.color === Y ? "active" : ""}`, style: { background: Y }, onClick: () => w(ee => ({ ...ee, color: Y })) }, Y)) }), i.jsxs("div", { className: "form-actions", children: [i.jsx("button", { type: "button", className: "cancel-btn", onClick: F, children: "Bekor qilish" }), i.jsx("button", { type: "button", className: "save-btn", onClick: R, children: d ? "Yangilash" : "Yaratish" })] })] })] }), i.jsxs("div", { className: "stages-list", children: [i.jsxs("div", { className: "stages-header", children: [i.jsx("span", { className: "col-grip" }), i.jsx("span", { className: "col-name", children: "Bosqich nomi" }), i.jsx("span", { className: "col-key", children: "Kalit" }), i.jsx("span", { className: "col-color", children: "Rang" }), i.jsx("span", { className: "col-order", children: "Tartib" }), i.jsx("span", { className: "col-actions", children: "Amallar" })] }), o ? i.jsx("div", { className: "loading-state", children: "Yuklanmoqda..." }) : s.length === 0 ? i.jsx("div", { className: "empty-state", children: "Bosqichlar topilmadi" }) : s.sort((Y, ee) => (Y.order || 0) - (ee.order || 0)).map((Y, ee) => i.jsxs("div", { className: `stage-row ${g === ee ? "dragging" : ""}`, draggable: !0, onDragStart: fe => A(fe, ee), onDragOver: fe => L(fe, ee), onDragLeave: M, onDragEnd: X, onDrop: fe => U(fe, ee), children: [i.jsx("span", { className: "col-grip", title: "Tartibni o'zgartirish uchun suring", children: i.jsx(OD, {}) }), i.jsxs("span", { className: "col-name", children: [i.jsx("div", { className: "stage-color-dot", style: { background: Y.color || "#3b82f6" } }), Y.name, Y.is_system_stage && i.jsx("span", { className: "system-badge", children: "Tizim" })] }), i.jsx("span", { className: "col-key", children: Y.key || "-" }), i.jsxs("span", { className: "col-color", children: [i.jsx("span", { className: "color-preview", style: { background: Y.color || "#3b82f6" } }), Y.color || "#3b82f6"] }), i.jsx("span", { className: "col-order", children: Y.order || 0 }), i.jsxs("span", { className: "col-actions", children: [i.jsx("button", { className: "action-btn edit", onClick: () => P(Y), title: "Tahrirlash", children: i.jsx(AD, {}) }), i.jsx("button", { className: "action-btn delete", onClick: () => O(Y.id, Y.is_system_stage), title: Y.is_system_stage ? "Tizim bosqichini o'chirib bo'lmaydi" : "O'chirish", disabled: Y.is_system_stage, children: i.jsx(MD, {}) })] })] }, Y.id))] })] }) }, L0 = ({ isOpen: l, onClose: e, lead: t, onSuccess: s }) => { const [r, o] = C.useState(!1), [u, d] = C.useState(t?.client_name || ""), f = async m => { m.preventDefault(), o(!0); try { await ei.convert(t.id, { full_name: u }), $.success("Lead muvaffaqiyatli mijozga aylantirildi"), s(), e() } catch (p) { console.error(p), $.error(p.response?.data?.error || "Xatolik yuz berdi") } finally { o(!1) } }; return i.jsxs(la, { isOpen: l, onClose: e, title: "Mijozga aylantirish", size: "md", footer: i.jsxs(i.Fragment, { children: [i.jsx("button", { type: "button", className: "btn-v2 btn-v2-secondary", onClick: e, disabled: r, children: "Bekor qilish" }), i.jsx("button", { type: "submit", className: "btn-v2 btn-v2-primary", disabled: r, onClick: f, children: r ? "Aylantirilmoqda..." : "Aylantirish" })] }), children: [i.jsx(Hu, { type: "info", children: "Leadni mijozga aylantirish uchun mijozning to'liq ismini tasdiqlang." }), i.jsx("form", { onSubmit: f, children: i.jsx(zu, { label: "Mijozning to'liq ismi", required: !0, children: i.jsx("input", { type: "text", value: u, onChange: m => d(m.target.value), placeholder: "To'liq ismni kiriting", required: !0 }) }) })] }) }, LD = ({ stageId: l, onCancel: e, onSuccess: t }) => { const [s, r] = C.useState(!1), [o, u] = C.useState({ client_name: "", phone_number: "+998", notes: "" }), d = p => { const { name: g, value: y } = p.target; u(b => ({ ...b, [g]: y })) }, f = p => { let g = p.target.value.replace(/\D/g, ""); g.startsWith("998") || (g.startsWith("8") ? g = "998" + g.substring(1) : g.length > 0 ? g = "998" + g : g = "998"); let y = "+998"; g.length > 3 && (y += " " + g.substring(3, 5)), g.length > 5 && (y += " " + g.substring(5, 8)), g.length > 8 && (y += " " + g.substring(8, 10)), g.length > 10 && (y += " " + g.substring(10, 12)), u(b => ({ ...b, phone_number: y })) }, m = async p => { if (p.preventDefault(), o.phone_number.length < 17) { $.error("Telefon raqamni to'liq kiriting"); return } r(!0); try { const g = new FormData; g.append("client_name", o.client_name), g.append("phone_number", o.phone_number), g.append("stage", l), o.notes && g.append("notes", o.notes), await ei.create(g), $.success("Lead qo'shildi"), t(), u({ client_name: "", phone_number: "+998", notes: "" }) } catch (g) { console.error(g), $.error("Xatolik yuz berdi") } finally { r(!1) } }; return i.jsx("div", { className: "quick-lead-form", children: i.jsxs("form", { onSubmit: m, children: [i.jsxs("div", { className: "form-group-sm", children: [i.jsx("label", { children: "Mijoz ismi" }), i.jsx("input", { type: "text", name: "client_name", value: o.client_name, onChange: d, placeholder: "Mijoz ismini kiriting", autoFocus: !0 })] }), i.jsxs("div", { className: "form-group-sm", children: [i.jsx("label", { children: "Telefon raqami *" }), i.jsx("input", { type: "text", name: "phone_number", value: o.phone_number, onChange: f, placeholder: "+998" })] }), i.jsxs("div", { className: "form-group-sm", children: [i.jsx("label", { children: "Izoh" }), i.jsx("textarea", { name: "notes", value: o.notes, onChange: d, placeholder: "Qo'shimcha ma'lumotlar...", rows: 2 })] }), i.jsxs("div", { className: "quick-form-actions", children: [i.jsx("button", { type: "submit", className: "btn-v2 btn-v2-success btn-sm", disabled: s, children: s ? "..." : i.jsxs(i.Fragment, { children: [i.jsx("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2.5", children: i.jsx("polyline", { points: "20 6 9 17 4 12" }) }), i.jsx("span", { children: "Saqlash" })] }) }), i.jsx("button", { type: "button", className: "btn-v2 btn-v2-light btn-sm", onClick: e, disabled: s, children: " Bekor qilish" })] })] }) }) }, z0 = l => we.get("/forms/", { params: l }), zD = l => we.post("/forms/", l), FD = (l, e) => we.put(`/forms/${l}/`, e), HD = l => we.delete(`/forms/${l}/`), ID = l => we.get(`/public/forms/${l}/`), qD = (l, e) => we.post(`/public/forms/${l}/submit/`, { data: e }), YD = () => i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "11", cy: "11", r: "8" }), i.jsx("line", { x1: "21", y1: "21", x2: "16.65", y2: "16.65" })] }), XD = () => i.jsxs("svg", { width: "18", height: "18", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "12", cy: "12", r: "3" }), i.jsx("path", { d: "M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1-2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" })] }), em = () => i.jsx("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" }) }), F0 = () => i.jsxs("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("rect", { x: "3", y: "4", width: "18", height: "18", rx: "2", ry: "2" }), i.jsx("line", { x1: "16", y1: "2", x2: "16", y2: "6" }), i.jsx("line", { x1: "8", y1: "2", x2: "8", y2: "6" }), i.jsx("line", { x1: "3", y1: "10", x2: "21", y2: "10" })] }), UD = () => i.jsxs("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" }), i.jsx("circle", { cx: "12", cy: "7", r: "4" })] }), VD = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("polyline", { points: "23 4 23 10 17 10" }), i.jsx("path", { d: "M20.49 15a9 9 0 1 1-2.12-9.36L23 10" })] }), Vc = ({ title: l, value: e, icon: t, gradient: s }) => i.jsxs("div", { className: "stat-card", style: { background: s }, children: [i.jsxs("div", { className: "stat-info", children: [i.jsx("span", { className: "stat-title", children: l }), i.jsx("span", { className: "stat-value", children: e })] }), i.jsx("div", { className: "stat-icon", children: t })] }), WD = ({ lead: l, onClick: e, onConvert: t, onDragStart: s, onDragEnd: r }) => { const o = p => { if (!p) return ""; const g = new Date(p), y = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"], b = g.getDate(), v = y[g.getMonth()], k = g.getFullYear(), j = String(g.getHours()).padStart(2, "0"), S = String(g.getMinutes()).padStart(2, "0"); return `${b}-${v} ${k} ${j}:${S}` }, u = p => { if (!p) return ""; const g = p.replace(/\D/g, ""); return g.length >= 12 ? `+${g.slice(0, 3)} ${g.slice(3, 5)} ${g.slice(5, 8)} ${g.slice(8, 10)} ${g.slice(10, 12)}` : p }, d = p => p ? p.split(" ").map(g => g[0]).join("").substring(0, 2).toUpperCase() : "?", m = (p => ({ answered: { label: "Javob berdi", class: "status-answered" }, not_answered: { label: "Javob bermadi", class: "status-not-answered" }, client_answered: { label: "Mijoz javob berdi", class: "status-client-answered" }, client_not_answered: { label: "Mijoz javob bermadi", class: "status-client-not-answered" } })[p] || null)(l.call_status); return i.jsxs("div", { className: "lead-card", draggable: !l.is_converted, onDragStart: p => s(p, l), onDragEnd: r, onClick: e, children: [i.jsxs("div", { className: "lead-card-top", children: [i.jsx("div", { className: "lead-avatar", children: d(l.client_name) }), i.jsxs("div", { className: "lead-info", children: [i.jsx("span", { className: "lead-name", children: l.client_name || "Noma'lum" }), i.jsxs("span", { className: "lead-date", children: [i.jsx(F0, {}), " ", o(l.created_at)] })] })] }), i.jsxs("div", { className: "lead-card-row", children: [i.jsx(em, {}), i.jsx("span", { children: u(l.phone_number) })] }), m && i.jsx("div", { className: "lead-card-row", children: i.jsx("span", { className: `lead-status-badge ${m.class}`, children: m.label }) }), l.is_considering && i.jsx("div", { className: "lead-card-row", children: i.jsx("span", { style: { background: "rgba(245,158,11,0.12)", color: "#f59e0b", padding: "2px 10px", borderRadius: "20px", fontSize: "11.5px", fontWeight: 600, border: "1px solid rgba(245,158,11,0.25)" }, children: " O'ylab ko'ryabdi" }) }), l.follow_up_date && (() => { const p = new Date, y = new Date(l.follow_up_date) - p, b = Math.ceil(y / (1e3 * 60 * 60 * 24)), v = o(l.follow_up_date); let k, j, S, w; return b < 0 ? (k = "#ef4444", j = "rgba(239,68,68,0.1)", S = "", w = `${Math.abs(b)} kun o'tdi!`) : b === 0 ? (k = "#f97316", j = "rgba(249,115,22,0.1)", S = "", w = "Bugun!") : b <= 3 ? (k = "#f59e0b", j = "rgba(245,158,11,0.1)", S = "", w = `${b} kun qoldi`) : (k = "#10b981", j = "rgba(16,185,129,0.1)", S = "", w = `${b} kun qoldi`), i.jsxs("div", { className: "lead-card-row", style: { background: j, borderRadius: "6px", padding: "4px 8px", color: k, fontSize: "11.5px", fontWeight: 600, gap: "4px", border: `1px solid ${k}22` }, children: [i.jsx("span", { children: S }), i.jsx("span", { children: w }), i.jsx("span", { style: { opacity: .7, marginLeft: "auto", fontWeight: 500 }, children: v })] }) })(), i.jsxs("div", { className: "lead-card-actions", children: [i.jsx("span", { className: "action-link", onClick: p => { p.stopPropagation(), e() }, children: "Tahrirlash" }), !l.is_converted && i.jsx("span", { className: "action-link delete", onClick: p => { p.stopPropagation(), t(l) }, children: "Aylantirish" })] })] }) }, GD = () => { const { openEditModal: l, refreshTrigger: e, updateTotalLeads: t } = fv(), [s, r] = C.useState([]), [o, u] = C.useState({ total: 0, today: 0, converted: 0, answered: 0 }), [d, f] = C.useState(!0), [m, p] = C.useState(""), [g, y] = C.useState(""), [b, v] = C.useState(""), [k, j] = C.useState(!1), [S, w] = C.useState({ isOpen: !1, lead: null }), [N, T] = C.useState(null), [R, P] = C.useState(null), [O, z] = C.useState([]), [F, B] = C.useState("all"), [A, L] = C.useState("all"), [M, X] = C.useState("all"), [U, I] = C.useState([]), [H, Y] = C.useState(!1); C.useEffect(() => { (async () => { try { const ge = await we.get("/user/"); if (Y(ge.data.is_superuser), ge.data.is_superuser) { const de = await R0(); I(de.data?.results || de.data || []) } } catch (ge) { console.error("User info fetch error:", ge) } })() }, []), C.useEffect(() => { (async () => { try { const ge = await z0(), de = ge.data?.results || ge.data; z(Array.isArray(de) ? de : []) } catch (ge) { console.error("Fetch forms error:", ge) } })() }, []); const ee = async () => { s.length === 0 && f(!0); try { const G = {}; m && (G.search = m), g && (G.date_from = g), b && (G.date_to = b), A !== "all" && (G.operator = A), M !== "all" && (G.follow_up = M); const [ge, de] = await Promise.all([ei.getKanban(G), ei.getStatistics().catch(() => ({ data: {} }))]); r(ge.data), de.data && (u({ total: de.data.total || 0, today: de.data.today || 0, converted: de.data.converted || 0, answered: de.data.answered || 0 }), t && t(de.data.total || 0)) } catch (G) { console.error("Load error:", G) } finally { f(!1) } }; C.useEffect(() => { ee() }, [e, m, g, b, A, M]); const fe = (G, ge) => { ge.is_converted || (T(ge), G.dataTransfer.effectAllowed = "move", G.target.classList.add("dragging")) }, q = G => { G.target.classList.remove("dragging"), T(null) }, Q = G => { G.preventDefault(), G.dataTransfer.dropEffect = "move" }, ce = G => { G.preventDefault(), G.currentTarget.classList.add("drag-over") }, W = G => { G.currentTarget.contains(G.relatedTarget) || G.currentTarget.classList.remove("drag-over") }, ae = async (G, ge) => { if (G.preventDefault(), G.currentTarget.classList.remove("drag-over"), !N || N.stage === ge) return; const de = N.stage, Se = [...s]; r(Ee => Ee.map(be => be.id === de ? { ...be, items: (be.items || []).filter(se => se.id !== N.id) } : be.id === ge ? { ...be, items: [...be.items || [], { ...N, stage: ge }] } : be)); try { await ei.patch(N.id, { stage: ge }), $.success("Lead bosqichi o'zgartirildi"), ee() } catch (Ee) { console.error(Ee), $.error("Xatolik yuz berdi, o'zgarish bekor qilindi"), r(Se) } }, J = G => { const ge = ["#eab308", "#f97316", "#10b981", "#3b82f6", "#8b5cf6", "#ec4899", "#06b6d4"]; return ge[G % ge.length] }; return i.jsxs("div", { className: "leads-kanban-container", children: [i.jsxs("div", { className: "stats-row", children: [i.jsx(Vc, { title: "Jami Leadlar", value: o.total, gradient: "var(--gradient-primary)", icon: i.jsx(em, {}) }), i.jsx(Vc, { title: "Bugungi", value: o.today, gradient: "var(--gradient-success)", icon: i.jsx(F0, {}) }), i.jsx(Vc, { title: "Mijozga Aylangan", value: o.converted, gradient: "linear-gradient(135deg, #f59e0b 0%, #d97706 100%)", icon: i.jsx(UD, {}) }), i.jsx(Vc, { title: "Javob Bergan", value: o.answered, gradient: "linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)", icon: i.jsx(em, {}) })] }), (() => { const G = new Date; let ge = 0, de = 0, Se = 0; return s.forEach(Ee => { (Ee.items || []).forEach(be => { if (!be.follow_up_date) return; const se = Math.ceil((new Date(be.follow_up_date) - G) / (1e3 * 60 * 60 * 24)); se < 0 ? ge++ : se === 0 ? de++ : se <= 3 && Se++ }) }), ge === 0 && de === 0 && Se === 0 ? null : i.jsxs("div", { style: { display: "flex", flexWrap: "wrap", gap: "10px", padding: "10px 14px", borderRadius: "10px", marginBottom: "12px", background: ge > 0 ? "rgba(239,68,68,0.08)" : "rgba(245,158,11,0.08)", border: `1px solid ${ge > 0 ? "rgba(239,68,68,0.2)" : "rgba(245,158,11,0.2)"}` }, children: [ge > 0 && i.jsxs("span", { style: { fontSize: "13px", fontWeight: 600, color: "#ef4444" }, children: [" ", ge, " ta leadning muddati o'tgan"] }), de > 0 && i.jsxs("span", { style: { fontSize: "13px", fontWeight: 600, color: "#f97316" }, children: [" ", de, " ta leadga bugun qo'ng'iroq qilish kerak"] }), Se > 0 && i.jsxs("span", { style: { fontSize: "13px", fontWeight: 600, color: "#f59e0b" }, children: [" ", Se, " ta lead 3 kun ichida"] })] }) })(), i.jsxs("div", { className: "leads-toolbar", children: [i.jsxs("div", { className: "toolbar-left", children: [i.jsxs("div", { className: "leads-search-box", children: [i.jsx(YD, {}), i.jsx("input", { type: "text", placeholder: "Qidirish...", value: m, onChange: G => p(G.target.value) })] }), i.jsxs("div", { className: "date-filter-group", children: [i.jsxs("div", { className: "date-filter", children: [i.jsx("label", { children: "Dan" }), i.jsx("input", { type: "date", value: g, onChange: G => y(G.target.value) })] }), i.jsx("span", { className: "date-filter-divider" }), i.jsxs("div", { className: "date-filter", children: [i.jsx("label", { children: "Gacha" }), i.jsx("input", { type: "date", value: b, onChange: G => v(G.target.value) })] }), (g || b) && i.jsx("button", { className: "clear-filter-btn", onClick: () => { y(""), v("") }, title: "Filterni tozalash", children: "" })] }), i.jsxs("div", { className: "filter-group-v2", children: [H && i.jsxs("select", { className: "toolbar-select", value: A, onChange: G => L(G.target.value), children: [i.jsx("option", { value: "all", children: "Barcha operatorlar" }), U.map(G => i.jsx("option", { value: G.id, children: G.first_name ? `${G.first_name} ${G.last_name || ""}` : G.username }, G.id))] }), i.jsxs("select", { className: "toolbar-select", value: M, onChange: G => X(G.target.value), children: [i.jsx("option", { value: "all", children: "Qayta aloqa (Barchasi)" }), i.jsx("option", { value: "today", children: " Bugun" }), i.jsx("option", { value: "overdue", children: " Muddati o'tgan" }), i.jsx("option", { value: "soon", children: " Yaqin 3 kun" }), i.jsx("option", { value: "planned", children: " Rejalashtirilgan" }), i.jsx("option", { value: "none", children: " Belgilanmagan" })] })] }), i.jsxs("button", { className: "btn-v2 btn-v2-dark", onClick: ee, children: [i.jsx(VD, {}), i.jsx("span", { children: "Yangilash" })] })] }), i.jsx("div", { className: "toolbar-right", children: i.jsxs("button", { className: "btn-v2 btn-v2-dark", onClick: () => j(!0), children: [i.jsx(XD, {}), i.jsx("span", { children: "Bosqichlarni boshqarish" })] }) })] }), i.jsx(km, {}), d ? i.jsx("div", { className: "kanban-loading", children: i.jsx("div", { className: "spinner" }) }) : i.jsx("div", { className: "kanban-scroll-container", children: i.jsx("div", { className: "kanban-board", children: s.map((G, ge) => i.jsxs("div", { className: "kanban-column", style: { "--column-color": G.color || J(ge) }, onDragOver: Q, onDragEnter: de => ce(de, G.id), onDragLeave: W, onDrop: de => ae(de, G.id), children: [i.jsxs("div", { className: "column-header", children: [i.jsxs("div", { className: "column-title", children: [i.jsx("span", { className: "title-text", children: G.name }), i.jsx("span", { className: "item-count", children: G.name.toLowerCase() === "formalar" && F !== "all" ? G.items?.filter(de => de.source_form === parseInt(F)).length : G.items?.length || 0 })] }), G.name.toLowerCase() === "formalar" && i.jsxs("select", { className: "column-filter-select", value: F, onChange: de => B(de.target.value), onClick: de => de.stopPropagation(), children: [i.jsx("option", { value: "all", children: "Barcha formalar" }), O.map(de => i.jsx("option", { value: de.id, children: de.name }, de.id))] })] }), R === G.id ? i.jsx("div", { className: "quick-add-wrapper slide-down", children: i.jsx(LD, { stageId: G.id, onCancel: () => P(null), onSuccess: () => { P(null), ee() } }) }) : i.jsx("button", { className: "add-lead-button", onClick: () => P(G.id), children: "+ Lead qo'shish" }), i.jsxs("div", { className: "column-items", children: [G.items?.filter(de => G.name.toLowerCase() === "formalar" && F !== "all" ? de.source_form === parseInt(F) : !0).map(de => i.jsx(WD, { lead: de, onClick: () => l(de), onConvert: Se => w({ isOpen: !0, lead: Se }), onDragStart: fe, onDragEnd: q }, de.id)), (!G.items || G.items.length === 0) && i.jsx("div", { className: "empty-column", children: i.jsx("span", { children: "Lead yo'q" }) })] })] }, G.id)) }) }), i.jsx(RD, { isOpen: k, onClose: () => j(!1), onSuccess: ee }), i.jsx(L0, { isOpen: S.isOpen, lead: S.lead, onClose: () => w({ isOpen: !1, lead: null }), onSuccess: ee })] }) }, $D = () => i.jsxs("svg", { width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M16 3h5v5" }), i.jsx("path", { d: "M8 21H3v-5" }), i.jsx("path", { d: "M21 3l-7 7" }), i.jsx("path", { d: "M3 21l7-7" })] }), KD = () => { const { openEditModal: l, refreshTrigger: e, openCreateModal: t, updateTotalLeads: s } = fv(), r = L => { if (!L) return "-"; const M = new Date(L), X = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"]; return `${M.getDate()}-${X[M.getMonth()]} ${M.getFullYear()}` }, [o, u] = C.useState([]), [d, f] = C.useState(!0), [m, p] = C.useState(1), [g, y] = C.useState(1), [b, v] = C.useState({ search: "", status: "" }), [k, j] = C.useState({ open: !1, lead: null }), [S, w] = C.useState({ isOpen: !1, lead: null }), [N, T] = C.useState(!1), [R, P] = C.useState(""); C.useEffect(() => { const L = setTimeout(() => { P(b.search) }, 500); return () => clearTimeout(L) }, [b.search]), C.useEffect(() => { O() }, [m, R, b.status, e]); const O = async () => { f(!0); try { const L = { page: m, search: R, status: b.status }, X = (await ei.getAll(L)).data, U = Array.isArray(X) ? X : X.results || []; u(U); const I = X.count || U.length; y(Math.ceil(I / 20) || 1), s && s(I) } catch (L) { console.error("Leads fetch error:", L) } finally { f(!1) } }, z = async () => { if (k.lead) try { await ei.delete(k.lead.id), $.success("Lead o'chirildi"), F(), O() } catch { $.error("O'chirishda xatolik") } }, F = () => { T(!0), setTimeout(() => { j({ open: !1, lead: null }), T(!1) }, 300) }, B = L => { v(M => ({ ...M, [L.target.name]: L.target.value })), p(1) }, A = L => { const X = { answered: { label: "Javob berdi", color: "#10b981", bg: "rgba(16, 185, 129, 0.1)" }, not_answered: { label: "Javob bermadi", color: "#ef4444", bg: "rgba(239, 68, 68, 0.1)" }, client_answered: { label: "Mijoz javob berdi", color: "#3b82f6", bg: "rgba(59, 130, 246, 0.1)" }, client_not_answered: { label: "Mijoz javob bermadi", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.1)" } }[L] || { label: L, color: "#6b7280", bg: "rgba(107, 114, 128, 0.1)" }; return i.jsx("span", { style: { padding: "4px 10px", borderRadius: "6px", fontSize: "12px", fontWeight: "600", color: X.color, backgroundColor: X.bg }, children: X.label }) }; return i.jsxs("div", { className: "leads-list-container", children: [i.jsxs("div", { className: "leads-toolbar", children: [i.jsx("div", { className: "toolbar-left", children: i.jsxs("div", { className: "leads-search-box", children: [i.jsx(Sm, {}), i.jsx("input", { type: "text", placeholder: "Qidirish (Ism, Telefon)...", name: "search", value: b.search, onChange: B })] }) }), i.jsx("div", { className: "toolbar-right", children: i.jsxs("button", { className: "btn-v2 btn-v2-primary", onClick: () => t(), children: [i.jsx(yu, {}), i.jsx("span", { children: "Lead qo'shish" })] }) })] }), d ? i.jsx("div", { className: "loading-state", style: { display: "flex", justifyContent: "center", padding: "40px" }, children: i.jsx("div", { className: "spinner-border text-primary", role: "status" }) }) : o.length === 0 ? i.jsxs("div", { className: "empty-state", style: { textAlign: "center", padding: "60px 0", color: "var(--text-secondary)" }, children: [i.jsx(D0, { style: { width: 64, height: 64, marginBottom: "16px", opacity: .5 } }), i.jsx("h3", { style: { fontSize: "18px", fontWeight: 600, color: "var(--text-primary)" }, children: "Leadlar topilmadi" }), i.jsx("p", { children: "Qidiruv shartlarini o'zgartirib ko'ring yoki yangi lead qo'shing" })] }) : i.jsxs("div", { className: "card-body p-0", children: [i.jsx("div", { className: "responsive-table", children: i.jsxs("table", { className: "data-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { children: "# ID" }), i.jsx("th", { children: "Mijoz" }), i.jsx("th", { children: "Telefon" }), i.jsx("th", { children: "Bosqich" }), i.jsx("th", { children: "Status" }), i.jsx("th", { children: "Operator" }), i.jsx("th", { children: "Sana" }), i.jsx("th", { style: { textAlign: "right" }, children: "Amallar" })] }) }), i.jsx("tbody", { children: o.map(L => i.jsxs("tr", { children: [i.jsxs("td", { className: "cell-number", children: ["#", L.id] }), i.jsx("td", { children: i.jsx("div", { className: "cell-name", children: L.client_name || "Noma'lum" }) }), i.jsx("td", { children: L.phone_number }), i.jsx("td", { children: i.jsx("span", { style: { fontSize: "12px", border: "1px solid var(--border-color)", padding: "2px 8px", borderRadius: "6px", background: "var(--bg-tertiary)", color: "var(--text-secondary)" }, children: L.stage_name }) }), i.jsx("td", { children: A(L.call_status) }), i.jsx("td", { children: i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "8px" }, children: [i.jsx("div", { style: { width: 24, height: 24, borderRadius: "50%", background: "var(--bg-tertiary)", display: "flex", alignItems: "center", justifyContent: "center", fontSize: "10px", fontWeight: "bold", color: "var(--text-secondary)" }, children: L.operator_name ? L.operator_name[0] : "?" }), i.jsx("span", { style: { fontSize: "13px" }, children: L.operator_name })] }) }), i.jsx("td", { style: { color: "var(--text-secondary)", fontSize: "13px" }, children: r(L.created_at) }), i.jsx("td", { className: "cell-actions", style: { justifyContent: "flex-end" }, children: i.jsxs("div", { className: "table-actions", children: [!L.is_converted && i.jsx("button", { className: "btn-icon", onClick: () => w({ isOpen: !0, lead: L }), title: "Mijozga aylantirish", style: { background: "rgba(16, 185, 129, 0.1)", color: "#10b981", width: 32, height: 32, border: "none", borderRadius: "8px", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer" }, children: i.jsx($D, {}) }), i.jsx("button", { className: "btn-icon btn-edit", onClick: () => l(L), title: "Tahrirlash", style: { background: "rgba(99, 102, 241, 0.1)", color: "#6366f1", width: 32, height: 32, border: "none", borderRadius: "8px", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", marginLeft: "8px" }, children: i.jsx(Nm, { style: { width: 16, height: 16 } }) }), i.jsx("button", { className: "btn-icon btn-delete", onClick: () => j({ open: !0, lead: L }), title: "O'chirish", style: { background: "rgba(239, 68, 68, 0.1)", color: "#ef4444", width: 32, height: 32, border: "none", borderRadius: "8px", display: "flex", alignItems: "center", justifyContent: "center", cursor: "pointer", marginLeft: "8px" }, children: i.jsx(lo, { style: { width: 16, height: 16 } }) })] }) })] }, L.id)) })] }) }), g > 1 && i.jsxs("div", { className: "pagination-container", children: [i.jsxs("div", { className: "pagination-info", children: ["Sahifa ", m, " / ", g] }), i.jsxs("div", { className: "pagination-controls", children: [i.jsx("button", { className: "pagination-btn", onClick: () => p(L => Math.max(1, L - 1)), disabled: m === 1, children: i.jsx(C0, {}) }), [...Array(Math.min(5, g))].map((L, M) => i.jsx("button", { className: `pagination-btn ${m === M + 1 ? "active" : ""}`, onClick: () => p(M + 1), children: M + 1 }, M + 1)), i.jsx("button", { className: "pagination-btn", onClick: () => p(L => Math.min(g, L + 1)), disabled: m === g, children: i.jsx(T0, {}) })] })] })] }), k.open && i.jsx("div", { className: `modal-overlay ${N ? "modal-exit" : "modal-enter"}`, onClick: F, children: i.jsxs("div", { className: `modal-content modal-confirm ${N ? "modal-content-exit" : "modal-content-enter"}`, onClick: L => L.stopPropagation(), children: [i.jsx("div", { className: "modal-confirm-icon danger", children: i.jsx(lo, { style: { width: 32, height: 32 } }) }), i.jsx("h3", { className: "modal-confirm-title", children: "Leadni o'chirish" }), i.jsxs("p", { className: "modal-confirm-text", children: ["Haqiqatan ham ushbu leadni tizimdan butunlay o'chirib tashlamoqchimisiz?", i.jsx("br", {}), i.jsx("strong", { children: k.lead?.client_name || k.lead?.phone_number })] }), i.jsxs("div", { className: "modal-confirm-actions", children: [i.jsx("button", { className: "btn-v2 btn-v2-dark", onClick: F, children: "Bekor qilish" }), i.jsx("button", { className: "btn-v2 btn-v2-danger", onClick: z, children: "O'chirish" })] })] }) }), i.jsx(L0, { isOpen: S.isOpen, lead: S.lead, onClose: () => w({ isOpen: !1, lead: null }), onSuccess: O })] }) }; const ZD = l => l.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase(), QD = l => l.replace(/^([A-Z])|[\s-_]+(\w)/g, (e, t, s) => s ? s.toUpperCase() : t.toLowerCase()), qy = l => { const e = QD(l); return e.charAt(0).toUpperCase() + e.slice(1) }, H0 = (...l) => l.filter((e, t, s) => !!e && e.trim() !== "" && s.indexOf(e) === t).join(" ").trim(), JD = l => { for (const e in l) if (e.startsWith("aria-") || e === "role" || e === "title") return !0 }; var eA = { xmlns: "http://www.w3.org/2000/svg", width: 24, height: 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round", strokeLinejoin: "round" }; const tA = C.forwardRef(({ color: l = "currentColor", size: e = 24, strokeWidth: t = 2, absoluteStrokeWidth: s, className: r = "", children: o, iconNode: u, ...d }, f) => C.createElement("svg", { ref: f, ...eA, width: e, height: e, stroke: l, strokeWidth: s ? Number(t) * 24 / Number(e) : t, className: H0("lucide", r), ...!o && !JD(d) && { "aria-hidden": "true" }, ...d }, [...u.map(([m, p]) => C.createElement(m, p)), ...Array.isArray(o) ? o : [o]])); const Ei = (l, e) => { const t = C.forwardRef(({ className: s, ...r }, o) => C.createElement(tA, { ref: o, iconNode: e, className: H0(`lucide-${ZD(qy(l))}`, `lucide-${l}`, s), ...r })); return t.displayName = qy(l), t }; const iA = [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["line", { x1: "12", x2: "12", y1: "8", y2: "12", key: "1pkeuh" }], ["line", { x1: "12", x2: "12.01", y1: "16", y2: "16", key: "4dfq90" }]], sA = Ei("circle-alert", iA); const aA = [["rect", { width: "14", height: "14", x: "8", y: "8", rx: "2", ry: "2", key: "17jyea" }], ["path", { d: "M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2", key: "zix9uf" }]], Yy = Ei("copy", aA); const nA = [["line", { x1: "12", x2: "12", y1: "2", y2: "22", key: "7eqyqh" }], ["path", { d: "M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6", key: "1b0p4s" }]], rA = Ei("dollar-sign", nA); const lA = [["path", { d: "M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z", key: "sc7q7i" }]], tm = Ei("funnel", lA); const oA = [["path", { d: "M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8", key: "1357e3" }], ["path", { d: "M3 3v5h5", key: "1xhq8a" }], ["path", { d: "M12 7v5l4 2", key: "1fdv2h" }]], cA = Ei("history", oA); const uA = [["path", { d: "M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z", key: "18887p" }]], Xy = Ei("message-square", uA); const dA = [["path", { d: "M5 12h14", key: "1ays0h" }], ["path", { d: "M12 5v14", key: "s699le" }]], hA = Ei("plus", dA); const fA = [["path", { d: "M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8", key: "14sxne" }], ["path", { d: "M3 3v5h5", key: "1xhq8a" }], ["path", { d: "M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16", key: "1hlbsb" }], ["path", { d: "M16 16h5v5", key: "ccwih5" }]], mA = Ei("refresh-ccw", fA); const pA = [["path", { d: "M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8", key: "v9h5vc" }], ["path", { d: "M21 3v5h-5", key: "1q7to0" }], ["path", { d: "M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16", key: "3uifl3" }], ["path", { d: "M8 16H3v5", key: "1cv678" }]], Uy = Ei("refresh-cw", pA); const gA = [["path", { d: "M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z", key: "1ffxy3" }], ["path", { d: "m21.854 2.147-10.94 10.939", key: "12cjpa" }]], Vy = Ei("send", gA); const bA = [["path", { d: "M10 11v6", key: "nco0om" }], ["path", { d: "M14 11v6", key: "outv1u" }], ["path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6", key: "miytrc" }], ["path", { d: "M3 6h18", key: "d0wm0j" }], ["path", { d: "M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2", key: "e791ji" }]], Wy = Ei("trash-2", bA); const xA = [["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }], ["path", { d: "M16 3.128a4 4 0 0 1 0 7.744", key: "16gr8j" }], ["path", { d: "M22 21v-2a4 4 0 0 0-3-3.87", key: "kshegd" }], ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }]], yA = Ei("users", xA); const vA = [["path", { d: "M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1", key: "18etb6" }], ["path", { d: "M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4", key: "xoc0q4" }]], _A = Ei("wallet", vA); const jA = [["path", { d: "M18 6 6 18", key: "1bl5f8" }], ["path", { d: "m6 6 12 12", key: "d8bk6v" }]], tu = Ei("x", jA), Wc = ["#8b5cf6", "#3b82f6", "#10b981", "#f59e0b", "#ef4444", "#ec4899", "#14b8a6", "#6366f1"], wA = () => { const [l, e] = C.useState({}); return C.useEffect(() => { const t = () => { const r = getComputedStyle(document.documentElement); e({ textPrimary: r.getPropertyValue("--text-primary").trim() || "#0f172a", textSecondary: r.getPropertyValue("--text-secondary").trim() || "#64748b", bgSecondary: r.getPropertyValue("--bg-secondary").trim() || "#ffffff", borderColor: r.getPropertyValue("--border-color").trim() || "#e2e8f0" }) }; t(); const s = new MutationObserver(t); return s.observe(document.documentElement, { attributes: !0, attributeFilter: ["data-theme"] }), () => s.disconnect() }, []), l }, Gy = ({ items: l, chartId: e, height: t = 380, onSliceClick: s }) => { const r = C.useRef(null), o = C.useRef(null); return Me.useLayoutEffect(() => { if (!r.current || !l || l.length === 0) return; const u = l.filter(w => (w.count || 0) > 0); if (u.length === 0) return; const d = _o.new(r.current); o.current = d; const f = document.documentElement.getAttribute("data-theme") === "dark", m = [vm.new(d)]; f && m.push(_m.new(d)), d.setThemes(m); const p = d.container.children.push(ro.new(d, { layout: d.verticalLayout, paddingTop: 0, paddingBottom: 0 })), g = Math.max(...u.map(w => w.count || 0)), y = Math.min(...u.map(w => w.count || 0)), b = g > 0 && y / g < .05, v = p.series.push(no.new(d, { alignLabels: b, orientation: "vertical", valueField: "value", categoryField: "category", bottomRatio: .15 })); v.slices.template.setAll({ strokeWidth: 0, strokeOpacity: 0, fillOpacity: .9, cornerRadius: 4, tooltipText: "{category}: {value}" }), v.slices.template.states.create("hover", { fillOpacity: 1, scale: 1.02 }), s && (v.slices.template.setAll({ cursorOverStyle: "pointer" }), v.slices.template.events.on("click", w => { const N = v.dataItems.indexOf(w.target.dataItem); s(N) })), b ? (v.labels.template.setAll({ fontSize: 11, fontWeight: "600", fill: Je(f ? 14870768 : 3359061), text: "{category}: {value}", populateText: !0 }), v.ticks.template.setAll({ stroke: Je(f ? 4674921 : 13358561), strokeWidth: 1, strokeDasharray: [3, 3] })) : (v.labels.template.setAll({ fontSize: 12, fontWeight: "600", fill: Je(16777215), text: "{category}: {value}", textAlign: "center", populateText: !0 }), v.ticks.template.setAll({ forceHidden: !0 })); const k = b ? Math.max(1, Math.round(g * .04)) : 0, j = u.map(w => ({ value: Math.max(w.count || 0, k), realValue: w.count || 0, category: w.name, sliceSettings: { fill: Je(w.color) } })); v.labels.template.adapters.add("text", (w, N) => { const T = N.dataItem; return T?.dataContext?.realValue !== void 0 ? `${T.dataContext.category}: ${T.dataContext.realValue}` : w }), v.slices.template.adapters.add("tooltipText", (w, N) => { const T = N.dataItem; return T?.dataContext?.realValue !== void 0 ? `${T.dataContext.category}: ${T.dataContext.realValue}` : w }), v.slices.template.adapters.add("fill", (w, N) => { const T = N.dataItem; return T?.dataContext?.sliceSettings ? T.dataContext.sliceSettings.fill : w }), v.slices.template.adapters.add("stroke", (w, N) => { const T = N.dataItem; return T?.dataContext?.sliceSettings ? T.dataContext.sliceSettings.fill : w }), v.data.setAll(j); const S = p.children.push(Ha.new(d, { centerX: Oe, x: Oe, marginTop: 8 })); return S.labels.template.setAll({ fontSize: 11, fill: Je(f ? 13358561 : 4674921) }), S.valueLabels.template.setAll({ fontSize: 11, fontWeight: "600", fill: Je(f ? 15857145 : 988970) }), S.data.setAll(v.dataItems), v.appear(800, 100), p.appear(800, 100), () => d.dispose() }, [l, e]), !l || l.length === 0 ? null : i.jsx("div", { ref: r, style: { width: "100%", height: `${t}px` } }) }, kA = ({ operators: l, operatorFunnel: e, stages: t, themeColors: s }) => {
        const [r, o] = C.useState(null), u = C.useMemo(() => [...l || []].sort((y, b) => (b.count || 0) - (y.count || 0)).map((y, b) => ({ ...y, color: Wc[b % Wc.length] })), [l]), d = C.useMemo(() => { if (r === null || !e || !t) return []; const g = u[r]; if (!g) return []; const y = e.find(b => b.name.toLowerCase().trim() === (g.name || g.operator_name || "").toLowerCase().trim()); return y ? t.map((b, v) => ({ name: b.name, count: y[b.name] || 0, color: b.color || Wc[v % Wc.length] })).filter(b => b.count > 0).sort((b, v) => v.count - b.count) : [] }, [r, u, e, t]), f = r !== null, m = f ? u[r] : null, p = g => { o(r === g ? null : g) }; return !l || l.length === 0 ? null : i.jsxs("div", {
            children: [i.jsxs("div", { style: { display: "flex", alignItems: "flex-start", justifyContent: "center", width: "100%", gap: f ? "32px" : "0", transition: "gap 0.5s ease" }, children: [i.jsx("div", { style: { flex: f ? "1 1 50%" : "1 1 100%", maxWidth: f ? "50%" : "100%", transition: "all 0.5s ease" }, children: i.jsx(Gy, { items: u.map(g => ({ ...g, name: g.operator_name || g.name })), chartId: "main-operators", height: f ? 360 : 420, onSliceClick: p }) }), f && i.jsxs("div", { style: { flex: "1 1 50%", maxWidth: "50%", animation: "fadeInSlide 0.5s ease" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "10px", marginBottom: "12px", fontSize: "14px", fontWeight: "700", color: s.textPrimary }, children: [i.jsx("span", { style: { width: "12px", height: "12px", borderRadius: "4px", background: m?.color, display: "inline-block" } }), i.jsx("span", { children: m?.name || m?.operator_name }), i.jsx("span", { style: { fontWeight: "400", color: s.textSecondary, fontSize: "11px" }, children: " bosqichlar" }), i.jsx("button", { onClick: () => o(null), style: { marginLeft: "auto", background: "rgba(255,255,255,0.05)", border: `1px solid ${s.borderColor}`, borderRadius: "8px", color: s.textSecondary, cursor: "pointer", fontSize: "14px", width: "28px", height: "28px", display: "flex", alignItems: "center", justifyContent: "center", padding: 0 }, title: "Yopish", children: "" })] }), d.length > 0 ? i.jsx(Gy, { items: d, chartId: `detail-${r}`, height: 340 }) : i.jsxs("div", { style: { padding: "40px 20px", textAlign: "center", color: s.textSecondary, background: "rgba(255,255,255,0.03)", border: `1px dashed ${s.borderColor}`, borderRadius: "12px", fontSize: "13px" }, children: [i.jsx("div", { style: { fontWeight: "500" }, children: "Ma'lumot mavjud emas" }), i.jsx("div", { style: { fontSize: "11px", marginTop: "4px", opacity: .7 }, children: "Ushbu operator uchun bosqichlar bo'yicha leadlar topilmadi" })] })] })] }), i.jsxs("div", { style: { textAlign: "center", padding: "10px 16px", color: s.textSecondary, fontSize: "12px", display: "flex", alignItems: "center", justifyContent: "center", gap: "6px", opacity: .65 }, children: [i.jsxs("svg", { width: "14", height: "14", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("path", { d: "M12 16v-4" }), i.jsx("path", { d: "M12 8h.01" })] }), "Operatorni ustiga bosing  bosqichlar bo'yicha taqsimotni ko'rasiz"] }), i.jsx("style", {
                children: `
                @keyframes fadeInSlide {
                    from { opacity: 0; transform: translateX(20px); }
                    to { opacity: 1; transform: translateX(0); }
                }
            `})]
        })
    }, SA = ({ isOpen: l, onClose: e, onFilter: t, activeTab: s, initialFilters: r, cities: o, buildings: u, stages: d, operators: f }) => { const [m, p] = C.useState(r), [g, y] = C.useState(!1); C.useEffect(() => { l && setTimeout(() => { p(r), y(!1) }, 0) }, [l, r]); const b = w => { const { name: N, value: T, type: R, checked: P } = w.target; p(O => ({ ...O, [N]: R === "checkbox" ? P : T })) }, v = () => { y(!0), setTimeout(() => { e(), y(!1) }, 250) }, k = () => { t(m), v() }, j = () => { const w = s === "sales" ? { start_date: new Date(new Date().setMonth(new Date().getMonth() - 3)).toISOString().split("T")[0], end_date: new Date().toISOString().split("T")[0], city: "", building: "", status: "" } : { start_date: new Date(new Date().setMonth(new Date().getMonth() - 1)).toISOString().split("T")[0], end_date: new Date().toISOString().split("T")[0], operator: "", stage: "", call_status: "" }; p(w), t(w), v() }; if (!l && !g) return null; const S = m.city ? u.filter(w => String(w.city) === String(m.city)) : u; return gt.createPortal(i.jsx("div", { className: `modal-overlay ${g ? "closing" : ""}`, onClick: v, children: i.jsxs("div", { className: `modal-content modal-form ${g ? "closing" : ""}`, onClick: w => w.stopPropagation(), style: { maxWidth: "420px" }, children: [i.jsxs("div", { className: "modal-header", children: [i.jsxs("h3", { style: { display: "flex", alignItems: "center", gap: "8px" }, children: [i.jsx(tm, { size: 18 }), "Filterlar (", s === "sales" ? "Sotuvlar" : "Leadlar", ")"] }), i.jsx("button", { className: "modal-close", onClick: v, children: i.jsx(tu, { size: 20 }) })] }), i.jsxs("form", { onSubmit: w => { w.preventDefault(), k() }, children: [i.jsxs("div", { className: "modal-form-body", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Sana oralig'i" }), i.jsxs("div", { style: { display: "grid", gridTemplateColumns: "1fr 1fr", gap: "10px" }, children: [i.jsx("input", { type: "date", name: "start_date", value: m.start_date, onChange: b }), i.jsx("input", { type: "date", name: "end_date", value: m.end_date, onChange: b })] })] }), s === "sales" ? i.jsxs(i.Fragment, { children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Shahar bo'yicha" }), i.jsxs("select", { name: "city", value: m.city, onChange: b, children: [i.jsx("option", { value: "", children: "Barchasi" }), o.map(w => i.jsx("option", { value: w.id, children: w.name }, w.id))] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Binolar bo'yicha" }), i.jsxs("select", { name: "building", value: m.building, onChange: b, children: [i.jsx("option", { value: "", children: "Barchasi" }), S.map(w => i.jsx("option", { value: w.id, children: w.name }, w.id))] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Shartnoma holati" }), i.jsxs("select", { name: "status", value: m.status, onChange: b, children: [i.jsx("option", { value: "", children: "Barchasi" }), i.jsx("option", { value: "PENDING", children: "Kutilmoqda" }), i.jsx("option", { value: "ACTIVE", children: "Faol" }), i.jsx("option", { value: "COMPLETED", children: "Yakunlangan" }), i.jsx("option", { value: "CANCELLED", children: "Bekor qilingan" })] })] })] }) : i.jsxs(i.Fragment, { children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Operator bo'yicha" }), i.jsxs("select", { name: "operator", value: m.operator, onChange: b, children: [i.jsx("option", { value: "", children: "Barchasi" }), f.map((w, N) => i.jsx("option", { value: w, children: w }, N))] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Bosqich bo'yicha" }), i.jsxs("select", { name: "stage", value: m.stage, onChange: b, children: [i.jsx("option", { value: "", children: "Barchasi" }), Array.isArray(d) && d.map(w => i.jsx("option", { value: w.id, children: w.name }, w.id))] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Qo'ng'iroq holati" }), i.jsxs("select", { name: "call_status", value: m.call_status, onChange: b, children: [i.jsx("option", { value: "", children: "Barchasi" }), i.jsx("option", { value: "answered", children: "Javob berildi" }), i.jsx("option", { value: "not_answered", children: "Javob berilmadi" }), i.jsx("option", { value: "client_answered", children: "Mijoz javob berdi" }), i.jsx("option", { value: "client_not_answered", children: "Mijoz javob bermadi" })] })] })] })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsxs("button", { type: "button", className: "btn-secondary", onClick: j, children: [i.jsx(mA, { size: 16 }), "Tozalash"] }), i.jsxs("button", { type: "submit", className: "btn-primary", children: [i.jsx(tm, { size: 16 }), "Qidirish"] })] })] })] }) }), document.body) }, $y = { PENDING: "Kutilmoqda", ACTIVE: "Faol", COMPLETED: "Yakunlangan", CANCELLED: "Bekor qilingan", answered: "Javob berildi", not_answered: "Javob berilmadi", client_answered: "Mijoz javob berdi", client_not_answered: "Mijoz javob bermadi" }, NA = () => { const [l, e] = C.useState("sales"), [t, s] = C.useState(!0), [r, o] = C.useState(null), [u, d] = C.useState(null), [f, m] = C.useState(!1), p = wA(), [g, y] = C.useState({ start_date: "", end_date: "", city: "", building: "", status: "" }), [b, v] = C.useState({ start_date: "", end_date: "", operator: "", stage: "", call_status: "" }), [k, j] = C.useState([]), [S, w] = C.useState([]), [N, T] = C.useState([]), [R, P] = C.useState([]); C.useEffect(() => { O() }, []), C.useEffect(() => { z() }, [l]); const O = async () => { try { const [A, L, M] = await Promise.all([k0(), jm(), ei.getStages().catch(() => [])]); j(Array.isArray(A) ? A : A?.data || A?.results || []), w(Array.isArray(L) ? L : L?.data || L?.results || []); const X = M?.data || M?.results || M; T(Array.isArray(X) ? X : []) } catch (A) { console.error("Filtrlarni yuklashda xatolik:", A), j([]), w([]), T([]) } }, z = async () => { s(!0); try { const A = l === "sales" ? g : b; let L = null; if (l === "sales") { const M = await Rf.getContractsStats(A); L = M.data, o(M.data) } else { const [M, X] = await Promise.all([Rf.getLeadsStats(A), ei.getStatistics().catch(() => ({ data: null }))]); L = M.data, o(M.data), d(X?.data) } l === "leads" && L?.leads_by_operator && P(L.leads_by_operator.map(M => M.operator_name).filter(Boolean)) } catch (A) { $.error("Statistikalarni yuklashda xatolik yuz berdi"), console.error(A) } finally { s(!1) } }, F = () => r ? i.jsx("div", { className: "analytics-dashboard", children: i.jsxs("div", { className: "charts-grid", children: [i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "1. Kunlik shartnoma tuzish" }), i.jsx("h4", { children: "Kunlik shartnoma tuzish" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(Ba, { data: r.daily_contracts || [], xField: "date", yField: "count", height: 250, color: "#6366f1", tooltipText: "Sana: {categoryX}\\nShartnomalar: {valueY}" }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "2. Shartnomalar holati bo'yicha" }), i.jsx("h4", { children: "Shartnomalar holati bo'yicha" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(Ra, { data: (r.status_distribution || []).map(A => ({ ...A, name: $y[A.status] || A.status })), nameField: "name", valueField: "count", height: 250, innerRadius: 55 }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "3. Vaqt o'tishi bilan umumiy daromad" }), i.jsx("h4", { children: "Vaqt o'tishi bilan umumiy daromad" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(Ba, { data: r.revenue_over_time || [], xField: "date", yField: "revenue", height: 250, color: "#10b981", tooltipText: "Sana: {categoryX}\\nDaromad: {valueY}" }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "4. Shaharlar bo'yicha daromad" }), i.jsx("h4", { children: "Shaharlar bo'yicha daromad" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(bs, { data: r.revenue_by_city || [], xField: "city_name", yField: "revenue", height: 250, horizontal: !0, color: "#f59e0b", tooltipFormatter: "{categoryY}: {valueX}" }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "5. Binolar bo'yicha daromad" }), i.jsx("h4", { children: "Binolar bo'yicha daromad" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(bs, { data: (r.revenue_by_building || []).slice(0, 6), xField: "building_name", yField: "revenue", height: 250, color: "#ef4444", tooltipFormatter: "{categoryX}: {valueY}" }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "6. Qarzdorlik holati" }), i.jsx("h4", { children: "Qarzdorlik holati" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(Ra, { data: [{ name: "Qarzdor emas", value: r.debt_stats?.non_debtors_count || 0 }, { name: "Qarzdor", value: r.debt_stats?.debtors_count || 0 }], nameField: "name", valueField: "value", height: 250, innerRadius: 55, colors: ["#06b6d4", "#8b5cf6"] }) })] }), i.jsxs("div", { className: "chart-card wide", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "7. Binolar bo'yicha sotilgan uylar (batafsil)" }), i.jsx("h4", { children: "Binolar bo'yicha sotilgan uylar" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(EC, { data: r.homes_by_building || [], xField: "building_name", barFields: [{ field: "sold", name: "Sotilgan", color: "#6366f1" }, { field: "available", name: "Sotilmagan", color: "#10b981" }], lineField: { field: "percentage", name: "Sotilish foizi", color: "#ef4444" }, height: 300 }) })] })] }) }) : null, B = () => r ? i.jsx("div", { className: "analytics-dashboard", children: i.jsxs("div", { className: "charts-grid", children: [u?.conversion_funnel && u.conversion_funnel.some(A => A.count > 0) && i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "1. Lead konversiya varonkasi" }), i.jsx("h4", { children: "Umumiy konversiya holati" })] }), i.jsx("div", { className: "chart-body", style: { display: "flex", justifyContent: "center", padding: "20px 0" }, children: i.jsx(Zf, { items: u.conversion_funnel, height: 350 }) })] }), r.current_stage_counts && r.current_stage_counts.filter(A => A.stage_name).length > 0 && i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "2. Lead bosqich xolati varonkasi" }), i.jsx("h4", { children: "Lead bosqichlari varonkasi" })] }), i.jsx("div", { className: "chart-body", style: { display: "flex", justifyContent: "center", padding: "20px 0" }, children: i.jsx(Zf, { items: (r.current_stage_counts || []).filter(A => A.stage_name).map((A, L) => ({ name: A.stage_name, count: A.count, color: A.stage_color || ["#6366f1", "#10b981", "#f59e0b", "#ef4444", "#06b6d4", "#8b5cf6", "#ec4899", "#3b82f6"][L % 8] })), height: 350 }) })] }), u?.by_operator && u.by_operator.length > 0 && i.jsxs("div", { className: "chart-card wide", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "3. Operatorlar bo'yicha bosqichlar (Funnel)" }), i.jsx("h4", { children: "Operatorlar bo'yicha Leadlar bosqichi" })] }), i.jsx("div", { className: "chart-body", style: { padding: "20px 0" }, children: i.jsx(kA, { operators: u.by_operator, operatorFunnel: u.operator_funnel, stages: u.stages, themeColors: p }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "4. Kunlik qo'shilgan Leadlar soni" }), i.jsx("h4", { children: "Kunlik qo'shilgan Leadlar soni" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(Ba, { data: r.daily_leads || [], xField: "date", yField: "count", height: 250, color: "#6366f1", tooltipText: "Sana: {categoryX}\\nLeadlar: {valueY}" }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "5. Operatorlar bo'yicha Leadlar soni" }), i.jsx("h4", { children: "Operatorlar bo'yicha Leadlar soni" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(bs, { data: r.leads_by_operator || [], xField: "operator_name", yField: "count", height: 250, horizontal: !0, color: "#8b5cf6", tooltipFormatter: "{categoryY}: {valueX} ta" }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "6. Leadlar bosqichlar bo'yicha taqsimoti" }), i.jsx("h4", { children: "Leadlar bosqichlar bo'yicha taqsimoti" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(Ra, { data: (r.stage_distribution || []).filter(A => A.stage_name), nameField: "stage_name", valueField: "count", height: 250, innerRadius: 55 }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "7. Qo'ng'iroq holati bo'yicha Leadlar" }), i.jsx("h4", { children: "Qo'ng'iroq holati bo'yicha Leadlar" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(Ra, { data: (r.call_status_distribution || []).map(A => ({ ...A, name: $y[A.call_status] || A.call_status || "Noma'lum" })), nameField: "name", valueField: "count", height: 250, innerRadius: 55 }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "8. Leaddagi o'rtacha qo'ng'iroq davomiyligi (kunlar bo'yicha)" }), i.jsx("h4", { children: "O'rtacha qo'ng'iroq davomiyligi (sekundda)" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(OC, { data: r.avg_duration_trend || [], xField: "date", yField: "avg_duration", height: 250, color: "#f59e0b", tooltipText: "Sana: {categoryX}\\nO'rtacha: {valueY} sek" }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "9. Har bir operator bo'yicha qo'ng'iroq holati" }), i.jsx("h4", { children: "Har bir operator bo'yicha qo'ng'iroq holati" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(bs, { data: r.operator_call_status || [], xField: "operator_name", yField: ["answered", "not_answered"], seriesNames: ["Javob berilgan", "Javob berilmagan"], height: 250, horizontal: !0, colors: ["#10b981", "#ef4444"] }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "10. Bosqichlar bo'yicha joriy Leadlar soni" }), i.jsx("h4", { children: "Bosqichlar bo'yicha joriy Leadlar soni" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(bs, { data: (r.current_stage_counts || []).filter(A => A.stage_name), xField: "stage_name", yField: "count", height: 250, horizontal: !0, color: "#8b5cf6", tooltipFormatter: "{categoryY}: {valueX} ta" }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "11. Leadlar oylik tahlili (faoliyat trendi)" }), i.jsx("h4", { children: "Leadlar oylik tahlili (faoliyat trendi)" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(Ba, { data: r.monthly_trend || [], xField: "month", yField: "count", height: 250, color: "#6366f1", tooltipText: "{categoryX}\\nLeadlar: {valueY}" }) })] })] }) }) : null; return i.jsxs("div", { className: "analytics-page", children: [i.jsxs("div", { className: "analytics-header", children: [i.jsxs("div", { className: "header-left", children: [i.jsx("h1", { children: "Analitika & Hisobotlar" }), i.jsx("p", { children: "Loyihangiz bo'yicha barcha asosiy ko'rsatkichlar" })] }), i.jsxs("div", { className: "header-actions", children: [i.jsxs("div", { className: "header-tabs", children: [i.jsxs("button", { className: `tab-btn ${l === "sales" ? "active" : ""}`, onClick: () => e("sales"), children: [i.jsx(rA, { size: 18 }), "Sotuvlar"] }), i.jsxs("button", { className: `tab-btn ${l === "leads" ? "active" : ""}`, onClick: () => e("leads"), children: [i.jsx(yA, { size: 18 }), "Leadlar"] })] }), i.jsx("div", { className: "header-right", children: i.jsxs("button", { className: `btn-filter-trigger ${f ? "active" : ""}`, onClick: () => m(!0), children: [i.jsx(tm, { size: 18 }), "Filterlash"] }) })] })] }), i.jsx("div", { className: "analytics-content", children: t ? i.jsxs("div", { className: "loading-state", children: [i.jsx("div", { className: "spinner" }), i.jsx("p", { children: "Ma'lumotlar yuklanmoqda..." })] }) : i.jsx(i.Fragment, { children: l === "sales" ? F() : B() }) }), i.jsx(SA, { isOpen: f, onClose: () => m(!1), activeTab: l, initialFilters: l === "sales" ? g : b, cities: k, buildings: S, stages: N, operators: R, onFilter: A => { l === "sales" ? y(A) : v(A), setTimeout(() => z(), 0) } })] }) }, CA = () => { const { user: l, refreshUser: e } = xo(), [t, s] = C.useState([]), [, r] = C.useState(!0), [o, u] = C.useState(""), [d, f] = C.useState({ open: !1, type: null, user: null }), [m, p] = C.useState(!1), [g, y] = C.useState(!1), [b, v] = C.useState({ username: "", first_name: "", last_name: "", email: "", password: "", is_staff: !1, is_superuser: !1, is_active: !0, permissions: { can_view_cities: !0, can_view_buildings: !0, can_view_homes: !0, can_view_clients: !0, can_view_contracts: !0, can_view_leads: !0, can_view_forms: !0, can_view_analytics: !0, can_view_sms: !0, can_view_expenses: !0, can_view_buildings_info: !0 } }); C.useEffect(() => { k() }, []); const k = async () => { r(!0); try { const B = await R0(); s(Array.isArray(B.data) ? B.data : B.data.results || []) } catch (B) { console.error("Error loading users:", B), $.error("Foydalanuvchilarni yuklashda xatolik") } finally { r(!1) } }, j = () => { v({ username: "", first_name: "", last_name: "", email: "", password: "", is_staff: !1, is_superuser: !1, is_active: !0, permissions: { can_view_cities: !0, can_view_buildings: !0, can_view_homes: !0, can_view_clients: !0, can_view_contracts: !0, can_view_leads: !0, can_view_forms: !0, can_view_analytics: !0, can_view_sms: !0, can_view_expenses: !0, can_view_buildings_info: !0 } }) }, S = () => { j(), f({ open: !0, type: "create", user: null }) }, w = B => { v({ username: B.username, first_name: B.first_name || "", last_name: B.last_name || "", email: B.email || "", password: "", is_staff: B.is_staff, is_superuser: B.is_superuser, is_active: B.is_active, permissions: B.permissions || { can_view_cities: !0, can_view_buildings: !0, can_view_homes: !0, can_view_clients: !0, can_view_contracts: !0, can_view_leads: !0, can_view_forms: !0, can_view_analytics: !0, can_view_sms: !0, can_view_expenses: !0, can_view_buildings_info: !0 } }), f({ open: !0, type: "edit", user: B }) }, N = () => { p(!0), setTimeout(() => { f({ open: !1, type: null, user: null }), p(!1), j() }, 250) }, T = B => { v(A => ({ ...A, permissions: { ...A.permissions, [B]: !A.permissions[B] } })) }, R = async B => { B.preventDefault(), y(!0); try { const A = { ...b }; if (d.type === "edit" && !A.password && delete A.password, d.type === "edit") await TD(d.user.id, A), $.success("Foydalanuvchi yangilandi"), d.user.id === l.id && e(); else { if (!A.password) { $.error("Parol kiritilishi shart"), y(!1); return } await CD(A), $.success("Yangi foydalanuvchi yaratildi") } N(), k() } catch (A) { console.error("Error saving user:", A); const L = A.response?.data?.detail || A.response?.data && Object.values(A.response.data)[0] || "Xatolik yuz berdi"; $.error(typeof L == "string" ? L : "Ma'lumotlar noto'g'ri") } finally { y(!1) } }, P = async (B, A) => { if (B.stopPropagation(), !!window.confirm(`${A.username} foydalanuvchisini o'chirib tashlamoqchimisiz?`)) try { await DD(A.id), $.success("Foydalanuvchi o'chirildi"), k() } catch (L) { console.error("Error deleting user:", L); const M = L.response?.data?.detail || "O'chirishda xatolik"; $.error(M) } }, O = t.filter(B => B.username.toLowerCase().includes(o.toLowerCase()) || (B.first_name + " " + B.last_name).toLowerCase().includes(o.toLowerCase()) || (B.email || "").toLowerCase().includes(o.toLowerCase())), z = B => { if (!B) return "-"; const A = new Date(B), L = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"], M = A.getDate(), X = L[A.getMonth()], U = A.getFullYear(); return `${M}-${X} ${U}` }, F = [{ key: "can_view_cities", label: "Shaharlar" }, { key: "can_view_buildings", label: "Binolar" }, { key: "can_view_homes", label: "Xonadonlar" }, { key: "can_view_clients", label: "Mijozlar" }, { key: "can_view_contracts", label: "Shartnomalar" }, { key: "can_view_leads", label: "Leadlar" }, { key: "can_view_forms", label: "Formalar" }, { key: "can_view_analytics", label: "Analitika" }, { key: "can_view_sms", label: "SMS Xizmati" }, { key: "can_view_expenses", label: "Chiqimlar" }, { key: "can_view_buildings_info", label: "Binolar ma'lumoti" }]; return i.jsxs("div", { className: "users-page", children: [i.jsxs("div", { className: "page-header", children: [i.jsxs("div", { className: "header-left", children: [i.jsx("h1", { className: "page-title", children: "Foydalanuvchilar" }), i.jsx("p", { className: "page-subtitle", children: "Tizim foydalanuvchilarini boshqarish va ruxsatlar" })] }), i.jsx("div", { className: "header-actions", children: i.jsxs("button", { className: "btn-primary", onClick: S, children: [i.jsx(yu, {}), i.jsx("span", { children: "Foydalanuvchi qo'shish" })] }) })] }), i.jsx("div", { className: "page-content", children: i.jsxs("div", { className: "content-card", children: [i.jsxs("div", { className: "card-header", children: [i.jsxs("div", { className: "search-box", children: [i.jsx(Sm, {}), i.jsx("input", { type: "text", placeholder: "Foydalanuvchini qidirish...", value: o, onChange: B => u(B.target.value) })] }), i.jsxs("div", { style: { marginLeft: "auto", fontSize: "14px", color: "var(--text-secondary)" }, children: ["Jami: ", i.jsx("strong", { children: O.length }), " ta user"] })] }), i.jsx("div", { className: "responsive-table", children: i.jsxs("table", { className: "data-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { style: { width: "60px" }, children: "#" }), i.jsx("th", { children: "Foydalanuvchi" }), i.jsx("th", { children: "Email" }), i.jsx("th", { children: "Roli" }), i.jsx("th", { children: "Status" }), i.jsx("th", { children: "Qo'shilgan sana" }), i.jsx("th", { style: { textAlign: "right" }, children: "Amallar" })] }) }), i.jsx("tbody", { children: O.map((B, A) => i.jsxs("tr", { onClick: () => w(B), style: { cursor: "pointer" }, children: [i.jsx("td", { style: { fontWeight: "600", color: "var(--text-secondary)" }, children: A + 1 }), i.jsx("td", { children: i.jsxs("div", { className: "user-cell", children: [i.jsx("div", { className: "user-avatar", children: B.first_name?.[0] || B.username?.[0]?.toUpperCase() || "U" }), i.jsxs("div", { className: "user-details", children: [i.jsxs("span", { className: "user-full-name", children: [B.first_name, " ", B.last_name] }), i.jsxs("span", { className: "user-username", children: ["@", B.username] })] })] }) }), i.jsx("td", { children: B.email || i.jsx("span", { style: { color: "var(--text-muted)" }, children: "-" }) }), i.jsx("td", { children: i.jsx("div", { style: { display: "flex", gap: "6px" }, children: B.is_superuser ? i.jsx("span", { className: "role-badge superuser", children: "Superuser" }) : B.is_staff ? i.jsx("span", { className: "role-badge staff", children: "Xodim" }) : i.jsx("span", { className: "role-badge default", children: "User" }) }) }), i.jsx("td", { children: i.jsx("span", { className: `role-badge ${B.is_active ? "active" : "inactive"}`, children: B.is_active ? "Faol" : "Nofaol" }) }), i.jsx("td", { children: z(B.date_joined) }), i.jsx("td", { children: i.jsx("div", { className: "cell-actions", style: { justifyContent: "flex-end" }, children: i.jsxs("div", { className: "table-actions", children: [i.jsx("button", { className: "btn-icon btn-edit", onClick: L => { L.stopPropagation(), w(B) }, title: "Tahrirlash", children: i.jsx(Nm, {}) }), i.jsx("button", { className: "btn-icon btn-delete", onClick: L => P(L, B), title: "O'chirish", children: i.jsx(lo, {}) })] }) }) })] }, B.id)) })] }) })] }) }), d.open && gt.createPortal(i.jsx("div", { className: `modal-overlay ${m ? "closing" : ""}`, onClick: N, children: i.jsxs("div", { className: `modal-content modal-form ${m ? "closing" : ""}`, onClick: B => B.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: d.type === "edit" ? "Foydalanuvchini tahrirlash" : "Yangi foydalanuvchi qo'shish" }), i.jsx("button", { className: "modal-close", onClick: N, children: i.jsx(ql, {}) })] }), i.jsxs("form", { onSubmit: R, children: [i.jsx("div", { className: "modal-form-body", children: i.jsxs("div", { className: "form-grid", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Username *" }), i.jsx("input", { type: "text", placeholder: "Masalan: admin", required: !0, value: b.username, onChange: B => v({ ...b, username: B.target.value }), disabled: d.type === "edit" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Email" }), i.jsx("input", { type: "email", placeholder: "Masalan: user@example.com", value: b.email, onChange: B => v({ ...b, email: B.target.value }) })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Ismi" }), i.jsx("input", { type: "text", placeholder: "Ism...", value: b.first_name, onChange: B => v({ ...b, first_name: B.target.value }) })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Familiyasi" }), i.jsx("input", { type: "text", placeholder: "Familiya...", value: b.last_name, onChange: B => v({ ...b, last_name: B.target.value }) })] }), i.jsxs("div", { className: "form-group form-full", children: [i.jsx("label", { children: d.type === "edit" ? "Parolni yangilash (ixtiyoriy)" : "Parol *" }), i.jsx("input", { type: "password", required: d.type !== "edit", minLength: 6, value: b.password, onChange: B => v({ ...b, password: B.target.value }), placeholder: d.type === "edit" ? "O'zgartirmaslik uchun bo'sh qoldiring" : "Kamida 6 ta belgi" })] }), i.jsxs("div", { className: "form-full", children: [i.jsx("label", { style: { marginBottom: "12px", display: "block", fontWeight: "bold" }, children: "Asosiy Ruxsatlar" }), i.jsxs("div", { className: "checkbox-container", children: [i.jsxs("label", { className: "checkbox-group", children: [i.jsx("input", { type: "checkbox", checked: b.is_staff, onChange: B => v({ ...b, is_staff: B.target.checked }) }), i.jsx("span", { className: "checkbox-label", children: "Xodim" })] }), i.jsxs("label", { className: "checkbox-group", children: [i.jsx("input", { type: "checkbox", checked: b.is_superuser, onChange: B => v({ ...b, is_superuser: B.target.checked }) }), i.jsx("span", { className: "checkbox-label", children: "Superuser" })] }), i.jsxs("label", { className: "checkbox-group", children: [i.jsx("input", { type: "checkbox", checked: b.is_active, onChange: B => v({ ...b, is_active: B.target.checked }) }), i.jsx("span", { className: "checkbox-label", children: "Faol" })] })] })] }), !b.is_superuser && i.jsxs("div", { className: "form-full", children: [i.jsx("label", { style: { margin: "12px 0", display: "block", fontWeight: "bold" }, children: "Modullar ruxsati" }), i.jsx("div", { className: "permissions-grid", children: F.map(B => i.jsxs("label", { className: "checkbox-group", children: [i.jsx("input", { type: "checkbox", checked: b.permissions[B.key], onChange: () => T(B.key) }), i.jsx("span", { className: "checkbox-label", children: B.label })] }, B.key)) })] })] }) }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { type: "button", className: "btn-secondary", onClick: N, disabled: g, children: "Bekor qilish" }), i.jsx("button", { type: "submit", className: "btn-primary", disabled: g, children: g ? "Saqlanmoqda..." : i.jsxs(i.Fragment, { children: [i.jsx(N0, {}), i.jsx("span", { children: d.type === "edit" ? "Saqlash" : "Yaratish" })] }) })] })] })] }) }), document.body)] }) }, os = { getExpenses: async l => (await we.get("/expenses/", { params: l })).data, getExpense: async l => (await we.get(`/expenses/${l}/`)).data, createExpense: async l => (await we.post("/expenses/", l)).data, updateExpense: async (l, e) => (await we.put(`/expenses/${l}/`, e)).data, deleteExpense: async l => (await we.delete(`/expenses/${l}/`)).data, getCategories: async l => (await we.get("/expense-categories/", { params: l })).data, getCategory: async l => (await we.get(`/expense-categories/${l}/`)).data, createCategory: async l => (await we.post("/expense-categories/", l)).data, updateCategory: async (l, e) => (await we.put(`/expense-categories/${l}/`, e)).data, deleteCategory: async l => (await we.delete(`/expense-categories/${l}/`)).data, getBuildingStats: async (l, e) => (await we.get(`/buildings/${l}/statistics/`, { params: e })).data }, oo = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("line", { x1: "12", y1: "5", x2: "12", y2: "19" }), i.jsx("line", { x1: "5", y1: "12", x2: "19", y2: "12" })] }), Iu = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("circle", { cx: "11", cy: "11", r: "8" }), i.jsx("line", { x1: "21", y1: "21", x2: "16.65", y2: "16.65" })] }), I0 = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" }), i.jsx("path", { d: "M18.5 2.5a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4 9.5-9.5z" })] }), Sr = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("polyline", { points: "3 6 5 6 21 6" }), i.jsx("path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" }), i.jsx("line", { x1: "10", y1: "11", x2: "10", y2: "17" }), i.jsx("line", { x1: "14", y1: "11", x2: "14", y2: "17" })] }), q0 = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" }), i.jsx("polyline", { points: "17 21 17 13 7 13 7 21" }), i.jsx("polyline", { points: "7 3 7 8 15 8" })] }), co = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), i.jsx("line", { x1: "6", y1: "6", x2: "18", y2: "18" })] }), im = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("line", { x1: "12", y1: "16", x2: "12", y2: "12" }), i.jsx("line", { x1: "12", y1: "8", x2: "12.01", y2: "8" })] }), sm = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: i.jsx("polyline", { points: "15 18 9 12 15 6" }) }), Y0 = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: i.jsx("polyline", { points: "9 18 15 12 9 6" }) }), X0 = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("line", { x1: "8", y1: "12", x2: "16", y2: "12" })] }), Dm = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("path", { d: "M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4" }), i.jsx("path", { d: "M4 6v12c0 1.1.9 2 2 2h14v-4" }), i.jsx("path", { d: "M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z" })] }), TA = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("rect", { x: "3", y: "3", width: "18", height: "18", rx: "2", ry: "2" }), i.jsx("circle", { cx: "8.5", cy: "8.5", r: "1.5" }), i.jsx("polyline", { points: "21 15 16 10 5 21" })] }), DA = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: [i.jsx("rect", { x: "3", y: "4", width: "18", height: "18", rx: "2", ry: "2" }), i.jsx("line", { x1: "16", y1: "2", x2: "16", y2: "6" }), i.jsx("line", { x1: "8", y1: "2", x2: "8", y2: "6" }), i.jsx("line", { x1: "3", y1: "10", x2: "21", y2: "10" })] }), AA = () => { const [l, e] = C.useState([]), [t, s] = C.useState([]), [r, o] = C.useState([]), [u, d] = C.useState(!0), [f, m] = C.useState(""), [p, g] = C.useState(""), [y, b] = C.useState(""), [v, k] = C.useState({ count: 0, page: 1, pageSize: 20, totalPages: 1 }), [j, S] = C.useState({ open: !1, type: null, expense: null }), [w, N] = C.useState(!1), [T, R] = C.useState({ building: "", category: "", description: "", amount: "", date: new Date().toISOString().split("T")[0], image: null }), [P, O] = C.useState(!1), [z, F] = C.useState(null); C.useEffect(() => { B() }, []), C.useEffect(() => { A() }, [v.page, f, p, y]); const B = async () => { try { const [W, ae] = await Promise.all([jm(), os.getCategories({ active_only: "true" })]); s(W), o(ae) } catch (W) { console.error(W), $.error("Bino yoki kategoriyalarni yuklashda xatolik") } }, A = async () => { try { d(!0); const W = { page: v.page, page_size: v.pageSize }; f && (W.search = f), p && (W.building = p), y && (W.category = y); const ae = await os.getExpenses(W), J = ae.results || ae; e(J); const G = ae.count || J.length || 0; k(ge => ({ ...ge, count: G, totalPages: Math.ceil(G / ge.pageSize) || 1 })) } catch (W) { console.error(W), $.error("Xarajatlarni yuklashda xatolik"), e([]) } finally { d(!1) } }, L = W => { m(W.target.value), k(ae => ({ ...ae, page: 1 })) }, M = W => { W >= 1 && W <= v.totalPages && k(ae => ({ ...ae, page: W })) }, X = () => { R({ building: "", category: "", description: "", amount: "", date: new Date().toISOString().split("T")[0], image: null }), F(null) }, U = () => { X(), S({ open: !0, type: "create", expense: null }) }, I = W => { R({ building: W.building, category: W.category, description: W.description, amount: W.amount, date: W.date, image: null }), F(W.image), S({ open: !0, type: "edit", expense: W }) }, H = W => { S({ open: !0, type: "delete", expense: W }) }, Y = () => { N(!0), setTimeout(() => { S({ open: !1, type: null, expense: null }), N(!1), X() }, 250) }, ee = W => { const ae = W.target.files[0]; if (ae) { const J = new FileReader; J.onloadend = () => { F(J.result), R(G => ({ ...G, image: J.result })) }, J.readAsDataURL(ae) } }, fe = async W => { if (W.preventDefault(), !T.building || !T.category || !T.amount || !T.description) { $.error("Barcha maydonlarni to'ldiring"); return } try { O(!0), j.type === "edit" ? (await os.updateExpense(j.expense.id, T), $.success("Xarajat muvaffaqiyatli yangilandi")) : (await os.createExpense(T), $.success("Xarajat muvaffaqiyatli qo'shildi")), Y(), A() } catch { $.error("Saqlashda xatolik") } finally { O(!1) } }, q = async () => { if (j.expense) try { O(!0), await os.deleteExpense(j.expense.id), $.success("Xarajat o'chirildi"), Y(), A() } catch { $.error("O'chirishda xatolik") } finally { O(!1) } }, Q = W => new Intl.NumberFormat("uz-UZ").format(W) + " so'm", ce = W => { if (!W) return "-"; const ae = new Date(W), J = ["Yanvar", "Fevral", "Mart", "Aprel", "May", "Iyun", "Iyul", "Avgust", "Sentabr", "Oktabr", "Noyabr", "Dekabr"]; return `${ae.getDate()}-${J[ae.getMonth()]} ${ae.getFullYear()}` }; return i.jsxs("div", { className: "clients-page", children: [i.jsxs("div", { className: "page-header", children: [i.jsxs("div", { className: "header-left", children: [i.jsx("h1", { className: "page-title", children: "Xarajatlar" }), i.jsx("p", { className: "page-subtitle", children: "Barcha xarajatlar va chiqimlar" })] }), i.jsx("div", { className: "header-actions", children: i.jsxs("button", { className: "btn-primary", onClick: U, children: [i.jsx(oo, {}), i.jsx("span", { children: "Xarajat qo'shish" })] }) })] }), i.jsx("div", { className: "page-content", children: i.jsxs("div", { className: "content-card", children: [i.jsx("div", { className: "card-header", children: i.jsxs("div", { className: "filters-container", children: [i.jsxs("div", { className: "search-box", children: [i.jsx(Iu, {}), i.jsx("input", { type: "text", placeholder: "Qidirish (tavsif bo'yicha)...", value: f, onChange: L })] }), i.jsxs("select", { className: "filter-select", value: p, onChange: W => g(W.target.value), children: [i.jsx("option", { value: "", children: "Barcha binolar" }), t.map(W => i.jsx("option", { value: W.id, children: W.name }, W.id))] }), i.jsxs("select", { className: "filter-select", value: y, onChange: W => b(W.target.value), children: [i.jsx("option", { value: "", children: "Barcha kategoriyalar" }), r.map(W => i.jsx("option", { value: W.id, children: W.name }, W.id))] }), i.jsxs("div", { className: "results-count", children: ["Jami: ", i.jsx("strong", { children: v.count }), " ta xarajat"] })] }) }), u ? i.jsxs("div", { className: "loading-state", children: [i.jsx("div", { className: "spinner" }), i.jsx("p", { children: "Yuklanmoqda..." })] }) : l.length === 0 ? i.jsxs("div", { className: "empty-state", children: [i.jsx(X0, {}), i.jsx("h3", { children: "Xarajatlar topilmadi" }), i.jsx("p", { children: "Sizning so'rovingiz bo'yicha ma'lumot topilmadi" }), i.jsxs("button", { className: "btn-primary", onClick: U, children: [i.jsx(oo, { style: { width: 18, height: 18, flexShrink: 0 } }), i.jsx("span", { children: "Xarajat qo'shish" })] })] }) : i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "responsive-table", children: i.jsxs("table", { className: "data-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { children: "#" }), i.jsx("th", { children: "Bino" }), i.jsx("th", { children: "Kategoriya" }), i.jsx("th", { children: "Tavsif" }), i.jsx("th", { children: "Summa" }), i.jsx("th", { children: "Sana" }), i.jsx("th", { style: { textAlign: "right" }, children: "Amallar" })] }) }), i.jsx("tbody", { children: l.map((W, ae) => i.jsxs("tr", { className: "clickable-row", onClick: () => I(W), children: [i.jsx("td", { className: "cell-number", children: (v.page - 1) * v.pageSize + ae + 1 }), i.jsx("td", { className: "cell-name", children: W.building_name }), i.jsx("td", { children: i.jsx("span", { className: `status-badge ${W.category_color}`, style: { display: "inline-flex", alignItems: "center", gap: "6px" }, children: W.category_name }) }), i.jsx("td", { style: { maxWidth: "250px", overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }, children: W.description }), i.jsx("td", { className: "cell-price", style: { fontWeight: "bold", color: "#ef4444" }, children: Q(W.amount) }), i.jsx("td", { children: ce(W.date) }), i.jsx("td", { className: "cell-actions", style: { justifyContent: "flex-end" }, onClick: J => J.stopPropagation(), children: i.jsxs("div", { className: "table-actions", children: [i.jsx("button", { className: "btn-icon btn-edit", onClick: () => I(W), children: i.jsx(I0, {}) }), i.jsx("button", { className: "btn-icon btn-delete", onClick: () => H(W), children: i.jsx(Sr, {}) })] }) })] }, W.id)) })] }) }), v.totalPages > 1 && i.jsxs("div", { className: "pagination-container", children: [i.jsxs("div", { className: "pagination-info", children: ["Sahifa ", v.page, " / ", v.totalPages] }), i.jsxs("div", { className: "pagination-controls", children: [i.jsx("button", { className: "pagination-btn", onClick: () => M(v.page - 1), disabled: v.page === 1, children: i.jsx(sm, {}) }), i.jsx("button", { className: "pagination-btn active", children: v.page }), i.jsx("button", { className: "pagination-btn", onClick: () => M(v.page + 1), disabled: v.page === v.totalPages, children: i.jsx(Y0, {}) })] })] })] })] }) }), j.open && (j.type === "create" || j.type === "edit") && gt.createPortal(i.jsx("div", { className: `modal-overlay ${w ? "closing" : ""}`, onClick: Y, children: i.jsxs("div", { className: `modal-content modal-form ${w ? "closing" : ""}`, onClick: W => W.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: j.type === "edit" ? "Xarajatni tahrirlash" : "Yangi xarajat qo'shish" }), i.jsx("button", { className: "modal-close", onClick: Y, children: i.jsx(co, {}) })] }), i.jsxs("form", { onSubmit: fe, children: [i.jsxs("div", { className: "modal-form-body", children: [i.jsxs("div", { className: "form-row readonly-row", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { htmlFor: "building", children: "Bino" }), i.jsxs("select", { id: "building", value: T.building, onChange: W => R(ae => ({ ...ae, building: W.target.value })), className: "readonly-input", children: [i.jsx("option", { value: "", children: "Bino tanlang" }), t.map(W => i.jsx("option", { value: W.id, children: W.name }, W.id))] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { htmlFor: "category", children: "Kategoriya" }), i.jsxs("select", { id: "category", value: T.category, onChange: W => R(ae => ({ ...ae, category: W.target.value })), className: "readonly-input", children: [i.jsx("option", { value: "", children: "Kategoriya tanlang" }), r.map(W => i.jsx("option", { value: W.id, children: W.name }, W.id))] })] })] }), i.jsxs("div", { className: "form-details-box", children: [i.jsxs("div", { className: "form-row", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { htmlFor: "amount", children: "Summa (so'mda)" }), i.jsx("input", { type: "text", id: "amount", placeholder: "1 000 000", value: T.amount ? new Intl.NumberFormat("ru-RU").format(T.amount) : "", onChange: W => { const ae = W.target.value.replace(/\D/g, ""); R(J => ({ ...J, amount: ae })) } })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { htmlFor: "date", children: "Sana" }), i.jsx("input", { type: "date", id: "date", value: T.date, onChange: W => R(ae => ({ ...ae, date: W.target.value })) })] })] }), i.jsxs("div", { className: "form-group", style: { marginBottom: 0 }, children: [i.jsx("label", { htmlFor: "description", children: "Tavsif / Izoh" }), i.jsx("input", { type: "text", id: "description", placeholder: "Nima uchun sarflandi?", value: T.description, onChange: W => R(ae => ({ ...ae, description: W.target.value })) })] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Chek / Rasm" }), i.jsx("input", { type: "file", accept: "image/*", onChange: ee, className: "file-input" }), z && i.jsx("div", { className: "image-preview", children: i.jsx("img", { src: z, alt: "Preview" }) })] })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { type: "button", className: "btn-secondary", onClick: Y, children: "Bekor qilish" }), i.jsxs("button", { type: "submit", className: "btn-primary", disabled: P, children: [i.jsx(q0, {}), i.jsx("span", { children: P ? "Saqlanmoqda..." : "Saqlash" })] })] })] })] }) }), document.body), j.open && j.type === "delete" && gt.createPortal(i.jsx("div", { className: `modal-overlay ${w ? "closing" : ""}`, onClick: Y, children: i.jsxs("div", { className: `modal-content ${w ? "closing" : ""}`, onClick: W => W.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: "Xarajatni o'chirish" }), i.jsx("button", { className: "modal-close", onClick: Y, children: i.jsx(co, {}) })] }), i.jsxs("div", { className: "modal-body", style: { textAlign: "center", padding: "32px 24px" }, children: [i.jsx("div", { className: "modal-icon danger", style: { margin: "0 auto 20px", width: "64px", height: "64px", borderRadius: "50%", background: "rgba(239, 68, 68, 0.1)", color: "#ef4444", display: "flex", alignItems: "center", justifyContent: "center" }, children: i.jsx(Sr, {}) }), i.jsx("p", { style: { fontSize: "16px", color: "var(--text-primary)", marginBottom: "8px" }, children: "Ushbu xarajatni o'chirmoqchimisiz?" }), i.jsx("p", { style: { fontSize: "14px", color: "var(--text-secondary)" }, children: "Binodagi sarflangan mablag' avtomatik qayta hisoblanadi." })] }), i.jsxs("div", { className: "modal-actions", style: { justifyContent: "center" }, children: [i.jsx("button", { className: "btn-secondary", onClick: Y, children: "Bekor qilish" }), i.jsxs("button", { className: "btn-danger", onClick: q, disabled: P, children: [i.jsx(Sr, {}), i.jsx("span", { children: P ? "O'chirilmoqda..." : "O'chirish" })] })] })] }) }), document.body)] }) }, Ky = [{ name: "WalletIcon", icon: Dm }, { name: "PlusIcon", icon: oo }, { name: "SearchIcon", icon: Iu }, { name: "CalendarIcon", icon: DA }, { name: "ImageIcon", icon: TA }, { name: "InfoIcon", icon: im }], MA = [{ name: "blue", hex: "#3b82f6", class: "text-blue-400 bg-blue-500/20 border-blue-500/30" }, { name: "green", hex: "#22c55e", class: "text-green-400 bg-green-500/20 border-green-500/30" }, { name: "red", hex: "#ef4444", class: "text-red-400 bg-red-500/20 border-red-500/30" }, { name: "amber", hex: "#f59e0b", class: "text-amber-400 bg-amber-500/20 border-amber-500/30" }, { name: "purple", hex: "#a855f7", class: "text-purple-400 bg-purple-500/20 border-purple-500/30" }, { name: "emerald", hex: "#10b981", class: "text-emerald-400 bg-emerald-500/20 border-emerald-500/30" }, { name: "pink", hex: "#ec4899", class: "text-pink-400 bg-pink-500/20 border-pink-500/30" }, { name: "cyan", hex: "#06b6d4", class: "text-cyan-400 bg-cyan-500/20 border-cyan-500/30" }, { name: "slate", hex: "#64748b", class: "text-slate-400 bg-slate-500/20 border-slate-500/30" }], PA = () => { const [l, e] = C.useState([]), [t, s] = C.useState(!0), [r, o] = C.useState(""), [u, d] = C.useState({ open: !1, type: null, category: null }), [f, m] = C.useState(!1), [p, g] = C.useState({ name: "", slug: "", icon: "WalletIcon", color: "text-blue-500 bg-blue-500/10 border-blue-500/20", order: 0, is_active: !0 }), [y, b] = C.useState(!1); C.useEffect(() => { v() }, []); const v = async () => { try { s(!0); const z = await os.getCategories(); e(z.results || z) } catch (z) { console.error(z), $.error("Kategoriyalarni yuklashda xatolik") } finally { s(!1) } }, k = () => { g({ name: "", slug: "", icon: "WalletIcon", color: "text-blue-500 bg-blue-500/10 border-blue-500/20", order: 0, is_active: !0 }) }, j = () => { k(), d({ open: !0, type: "create", category: null }) }, S = z => { g({ name: z.name, slug: z.slug, icon: z.icon, color: z.color, order: z.order, is_active: z.is_active }), d({ open: !0, type: "edit", category: z }) }, w = z => { d({ open: !0, type: "delete", category: z }) }, N = () => { m(!0), setTimeout(() => { d({ open: !1, type: null, category: null }), m(!1), k() }, 250) }, T = async z => { if (z.preventDefault(), !p.name || !p.slug) { $.error("Nom va Slug kiritilishi shart"); return } try { b(!0), u.type === "edit" ? (await os.updateCategory(u.category.id, p), $.success("Kategoriya yangilandi")) : (await os.createCategory(p), $.success("Kategoriya yaratildi")), N(), v() } catch { $.error("Saqlashda xatolik") } finally { b(!1) } }, R = async () => { if (u.category) try { b(!0), await os.deleteCategory(u.category.id), $.success("Kategoriya o'chirildi"), N(), v() } catch { $.error("Ushbu kategoriyada xarajatlar bor bo'lishi mumkin") } finally { b(!1) } }, P = l.filter(z => z.name.toLowerCase().includes(r.toLowerCase())), O = z => { const F = Ky.find(B => B.name === z); return F ? i.jsx(F.icon, {}) : i.jsx(Dm, {}) }; return i.jsxs("div", { className: "clients-page", children: [i.jsxs("div", { className: "page-header", children: [i.jsxs("div", { className: "header-left", children: [i.jsx("h1", { className: "page-title", children: "Chiqim kategoriyalari" }), i.jsx("p", { className: "page-subtitle", children: "Xarajat turlarini boshqarish" })] }), i.jsx("div", { className: "header-actions", children: i.jsxs("button", { className: "btn-primary", onClick: j, children: [i.jsx(oo, {}), i.jsx("span", { children: "Kategoriya qo'shish" })] }) })] }), i.jsx("div", { className: "page-content", children: i.jsxs("div", { className: "content-card", children: [i.jsx("div", { className: "card-header", children: i.jsxs("div", { className: "filters-container", children: [i.jsxs("div", { className: "search-box", children: [i.jsx(Iu, {}), i.jsx("input", { type: "text", placeholder: "Kategoriyani qidirish...", value: r, onChange: z => o(z.target.value) })] }), i.jsxs("div", { className: "results-count", children: ["Jami: ", i.jsx("strong", { children: l.length }), " ta kategoriya"] })] }) }), t ? i.jsxs("div", { className: "loading-state", children: [i.jsx("div", { className: "spinner" }), i.jsx("p", { children: "Yuklanmoqda..." })] }) : P.length === 0 ? i.jsxs("div", { className: "empty-state", children: [i.jsx(X0, {}), i.jsx("h3", { children: "Kategoriyalar topilmadi" }), i.jsxs("button", { className: "btn-primary", onClick: j, children: [i.jsx(oo, { style: { width: 18, height: 18 } }), i.jsx("span", { children: "Kategoriya qo'shish" })] })] }) : i.jsx("div", { className: "responsive-table", children: i.jsxs("table", { className: "data-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { style: { width: "60px" }, children: "Belgi" }), i.jsx("th", { children: "Nomi" }), i.jsx("th", { children: "Slug" }), i.jsx("th", { style: { width: "100px" }, children: "Tartib" }), i.jsx("th", { style: { width: "120px" }, children: "Status" }), i.jsx("th", { style: { width: "100px", textAlign: "right" }, children: "Amallar" })] }) }), i.jsx("tbody", { children: P.map(z => i.jsxs("tr", { onClick: () => S(z), style: { cursor: "pointer" }, children: [i.jsx("td", { children: i.jsx("div", { className: `category-icon-box small ${z.color}`, children: O(z.icon) }) }), i.jsx("td", { className: "cell-name", children: i.jsx("span", { style: { fontWeight: 600 }, children: z.name }) }), i.jsx("td", { style: { color: "var(--text-secondary)" }, children: z.slug }), i.jsx("td", { children: z.order }), i.jsx("td", { children: i.jsx("span", { className: `status-badge ${z.is_active ? "active" : "inactive"}`, children: z.is_active ? "Faol" : "Nofaol" }) }), i.jsx("td", { children: i.jsx("div", { className: "cell-actions", style: { justifyContent: "flex-end" }, onClick: F => F.stopPropagation(), children: i.jsxs("div", { className: "table-actions", children: [i.jsx("button", { className: "btn-icon btn-edit", title: "Tahrirlash", onClick: () => S(z), children: i.jsx(I0, {}) }), i.jsx("button", { className: "btn-icon btn-delete", title: "O'chirish", onClick: () => w(z), children: i.jsx(Sr, {}) })] }) }) })] }, z.id)) })] }) })] }) }), u.open && (u.type === "create" || u.type === "edit") && gt.createPortal(i.jsx("div", { className: `modal-overlay ${f ? "closing" : ""}`, onClick: N, children: i.jsxs("div", { className: `modal-content modal-form ${f ? "closing" : ""}`, onClick: z => z.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: u.type === "edit" ? "Kategoriyani tahrirlash" : "Yangi kategoriya" }), i.jsx("button", { className: "modal-close", onClick: N, children: i.jsx(co, {}) })] }), i.jsxs("form", { onSubmit: T, children: [i.jsxs("div", { className: "modal-form-body", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { htmlFor: "name", className: "required", children: "Kategoriya nomi" }), i.jsx("input", { type: "text", id: "name", placeholder: "Masalan: Qurilish mollari", value: p.name, onChange: z => { const F = z.target.value, B = F.toLowerCase().replace(/\s+/g, "-").replace(/[^\w-]+/g, ""); g(A => ({ ...A, name: F, slug: B })) }, required: !0 })] }), i.jsxs("div", { className: "form-details-box", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Belgi (Icon)" }), i.jsx("div", { className: "icon-picker-grid", children: Ky.map(({ name: z }) => i.jsx("button", { type: "button", className: `icon-picker-item ${p.icon === z ? `active ${p.color}` : ""}`, onClick: () => g(F => ({ ...F, icon: z })), title: z, children: O(z) }, z)) })] }), i.jsxs("div", { className: "form-group", style: { marginBottom: 0 }, children: [i.jsx("label", { children: "Rang (Color)" }), i.jsx("div", { className: "color-picker-grid", children: MA.map(z => i.jsx("button", { type: "button", className: `color-picker-item ${p.color === z.class ? "active" : ""}`, style: { backgroundColor: z.hex }, onClick: () => g(F => ({ ...F, color: z.class })), title: z.name }, z.name)) })] })] }), i.jsxs("div", { className: "form-row", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { htmlFor: "slug", className: "required", children: "Slug (avtomatik)" }), i.jsx("input", { type: "text", id: "slug", value: p.slug, onChange: z => g(F => ({ ...F, slug: z.target.value })) })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { htmlFor: "order", children: "Tartib" }), i.jsx("input", { type: "number", id: "order", value: p.order, onChange: z => g(F => ({ ...F, order: z.target.value })) })] })] }), i.jsxs("div", { className: "checkbox-toggle", children: [i.jsx("input", { type: "checkbox", id: "is_active", checked: p.is_active, onChange: z => g(F => ({ ...F, is_active: z.target.checked })) }), i.jsx("label", { htmlFor: "is_active", children: "Faol kategoriya" })] })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { type: "button", className: "btn-secondary", onClick: N, children: "Bekor qilish" }), i.jsxs("button", { type: "submit", className: "btn-primary", disabled: y, children: [i.jsx(q0, {}), i.jsx("span", { children: y ? "Saqlanmoqda..." : "Saqlash" })] })] })] })] }) }), document.body), u.open && u.type === "delete" && gt.createPortal(i.jsx("div", { className: `modal-overlay ${f ? "closing" : ""}`, onClick: N, children: i.jsxs("div", { className: `modal-content ${f ? "closing" : ""}`, onClick: z => z.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: "Kategoriyani o'chirish" }), i.jsx("button", { className: "modal-close", onClick: N, children: i.jsx(co, {}) })] }), i.jsxs("div", { className: "modal-body", style: { textAlign: "center", padding: "32px 24px" }, children: [i.jsx("div", { className: "modal-icon danger", style: { margin: "0 auto 20px", width: "64px", height: "64px", borderRadius: "50%", background: "rgba(239, 68, 68, 0.1)", color: "#ef4444", display: "flex", alignItems: "center", justifyContent: "center" }, children: i.jsx(Sr, {}) }), i.jsxs("p", { style: { fontSize: "16px", color: "var(--text-primary)", marginBottom: "8px" }, children: [i.jsx("strong", { children: u.category?.name }), " kategoriyasini o'chirishni xohlaysizmi?"] }), i.jsx("p", { style: { fontSize: "14px", color: "var(--text-secondary)" }, children: "Bu kategoriya ostidagi xarajatlar mavjud bo'lsa o'chirish imkonsiz bo'lishi mumkin." })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { className: "btn-secondary", onClick: N, children: "Bekor qilish" }), i.jsxs("button", { className: "btn-danger", onClick: R, disabled: y, children: [i.jsx(Sr, {}), i.jsx("span", { children: y ? "O'chirilmoqda..." : "O'chirish" })] })] })] }) }), document.body)] }) }, OA = () => { const [l, e] = C.useState([]), [t, s] = C.useState(!0), [r, o] = C.useState(""), [u, d] = C.useState(""), [f, m] = C.useState(""), [p, g] = C.useState(""), [y, b] = C.useState(""), [v, k] = C.useState([]), [j, S] = C.useState([]), [w, N] = C.useState(null), [T, R] = C.useState(null), [P, O] = C.useState(!1), [z, F] = C.useState([]), [B, A] = C.useState(!1), [L, M] = C.useState("list"), [X, U] = C.useState(1), [I, H] = C.useState(1), Y = 20, [ee, fe] = C.useState(1), [q, Q] = C.useState(1), ce = 20; C.useEffect(() => { ae(), W() }, [X]), C.useEffect(() => { w && (L === "list" ? J(w) : L === "stats" && G(w)) }, [u, f, p, y, L, ee]), C.useEffect(() => { fe(1) }, [u, f, p, y]); const W = async () => { try { const [xe] = await Promise.all([os.getCategories({ active_only: !0 })]); k(xe.results || xe) } catch (xe) { console.error("Filter options loading failed", xe) } }, ae = async () => { try { s(!0); const xe = await Ru({ page: X, page_size: Y }); xe.results ? (e(xe.results), H(Math.ceil(xe.count / Y))) : e(xe) } catch (xe) { console.error(xe), $.error("Binolarni yuklashda xatolik") } finally { s(!1) } }, J = async (xe = w) => { if (xe) { A(!0); try { const K = { building: xe.id, page: ee, page_size: ce, start_date: u || void 0, end_date: f || void 0, category: p || void 0, user: y || void 0 }, ve = await os.getExpenses(K); F(ve.results || ve), ve.count ? Q(Math.ceil(ve.count / ce)) : Q(1); const Ae = {}; (ve.results || ve).forEach(ne => { ne.created_by && ne.created_by_name && (Ae[ne.created_by] = ne.created_by_name) }), S(Object.entries(Ae).map(([ne, re]) => ({ id: ne, name: re }))) } catch (K) { console.error(K), K.response ? $.error(`Xatolik: ${K.response.status} - ${JSON.stringify(K.response.data)}`) : $.error("Ro'yxatni yuklashda xatolik: Serverga ulanib bo'lmadi") } finally { A(!1) } } }, G = async (xe = w, K = null) => { if (xe) { O(!0); try { const ve = K || { start_date: u || void 0, end_date: f || void 0, user: y || void 0 }, Ae = await os.getBuildingStats(xe.id, ve); R(Ae) } catch (ve) { console.error(ve), $.error("Statistikani yuklashda xatolik") } finally { O(!1) } } }, ge = async xe => { try { N(xe), d(""), m(""), g(""), b(""), await G(xe, { start_date: void 0, end_date: void 0, user: void 0 }), fe(1), J(xe) } catch (K) { console.error(K) } }, de = xe => new Intl.NumberFormat("uz-UZ").format(xe || 0) + " so'm", Se = (xe, K) => !K || K === 0 ? 0 : Math.min(Math.round(xe / K * 100), 100), Ee = ({ data: xe }) => i.jsx(Ra, { data: xe || [], nameField: "category__name", valueField: "total", height: 300, innerRadius: 55 }), be = ({ data: xe }) => i.jsx(bs, { data: xe, xField: "month", yField: "total", height: 300, color: "#6366f1", tooltipFormatter: "{categoryX}: {valueY}" }), se = ({ data: xe }) => i.jsx(Ba, { data: xe, xField: "day", yField: "total", height: 300, color: "#10b981", tooltipText: "Kun: {categoryX}\\nSumma: {valueY}" }), Ne = ({ data: xe }) => i.jsx(bs, { data: xe, xField: "name", yField: "total", height: 300, horizontal: !0, color: "#f59e0b", tooltipFormatter: "{categoryY}: {valueX}" }); return i.jsxs("div", { className: "clients-page building-expenses-page", children: [i.jsx("div", { className: "page-header", children: i.jsxs("div", { className: "header-left", children: [i.jsx("h1", { className: "page-title", children: "Ob'ektlar tahlili" }), i.jsx("p", { className: "page-subtitle", children: "Binolar bo'yicha xarajatlar va byudjet nazorati" })] }) }), i.jsxs("div", { className: `page-content building-expenses-layout ${w ? "has-selection" : ""}`, children: [i.jsxs("div", { className: "content-card buildings-sidebar", children: [i.jsx("div", { className: "card-header", children: i.jsxs("div", { className: "search-box", style: { width: "100%" }, children: [i.jsx(Iu, {}), i.jsx("input", { type: "text", placeholder: "Binoni qidirish...", value: r, onChange: xe => o(xe.target.value) })] }) }), i.jsx("div", { className: "buildings-list-scroll", children: t ? i.jsx("div", { className: "loading-state", children: i.jsx("div", { className: "spinner" }) }) : l.filter(xe => xe.name.toLowerCase().includes(r.toLowerCase()) || xe.code.toLowerCase().includes(r.toLowerCase())).length === 0 ? i.jsx("div", { className: "empty-state", children: "Topilmadi" }) : i.jsxs(i.Fragment, { children: [i.jsx("div", { style: { display: "flex", flexDirection: "column", gap: "8px" }, children: l.filter(xe => xe.name.toLowerCase().includes(r.toLowerCase()) || xe.code.toLowerCase().includes(r.toLowerCase())).map(xe => i.jsxs("div", { className: `building-item ${w?.id === xe.id ? "active" : ""}`, onClick: () => ge(xe), children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "4px" }, children: [i.jsx("strong", { className: "building-name", children: xe.name }), i.jsx("span", { className: "building-code", children: xe.code })] }), i.jsxs("div", { className: "building-budget", children: ["Budget: ", de(xe.budget)] }), i.jsx("div", { className: "progress-mini", children: i.jsx("div", { style: { width: `${Se(xe.spent_amount, xe.budget)}%`, height: "100%", background: Se(xe.spent_amount, xe.budget) > 90 ? "#ef4444" : "#6366f1" } }) })] }, xe.id)) }), I > 1 && i.jsxs("div", { className: "pagination-mini", children: [i.jsx("button", { className: "btn btn-secondary", onClick: () => U(xe => Math.max(1, xe - 1)), disabled: X === 1, style: { padding: "6px 12px", fontSize: "13px" }, children: "Ortga" }), i.jsxs("span", { style: { fontSize: "13px", alignSelf: "center", color: "var(--text-secondary)" }, children: [X, " / ", I] }), i.jsx("button", { className: "btn btn-secondary", onClick: () => U(xe => Math.min(I, xe + 1)), disabled: X === I, style: { padding: "6px 12px", fontSize: "13px" }, children: "Oldinga" })] })] }) })] }), i.jsx("div", { className: "content-card building-detail-panel", children: w ? i.jsxs("div", { className: "building-stats-detail", children: [i.jsxs("button", { className: "btn-back-mobile", onClick: () => N(null), children: [i.jsx(sm, {}), i.jsx("span", { children: "Binolar ro'yxatiga qaytish" })] }), i.jsxs("div", { className: "building-detail-header", children: [i.jsxs("div", { children: [i.jsx("h2", { className: "detail-title", children: w.name }), i.jsxs("div", { className: "segmented-tabs", children: [i.jsxs("button", { className: `segmented-tab ${L === "list" ? "active" : ""}`, onClick: () => M("list"), children: [i.jsx(Dm, { style: { width: 18, height: 18 } }), i.jsx("span", { children: "Ro'yxat" })] }), i.jsxs("button", { className: `segmented-tab ${L === "stats" ? "active" : ""}`, onClick: () => M("stats"), children: [i.jsx(im, { style: { width: 18, height: 18 } }), i.jsx("span", { children: "Statistika" })] })] })] }), T && i.jsxs("div", { className: "budget-summary", children: [i.jsx("div", { className: "summary-label", children: "Qolgan byudjet" }), i.jsx("div", { className: `summary-value ${T.remaining_budget < 0 ? "danger" : "success"}`, children: de(T.remaining_budget) })] })] }), i.jsxs("div", { className: "filters-bar", children: [i.jsx("input", { type: "date", value: u, onChange: xe => d(xe.target.value), title: "Boshlanish sanasi" }), i.jsx("input", { type: "date", value: f, onChange: xe => m(xe.target.value), title: "Tugash sanasi" }), L === "list" && i.jsxs("select", { value: p, onChange: xe => g(xe.target.value), children: [i.jsx("option", { value: "", children: "Barcha kategoriyalar" }), v.map(xe => i.jsx("option", { value: xe.id, children: xe.name }, xe.id))] }), i.jsxs("select", { value: y, onChange: xe => b(xe.target.value), children: [i.jsx("option", { value: "", children: "Barcha xodimlar" }), j.map(xe => i.jsx("option", { value: xe.id, children: xe.name }, xe.id))] }), (u || f || p || y) && i.jsxs("button", { className: "btn-filter-clear", onClick: () => { d(""), m(""), g(""), b("") }, children: [i.jsx(co, { style: { width: 16, height: 16 } }), "Tozalash"] })] }), L === "list" ? i.jsx("div", { children: B ? i.jsx("div", { className: "loading-state", children: i.jsx("div", { className: "spinner" }) }) : z.length === 0 ? i.jsx("div", { className: "empty-state", children: "Xarajatlar topilmadi" }) : i.jsxs(i.Fragment, { children: [i.jsx("div", { className: "responsive-table", children: i.jsxs("table", { className: "data-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { children: "Sana" }), i.jsx("th", { children: "Kategoriya" }), i.jsx("th", { children: "Tavsif" }), i.jsx("th", { children: "Summa" }), i.jsx("th", { children: "Kim tomonidan" })] }) }), i.jsx("tbody", { children: z.map(xe => i.jsxs("tr", { children: [i.jsx("td", { children: xe.date }), i.jsx("td", { children: xe.category ? i.jsx("span", { className: `status-badge ${xe.category_color}`, children: xe.category_name }) : "-" }), i.jsx("td", { children: xe.description }), i.jsx("td", { style: { fontWeight: "500" }, children: de(xe.amount) }), i.jsx("td", { children: xe.created_by_name || "-" })] }, xe.id)) })] }) }), q > 1 && i.jsxs("div", { className: "pagination-container", style: { marginTop: "20px" }, children: [i.jsxs("div", { className: "pagination-info", children: ["Sahifa ", ee, " / ", q] }), i.jsxs("div", { className: "pagination-controls", children: [i.jsx("button", { className: "pagination-btn", onClick: () => fe(Math.max(1, ee - 1)), disabled: ee === 1, children: i.jsx(sm, {}) }), i.jsx("button", { className: "pagination-btn active", children: ee }), i.jsx("button", { className: "pagination-btn", onClick: () => fe(Math.min(q, ee + 1)), disabled: ee === q, children: i.jsx(Y0, {}) })] })] })] }) }) : i.jsx("div", { children: P || !T ? i.jsx("div", { className: "loading-state", children: i.jsx("div", { className: "spinner" }) }) : i.jsxs("div", { className: "charts-grid", children: [i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "1. Kategoriyalar bo'yicha" }), i.jsx("h4", { children: "Kategoriyalar bo'yicha" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(Ee, { data: T.by_category }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "2. Oylik dinamika" }), i.jsx("h4", { children: "Oylik dinamika" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(be, { data: T.monthly_dynamics }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "3. So'nggi 30 kun" }), i.jsx("h4", { children: "So'nggi 30 kun" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(se, { data: T.daily_trend }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "4. Foydalanuvchilar ulushi" }), i.jsx("h4", { children: "Foydalanuvchilar ulushi" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(Ne, { data: T.user_contribution }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "5. O'rtacha xarajat (Kategoriya)" }), i.jsx("h4", { children: "O'rtacha xarajat (Kategoriya)" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(bs, { data: T.by_category, xField: "category__name", yField: "total", height: 300, color: "#8b5cf6", tooltipFormatter: "{categoryX}: {valueY}" }) })] }), i.jsxs("div", { className: "chart-card", children: [i.jsxs("div", { className: "chart-card-header", children: [i.jsx("span", { className: "chart-number", children: "6. Byudjet bajarilishi" }), i.jsx("h4", { children: "Byudjet bajarilishi" })] }), i.jsx("div", { className: "chart-body", children: i.jsx(Ra, { data: [{ name: "Sarflangan", value: parseFloat(T.spent_amount) }, { name: "Qolgan", value: Math.max(0, parseFloat(T.remaining_budget)) }], nameField: "name", valueField: "value", height: 300, innerRadius: 55, colors: ["#ef4444", "#10b981"] }) })] })] }) })] }) : i.jsxs("div", { className: "empty-state-full", children: [i.jsx(im, {}), i.jsx("h3", { children: "Bino tanlanmagan" }), i.jsx("p", { children: "Tahlilni ko'rish uchun chap tomondan binoni tanlang" })] }) })] })] }) }, ls = { getTemplates: () => we.get("/sms-templates/"), createTemplate: l => we.post("/sms-templates/", l), updateTemplate: (l, e) => we.put(`/sms-templates/${l}/`, e), deleteTemplate: l => we.delete(`/sms-templates/${l}/`), getHistory: () => we.get("/sms-history/"), getEskizInfo: () => we.get("/sms-history/eskiz_info/"), getEskizTemplates: () => we.get("/sms-history/eskiz_templates/"), getEskizHistory: () => we.get("/sms-history/eskiz_history/"), createEskizTemplate: l => we.post("/sms-history/eskiz_create_template/", l), sendManual: l => we.post("/sms-history/send_manual/", l) }, EA = () => { const [l, e] = C.useState([]), [t, s] = C.useState([]), [r, o] = C.useState([]), [u, d] = C.useState([]), [f, m] = C.useState(null), [p, g] = C.useState(!1), [y, b] = C.useState(!1), [v, k] = C.useState("templates"), [j, S] = C.useState(null), [w, N] = C.useState(1), T = 20, [R, P] = C.useState(!1), [O, z] = C.useState(!1), [F, B] = C.useState(!1), [A, L] = C.useState(null), [M, X] = C.useState(!1), [U, I] = C.useState({ name: "", text: "", saveToEskiz: !1 }), [H, Y] = C.useState({ phone: "+998 ", message: "" }), ee = ne => { if (!ne) return "+998 "; let re = ne.replace(/\D/g, ""); re.startsWith("998") || (re = "998" + re), re = re.substring(0, 12); let Ce = "+998"; return re.length > 3 && (Ce += " (" + re.substring(3, 5)), re.length > 5 && (Ce += ") " + re.substring(5, 8)), re.length > 8 && (Ce += "-" + re.substring(8, 10)), re.length > 10 && (Ce += "-" + re.substring(10, 12)), Ce }, fe = ne => { const re = ee(ne.target.value); Y(Ce => ({ ...Ce, phone: re })) }; C.useEffect(() => { q(), Q() }, []), C.useEffect(() => { N(1) }, [v]); const q = async () => { try { const [ne, re] = await Promise.all([ls.getTemplates(), ls.getHistory()]); e(ne.data.results || ne.data), o(re.data.results || re.data) } catch (ne) { console.error("Local data fetch error:", ne) } }, Q = async () => { try { b(!0), S(null); const ne = await ls.getEskizInfo(); m(ne.data), ne.data.success ? ce() : S(ne.data.error || "Eskiz API ulanishida noma'lum xato") } catch { m({ success: !1 }), S("Server bilan bog'lanishda xato yuz berdi") } finally { b(!1) } }, ce = async () => { try { const [ne, re] = await Promise.all([ls.getEskizTemplates(), ls.getEskizHistory()]); s(ne.data.data || ne.result || []), d(re.data.data || re.result || []) } catch (ne) { console.error("Eskiz data fetch error:", ne) } }, W = async ne => { ne.preventDefault(); try { g(!0); let re = !1; if (U.saveToEskiz && Ee) { if (U.text.length < 10) { $.error("Eskiz shabloni kamida 10 ta belgidan iborat bo'lishi kerak"), g(!1); return } const Ce = await ls.createEskizTemplate({ text: U.text }); Ce.data.success ? ($.success("Eskiz moderatsiyasiga yuborildi"), re = !0) : ($.error("Eskizga yuborishda xatolik: " + Ce.data.message), await ls.createTemplate({ name: U.name, text: U.text }), $.info("Shablon mahalliy bazada saqlandi"), re = !0) } else await ls.createTemplate({ name: U.name, text: U.text }), $.success("Shablon muvaffaqiyatli saqlandi"), re = !0; re && (I({ name: "", text: "", saveToEskiz: !1 }), Se(P), q(), ce()) } catch { $.error("Xatolik yuz berdi") } finally { g(!1) } }, ae = async ne => { if (window.confirm("Haqiqatdan ham o'chirmoqchimisiz?")) try { await ls.deleteTemplate(ne), $.success("O'chirildi"), q() } catch { $.error("Xatolik yuz berdi") } }, J = async ne => { ne.preventDefault(); const re = H.phone.replace(/\D/g, ""); if (re.length !== 12) { $.error("Telefon raqami noto'g'ri kiritilgan"); return } if (H.message.length < 2) { $.error("Xabar matni juda kiska"); return } try { g(!0); const Ce = await ls.sendManual({ ...H, phone: re }); Ce.data.success ? ($.success("Xabar yuborildi"), Se(z), Y({ phone: "+998 ", message: "" }), q(), ce()) : $.error(Ce.data.error || "Xabar yuborilmadi") } catch (Ce) { $.error(Ce.response?.data?.error || "Tizim xatosi") } finally { g(!1) } }, G = ne => { L(ne), B(!0) }, ge = async ne => { if (ne.text.length < 10) { $.error("Eskiz shabloni kamida 10 ta belgidan iborat bo'lishi kerak"); return } try { g(!0); const re = await ls.createEskizTemplate({ text: ne.text }); re.data.success ? ($.success("Moderatsiyaga yuborildi"), ne.source === "local" && await ls.deleteTemplate(ne.id), Se(B), q(), ce()) : $.error(re.data.message || "Xatolik yuz berdi") } catch { $.error("Tizim xatosi") } finally { g(!1) } }, de = (ne, re) => { re && re.stopPropagation(), navigator.clipboard.writeText(ne), $.success("Xabar nusxalandi") }, Se = ne => { X(!0), setTimeout(() => { ne(!1), X(!1) }, 300) }, Ee = f?.success, be = [...l.map(ne => ({ ...ne, source: "local" })), ...t.map(ne => ({ ...ne, source: "eskiz" }))], se = [...r.map(ne => ({ ...ne, source: "local" })), ...u.map(ne => ({ ...ne, source: "eskiz" }))].sort((ne, re) => { const Ce = ne.sent_at ? new Date(ne.sent_at) : new Date(0); return (re.sent_at ? new Date(re.sent_at) : new Date(0)) - Ce }), Ne = v === "templates" ? be : se, xe = Ne.length, K = Math.ceil(xe / T), ve = Ne.slice((w - 1) * T, w * T), Ae = () => K <= 1 ? null : i.jsxs("div", { className: "pagination-container", children: [i.jsxs("div", { className: "pagination-info", children: ["Sahifa ", w, " / ", K, " (Jami ", xe, " ta)"] }), i.jsxs("div", { className: "pagination-controls", children: [i.jsx("button", { className: "pagination-btn", onClick: () => N(ne => Math.max(1, ne - 1)), disabled: w === 1, children: "<" }), [...Array(K)].map((ne, re) => i.jsx("button", { className: `pagination-btn ${w === re + 1 ? "active" : ""}`, onClick: () => N(re + 1), children: re + 1 }, re)).slice(Math.max(0, w - 3), Math.min(K, w + 2)), i.jsx("button", { className: "pagination-btn", onClick: () => N(ne => Math.min(K, ne + 1)), disabled: w === K, children: ">" })] })] }); return i.jsxs("div", { className: "sms-page-refined", children: [i.jsxs("div", { className: "page-header", children: [i.jsx("div", { className: "header-left", children: i.jsxs("div", { children: [i.jsx("h1", { className: "page-title", children: "SMS Xizmati" }), i.jsx("p", { className: "page-subtitle", children: "Mijozlar bilan aloqani boshqarish" })] }) }), i.jsxs("div", { className: "header-actions", children: [i.jsxs("div", { className: "eskiz-balance-widget", children: [i.jsx("div", { className: "widget-icon", children: i.jsx(_A, { size: 18 }) }), i.jsxs("div", { className: "balance-info-mini", children: [i.jsx("span", { className: "label", children: "Eskiz Balans:" }), i.jsx("span", { className: "value", children: y ? "..." : Ee && f?.data?.data?.balance ? Number(f.data.data.balance).toLocaleString() + " so'm" : "0 so'm" })] }), i.jsx("button", { className: "btn-refresh-mini", onClick: Q, title: "Yangilash", children: i.jsx(Uy, { size: 14, className: y ? "spin" : "" }) })] }), i.jsxs("button", { className: "btn-secondary", onClick: () => P(!0), disabled: !Ee || p, children: [i.jsx(hA, { size: 18 }), "Shablon qo'shish"] }), i.jsxs("button", { className: "btn-primary", onClick: () => z(!0), disabled: !Ee || p, children: [i.jsx(Vy, { size: 18 }), "SMS Yuborish"] })] })] }), j && i.jsxs("div", { className: "sms-error-alert", style: { backgroundColor: "rgba(239, 68, 68, 0.1)", border: "1px solid #ef4444", borderRadius: "12px", padding: "16px", margin: "0 0 24px 0", display: "flex", alignItems: "center", gap: "12px", color: "#ef4444" }, children: [i.jsx(sA, { size: 20 }), i.jsxs("div", { style: { flex: 1 }, children: [i.jsx("strong", { style: { display: "block" }, children: "Ulanishda muammo bo'ldi:" }), i.jsx("span", { style: { fontSize: "14px" }, children: j })] }), i.jsx("button", { onClick: Q, className: "btn-icon", style: { background: "transparent", color: "#ef4444" }, children: i.jsx(Uy, { size: 16 }) })] }), i.jsx("div", { className: "page-content", children: i.jsxs("div", { className: "content-card", children: [i.jsx("div", { className: "card-header", children: i.jsxs("div", { className: "filters-container", children: [i.jsxs("div", { className: "sms-tabs-refined", children: [i.jsxs("button", { className: `tab-btn ${v === "templates" ? "active" : ""}`, onClick: () => k("templates"), children: [i.jsx(Xy, { size: 18 }), "Shablonlar"] }), i.jsxs("button", { className: `tab-btn ${v === "history" ? "active" : ""}`, onClick: () => k("history"), children: [i.jsx(cA, { size: 18 }), "SMS Tarixi"] })] }), i.jsx("div", { className: "results-count", children: v === "templates" ? i.jsxs(i.Fragment, { children: ["Jami: ", i.jsx("strong", { children: xe }), " ta shablon"] }) : i.jsxs(i.Fragment, { children: ["Jami: ", i.jsx("strong", { children: xe }), " ta xabar"] }) })] }) }), i.jsxs("div", { className: "card-body p-0", children: [v === "templates" ? i.jsx("div", { className: "responsive-table", children: i.jsxs("table", { className: "data-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { children: "#" }), i.jsx("th", { children: "Shablon nomi" }), i.jsx("th", { children: "Xabar matni" }), i.jsx("th", { children: "Manba" }), i.jsx("th", { style: { textAlign: "right" }, children: "Amallar" })] }) }), i.jsx("tbody", { children: xe === 0 ? i.jsx("tr", { children: i.jsx("td", { colSpan: "5", style: { textAlign: "center", padding: "40px" }, children: p ? "Yuklanmoqda..." : "Ma'lumot topilmadi" }) }) : ve.map((ne, re) => i.jsxs("tr", { onClick: () => G(ne), style: { cursor: "pointer" }, children: [i.jsx("td", { className: "cell-number", children: (w - 1) * T + re + 1 }), i.jsx("td", { style: { fontWeight: "600" }, children: ne.source === "local" ? ne.name : ne.name || (ne.type ? ne.type.toUpperCase() : "Eskiz Shablon") }), i.jsx("td", { className: "cell-message-text", children: i.jsxs("div", { className: "message-copy-wrapper", children: [i.jsx("span", { className: "text-truncate", children: ne.source === "local" ? ne.text : ne.original_text || ne.template || ne.text }), i.jsx("button", { className: "btn-copy-mini", onClick: Ce => de(ne.source === "local" ? ne.text : ne.original_text || ne.template || ne.text, Ce), title: "Nusxalash", children: i.jsx(Yy, { size: 14 }) })] }) }), i.jsx("td", { children: i.jsx("div", { style: { display: "flex", flexDirection: "column", gap: "6px" }, children: ne.source === "local" ? i.jsx("span", { className: "status-badge", style: { backgroundColor: "var(--bg-tertiary)", color: "var(--text-secondary)", alignSelf: "flex-start" }, children: "Mahalliy" }) : i.jsxs(i.Fragment, { children: [i.jsx("span", { className: "status-badge", style: { backgroundColor: "rgba(14, 165, 233, 0.1)", color: "#0ea5e9", alignSelf: "flex-start" }, children: "Eskiz" }), ne.status && i.jsx("span", { style: { fontSize: "11px", fontWeight: "500", color: ne.status === "approved" || ne.status === "service" ? "#10b981" : ne.status === "pending" || ne.status === "moderation" ? "#f59e0b" : "#ef4444" }, children: ne.status === "approved" || ne.status === "service" ? "Tasdiqlangan " : ne.status === "pending" || ne.status === "moderation" ? "Kutilmoqda " : ne.status === "rejected" ? "Rad etildi " : ne.status })] }) }) }), i.jsx("td", { onClick: Ce => Ce.stopPropagation(), children: i.jsxs("div", { className: "table-actions", style: { justifyContent: "flex-end" }, children: [i.jsx("button", { className: "btn-icon mini", title: "Batafsil", onClick: () => G(ne), style: { background: "rgba(99, 102, 241, 0.1)", color: "var(--primary-color)" }, children: i.jsx(Xy, { size: 14 }) }), ne.source === "local" && i.jsx("button", { className: "btn-icon mini", title: "O'chirish", onClick: () => ae(ne.id), style: { background: "rgba(239, 68, 68, 0.1)", color: "#ef4444" }, children: i.jsx(Wy, { size: 14 }) })] }) })] }, `${ne.source}-${ne.id}`)) })] }) }) : i.jsx("div", { className: "responsive-table", children: i.jsxs("table", { className: "data-table", children: [i.jsx("thead", { children: i.jsxs("tr", { children: [i.jsx("th", { children: "Raqam" }), i.jsx("th", { children: "Xabar" }), i.jsx("th", { children: "Holat" }), i.jsx("th", { children: "Manba" }), i.jsx("th", { children: "Sana" })] }) }), i.jsx("tbody", { children: xe === 0 ? i.jsx("tr", { children: i.jsx("td", { colSpan: "5", style: { textAlign: "center", padding: "40px" }, children: "Ma'lumot topilmadi" }) }) : ve.map(ne => i.jsxs("tr", { onClick: () => G(ne), style: { cursor: "pointer" }, children: [i.jsx("td", { className: "cell-number", style: { width: "150px" }, children: ne.source === "local" ? ne.phone : ne.mobile_phone }), i.jsx("td", { className: "cell-message-history", children: i.jsxs("div", { className: "message-copy-wrapper", children: [i.jsx("span", { className: "text-truncate", children: ne.message }), i.jsx("button", { className: "btn-copy-mini", onClick: re => de(ne.message, re), title: "Nusxalash", children: i.jsx(Yy, { size: 14 }) })] }) }), i.jsx("td", { children: ne.source === "local" ? i.jsx("span", { className: `status-badge ${ne.status === "sent" ? "status-active" : "status-cancelled"}`, style: { backgroundColor: ne.status === "sent" ? "rgba(34, 197, 94, 0.15)" : "rgba(239, 68, 68, 0.15)", color: ne.status === "sent" ? "#22c55e" : "#ef4444" }, children: ne.status === "sent" ? "Yuborilgan" : "Xato" }) : i.jsx("span", { className: "status-badge", style: { backgroundColor: ne.status === "DELIVRD" || ne.status === "SENT" ? "rgba(34, 197, 94, 0.15)" : "rgba(99, 102, 241, 0.15)", color: ne.status === "DELIVRD" || ne.status === "SENT" ? "#22c55e" : "var(--primary-color)" }, children: ne.status }) }), i.jsx("td", { children: i.jsx("span", { className: "status-badge", style: { backgroundColor: ne.source === "local" ? "var(--bg-tertiary)" : "rgba(34, 197, 94, 0.15)", color: ne.source === "local" ? "var(--text-secondary)" : "#22c55e" }, children: ne.source === "local" ? "Mahalliy" : "Eskiz" }) }), i.jsx("td", { style: { width: "180px", fontSize: "13px", color: "var(--text-secondary)" }, children: ne.source === "local" ? new Date(ne.sent_at).toLocaleString("uz-UZ") : ne.sent_at })] }, `${ne.source}-${ne.id}`)) })] }) }), Ae()] })] }) }), i.jsx(Nf, { isOpen: R, onClose: () => Se(P), closing: M, children: i.jsxs("div", { className: `modal-content modal-form ${M ? "closing" : ""}`, onClick: ne => ne.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: "Yangi Shablon" }), i.jsx("button", { className: "modal-close", onClick: () => Se(P), children: i.jsx(tu, { size: 20 }) })] }), i.jsxs("form", { onSubmit: W, children: [i.jsxs("div", { className: "modal-body", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Shablon nomi" }), i.jsx("input", { type: "text", value: U.name, onChange: ne => I({ ...U, name: ne.target.value }), required: !0, placeholder: "Masalan: Xush kelibsiz" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "SMS Matni" }), i.jsx("textarea", { value: U.text, onChange: ne => I({ ...U, text: ne.target.value }), required: !0, placeholder: "Xabar matnini kiriting...", rows: 8 }), i.jsxs("div", { className: "char-counter", style: { fontSize: "11px", textAlign: "right", marginTop: "4px", color: U.text.length < 10 ? "#ef4444" : "var(--text-muted)" }, children: [U.text.length, " / 10 (min)"] })] }), i.jsxs("div", { className: "form-group", children: [i.jsxs("label", { className: "eskiz-checkbox-wrapper", style: { display: "flex", alignItems: "center", gap: "8px", cursor: "pointer" }, children: [i.jsx("input", { type: "checkbox", checked: U.saveToEskiz, onChange: ne => I({ ...U, saveToEskiz: ne.target.checked }), disabled: !Ee || p, className: "sms-checkbox" }), i.jsx("span", { style: { fontSize: "14px", fontWeight: "600", color: "var(--text-primary)" }, children: "Eskiz.uz moderatsiyasiga ham yuborish" })] }), !Ee && i.jsx("p", { style: { fontSize: "11px", color: "#ef4444", marginTop: "4px", fontWeight: "500" }, children: "Eskiz xizmati faol emas" })] })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { type: "button", className: "btn-secondary", onClick: () => Se(P), children: "Bekor qilish" }), i.jsx("button", { type: "submit", className: "btn-primary", disabled: p, children: p ? "Saqlanmoqda..." : "Yaratish" })] })] })] }) }), i.jsx(Nf, { isOpen: F, onClose: () => Se(B), closing: M, children: i.jsxs("div", { className: `modal-content modal-form ${M ? "closing" : ""}`, onClick: ne => ne.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: A?.phone || A?.mobile_phone ? "Xabar tafsilotlari" : "Shablon ma'lumotlari" }), i.jsx("button", { className: "modal-close", onClick: () => Se(B), children: i.jsx(tu, { size: 20 }) })] }), i.jsxs("div", { className: "modal-body", children: [A?.phone || A?.mobile_phone ? i.jsxs(i.Fragment, { children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Telefon raqam" }), i.jsx("input", { type: "text", readOnly: !0, value: A?.phone || A?.mobile_phone, className: "detail-input-readonly highlighted" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Yuborilgan vaqt" }), i.jsx("input", { type: "text", readOnly: !0, value: A?.source === "local" ? new Date(A.sent_at).toLocaleString("uz-UZ") : A.sent_at, className: "detail-input-readonly" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Xabar Matni" }), i.jsx("textarea", { readOnly: !0, value: A?.message, rows: 6, className: "detail-textarea-readonly" })] })] }) : i.jsxs(i.Fragment, { children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Shablon nomi" }), i.jsx("input", { type: "text", readOnly: !0, value: A?.source === "local" ? A?.name : A?.name || A?.type?.toUpperCase() || "Eskiz Shablon", className: "detail-input-readonly", style: { fontWeight: "600" } })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "SMS Matni" }), i.jsx("textarea", { readOnly: !0, value: A?.source === "local" ? A?.text : A?.original_text || A?.template || A?.text, rows: 8, className: "detail-textarea-readonly" })] })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Holati va Manbasi" }), i.jsxs("div", { className: "status-badges-row", style: { display: "flex", gap: "10px", alignItems: "center" }, children: [i.jsx("span", { className: "status-badge-refined", style: { padding: "8px 16px", borderRadius: "10px", fontSize: "12px", fontWeight: "700", backgroundColor: A?.source === "local" ? "var(--bg-tertiary)" : "rgba(14, 165, 233, 0.1)", color: A?.source === "local" ? "var(--text-secondary)" : "#0ea5e9", border: `1px solid ${A?.source === "local" ? "var(--border-color)" : "rgba(14, 165, 233, 0.2)"}` }, children: A?.source === "local" ? "MAHALLIY" : "ESKIZ" }), A?.status && i.jsx("span", { className: "status-badge-refined", style: { padding: "8px 16px", borderRadius: "10px", fontSize: "12px", fontWeight: "700", backgroundColor: A.status === "approved" || A.status === "service" ? "rgba(34, 197, 94, 0.1)" : A.status === "pending" || A.status === "moderation" ? "rgba(245, 158, 11, 0.1)" : A.status === "rejected" ? "rgba(239, 68, 68, 0.1)" : "rgba(99, 102, 241, 0.1)", color: A.status === "approved" || A.status === "service" ? "#10b981" : A.status === "pending" || A.status === "moderation" ? "#f59e0b" : A.status === "rejected" ? "#ef4444" : "var(--primary-color)", border: "1px solid currentColor" }, children: A.status === "approved" || A.status === "service" ? "TASDIQLANGAN" : A.status === "pending" || A.status === "moderation" ? "KUTILMOQDA" : A.status === "rejected" ? "RAD ETILDI" : A.status === "sent" || A.status === "SENT" || A.status === "DELIVRD" ? "YUBORILGAN" : A.status?.toUpperCase() })] })] }), A?.source === "local" && !A?.phone && Ee && !t.some(ne => ne.template === A.text) && i.jsxs("div", { className: "eskiz-sync-alert-refined", children: [i.jsx("p", { children: "Ushbu shablon hali Eskiz.uz moderatsiyasiga yuborilmagan." }), i.jsxs("button", { className: "btn-primary", onClick: () => ge(A), disabled: p, style: { width: "100%", justifyContent: "center" }, children: [i.jsx(Vy, { size: 16 }), i.jsx("span", { children: "Moderatsiyaga yuborish" })] })] })] }), i.jsxs("div", { className: "modal-actions", children: [A?.source === "local" && A?.id && !A.phone ? i.jsxs("button", { className: "btn-secondary", style: { color: "#ef4444", borderColor: "rgba(239, 68, 68, 0.3)" }, onClick: () => { ae(A.id), Se(B) }, children: [i.jsx(Wy, { size: 16 }), "O'chirish"] }) : null, i.jsx("button", { className: "btn-primary", onClick: () => Se(B), children: "Yopish" })] })] }) }), i.jsx(Nf, { isOpen: O, onClose: () => Se(z), closing: M, children: i.jsxs("div", { className: `modal-content modal-form ${M ? "closing" : ""}`, onClick: ne => ne.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h3", { children: "SMS Yuborish" }), i.jsx("button", { className: "modal-close", onClick: () => Se(z), children: i.jsx(tu, { size: 20 }) })] }), i.jsxs("form", { onSubmit: J, children: [i.jsxs("div", { className: "modal-body", children: [i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Telefon raqam" }), i.jsx("input", { type: "text", value: H.phone, onChange: fe, required: !0, placeholder: "+998 (XX) YYY-ZZ-ZZ" })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Xabar Matni" }), i.jsx("textarea", { value: H.message, onChange: ne => Y({ ...H, message: ne.target.value }), required: !0, placeholder: "Xabarni yozing...", rows: 8 }), i.jsxs("div", { className: "char-counter", style: { fontSize: "11px", textAlign: "right", marginTop: "4px", color: "var(--text-muted)" }, children: [H.message.length, " ta belgi"] })] })] }), i.jsxs("div", { className: "modal-actions", children: [i.jsx("button", { type: "button", className: "btn-secondary", onClick: () => Se(z), children: "Bekor qilish" }), i.jsx("button", { type: "submit", className: "btn-primary", disabled: p, children: p ? "Yuborilmoqda..." : "Yuborish" })] })] })] }) })] }) }, Nf = ({ children: l, isOpen: e, onClose: t, closing: s }) => (C.useEffect(() => (e ? document.body.style.overflow = "hidden" : document.body.style.overflow = "unset", () => { document.body.style.overflow = "unset" }), [e]), e ? gt.createPortal(i.jsx("div", { className: `modal-overlay ${s ? "closing" : ""}`, onClick: t, children: l }), document.body) : null), BA = () => { const [l, e] = C.useState([]), [t, s] = C.useState(!0), [r, o] = C.useState(!1), [u, d] = C.useState(!1), [f, m] = C.useState(null), [p, g] = C.useState(!1), [y, b] = C.useState(!1), [v, k] = C.useState(null), [j, S] = C.useState({ name: "", description: "", button_text: "Yuborish", success_message: "Ma'lumotlaringiz qabul qilindi. Tez orada siz bilan bog'lanamiz!", fields: [] }); C.useEffect(() => { w() }, []); const w = async () => { try { s(!0); const M = await z0(), X = M.data?.results || M.data; e(Array.isArray(X) ? X : []) } catch { $.error("Formalarni yuklashda xatolik") } finally { s(!1) } }, N = () => { m(null), S({ name: "", description: "", button_text: "Yuborish", success_message: "Ma'lumotlaringiz qabul qilindi. Tez orada siz bilan bog'lanamiz!", fields: [{ label: "Ism", field_type: "text", placeholder: "Ismingizni kiriting", is_required: !0 }, { label: "Telefon", field_type: "phone", placeholder: "+998 XX XXX XX XX", is_required: !0 }] }), o(!0) }, T = M => { m(M), S({ name: M.name, description: M.description || "", button_text: M.button_text || "Yuborish", success_message: M.success_message || "", fields: M.fields || [] }), o(!0) }, R = () => { d(!0), setTimeout(() => { o(!1), d(!1), m(null) }, 250) }, P = async M => { if (M.preventDefault(), !j.name.trim()) { $.error("Forma nomi kiritilishi shart"); return } if (j.fields.length === 0) { $.error("Kamida bitta maydon qo'shilishi kerak"); return } g(!0); try { f ? (await FD(f.id, j), $.success("Forma yangilandi")) : (await zD(j), $.success("Forma yaratildi")), R(), w() } catch { $.error("Xatolik yuz berdi") } finally { g(!1) } }, O = async () => { if (v) try { await HD(v.id), $.success("Forma o'chirildi"), b(!1), k(null), w() } catch { $.error("O'chirishda xatolik") } }, z = () => { S(M => ({ ...M, fields: [...M.fields, { label: "", field_type: "text", placeholder: "", is_required: !0 }] })) }, F = M => { S(X => ({ ...X, fields: X.fields.filter((U, I) => I !== M) })) }, B = (M, X, U) => { S(I => ({ ...I, fields: I.fields.map((H, Y) => Y === M ? { ...H, [X]: U } : H) })) }, A = M => { const X = `${window.location.origin}/f/${M.slug}`; navigator.clipboard.writeText(X), $.success("Havola nusxalandi") }, L = [{ value: "text", label: "Matn" }, { value: "phone", label: "Telefon" }, { value: "email", label: "Email" }, { value: "textarea", label: "Katta matn" }, { value: "number", label: "Raqam" }]; return i.jsxs("div", { className: "forms-page", children: [i.jsxs("div", { className: "page-header", children: [i.jsxs("div", { className: "header-left", children: [i.jsx("h1", { className: "page-title", children: "Formalar" }), i.jsx("p", { className: "page-subtitle", children: "Dinamik formalar yarating va leadlarni yig'ing" })] }), i.jsxs("button", { className: "btn-primary", onClick: N, children: [i.jsx(Cf, {}), " Forma yaratish"] })] }), t ? i.jsxs("div", { className: "loading-state", children: [i.jsx("div", { className: "spinner" }), i.jsx("p", { children: "Yuklanmoqda..." })] }) : l.length === 0 ? i.jsxs("div", { className: "empty-state", children: [i.jsx(RA, {}), i.jsx("h3", { children: "Hali formalar yo'q" }), i.jsx("p", { children: "Birinchi formangizni yarating va mijozlardan ma'lumot yig'ishni boshlang" }), i.jsxs("button", { className: "btn-primary", onClick: N, children: [i.jsx(Cf, {}), " Forma yaratish"] })] }) : i.jsx("div", { className: "forms-grid", children: l.map(M => i.jsxs("div", { className: `form-card ${M.is_active ? "" : "inactive"}`, children: [i.jsxs("div", { className: "form-card-header", children: [i.jsx("h3", { children: M.name }), i.jsx("span", { className: `status-badge ${M.is_active ? "active" : "inactive"}`, children: M.is_active ? "Faol" : "Nofaol" })] }), M.description && i.jsx("p", { className: "form-description", children: M.description }), i.jsxs("div", { className: "form-stats", children: [i.jsxs("div", { className: "stat", children: [i.jsx("span", { className: "stat-value", children: M.submissions_count || 0 }), i.jsx("span", { className: "stat-label", children: "Yuborishlar" })] }), i.jsxs("div", { className: "stat", children: [i.jsx("span", { className: "stat-value", children: M.fields?.length || 0 }), i.jsx("span", { className: "stat-label", children: "Maydonlar" })] })] }), i.jsxs("div", { className: "form-card-actions", children: [i.jsx("button", { className: "btn-icon", onClick: () => A(M), title: "Havolani nusxalash", children: i.jsx(LA, {}) }), i.jsx("button", { className: "btn-icon", onClick: () => T(M), title: "Tahrirlash", children: i.jsx(zA, {}) }), i.jsx("button", { className: "btn-icon danger", onClick: () => { k(M), b(!0) }, title: "O'chirish", children: i.jsx(Zy, {}) })] })] }, M.id)) }), r && gt.createPortal(i.jsx("div", { className: `modal-overlay ${u ? "closing" : ""}`, onClick: R, children: i.jsxs("div", { className: `modal-content form-modal ${u ? "closing" : ""}`, onClick: M => M.stopPropagation(), children: [i.jsxs("div", { className: "modal-header", children: [i.jsx("h2", { children: f ? "Formani tahrirlash" : "Yangi forma" }), i.jsx("button", { className: "modal-close", onClick: R, children: "" })] }), i.jsxs("form", { onSubmit: P, children: [i.jsxs("div", { className: "modal-body", children: [i.jsxs("div", { className: "form-section", children: [i.jsx("h4", { children: "Asosiy ma'lumotlar" }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Forma nomi *" }), i.jsx("input", { type: "text", value: j.name, onChange: M => S({ ...j, name: M.target.value }), placeholder: "Masalan: Yangi binolar uchun ariza", required: !0 })] }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Tavsif" }), i.jsx("textarea", { value: j.description, onChange: M => S({ ...j, description: M.target.value }), placeholder: "Formaning qisqacha tavsifi", rows: 2 })] }), i.jsx("div", { className: "form-row", children: i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Tugma matni" }), i.jsx("input", { type: "text", value: j.button_text, onChange: M => S({ ...j, button_text: M.target.value }), placeholder: "Yuborish" })] }) }), i.jsxs("div", { className: "form-group", children: [i.jsx("label", { children: "Muvaffaqiyat xabari" }), i.jsx("input", { type: "text", value: j.success_message, onChange: M => S({ ...j, success_message: M.target.value }), placeholder: "Forma yuborilgandan keyin ko'rsatiladigan xabar" })] })] }), i.jsxs("div", { className: "form-section", children: [i.jsxs("div", { className: "section-header", children: [i.jsx("h4", { children: "Maydonlar" }), i.jsxs("button", { type: "button", className: "btn-add-field", onClick: z, children: [i.jsx(Cf, {}), " Maydon qo'shish"] })] }), i.jsx("div", { className: "fields-list", children: j.fields.map((M, X) => i.jsxs("div", { className: "field-item", children: [i.jsx("input", { type: "text", value: M.label, onChange: U => B(X, "label", U.target.value), placeholder: "Maydon nomi", className: "field-label-input" }), i.jsxs("div", { className: "field-row", children: [i.jsx("select", { value: M.field_type, onChange: U => B(X, "field_type", U.target.value), className: "field-type-select", children: L.map(U => i.jsx("option", { value: U.value, children: U.label }, U.value)) }), i.jsxs("label", { className: "field-required-toggle", children: [i.jsx("input", { type: "checkbox", checked: M.is_required, onChange: U => B(X, "is_required", U.target.checked) }), i.jsx("span", { children: "Majburiy" })] }), i.jsx("button", { type: "button", className: "btn-remove-field", onClick: () => F(X), children: i.jsx(Zy, {}) })] }), i.jsx("input", { type: "text", value: M.placeholder || "", onChange: U => B(X, "placeholder", U.target.value), placeholder: "Placeholder (ixtiyoriy)", className: "field-placeholder-input" })] }, X)) })] })] }), i.jsxs("div", { className: "modal-footer", children: [i.jsx("button", { type: "button", className: "btn-secondary", onClick: R, children: "Bekor qilish" }), i.jsx("button", { type: "submit", className: "btn-primary", disabled: p, children: p ? "Saqlanmoqda..." : f ? "Yangilash" : "Yaratish" })] })] })] }) }), document.body), y && i.jsxs(la, { isOpen: y, onClose: () => b(!1), title: "Formani o'chirish", children: [i.jsxs("p", { children: ['"', v?.name, `" formasini o'chirishni xohlaysizmi?`] }), i.jsx("p", { className: "text-warning", children: "Bu amalni qaytarib bo'lmaydi!" }), i.jsxs("div", { className: "modal-footer", children: [i.jsx("button", { className: "btn-secondary", onClick: () => b(!1), children: "Bekor qilish" }), i.jsx("button", { className: "btn-danger", onClick: O, children: "O'chirish" })] })] })] }) }, Cf = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("line", { x1: "12", y1: "5", x2: "12", y2: "19" }), i.jsx("line", { x1: "5", y1: "12", x2: "19", y2: "12" })] }), RA = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }), i.jsx("polyline", { points: "14 2 14 8 20 8" }), i.jsx("line", { x1: "12", y1: "18", x2: "12", y2: "12" }), i.jsx("line", { x1: "9", y1: "15", x2: "15", y2: "15" })] }), LA = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" }), i.jsx("path", { d: "M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" })] }), zA = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("path", { d: "M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" }), i.jsx("path", { d: "M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" })] }), Zy = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("polyline", { points: "3 6 5 6 21 6" }), i.jsx("path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" })] }), FA = () => { const { slug: l } = ju(), [e, t] = C.useState(null), [s, r] = C.useState(!0), [o, u] = C.useState(!1), [d, f] = C.useState(!1), [m, p] = C.useState({}), [g, y] = C.useState({}), [b, v] = C.useState(() => localStorage.getItem("form-theme") || "light"); C.useEffect(() => { j() }, [l]), C.useEffect(() => { localStorage.setItem("form-theme", b) }, [b]); const k = () => { v(P => P === "light" ? "dark" : "light") }, j = async () => { try { r(!0); const P = await ID(l); t(P.data); const O = {}; P.data.fields?.forEach(z => { O[z.label] = "" }), p(O) } catch (P) { console.error("Form not found:", P), t(null) } finally { r(!1) } }, S = P => { let O = P.replace(/\D/g, ""); if (O.startsWith("998") && (O = O.slice(3)), O = O.slice(0, 9), O.length === 0) return "+998 "; let z = "+998 "; return O.length > 0 && (z += O.slice(0, 2)), O.length > 2 && (z += " " + O.slice(2, 5)), O.length > 5 && (z += " " + O.slice(5, 7)), O.length > 7 && (z += " " + O.slice(7, 9)), z }, w = (P, O) => { let z = O; P.field_type === "phone" && (z = S(O)), p(F => ({ ...F, [P.label]: z })), g[P.label] && y(F => ({ ...F, [P.label]: null })) }, N = () => { const P = {}; return e.fields?.forEach(O => { O.is_required && !m[O.label]?.trim() && (P[O.label] = "Bu maydon majburiy"), O.field_type === "email" && m[O.label] && (/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m[O.label]) || (P[O.label] = "Email noto'g'ri")), O.field_type === "phone" && m[O.label] && m[O.label].replace(/\D/g, "").length < 12 && (P[O.label] = "Telefon raqami to'liq emas") }), y(P), Object.keys(P).length === 0 }, T = async P => { if (P.preventDefault(), !N()) { $.error("Iltimos, barcha maydonlarni to'ldiring"); return } u(!0); try { await qD(l, m), f(!0) } catch { $.error("Yuborishda xatolik yuz berdi") } finally { u(!1) } }, R = P => { const O = g[P.label], z = { value: m[P.label] || "", onChange: F => w(P, F.target.value), placeholder: P.placeholder || "", className: `form-input ${O ? "error" : ""}`, required: P.is_required }; switch (P.field_type) { case "textarea": return i.jsx("textarea", { ...z, rows: 4 }); case "email": return i.jsx("input", { type: "email", ...z }); case "phone": return i.jsx("input", { type: "tel", ...z }); case "number": return i.jsx("input", { type: "number", ...z }); default: return i.jsx("input", { type: "text", ...z }) } }; return s ? i.jsx("div", { className: `public-form-page ${b}`, children: i.jsxs("div", { className: "loading-container", children: [i.jsx("div", { className: "loader" }), i.jsx("p", { children: "Yuklanmoqda..." })] }) }) : !e || d ? i.jsxs("div", { className: `public-form-page ${b}`, children: [i.jsx("div", { className: "bg-blob blob-1" }), i.jsx("div", { className: "bg-blob blob-2" }), i.jsx("button", { className: "theme-toggle", onClick: k, children: b === "light" ? i.jsx(Qy, {}) : i.jsx(Jy, {}) }), i.jsx("div", { className: "form-container", children: e ? i.jsxs("div", { className: "success-state", children: [i.jsx("div", { className: "success-icon", children: i.jsx(HA, {}) }), i.jsx("h2", { children: "Rahmat!" }), i.jsx("p", { children: e.success_message || "Ma'lumotlaringiz qabul qilindi" })] }) : i.jsxs("div", { className: "not-found", children: [i.jsx(IA, {}), i.jsx("h2", { children: "Forma topilmadi" }), i.jsx("p", { children: "Bu forma mavjud emas yoki faol emas" })] }) })] }) : i.jsxs("div", { className: `public-form-page ${b}`, children: [i.jsx(Zv, { position: "top-center", richColors: !0 }), i.jsx("div", { className: "bg-blob blob-1" }), i.jsx("div", { className: "bg-blob blob-2" }), i.jsx("div", { className: "bg-blob blob-3" }), i.jsx("button", { className: "theme-toggle", onClick: k, title: "Rejimni o'zgartirish", children: b === "light" ? i.jsx(Qy, {}) : i.jsx(Jy, {}) }), i.jsxs("div", { className: "form-container", children: [i.jsxs("div", { className: "form-header", children: [i.jsx("h1", { children: e.name }), e.description && i.jsx("p", { children: e.description })] }), i.jsxs("form", { onSubmit: T, className: "public-form", children: [e.fields?.sort((P, O) => (P.order || 0) - (O.order || 0)).map((P, O) => i.jsxs("div", { className: `form-field ${g[P.label] ? "has-error" : ""}`, style: { animationDelay: `${.3 + O * .1}s` }, children: [i.jsxs("label", { children: [P.label, P.is_required && i.jsx("span", { className: "required", children: "*" })] }), R(P), g[P.label] && i.jsx("span", { className: "error-message", children: g[P.label] })] }, O)), i.jsx("button", { type: "submit", className: "submit-btn", disabled: o, children: o ? i.jsxs(i.Fragment, { children: [i.jsx("span", { className: "btn-loader" }), " Yuborilmoqda..."] }) : e.button_text || "Yuborish" })] }), i.jsx("div", { className: "form-footer", children: i.jsxs("p", { children: ["Powered by ", i.jsx("span", { children: "BinoCRM" })] }) })] })] }) }, HA = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "3", children: i.jsx("polyline", { points: "20 6 9 17 4 12" }) }), IA = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "12", cy: "12", r: "10" }), i.jsx("path", { d: "M12 8v4M12 16h.01" })] }), Qy = () => i.jsx("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: i.jsx("path", { d: "M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" }) }), Jy = () => i.jsxs("svg", { viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", children: [i.jsx("circle", { cx: "12", cy: "12", r: "5" }), i.jsx("path", { d: "M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" })] }), Bt = ({ children: l, permission: e }) => i.jsx(Gk, { requiredPermission: e, children: i.jsx(bS, { children: l }) }); function qA() { return i.jsx(Y2, { children: i.jsx(yk, { children: i.jsxs(vk, { children: [i.jsxs(O2, { children: [i.jsx(Wk, {}), i.jsxs(c2, { children: [i.jsx(dt, { path: "/login", element: i.jsx(xS, {}) }), i.jsx(dt, { path: "/", element: i.jsx(Bt, { children: i.jsx(BC, {}) }) }), i.jsx(dt, { path: "/analytics", element: i.jsx(Bt, { permission: "can_view_analytics", children: i.jsx(NA, {}) }) }), i.jsx(dt, { path: "/sms", element: i.jsx(Bt, { permission: "can_view_sms", children: i.jsx(EA, {}) }) }), i.jsx(dt, { path: "/users", element: i.jsx(Bt, { children: i.jsx(CA, {}) }) }), i.jsx(dt, { path: "/cities", element: i.jsx(Bt, { permission: "can_view_cities", children: i.jsx(IC, {}) }) }), i.jsx(dt, { path: "/buildings/info", element: i.jsx(Bt, { permission: "can_view_buildings_info", children: i.jsx(MT, {}) }) }), i.jsx(dt, { path: "/buildings", element: i.jsx(Bt, { permission: "can_view_buildings", children: i.jsx(QC, {}) }) }), i.jsx(dt, { path: "/buildings/create", element: i.jsx(Bt, { permission: "can_view_buildings", children: i.jsx(nT, {}) }) }), i.jsx(dt, { path: "/buildings/:id/edit", element: i.jsx(Bt, { permission: "can_view_buildings", children: i.jsx(gT, {}) }) }), i.jsx(dt, { path: "/homes", element: i.jsx(Bt, { permission: "can_view_homes", children: i.jsx(YT, {}) }) }), i.jsx(dt, { path: "/homes/create", element: i.jsx(Bt, { permission: "can_view_homes", children: i.jsx(ZT, {}) }) }), i.jsx(dt, { path: "/clients", element: i.jsx(Bt, { permission: "can_view_clients", children: i.jsx(sD, {}) }) }), i.jsx(dt, { path: "/contracts", element: i.jsx(Bt, { permission: "can_view_contracts", children: i.jsx(uD, {}) }) }), i.jsx(dt, { path: "/contracts/create", element: i.jsx(Bt, { permission: "can_view_contracts", children: i.jsx(fD, {}) }) }), i.jsx(dt, { path: "/contracts/:id/edit", element: i.jsx(Bt, { permission: "can_view_contracts", children: i.jsx(gD, {}) }) }), i.jsx(dt, { path: "/contracts/:id/schedule", element: i.jsx(Bt, { permission: "can_view_contracts", children: i.jsx(_D, {}) }) }), i.jsxs(dt, { path: "/leads", element: i.jsx(Bt, { permission: "can_view_leads", children: i.jsx(ND, {}) }), children: [i.jsx(dt, { index: !0, element: i.jsx(su, { to: "kanban", replace: !0 }) }), i.jsx(dt, { path: "kanban", element: i.jsx(GD, {}) }), i.jsx(dt, { path: "list", element: i.jsx(KD, {}) })] }), i.jsx(dt, { path: "/expenses", element: i.jsx(Bt, { permission: "can_view_expenses", children: i.jsx(AA, {}) }) }), i.jsx(dt, { path: "/expense-categories", element: i.jsx(Bt, { permission: "can_view_expenses", children: i.jsx(PA, {}) }) }), i.jsx(dt, { path: "/expenses/buildings", element: i.jsx(Bt, { permission: "can_view_expenses", children: i.jsx(OA, {}) }) }), i.jsx(dt, { path: "/forms", element: i.jsx(Bt, { permission: "can_view_forms", children: i.jsx(BA, {}) }) }), i.jsx(dt, { path: "/f/:slug", element: i.jsx(FA, {}) }), i.jsx(dt, { path: "*", element: i.jsx(su, { to: "/", replace: !0 }) })] })] }), i.jsx(Zv, { position: "top-center", richColors: !0, toastOptions: { duration: 3e3, className: "custom-toast" } })] }) }) }) } uj.createRoot(document.getElementById("root")).render(i.jsx(C.StrictMode, { children: i.jsx(qA, {}) }));
